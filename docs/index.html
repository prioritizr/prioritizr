<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Systematic Conservation Prioritization in R • prioritizr</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="jquery.sticky-kit.min.js"></script><script src="pkgdown.js"></script><meta property="og:title" content="Systematic Conservation Prioritization in R">
<meta property="og:description" content="Conservation prioritization using integer
    programming techniques. To solve large-scale problems, users
    should install the 'gurobi' optimizer
    (available from &lt;http://www.gurobi.com/&gt;).">
<meta property="og:image" content="http://prioritizr.github.io/prioritizr/logo.png">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-70466840-4"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-70466840-4');
</script>
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">prioritizr</a>
        <span class="label label-default" data-toggle="tooltip" data-placement="bottom" title="Released package">4.0.0.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="articles/prioritizr.html">Get started</a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="articles/gurobi_installation.html">Gurobi Installation Guide</a>
    </li>
    <li>
      <a href="articles/publication_record.html">Publication Record</a>
    </li>
    <li>
      <a href="articles/zones.html">Management Zones</a>
    </li>
  </ul>
</li>
<li>
  <a href="news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/prioritizr/prioritizr">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    

    
    
<!--- README.md is generated from README.Rmd. Please edit that file -->
<div id="systematic-conservation-prioritization-in-r" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#systematic-conservation-prioritization-in-r" class="anchor"></a>Systematic conservation prioritization in R <img src="reference/figures/logo.png" align="right" width="10%">
</h1></div>

<p>The <em>prioritizr R</em> package uses integer linear programming (ILP) techniques to provide a flexible interface for building and solving conservation planning problems. It supports a broad range of objectives, constraints, and penalties that can be used to custom-tailor conservation planning problems to the specific needs of a conservation planning exercise. Once built, conservation planning problems can be solved using a variety of commercial and open-source exact algorithm solvers. In contrast to the algorithms conventionally used to solve conservation problems, such as heuristics or simulated annealing, the exact algorithms used here are guaranteed to find optimal solutions. Furthermore, conservation problems can be constructed to optimize the spatial allocation of different management actions or zones, meaning that conservation practitioners can identify solutions that benefit multiple stakeholders. Finally, this package has the functionality to read input data formatted for the <em>Marxan</em> conservation planning program, and find much cheaper solutions in a much shorter period of time than <em>Marxan</em>.</p>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<p>The latest official version of the <em>prioritizr R</em> package can be installed using the following <em>R</em> code.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">install.packages</span>(<span class="st">"prioritizr"</span>, <span class="dt">repos =</span> <span class="st">"https://cran.rstudio.com/"</span>)</code></pre></div>
<p>Alternatively, the latest development version can be installed using the following code. Please note that while developmental versions may contain additional features not present in the official version, they may also contain coding errors.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="cf">if</span> (<span class="op">!</span><span class="kw">require</span>(devtools))
  <span class="kw">install.packages</span>(<span class="st">"devtools"</span>)
devtools<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/devtools/topics/install_github">install_github</a></span>(<span class="st">"prioritizr/prioritizr"</span>)</code></pre></div>
</div>
<div id="citation" class="section level2">
<h2 class="hasAnchor">
<a href="#citation" class="anchor"></a>Citation</h2>
<p>Please using the following citation to cite the ’<em>prioritizr R</em> package in publications:</p>
<p>Hanson JO, Schuster R, Morrell N, Strimas-Mackey M, Watts ME, Arcese P, Bennett J, Possingham HP (2017). prioritizr: Systematic Conservation Prioritization in R. R package version 4.0.0.0. Available at <a href="https://github.com/prioritizr/prioritizr" class="uri">https://github.com/prioritizr/prioritizr</a>.</p>
<p>Additionally, we keep a <a href="https://prioritizr.github.io/prioritizr/articles/publication_record.html">record of publications</a> that use the <em>prioritizr R</em> package. If you use this package in any reports or publications, please <a href="https://github.com/prioritizr/prioritizr/issues/new">file an issue on GitHub</a> so we can add it to the record.</p>
</div>
<div id="usage" class="section level2">
<h2 class="hasAnchor">
<a href="#usage" class="anchor"></a>Usage</h2>
<p>Here we will provide a short example showing how the <em>prioritizr R</em> package can be used to build and solve conservation problems. For brevity, we will use one of the built-in simulated data sets that is distributed with the package. First, we will load the <em>prioritizr R</em> package.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># load package</span>
<span class="kw">library</span>(prioritizr)</code></pre></div>
<p>We will use the <code>sim_pu_polygons</code> object to represent our planning units. Although the <em>prioritizr R</em> can support many different types of planning unit data, here our planning units are represented as polygons in a spatial vector format (i.e. <code>SpatialPolygonsDataFrame</code>). Each polygon represents a different planning unit and we have 90 planning units in total. The attribute table associated with this data set contains information describing the acquisition cost of each planning (“cost” column), and a value indicating if the unit is already located in protected area (“locked_in” column). Let’s explore the planning unit data.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># load planning unit data</span>
<span class="kw">data</span>(sim_pu_polygons)

<span class="co"># show the first 6 rows in the attribute table</span>
<span class="kw">head</span>(sim_pu_polygons<span class="op">@</span>data)</code></pre></div>
<pre><code>##       cost locked_in locked_out
## 1 215.8638     FALSE      FALSE
## 2 212.7823     FALSE      FALSE
## 3 207.4962     FALSE      FALSE
## 4 208.9322     FALSE       TRUE
## 5 214.0419     FALSE      FALSE
## 6 213.7636     FALSE      FALSE</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># plot the planning units and color them according to acquisition cost</span>
<span class="kw">spplot</span>(sim_pu_polygons, <span class="st">"cost"</span>, <span class="dt">main =</span> <span class="st">"Planning unit cost"</span>,
       <span class="dt">xlim =</span> <span class="kw">c</span>(<span class="op">-</span><span class="fl">0.1</span>, <span class="fl">1.1</span>), <span class="dt">ylim =</span> <span class="kw">c</span>(<span class="op">-</span><span class="fl">0.1</span>, <span class="fl">1.1</span>))</code></pre></div>
<p><img src="reference/figures/README-unnamed-chunk-7-1.png" width="336" style="display: block; margin: auto;"></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># plot the planning units and show which planning units are inside protected</span>
<span class="co"># areas (colored in yellow)</span>
<span class="kw">spplot</span>(sim_pu_polygons, <span class="st">"locked_in"</span>, <span class="dt">main =</span> <span class="st">"Planning units in protected areas"</span>,
       <span class="dt">xlim =</span> <span class="kw">c</span>(<span class="op">-</span><span class="fl">0.1</span>, <span class="fl">1.1</span>), <span class="dt">ylim =</span> <span class="kw">c</span>(<span class="op">-</span><span class="fl">0.1</span>, <span class="fl">1.1</span>))</code></pre></div>
<p><img src="reference/figures/README-unnamed-chunk-8-1.png" width="336" style="display: block; margin: auto;"></p>
<p>Conservation features are represented using a stack of raster data (i.e. <code>RasterStack</code> objects). A <code>RasterStack</code> represents a collection of <code>RasterLayers</code> with the same spatial properties (i.e. spatial extent, coordinate system, dimensionality, and resolution). Each <code>RasterLayer</code> in the stack describes the distribution of a conservation feature.</p>
<p>In our example, the <code>sim_features</code> object is a <code>RasterStack</code> object that contains 5 layers. Each <code>RasterLayer</code> describes the distribution of a species. Specifically, the pixel values denote the proportion of suitable habitat across different areas inside the study area. For a given layer, pixels with a value of one are comprised entirely of suitable habitat for the feature, and pixels with a value of zero contain no suitable habitat.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># load feature data</span>
<span class="kw">data</span>(sim_features)

<span class="co"># plot the distribution of suitable habitat for each feature</span>
<span class="kw">plot</span>(sim_features, <span class="dt">main =</span> <span class="kw">paste</span>(<span class="st">"Feature"</span>, <span class="kw">seq_len</span>(<span class="kw">nlayers</span>(sim_features))),
     <span class="dt">nr =</span> <span class="dv">2</span>)</code></pre></div>
<p><img src="reference/figures/README-unnamed-chunk-9-1.png" width="672" style="display: block; margin: auto;"></p>
<p>Let’s say that we want to develop a reserve network that will secure 20 % of the distribution for each feature in the study area for minimal cost. In this planning scenario, we can either purchase all of the land inside a given planning unit, or none of the land inside a given planning unit. Thus we will create a new <a href="https://prioritizr.github.io/prioritizr/reference/problem.html"><code>problem</code></a> that will use a minimum set objective (<a href="https://prioritizr.github.io/prioritizr/reference/add_min_set_objective.html"><code>add_min_set_objective</code></a>), with relative targets of 20 % (<a href="https://prioritizr.github.io/prioritizr/reference/add_relative_targets.html"><code>add_relative_targets</code></a>), and binary decisions (<a href="https://prioritizr.github.io/prioritizr/reference/add_binary_decisions.html"><code>add_binary_decisions</code></a>).</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># create problem</span>
p1 &lt;-<span class="st"> </span><span class="kw">problem</span>(sim_pu_polygons, <span class="dt">features =</span> sim_features,
              <span class="dt">cost_column =</span> <span class="st">"cost"</span>) <span class="op">%&gt;%</span>
<span class="st">      </span><span class="kw">add_min_set_objective</span>() <span class="op">%&gt;%</span>
<span class="st">      </span><span class="kw">add_relative_targets</span>(<span class="fl">0.2</span>) <span class="op">%&gt;%</span>
<span class="st">      </span><span class="kw">add_binary_decisions</span>()</code></pre></div>
<p>After we have built a <a href="https://prioritizr.github.io/prioritizr/reference/problem.html"><code>problem</code></a>, we can solve it to obtain a solution. Since we have not specified the method used to solve the problem, <em>prioritizr</em> will automatically use the best solver currently installed. <strong>It is strongly encouraged to install the <a href="http://gurobi.com">Gurobi software suite and the <em>gurobi</em> <em>R</em> package to solve problems quickly</a>, for more information on this please refer to the <a href="https://prioritizr.github.io/prioritizr/articles/gurobi_installation.html">Gurobi Installation Gude</a></strong></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># solve the problem</span>
s1 &lt;-<span class="st"> </span><span class="kw">solve</span>(p1)</code></pre></div>
<pre><code>## Optimize a model with 5 rows, 90 columns and 450 nonzeros
## Variable types: 0 continuous, 90 integer (90 binary)
## Coefficient statistics:
##   Matrix range     [2e-01, 9e-01]
##   Objective range  [2e+02, 2e+02]
##   Bounds range     [1e+00, 1e+00]
##   RHS range        [6e+00, 1e+01]
## Found heuristic solution: objective 4135.2744673
## Presolve time: 0.00s
## Presolved: 5 rows, 90 columns, 450 nonzeros
## Variable types: 0 continuous, 90 integer (90 binary)
## Presolved: 5 rows, 90 columns, 450 nonzeros
## 
## 
## Root relaxation: objective 3.490348e+03, 17 iterations, 0.00 seconds
## 
##     Nodes    |    Current Node    |     Objective Bounds      |     Work
##  Expl Unexpl |  Obj  Depth IntInf | Incumbent    BestBd   Gap | It/Node Time
## 
##      0     0 3490.34813    0    4 4135.27447 3490.34813  15.6%     -    0s
## H    0     0                    3597.0951275 3490.34813  2.97%     -    0s
## 
## Explored 1 nodes (17 simplex iterations) in 0.00 seconds
## Thread count was 1 (of 4 available processors)
## 
## Solution count 2: 3597.1 4135.27 
## 
## Optimal solution found (tolerance 1.00e-01)
## Best objective 3.597095127479e+03, best bound 3.490348127696e+03, gap 2.9676%</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># extract the objective (cost of solution in this case)</span>
<span class="kw"><a href="reference/print.html">print</a></span>(<span class="kw">attr</span>(s1, <span class="st">"objective"</span>))</code></pre></div>
<pre><code>## solution_1 
##   3597.095</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># extract time spent solving the problem</span>
<span class="kw"><a href="reference/print.html">print</a></span>(<span class="kw">attr</span>(s1, <span class="st">"runtime"</span>))</code></pre></div>
<pre><code>##  solution_1 
## 0.001972914</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># extract state message from the solver</span>
<span class="kw"><a href="reference/print.html">print</a></span>(<span class="kw">attr</span>(s1, <span class="st">"status"</span>))</code></pre></div>
<pre><code>## solution_1 
##  "OPTIMAL"</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># plot the solution</span>
s1<span class="op">$</span>solution_<span class="dv">1</span> &lt;-<span class="st"> </span><span class="kw">factor</span>(s1<span class="op">$</span>solution_<span class="dv">1</span>)
<span class="kw">spplot</span>(s1, <span class="st">"solution_1"</span>, <span class="dt">col.regions =</span> <span class="kw">c</span>(<span class="st">'grey90'</span>, <span class="st">'darkgreen'</span>),
       <span class="dt">main =</span> <span class="st">"Solution"</span>, <span class="dt">xlim =</span> <span class="kw">c</span>(<span class="op">-</span><span class="fl">0.1</span>, <span class="fl">1.1</span>), <span class="dt">ylim =</span> <span class="kw">c</span>(<span class="op">-</span><span class="fl">0.1</span>, <span class="fl">1.1</span>))</code></pre></div>
<p><img src="reference/figures/README-unnamed-chunk-11-1.png" width="336" style="display: block; margin: auto;"></p>
<p>Although this solution adequately conserves each feature, it is inefficient because it does not consider the fact some of the planning units are already inside protected areas. Since our planning unit data contains information on which planning units are already inside protected areas (in the <code>"locked_in"</code> column of the attribute table), we can add constraints to ensure they are prioritized in the solution (<a href="https://prioritizr.github.io/prioritizr/reference/add_locked_in_constraints.html"><code>add_locked_in_constraints</code></a>).</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># create new problem with locked in constraints added to it</span>
p2 &lt;-<span class="st"> </span>p1 <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">add_locked_in_constraints</span>(<span class="st">"locked_in"</span>)

<span class="co"># solve the problem</span>
s2 &lt;-<span class="st"> </span><span class="kw">solve</span>(p2)</code></pre></div>
<pre><code>## Optimize a model with 5 rows, 90 columns and 450 nonzeros
## Variable types: 0 continuous, 90 integer (90 binary)
## Coefficient statistics:
##   Matrix range     [2e-01, 9e-01]
##   Objective range  [2e+02, 2e+02]
##   Bounds range     [1e+00, 1e+00]
##   RHS range        [6e+00, 1e+01]
## Found heuristic solution: objective 4020.2038180
## Presolve removed 0 rows and 10 columns
## Presolve time: 0.00s
## Presolved: 5 rows, 80 columns, 400 nonzeros
## Variable types: 0 continuous, 80 integer (80 binary)
## Presolved: 5 rows, 80 columns, 400 nonzeros
## 
## 
## Root relaxation: objective 3.620461e+03, 11 iterations, 0.00 seconds
## 
##     Nodes    |    Current Node    |     Objective Bounds      |     Work
##  Expl Unexpl |  Obj  Depth IntInf | Incumbent    BestBd   Gap | It/Node Time
## 
##      0     0 3620.46082    0    3 4020.20382 3620.46082  9.94%     -    0s
## 
## Explored 1 nodes (11 simplex iterations) in 0.00 seconds
## Thread count was 1 (of 4 available processors)
## 
## Solution count 1: 4020.2 
## 
## Optimal solution found (tolerance 1.00e-01)
## Best objective 4.020203818008e+03, best bound 3.620460824006e+03, gap 9.9434%</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># plot the solution</span>
s2<span class="op">$</span>solution_<span class="dv">1</span> &lt;-<span class="st"> </span><span class="kw">factor</span>(s2<span class="op">$</span>solution_<span class="dv">1</span>)
<span class="kw">spplot</span>(s2, <span class="st">"solution_1"</span>, <span class="dt">col.regions =</span> <span class="kw">c</span>(<span class="st">'grey90'</span>, <span class="st">'darkgreen'</span>),
       <span class="dt">main =</span> <span class="st">"Solution"</span>, <span class="dt">xlim =</span> <span class="kw">c</span>(<span class="op">-</span><span class="fl">0.1</span>, <span class="fl">1.1</span>), <span class="dt">ylim =</span> <span class="kw">c</span>(<span class="op">-</span><span class="fl">0.1</span>, <span class="fl">1.1</span>))</code></pre></div>
<p><img src="reference/figures/README-unnamed-chunk-12-1.png" width="336" style="display: block; margin: auto;"></p>
<p>This solution is an improvement over the previous solution. However, it is also highly fragmented. As a consequence, this solution may be associated with increased management costs and the species in this scenario may not benefit substantially from this solution due to edge effects. We can further modify the problem by adding penalties that punish overly fragmented solutions (<a href="https://prioritizr.github.io/prioritizr/reference/add_boundary_penalties.html"><code>add_boundary_penalties</code></a>). Here we will use a penalty factor of 1 (i.e. boundary length modifier; BLM), and an edge factor of 50 % so that planning units that occur outer edge of the study area are not overly penalized.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># create new problem with boundary penalties added to it</span>
p3 &lt;-<span class="st"> </span>p2 <span class="op">%&gt;%</span><span class="st"> </span><span class="kw"><a href="reference/add_boundary_penalties.html">add_boundary_penalties</a></span>(<span class="dt">penalty =</span> <span class="dv">500</span>, <span class="dt">edge_factor =</span> <span class="fl">0.5</span>)

<span class="co"># solve the problem</span>
s3 &lt;-<span class="st"> </span><span class="kw">solve</span>(p3)</code></pre></div>
<pre><code>## Optimize a model with 293 rows, 234 columns and 1026 nonzeros
## Variable types: 0 continuous, 234 integer (234 binary)
## Coefficient statistics:
##   Matrix range     [2e-01, 1e+00]
##   Objective range  [1e+02, 4e+02]
##   Bounds range     [1e+00, 1e+00]
##   RHS range        [6e+00, 1e+01]
## Found heuristic solution: objective 20287.196992
## Found heuristic solution: objective 6732.6427417
## Presolve removed 66 rows and 43 columns
## Presolve time: 0.00s
## Presolved: 227 rows, 191 columns, 844 nonzeros
## Variable types: 0 continuous, 191 integer (191 binary)
## Presolved: 227 rows, 191 columns, 844 nonzeros
## 
## 
## Root relaxation: objective 5.497074e+03, 115 iterations, 0.00 seconds
## 
##     Nodes    |    Current Node    |     Objective Bounds      |     Work
##  Expl Unexpl |  Obj  Depth IntInf | Incumbent    BestBd   Gap | It/Node Time
## 
##      0     0 5497.07370    0  120 6732.64274 5497.07370  18.4%     -    0s
## H    0     0                    6637.1273758 5497.07370  17.2%     -    0s
## H    0     0                    6477.0668554 5497.07370  15.1%     -    0s
##      0     0 5526.00747    0  120 6477.06686 5526.00747  14.7%     -    0s
## H    0     0                    6395.0674552 5526.00747  13.6%     -    0s
## H    0     0                    6141.8406623 5526.00747  10.0%     -    0s
##      0     0 5526.54004    0  117 6141.84066 5526.54004  10.0%     -    0s
##      0     0 5547.68803    0  105 6141.84066 5547.68803  9.67%     -    0s
## 
## Cutting planes:
##   Gomory: 3
## 
## Explored 1 nodes (156 simplex iterations) in 0.04 seconds
## Thread count was 1 (of 4 available processors)
## 
## Solution count 6: 6141.84 6395.07 6477.07 ... 20287.2
## 
## Optimal solution found (tolerance 1.00e-01)
## Best objective 6.141840662274e+03, best bound 5.547688032229e+03, gap 9.6739%</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># plot the solution</span>
s3<span class="op">$</span>solution_<span class="dv">1</span> &lt;-<span class="st"> </span><span class="kw">factor</span>(s3<span class="op">$</span>solution_<span class="dv">1</span>)
<span class="kw">spplot</span>(s3, <span class="st">"solution_1"</span>, <span class="dt">col.regions =</span> <span class="kw">c</span>(<span class="st">'grey90'</span>, <span class="st">'darkgreen'</span>),
       <span class="dt">main =</span> <span class="st">"Solution"</span>, <span class="dt">xlim =</span> <span class="kw">c</span>(<span class="op">-</span><span class="fl">0.1</span>, <span class="fl">1.1</span>), <span class="dt">ylim =</span> <span class="kw">c</span>(<span class="op">-</span><span class="fl">0.1</span>, <span class="fl">1.1</span>))</code></pre></div>
<p><img src="reference/figures/README-unnamed-chunk-13-1.png" width="336" style="display: block; margin: auto;"></p>
<p>This solution is even better then the previous solution. However, we are not finished yet. This solution does not maintain connectivity between reserves, and so species may have limited capacity to disperse throughout the solution. To avoid this, we can add contiguity constraints (<a href="https://prioritizr.github.io/prioritizr/reference/add_contiguity_constraints.html"><code>add_contiguity_constraints</code></a>).</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># create new problem with contiguity constraints</span>
p4 &lt;-<span class="st"> </span>p3 <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">add_contiguity_constraints</span>()

<span class="co"># solve the problem</span>
s4 &lt;-<span class="st"> </span><span class="kw">solve</span>(p4)</code></pre></div>
<pre><code>## Optimize a model with 654 rows, 506 columns and 2292 nonzeros
## Variable types: 0 continuous, 506 integer (506 binary)
## Coefficient statistics:
##   Matrix range     [2e-01, 1e+00]
##   Objective range  [1e+02, 4e+02]
##   Bounds range     [1e+00, 1e+00]
##   RHS range        [1e+00, 1e+01]
## Presolve removed 282 rows and 210 columns
## Presolve time: 0.01s
## Presolved: 372 rows, 296 columns, 1182 nonzeros
## Variable types: 0 continuous, 296 integer (296 binary)
## Found heuristic solution: objective 9816.9791056
## Found heuristic solution: objective 7879.0795356
## Presolve removed 3 rows and 0 columns
## Presolved: 369 rows, 296 columns, 1176 nonzeros
## 
## 
## Root relaxation: objective 6.478767e+03, 142 iterations, 0.00 seconds
## 
##     Nodes    |    Current Node    |     Objective Bounds      |     Work
##  Expl Unexpl |  Obj  Depth IntInf | Incumbent    BestBd   Gap | It/Node Time
## 
##      0     0 6478.76652    0  137 7879.07954 6478.76652  17.8%     -    0s
##      0     0 6648.95121    0  121 7879.07954 6648.95121  15.6%     -    0s
## H    0     0                    7805.4228157 6648.95121  14.8%     -    0s
##      0     0 6669.61733    0  114 7805.42282 6669.61733  14.6%     -    0s
##      0     0 6860.84535    0   68 7805.42282 6860.84535  12.1%     -    0s
## H    0     0                    7778.5559284 6860.84535  11.8%     -    0s
##      0     0 6867.28876    0   72 7778.55593 6867.28876  11.7%     -    0s
##      0     0 6919.42499    0   81 7778.55593 6919.42499  11.0%     -    0s
##      0     0 6920.78998    0   84 7778.55593 6920.78998  11.0%     -    0s
##      0     0 6945.90514    0   93 7778.55593 6945.90514  10.7%     -    0s
##      0     0 6950.97809    0   96 7778.55593 6950.97809  10.6%     -    0s
##      0     0 6950.97809    0   96 7778.55593 6950.97809  10.6%     -    0s
##      0     0 6952.78730    0   85 7778.55593 6952.78730  10.6%     -    0s
##      0     0 6952.78730    0   86 7778.55593 6952.78730  10.6%     -    0s
##      0     0 6955.94702    0   92 7778.55593 6955.94702  10.6%     -    0s
##      0     0 6955.94702    0   92 7778.55593 6955.94702  10.6%     -    0s
##      0     0 6955.94702    0   90 7778.55593 6955.94702  10.6%     -    0s
##      0     2 6958.76573    0   90 7778.55593 6958.76573  10.5%     -    0s
## *   16     7               4    7758.3060997 6995.60241  9.83%  17.7    0s
## 
## Cutting planes:
##   Gomory: 4
##   MIR: 3
##   Zero half: 19
## 
## Explored 17 nodes (739 simplex iterations) in 0.10 seconds
## Thread count was 1 (of 4 available processors)
## 
## Solution count 5: 7758.31 7778.56 7805.42 ... 9816.98
## 
## Optimal solution found (tolerance 1.00e-01)
## Best objective 7.758306099744e+03, best bound 6.995602411029e+03, gap 9.8308%</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># plot the solution</span>
s4<span class="op">$</span>solution_<span class="dv">1</span> &lt;-<span class="st"> </span><span class="kw">factor</span>(s4<span class="op">$</span>solution_<span class="dv">1</span>)
<span class="kw">spplot</span>(s4, <span class="st">"solution_1"</span>, <span class="dt">col.regions =</span> <span class="kw">c</span>(<span class="st">'grey90'</span>, <span class="st">'darkgreen'</span>),
       <span class="dt">main =</span> <span class="st">"Solution"</span>, <span class="dt">xlim =</span> <span class="kw">c</span>(<span class="op">-</span><span class="fl">0.1</span>, <span class="fl">1.1</span>), <span class="dt">ylim =</span> <span class="kw">c</span>(<span class="op">-</span><span class="fl">0.1</span>, <span class="fl">1.1</span>))</code></pre></div>
<p><img src="reference/figures/README-unnamed-chunk-14-1.png" width="336" style="display: block; margin: auto;"></p>
<p>This short example demonstrates how the <em>prioritizr R</em> package can be used to build a minimal conservation problem, and how constraints and penalties can be iteratively added to the problem to obtain a solution. Although we explored just a few different functions for modifying the a conservation problem, the <em>prioritizr R</em> package provides many functions for specifying objectives, constraints, penalties, and decision variables, so that you can build and custom-tailor a conservation planning problem to suit your exact planning scenario.</p>
</div>
<div id="getting-help" class="section level2">
<h2 class="hasAnchor">
<a href="#getting-help" class="anchor"></a>Getting help</h2>
<p>Please refer to the <a href="https://prioritizr.github.io/prioritizr/index.html">package website</a> for more information on the <em>prioritizr R</em> package. This website contains a <a href="https://prioritizr.github.io/prioritizr/articles/prioritizr.html">tutorial designed to provide a brief introduction to conservation planning and a comprehensive overview of the package</a>, <a href="https://prioritizr.github.io/prioritizr/articles/prioritizr.html">instructions for installing the <em>Gurobi</em> software suite to solve large-scale and complex conservation planning problems</a>, and a <a href="https://prioritizr.github.io/prioritizr/articles/zones.html">tutorial on building and solving problems that contain multiple management zones</a>. If you have any questions about using the the <em>prioritizr R</em> package or suggestions from improving it, please <a href="https://github.com/prioritizr/prioritizr/issues/new">file an issue on the package’s online code repository</a>.</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Download from CRAN at <br><a href="https://cloud.r-project.org/package=prioritizr">https://​cloud.r-project.org/​package=prioritizr</a>
</li>
<li>Browse source code at <br><a href="https://github.com/prioritizr/prioritizr">https://​github.com/​prioritizr/​prioritizr</a>
</li>
<li>Report a bug at <br><a href="https://github.com/prioritizr/prioritizr/issues">https://​github.com/​prioritizr/​prioritizr/​issues</a>
</li>
<li>Learn about contributing at <br><a href="https://prioritizr.github.io/prioritizr/CONTRIBUTING.html">https://​prioritizr.github.io/​prioritizr/​CONTRIBUTING.html</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>
<a href="http://jeffrey-hanson.com">Jeffrey O Hanson</a> <br><small class="roles"> Author </small>  </li>
<li>
<a href="http://www.richard-schuster.com/">Richard Schuster</a> <br><small class="roles"> Author, maintainer </small>  </li>
<li>Nina Morrell <br><small class="roles"> Author </small>  </li>
<li>
<a href="http://strimas.com">Matthew Strimas-Mackey</a> <br><small class="roles"> Author </small>  </li>
<li>Matthew E Watts <br><small class="roles"> Author </small>  </li>
<li>
<a href="http://arcese.forestry.ubc.ca">Peter Arcese</a> <br><small class="roles"> Author </small>  </li>
<li>
<a href="https://josephrbennett.wordpress.com/">Joeseph Bennett</a> <br><small class="roles"> Author </small>  </li>
<li>Hugh P Possingham <br><small class="roles"> Author </small>  </li>
</ul>
</div>

      <div class="dev-status">
<h2>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://www.tidyverse.org/lifecycle/#stable"><img src="https://img.shields.io/badge/lifecycle-stable-brightgreen.svg" alt="lifecycle"></a></li>
<li><a href="https://travis-ci.org/prioritizr/prioritizr"><img src="https://img.shields.io/travis/prioritizr/prioritizr/master.svg?label=Mac%20OSX%20%26%20Linux" alt="Travis Build Status"></a></li>
<li><a href="https://ci.appveyor.com/project/jeffreyhanson/prioritizr"><img src="https://img.shields.io/appveyor/ci/jeffreyhanson/prioritizr/master.svg?label=Windows" alt="AppVeyor Build Status"></a></li>
<li><a href="https://codecov.io/github/prioritizr/prioritizr?branch=master"><img src="https://codecov.io/github/prioritizr/prioritizr/coverage.svg?branch=master" alt="Coverage Status"></a></li>
<li><a href="https://CRAN.R-project.org/package=prioritizr"><img src="http://www.r-pkg.org/badges/version/prioritizr" alt="CRAN_Status_Badge"></a></li>
</ul>
</div>
</div>

</div>


      <footer><div class="copyright">
  <p>Developed by <a href="http://jeffrey-hanson.com">Jeffrey O Hanson</a>, <a href="http://www.richard-schuster.com/">Richard Schuster</a>, Nina Morrell, <a href="http://strimas.com">Matthew Strimas-Mackey</a>, Matthew E Watts, <a href="http://arcese.forestry.ubc.ca">Peter Arcese</a>, <a href="https://josephrbennett.wordpress.com/">Joeseph Bennett</a>, Hugh P Possingham.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  

  </body>
</html>
