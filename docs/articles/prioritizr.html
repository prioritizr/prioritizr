<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Getting started • prioritizr</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png">
<link rel="icon" type="”image/svg+xml”" href="../favicon.svg">
<link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png">
<link rel="icon" sizes="any" href="../favicon.ico">
<link rel="manifest" href="../site.webmanifest">
<!-- katex math --><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.css" integrity="sha384-nB0miv6/jRmo5UMMR1wu3Gz6NLsoTkbqJghGIsx//Rlm+ZU03BU6SQNC66uf4l5+" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.js" integrity="sha384-7zkQWkzuo3B5mTepMUcHkMB5jZaolc2xDwL6VFqjFALcbeS9Ggm/Yr2r3Dy4lfFg" crossorigin="anonymous"></script><script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/contrib/auto-render.min.js" integrity="sha384-43gviWU0YVjaDtb/GhzOouOXtZMP/7XUzwPTstBeZFe/+rCMvRwr4yROQP43s0Xk" crossorigin="anonymous" onload="renderMathInElement(document.body);"></script><script src="../katex-auto.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="Getting started">
<!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-70466840-4"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-70466840-4');
</script>
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">prioritizr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">8.0.6.8</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item"><a class="nav-link" href="../articles/prioritizr.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/package_overview.html">Package overview</a></li>
    <li><a class="dropdown-item" href="../articles/gurobi_installation_guide.html">Gurobi installation guide</a></li>
    <li><a class="dropdown-item" href="../articles/solver_benchmarks.html">Solver benchmarks</a></li>
    <li><a class="dropdown-item" href="../articles/publication_record.html">Publication record</a></li>
  </ul>
</li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-tutorials" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Tutorials</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-tutorials">
<li><a class="dropdown-item" href="../articles/connectivity_tutorial.html">Connectivity</a></li>
    <li><a class="dropdown-item" href="../articles/calibrating_trade-offs_tutorial.html">Calibrating trade-offs</a></li>
    <li><a class="dropdown-item" href="../articles/management_zones_tutorial.html">Management zones</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/prioritizr/prioritizr/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Getting started</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/prioritizr/prioritizr/blob/HEAD/vignettes/prioritizr.Rmd" class="external-link"><code>vignettes/prioritizr.Rmd</code></a></small>
      <div class="d-none name"><code>prioritizr.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>The aim of this tutorial is to provide a short introduction to the
<em>prioritizr R</em> package. It is also intended to help conservation
planners familiar the <em>Marxan</em> decision support tool <span class="citation">(Ball <em>et al.</em> 2009)</span> start using the
package for their work.</p>
</div>
<div class="section level2">
<h2 id="data">Data<a class="anchor" aria-label="anchor" href="#data"></a>
</h2>
<p>Let’s load the packages and data used in this tutorial. Since this
tutorial uses data from the <em>prioritizrdata R</em> package, please
ensure that it is installed. The data used in this tutorial were
obtained from the <em>Introduction to Marxan</em> course and the
Australian Government’s National Vegetation Information System.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># load packages</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://prioritizr.github.io/prioritizrdata/" class="external-link">prioritizrdata</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://prioritizr.net">prioritizr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://r-spatial.github.io/sf/" class="external-link">sf</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://rspatial.org/" class="external-link">terra</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://vegandevs.github.io/vegan/" class="external-link">vegan</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://svn.r-project.org/R-packages/trunk/cluster/" class="external-link">cluster</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># set seed for reproducibility</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">500</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># load planning unit data</span></span>
<span><span class="va">tas_pu</span> <span class="op">&lt;-</span> <span class="fu"><a href="http://prioritizr.github.io/prioritizrdata/reference/tas_data.html" class="external-link">get_tas_pu</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># load feature data</span></span>
<span><span class="va">tas_features</span> <span class="op">&lt;-</span> <span class="fu"><a href="http://prioritizr.github.io/prioritizrdata/reference/tas_data.html" class="external-link">get_tas_features</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>Let’s have a look at the planning unit data. The <code>tas_pu</code>
object contains planning units represented as spatial polygons (i.e., a
<code><a href="https://r-spatial.github.io/sf/reference/sf.html" class="external-link">sf::st_sf()</a></code> object). This object has three columns that
denote the following information for each planning unit: a unique
identifier (<code>id</code>), unimproved land value (<code>cost</code>),
and current conservation status (<code>locked_in</code>). Planning units
that have at least half of their area overlapping with existing
protected areas are denoted with a locked in <code>TRUE</code> value,
otherwise they are denoted with a value of <code>FALSE</code>. We will
also set the costs for existing protected areas to zero, so that
existing protected areas aren’t included in the the cost of the
prioritization.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># print planning unit data</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">tas_pu</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Simple feature collection with 1130 features and 4 fields</span></span>
<span><span class="co">## Geometry type: MULTIPOLYGON</span></span>
<span><span class="co">## Dimension:     XY</span></span>
<span><span class="co">## Bounding box:  xmin: 298809.6 ymin: 5167775 xmax: 613818.8 ymax: 5502544</span></span>
<span><span class="co">## Projected CRS: WGS 84 / UTM zone 55S</span></span>
<span><span class="co">## <span style="color: #949494;"># A tibble: 1,130 × 5</span></span></span>
<span><span class="co">##       id  cost locked_in locked_out                                         geom</span></span>
<span><span class="co">##    <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>                                <span style="color: #949494; font-style: italic;">&lt;MULTIPOLYGON [m]&gt;</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 1</span>     1 60.2  FALSE     TRUE       (((328497 5497704, 326783.8 5500050, 326775…</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 2</span>     2 19.9  FALSE     FALSE      (((307121.6 5490487, 305344.4 5492917, 3053…</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 3</span>     3 59.7  FALSE     TRUE       (((321726.1 5492382, 320111 5494593, 320127…</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 4</span>     4 32.4  FALSE     FALSE      (((304314.5 5494324, 304342.2 5494287, 3043…</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 5</span>     5 26.2  FALSE     FALSE      (((314958.5 5487057, 312336 5490646, 312339…</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 6</span>     6 51.3  FALSE     FALSE      (((327904.3 5491218, 326594.6 5493012, 3284…</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 7</span>     7 32.3  FALSE     FALSE      (((308194.1 5481729, 306601.2 5483908, 3066…</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 8</span>     8 38.4  FALSE     FALSE      (((322792.7 5483624, 319965.3 5487497, 3199…</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 9</span>     9  3.55 FALSE     FALSE      (((334896.6 5490731, 335610.4 5492490, 3357…</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">10</span>    10  1.83 FALSE     FALSE      (((356377.1 5487952, 353903.1 5487635, 3538…</span></span>
<span><span class="co">## <span style="color: #949494;"># ℹ 1,120 more rows</span></span></span></code></pre>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># set costs for existing protected areas to zero</span></span>
<span><span class="va">tas_pu</span><span class="op">$</span><span class="va">cost</span> <span class="op">&lt;-</span> <span class="va">tas_pu</span><span class="op">$</span><span class="va">cost</span> <span class="op">*</span> <span class="op">!</span><span class="va">tas_pu</span><span class="op">$</span><span class="va">locked_in</span></span>
<span></span>
<span><span class="co"># plot map of planning unit costs</span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_as_sf.html" class="external-link">st_as_sf</a></span><span class="op">(</span><span class="va">tas_pu</span><span class="op">[</span>, <span class="st">"cost"</span><span class="op">]</span><span class="op">)</span>, main <span class="op">=</span> <span class="st">"Planning unit costs"</span><span class="op">)</span></span></code></pre></div>
<p><img src="prioritizr_files/figure-html/unnamed-chunk-5-1.png" width="336" style="display: block; margin: auto;"></p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># plot map of planning unit coverage by protected areas</span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_as_sf.html" class="external-link">st_as_sf</a></span><span class="op">(</span><span class="va">tas_pu</span><span class="op">[</span>, <span class="st">"locked_in"</span><span class="op">]</span><span class="op">)</span>, main <span class="op">=</span> <span class="st">"Protected area coverage"</span><span class="op">)</span></span></code></pre></div>
<p><img src="prioritizr_files/figure-html/unnamed-chunk-5-2.png" width="336" style="display: block; margin: auto;"></p>
<p>Now, let’s look at the conservation feature data. The
<code>tas_features</code> object describes the spatial distribution of
the features. Specifically, the feature data are a multi-layer raster
(i.e., a <code><a href="https://rspatial.github.io/terra/reference/rast.html" class="external-link">terra::rast()</a></code> object). Each layer corresponds to a
different vegetation community. Within each layer, cells values denote
the presence (using value of 1) or absence (using value of 0) of the
vegetation community across the study area.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># print planning unit data</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">tas_features</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## class       : SpatRaster </span></span>
<span><span class="co">## size        : 398, 359, 33  (nrow, ncol, nlyr)</span></span>
<span><span class="co">## resolution  : 1000, 1000  (x, y)</span></span>
<span><span class="co">## extent      : 288801.7, 647801.7, 5142976, 5540976  (xmin, xmax, ymin, ymax)</span></span>
<span><span class="co">## coord. ref. : WGS 84 / UTM zone 55S (EPSG:32755) </span></span>
<span><span class="co">## source      : tas_features.tif </span></span>
<span><span class="co">## names       : Banks~lands, Bould~marks, Calli~lands, Cool ~orest, Eucal~hyll), Eucal~torey, ... </span></span>
<span><span class="co">## min values  :           0,           0,           0,           0,           0,           0, ... </span></span>
<span><span class="co">## max values  :           1,           1,           1,           1,           1,           1, ...</span></span></code></pre>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># plot map of the first four vegetation classes</span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">tas_features</span><span class="op">[[</span><span class="fl">1</span><span class="op">:</span><span class="fl">4</span><span class="op">]</span><span class="op">]</span><span class="op">)</span></span></code></pre></div>
<p><img src="prioritizr_files/figure-html/unnamed-chunk-6-1.png" width="432" style="display: block; margin: auto;"></p>
</div>
<div class="section level2">
<h2 id="problem-formulation">Problem formulation<a class="anchor" aria-label="anchor" href="#problem-formulation"></a>
</h2>
<p>Now we will formulate a conservation planing problem. To achieve
this, we first specify which objects contain the planning unit and
feature data (using the <code><a href="../reference/problem.html">problem()</a></code> function). Next, we
specify that we want to use the minimum set objective function (using
the <code><a href="../reference/add_min_set_objective.html">add_min_set_objective()</a></code> function). This objective
function indicates that we wish to minimize the total cost of planning
units selected by the prioritization. We then specify boundary penalties
to reduce spatial fragmentation in the resulting prioritization (using
the <code><a href="../reference/add_boundary_penalties.html">add_boundary_penalties()</a></code> function; see the <a href="calibrating_trade-offs_tutorial.html"><em>Calibrating
trade-offs</em> vignette</a> for details on calibrating the penalty
value). We also specify representation targets to ensure the resulting
prioritization provides adequate coverage of each vegetation community
(using the <code><a href="../reference/add_relative_targets.html">add_relative_targets()</a></code> function). Specifically,
we specify targets to ensure at least 17% of the spatial extent of each
vegetation community (based on the <a href="https://www.cbd.int/sp/targets/" class="external-link">Aichi Target 11</a>).
Additionally, we set constraints to ensure that planning units
predominately covered by existing protected areas are selected by the
prioritization (using the <code><a href="../reference/add_locked_in_constraints.html">add_locked_in_constraints()</a></code>
function). Finally, we specify that the prioritization should either
select – or not select – planning units for prioritization (using the
<code><a href="../reference/add_binary_decisions.html">add_binary_decisions()</a></code> function).</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># build problem</span></span>
<span><span class="va">p1</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu"><a href="../reference/problem.html">problem</a></span><span class="op">(</span><span class="va">tas_pu</span>, <span class="va">tas_features</span>, cost_column <span class="op">=</span> <span class="st">"cost"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/add_min_set_objective.html">add_min_set_objective</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/add_boundary_penalties.html">add_boundary_penalties</a></span><span class="op">(</span>penalty <span class="op">=</span> <span class="fl">0.005</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/add_relative_targets.html">add_relative_targets</a></span><span class="op">(</span><span class="fl">0.17</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/add_locked_in_constraints.html">add_locked_in_constraints</a></span><span class="op">(</span><span class="st">"locked_in"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/add_binary_decisions.html">add_binary_decisions</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># print problem</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">p1</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## A conservation problem (<span style="color: #0000BB;">&lt;ConservationProblem&gt;</span>)</span></span>
<span><span class="co">## <span style="color: #00BBBB;">├•data</span></span></span>
<span><span class="co">## <span style="color: #00BBBB;">│├•</span>features:    <span style="color: #0000BB;">"Banksia woodlands"</span>, … (33 total)</span></span>
<span><span class="co">## <span style="color: #00BBBB;">│└•</span>planning units:</span></span>
<span><span class="co">## <span style="color: #00BBBB;">│</span> <span style="color: #00BBBB;">├•</span>data:       <span style="color: #0000BB;">&lt;sf&gt;</span> (1130 total)</span></span>
<span><span class="co">## <span style="color: #00BBBB;">│</span> <span style="color: #00BBBB;">├•</span>costs:      continuous values (between <span style="color: #0000BB;">0</span> and <span style="color: #0000BB;">61.9273</span>)</span></span>
<span><span class="co">## <span style="color: #00BBBB;">│</span> <span style="color: #00BBBB;">├•</span>extent:     <span style="color: #0000BB;">298809.5764</span>, <span style="color: #0000BB;">5167774.5993</span>, <span style="color: #0000BB;">613818.7743</span>, <span style="color: #0000BB;">5502543.7119</span> (xmin, ymin, xmax, ymax)</span></span>
<span><span class="co">## <span style="color: #00BBBB;">│</span> <span style="color: #00BBBB;">└•</span>CRS:        WGS 84 / UTM zone 55S (projected)</span></span>
<span><span class="co">## <span style="color: #00BBBB;">├•formulation</span></span></span>
<span><span class="co">## <span style="color: #00BBBB;">│├•</span>objective:   minimum set objective</span></span>
<span><span class="co">## <span style="color: #00BBBB;">│├•</span>penalties:</span></span>
<span><span class="co">## <span style="color: #00BBBB;">││└•</span>1:          boundary penalties (`penalty` = <span style="color: #0000BB;">0.005</span>, `edge_factor` = <span style="color: #0000BB;">0.5</span>, …)</span></span>
<span><span class="co">## <span style="color: #00BBBB;">│├•</span>targets:     relative targets (between <span style="color: #0000BB;">0.17</span> and <span style="color: #0000BB;">0.17</span>)</span></span>
<span><span class="co">## <span style="color: #00BBBB;">│├•</span>constraints:</span></span>
<span><span class="co">## <span style="color: #00BBBB;">││└•</span>1:          locked in constraints (257 planning units)</span></span>
<span><span class="co">## <span style="color: #00BBBB;">│└•</span>decisions:   binary decision</span></span>
<span><span class="co">## <span style="color: #00BBBB;">└•optimization</span></span></span>
<span><span class="co">##  <span style="color: #00BBBB;">├•</span>portfolio:   default portfolio</span></span>
<span><span class="co">##  <span style="color: #00BBBB;">└•</span>solver:      gurobi solver (`gap` = <span style="color: #0000BB;">0.1</span>, `time_limit` = <span style="color: #0000BB;">2147483647</span>, `first_feasible` = <span style="color: #0000BB;">FALSE</span>, …)</span></span>
<span><span class="co">## <span style="color: #555555;"># ℹ Use `summary(...)` to see complete formulation.</span></span></span></code></pre>
</div>
<div class="section level2">
<h2 id="prioritization">Prioritization<a class="anchor" aria-label="anchor" href="#prioritization"></a>
</h2>
<p>We can now solve the problem formulation (<code>p1</code>) to
generate a prioritization (using the <code><a href="../reference/solve.html">solve()</a></code> function). The
<em>prioritizr</em> R package supports a range of different exact
algorithm solvers, including <em>Gurobi</em>, <em>IBM CPLEX</em>,
<em>CBC</em>, <em>HiGHS</em>, <em>Rsymphony</em>, and
<em>lpsymphony</em>. Although there are benefits and limitations
associated with each of these different solvers, they should return
similar results. Note that you will need at least one solver installed
on your system to generate prioritizations. Since we did not specify a
solver when building the problem, the <em>prioritizr R</em> package will
automatically select the best available solver installed. We recommend
using the <em>Gurobi</em> solver if possible, and have used it for this
tutorial (see the <em>Gurobi Installation Guide</em> vignette for
installation instructions). After solving the problem, the
prioritization will be stored in the <code>solution_1</code> column of
the <code>s1</code> object.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># solve problem</span></span>
<span><span class="va">s1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/solve.html">solve</a></span><span class="op">(</span><span class="va">p1</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Set parameter Username</span></span>
<span><span class="co">## Set parameter LicenseID to value 2599748</span></span>
<span><span class="co">## Set parameter TimeLimit to value 2147483647</span></span>
<span><span class="co">## Set parameter MIPGap to value 0.1</span></span>
<span><span class="co">## Set parameter Presolve to value 2</span></span>
<span><span class="co">## Set parameter Threads to value 1</span></span>
<span><span class="co">## Academic license - for non-commercial use only - expires 2025-12-16</span></span>
<span><span class="co">## Gurobi Optimizer version 12.0.2 build v12.0.2rc0 (linux64 - "Ubuntu 24.04.2 LTS")</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## CPU model: 11th Gen Intel(R) Core(TM) i7-1185G7 @ 3.00GHz, instruction set [SSE2|AVX|AVX2|AVX512]</span></span>
<span><span class="co">## Thread count: 4 physical cores, 8 logical processors, using up to 1 threads</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Non-default parameters:</span></span>
<span><span class="co">## TimeLimit  2147483647</span></span>
<span><span class="co">## MIPGap  0.1</span></span>
<span><span class="co">## LogToConsole  0</span></span>
<span><span class="co">## Presolve  2</span></span>
<span><span class="co">## Threads  1</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Optimize a model with 6329 rows, 4278 columns and 20749 nonzeros</span></span>
<span><span class="co">## Model fingerprint: 0xdea3ac39</span></span>
<span><span class="co">## Variable types: 3148 continuous, 1130 integer (1130 binary)</span></span>
<span><span class="co">## Coefficient statistics:</span></span>
<span><span class="co">##   Matrix range     [2e-06, 6e+01]</span></span>
<span><span class="co">##   Objective range  [5e-01, 2e+02]</span></span>
<span><span class="co">##   Bounds range     [1e+00, 1e+00]</span></span>
<span><span class="co">##   RHS range        [2e-01, 2e+03]</span></span>
<span><span class="co">## Found heuristic solution: objective 28313.965155</span></span>
<span><span class="co">## Found heuristic solution: objective 18343.093396</span></span>
<span><span class="co">## Presolve removed 1909 rows and 1249 columns</span></span>
<span><span class="co">## Presolve time: 0.07s</span></span>
<span><span class="co">## Presolved: 4420 rows, 3029 columns, 11081 nonzeros</span></span>
<span><span class="co">## Found heuristic solution: objective 17785.511418</span></span>
<span><span class="co">## Variable types: 0 continuous, 3029 integer (3029 binary)</span></span>
<span><span class="co">## Found heuristic solution: objective 17508.673350</span></span>
<span><span class="co">## Root relaxation presolve removed 8 rows and 6 columns</span></span>
<span><span class="co">## Root relaxation presolved: 4412 rows, 3023 columns, 11060 nonzeros</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Root relaxation: objective 9.520699e+03, 1230 iterations, 0.06 seconds (0.08 work units)</span></span>
<span><span class="co">## </span></span>
<span><span class="co">##     Nodes    |    Current Node    |     Objective Bounds      |     Work</span></span>
<span><span class="co">##  Expl Unexpl |  Obj  Depth IntInf | Incumbent    BestBd   Gap | It/Node Time</span></span>
<span><span class="co">## </span></span>
<span><span class="co">##      0     0 9520.69856    0 1115 17508.6734 9520.69856  45.6%     -    0s</span></span>
<span><span class="co">## H    0     0                    13545.245401 9520.69856  29.7%     -    0s</span></span>
<span><span class="co">## H    0     0                    12933.143362 9520.69856  26.4%     -    0s</span></span>
<span><span class="co">## H    0     0                    12898.492261 9520.69856  26.2%     -    0s</span></span>
<span><span class="co">## H    0     0                    11650.114891 9520.69856  18.3%     -    0s</span></span>
<span><span class="co">## H    0     0                    11590.840386 9520.69856  17.9%     -    0s</span></span>
<span><span class="co">## H    0     0                    11556.820277 9520.69856  17.6%     -    0s</span></span>
<span><span class="co">## H    0     0                    11104.484526 9520.69856  14.3%     -    0s</span></span>
<span><span class="co">## H    0     0                    11096.985518 9520.69856  14.2%     -    0s</span></span>
<span><span class="co">## H    0     0                    11095.828253 9520.69856  14.2%     -    0s</span></span>
<span><span class="co">## H    0     0                    10922.063522 9520.69856  12.8%     -    0s</span></span>
<span><span class="co">## H    0     0                    10866.263713 9520.69856  12.4%     -    0s</span></span>
<span><span class="co">##      0     0 9615.33215    0 1144 10866.2637 9615.33215  11.5%     -    0s</span></span>
<span><span class="co">## H    0     0                    10820.247151 9615.33215  11.1%     -    0s</span></span>
<span><span class="co">## H    0     0                    10732.637110 9615.33215  10.4%     -    0s</span></span>
<span><span class="co">## H    0     0                    10693.101120 9615.33215  10.1%     -    0s</span></span>
<span><span class="co">## H    0     0                    10592.436809 9615.33215  9.22%     -    0s</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Cutting planes:</span></span>
<span><span class="co">##   Cover: 1</span></span>
<span><span class="co">##   MIR: 2</span></span>
<span><span class="co">##   RLT: 1</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Explored 1 nodes (1410 simplex iterations) in 0.74 seconds (0.90 work units)</span></span>
<span><span class="co">## Thread count was 1 (of 8 available processors)</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Solution count 10: 10592.4 10693.1 10732.6 ... 11556.8</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Optimal solution found (tolerance 1.00e-01)</span></span>
<span><span class="co">## Best objective 1.059243680880e+04, best bound 9.615332148707e+03, gap 9.2246%</span></span></code></pre>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># plot map of prioritization</span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/plot.html" class="external-link">plot</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_as_sf.html" class="external-link">st_as_sf</a></span><span class="op">(</span><span class="va">s1</span><span class="op">[</span>, <span class="st">"solution_1"</span><span class="op">]</span><span class="op">)</span>, main <span class="op">=</span> <span class="st">"Prioritization"</span>,</span>
<span>  pal <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"grey90"</span>, <span class="st">"darkgreen"</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><img src="prioritizr_files/figure-html/unnamed-chunk-8-1.png" width="336" style="display: block; margin: auto;"></p>
</div>
<div class="section level2">
<h2 id="feature-representation">Feature representation<a class="anchor" aria-label="anchor" href="#feature-representation"></a>
</h2>
<p>Let’s examine how well the vegetation communities are represented by
existing protected areas and the prioritization.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># create column with existing protected areas</span></span>
<span><span class="va">tas_pu</span><span class="op">$</span><span class="va">pa</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rspatial.github.io/terra/reference/math-generics.html" class="external-link">round</a></span><span class="op">(</span><span class="va">tas_pu</span><span class="op">$</span><span class="va">locked_in</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># calculate feature representation statistics based on existing protected areas</span></span>
<span><span class="va">tc_pa</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/eval_target_coverage_summary.html">eval_target_coverage_summary</a></span><span class="op">(</span><span class="va">p1</span>, <span class="va">tas_pu</span><span class="op">[</span>, <span class="st">"pa"</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">tc_pa</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 33 × 9</span></span></span>
<span><span class="co">##    feature   met   total_amount absolute_target absolute_held absolute_shortfall</span></span>
<span><span class="co">##    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 1</span> Banksia … TRUE          2.00           0.340         0.367              0    </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 2</span> Boulders… TRUE        140.            23.9          65.5                0    </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 3</span> Callitri… FALSE         6.00           1.02          0.487              0.533</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 4</span> Cool tem… TRUE       <span style="text-decoration: underline;">7</span>257.          <span style="text-decoration: underline;">1</span>234.         <span style="text-decoration: underline;">2</span>992.                 0    </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 5</span> Eucalypt… TRUE       <span style="text-decoration: underline;">5</span>699.           969.         <span style="text-decoration: underline;">1</span>398.                 0    </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 6</span> Eucalypt… FALSE      <span style="text-decoration: underline;">9</span>180.          <span style="text-decoration: underline;">1</span>561.         <span style="text-decoration: underline;">1</span>030.               531.   </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 7</span> Eucalypt… TRUE         38.0            6.46         15.1                0    </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 8</span> Eucalypt… FALSE      <span style="text-decoration: underline;">1</span>908.           324.          189.               135.   </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 9</span> Eucalypt… FALSE       388.            65.9          27.4               38.6  </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">10</span> Eucalypt… TRUE       <span style="text-decoration: underline;">6</span>145.          <span style="text-decoration: underline;">1</span>045.         <span style="text-decoration: underline;">1</span>449.                 0    </span></span>
<span><span class="co">## <span style="color: #949494;"># ℹ 23 more rows</span></span></span>
<span><span class="co">## <span style="color: #949494;"># ℹ 3 more variables: relative_target &lt;dbl&gt;, relative_held &lt;dbl&gt;,</span></span></span>
<span><span class="co">## <span style="color: #949494;">#   relative_shortfall &lt;dbl&gt;</span></span></span></code></pre>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># calculate  feature representation statistics based on the prioritization</span></span>
<span><span class="va">tc_s1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/eval_target_coverage_summary.html">eval_target_coverage_summary</a></span><span class="op">(</span><span class="va">p1</span>, <span class="va">s1</span><span class="op">[</span>, <span class="st">"solution_1"</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">tc_s1</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 33 × 9</span></span></span>
<span><span class="co">##    feature   met   total_amount absolute_target absolute_held absolute_shortfall</span></span>
<span><span class="co">##    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 1</span> Banksia … TRUE          2.00           0.340         0.367                  0</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 2</span> Boulders… TRUE        140.            23.9          77.7                    0</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 3</span> Callitri… TRUE          6.00           1.02          1.49                   0</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 4</span> Cool tem… TRUE       <span style="text-decoration: underline;">7</span>257.          <span style="text-decoration: underline;">1</span>234.         <span style="text-decoration: underline;">3</span>319.                     0</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 5</span> Eucalypt… TRUE       <span style="text-decoration: underline;">5</span>699.           969.         <span style="text-decoration: underline;">1</span>745.                     0</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 6</span> Eucalypt… TRUE       <span style="text-decoration: underline;">9</span>180.          <span style="text-decoration: underline;">1</span>561.         <span style="text-decoration: underline;">1</span>820.                     0</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 7</span> Eucalypt… TRUE         38.0            6.46         16.1                    0</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 8</span> Eucalypt… TRUE       <span style="text-decoration: underline;">1</span>908.           324.          326.                     0</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 9</span> Eucalypt… TRUE        388.            65.9          77.3                    0</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">10</span> Eucalypt… TRUE       <span style="text-decoration: underline;">6</span>145.          <span style="text-decoration: underline;">1</span>045.         <span style="text-decoration: underline;">2</span>101.                     0</span></span>
<span><span class="co">## <span style="color: #949494;"># ℹ 23 more rows</span></span></span>
<span><span class="co">## <span style="color: #949494;"># ℹ 3 more variables: relative_target &lt;dbl&gt;, relative_held &lt;dbl&gt;,</span></span></span>
<span><span class="co">## <span style="color: #949494;">#   relative_shortfall &lt;dbl&gt;</span></span></span></code></pre>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># explore representation by existing protected areas</span></span>
<span><span class="co">## calculate number of features adequately represented by existing protected</span></span>
<span><span class="co">## areas</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">tc_pa</span><span class="op">$</span><span class="va">met</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] 18</span></span></code></pre>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## summarize representation (values show percent coverage)</span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">tc_pa</span><span class="op">$</span><span class="va">relative_held</span> <span class="op">*</span> <span class="fl">100</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. </span></span>
<span><span class="co">##   0.000   3.163  18.363  23.827  39.649  93.002</span></span></code></pre>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## visualize representation  (values show percent coverage)</span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/hist.html" class="external-link">hist</a></span><span class="op">(</span><span class="va">tc_pa</span><span class="op">$</span><span class="va">relative_held</span> <span class="op">*</span> <span class="fl">100</span>,</span>
<span>     main <span class="op">=</span> <span class="st">"Feature representation by existing protected areas"</span>,</span>
<span>     xlim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">100</span><span class="op">)</span>,</span>
<span>     xlab <span class="op">=</span> <span class="st">"Percent coverage of features (%)"</span><span class="op">)</span></span></code></pre></div>
<p><img src="prioritizr_files/figure-html/unnamed-chunk-9-1.png" width="672" style="display: block; margin: auto;"></p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># explore representation by prioritization</span></span>
<span><span class="co">## summarize representation (values show percent coverage)</span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">tc_s1</span><span class="op">$</span><span class="va">relative_held</span> <span class="op">*</span> <span class="fl">100</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. </span></span>
<span><span class="co">##   17.09   18.99   30.43   37.25   49.40  100.00</span></span></code></pre>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## calculate number of features adequately represented by the prioritization</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">tc_s1</span><span class="op">$</span><span class="va">met</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] 33</span></span></code></pre>
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## visualize representation  (values show percent coverage)</span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/hist.html" class="external-link">hist</a></span><span class="op">(</span></span>
<span>  <span class="va">tc_s1</span><span class="op">$</span><span class="va">relative_held</span> <span class="op">*</span> <span class="fl">100</span>,</span>
<span>  main <span class="op">=</span> <span class="st">"Feature representation by prioritization"</span>,</span>
<span>  xlim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">100</span><span class="op">)</span>,</span>
<span>  xlab <span class="op">=</span> <span class="st">"Percent coverage of features (%)"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><img src="prioritizr_files/figure-html/unnamed-chunk-9-2.png" width="672" style="display: block; margin: auto;"></p>
<p>We can see that representation of the vegetation communities by
existing protected areas is remarkably poor. For example, many of the
vegetation communities have nearly zero coverage by existing protected
areas. In other words, are almost entirely absent from existing
protected areas. We can also see that all vegetation communities have at
least 17% coverage by the prioritization – meaning that it meets the
representation targets for all of the features.</p>
</div>
<div class="section level2">
<h2 id="evaluating-importance">Evaluating importance<a class="anchor" aria-label="anchor" href="#evaluating-importance"></a>
</h2>
<p>After generating the prioritization, we can examine the relative
importance of planning units selected by the prioritization. This can be
useful to identify critically important planning units for conservation
– in other words, places that contain biodiversity features which cannot
be represented anywhere else – and schedule implementation of the
prioritization. To achieve this, we will use an incremental rank
approach <span class="citation">(Jung <em>et al.</em> 2021)</span>.
Briefly, this approach involves generating incremental prioritizations
with increasing budgets, wherein planning units selected in a previous
increment are locked in to the following solution. Additionally, locked
out constraints are used to ensure that only planning units selected in
the original solution are available for selection. If you’re interested,
other approaches for examining importance are also available (see <a href="https://prioritizr.net/reference/importance.html"><code>?importance</code></a>).</p>
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># calculate relative importance</span></span>
<span><span class="va">imp_s1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/eval_rank_importance.html">eval_rank_importance</a></span><span class="op">(</span><span class="va">p1</span>, <span class="va">s1</span><span class="op">[</span><span class="st">"solution_1"</span><span class="op">]</span>, n <span class="op">=</span> <span class="fl">10</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">imp_s1</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># manually set locked in planning units to -1 to help with visualization,</span></span>
<span><span class="co"># this way we can easily see the importance scores for the priority areas</span></span>
<span><span class="va">imp_s1</span><span class="op">$</span><span class="va">rs</span><span class="op">[</span><span class="va">tas_pu</span><span class="op">$</span><span class="va">locked_in</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="op">-</span><span class="fl">1</span></span></code></pre></div>
<div class="sourceCode" id="cb29"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># plot map of importance scores</span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_as_sf.html" class="external-link">st_as_sf</a></span><span class="op">(</span><span class="va">imp_s1</span><span class="op">[</span>, <span class="st">"rs"</span><span class="op">]</span><span class="op">)</span>, main <span class="op">=</span> <span class="st">"Overall importance"</span><span class="op">)</span></span></code></pre></div>
<p><img src="prioritizr_files/figure-html/unnamed-chunk-11-1.png" width="336" style="display: block; margin: auto;"></p>
</div>
<div class="section level2">
<h2 id="portfolios">Portfolios<a class="anchor" aria-label="anchor" href="#portfolios"></a>
</h2>
<p>Conservation planning exercises often involve generating multiple
different prioritizations. This can help decision makers consider
different options, and provide starting points for building consensus
among stakeholders. To generate a range of different prioritizations
given the same problem formulation, we can use portfolio functions. Here
we will use the gap portfolio to generate 1000 solutions that are within
20% of optimality. Please note that you will need to have the
<em>Gurobi</em> solver installed to use this specific portfolio. If you
don’t have access to <em>Gurobi</em>, you could try using the shuffle
portfolio instead (using the <code><a href="../reference/add_shuffle_portfolio.html">add_shuffle_portfolio()</a></code>
function).</p>
<div class="sourceCode" id="cb30"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># create new problem with a portfolio added to it</span></span>
<span><span class="va">p2</span> <span class="op">&lt;-</span></span>
<span>  <span class="va">p1</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/add_gap_portfolio.html">add_gap_portfolio</a></span><span class="op">(</span>number_solutions <span class="op">=</span> <span class="fl">1000</span>, pool_gap <span class="op">=</span> <span class="fl">0.2</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># print problem</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">p2</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## A conservation problem (<span style="color: #0000BB;">&lt;ConservationProblem&gt;</span>)</span></span>
<span><span class="co">## <span style="color: #00BBBB;">├•data</span></span></span>
<span><span class="co">## <span style="color: #00BBBB;">│├•</span>features:    <span style="color: #0000BB;">"Banksia woodlands"</span>, … (33 total)</span></span>
<span><span class="co">## <span style="color: #00BBBB;">│└•</span>planning units:</span></span>
<span><span class="co">## <span style="color: #00BBBB;">│</span> <span style="color: #00BBBB;">├•</span>data:       <span style="color: #0000BB;">&lt;sf&gt;</span> (1130 total)</span></span>
<span><span class="co">## <span style="color: #00BBBB;">│</span> <span style="color: #00BBBB;">├•</span>costs:      continuous values (between <span style="color: #0000BB;">0</span> and <span style="color: #0000BB;">61.9273</span>)</span></span>
<span><span class="co">## <span style="color: #00BBBB;">│</span> <span style="color: #00BBBB;">├•</span>extent:     <span style="color: #0000BB;">298809.5764</span>, <span style="color: #0000BB;">5167774.5993</span>, <span style="color: #0000BB;">613818.7743</span>, <span style="color: #0000BB;">5502543.7119</span> (xmin, ymin, xmax, ymax)</span></span>
<span><span class="co">## <span style="color: #00BBBB;">│</span> <span style="color: #00BBBB;">└•</span>CRS:        WGS 84 / UTM zone 55S (projected)</span></span>
<span><span class="co">## <span style="color: #00BBBB;">├•formulation</span></span></span>
<span><span class="co">## <span style="color: #00BBBB;">│├•</span>objective:   minimum set objective</span></span>
<span><span class="co">## <span style="color: #00BBBB;">│├•</span>penalties:</span></span>
<span><span class="co">## <span style="color: #00BBBB;">││└•</span>1:          boundary penalties (`penalty` = <span style="color: #0000BB;">0.005</span>, `edge_factor` = <span style="color: #0000BB;">0.5</span>, …)</span></span>
<span><span class="co">## <span style="color: #00BBBB;">│├•</span>targets:     relative targets (between <span style="color: #0000BB;">0.17</span> and <span style="color: #0000BB;">0.17</span>)</span></span>
<span><span class="co">## <span style="color: #00BBBB;">│├•</span>constraints:</span></span>
<span><span class="co">## <span style="color: #00BBBB;">││└•</span>1:          locked in constraints (257 planning units)</span></span>
<span><span class="co">## <span style="color: #00BBBB;">│└•</span>decisions:   binary decision</span></span>
<span><span class="co">## <span style="color: #00BBBB;">└•optimization</span></span></span>
<span><span class="co">##  <span style="color: #00BBBB;">├•</span>portfolio:   gap portfolio (`number_solutions` = <span style="color: #0000BB;">1000</span>, `pool_gap` = <span style="color: #0000BB;">0.2</span>)</span></span>
<span><span class="co">##  <span style="color: #00BBBB;">└•</span>solver:      gurobi solver (`gap` = <span style="color: #0000BB;">0.1</span>, `time_limit` = <span style="color: #0000BB;">2147483647</span>, `first_feasible` = <span style="color: #0000BB;">FALSE</span>, …)</span></span>
<span><span class="co">## <span style="color: #555555;"># ℹ Use `summary(...)` to see complete formulation.</span></span></span></code></pre>
<div class="sourceCode" id="cb32"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># generate prioritizations</span></span>
<span><span class="va">prt</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/solve.html">solve</a></span><span class="op">(</span><span class="va">p2</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Set parameter Username</span></span>
<span><span class="co">## Set parameter LicenseID to value 2599748</span></span>
<span><span class="co">## Set parameter TimeLimit to value 2147483647</span></span>
<span><span class="co">## Set parameter MIPGap to value 0.1</span></span>
<span><span class="co">## Set parameter Presolve to value 2</span></span>
<span><span class="co">## Set parameter Threads to value 1</span></span>
<span><span class="co">## Set parameter PoolSolutions to value 1000</span></span>
<span><span class="co">## Set parameter PoolSearchMode to value 2</span></span>
<span><span class="co">## Set parameter PoolGap to value 0.2</span></span>
<span><span class="co">## Academic license - for non-commercial use only - expires 2025-12-16</span></span>
<span><span class="co">## Gurobi Optimizer version 12.0.2 build v12.0.2rc0 (linux64 - "Ubuntu 24.04.2 LTS")</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## CPU model: 11th Gen Intel(R) Core(TM) i7-1185G7 @ 3.00GHz, instruction set [SSE2|AVX|AVX2|AVX512]</span></span>
<span><span class="co">## Thread count: 4 physical cores, 8 logical processors, using up to 1 threads</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Non-default parameters:</span></span>
<span><span class="co">## TimeLimit  2147483647</span></span>
<span><span class="co">## MIPGap  0.1</span></span>
<span><span class="co">## LogToConsole  0</span></span>
<span><span class="co">## Presolve  2</span></span>
<span><span class="co">## Threads  1</span></span>
<span><span class="co">## PoolSolutions  1000</span></span>
<span><span class="co">## PoolSearchMode  2</span></span>
<span><span class="co">## PoolGap  0.2</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Optimize a model with 6329 rows, 4278 columns and 20749 nonzeros</span></span>
<span><span class="co">## Model fingerprint: 0xdea3ac39</span></span>
<span><span class="co">## Variable types: 3148 continuous, 1130 integer (1130 binary)</span></span>
<span><span class="co">## Coefficient statistics:</span></span>
<span><span class="co">##   Matrix range     [2e-06, 6e+01]</span></span>
<span><span class="co">##   Objective range  [5e-01, 2e+02]</span></span>
<span><span class="co">##   Bounds range     [1e+00, 1e+00]</span></span>
<span><span class="co">##   RHS range        [2e-01, 2e+03]</span></span>
<span><span class="co">## Found heuristic solution: objective 28313.965155</span></span>
<span><span class="co">## Found heuristic solution: objective 18343.093396</span></span>
<span><span class="co">## Presolve removed 1434 rows and 258 columns</span></span>
<span><span class="co">## Presolve time: 0.02s</span></span>
<span><span class="co">## Presolved: 4895 rows, 4020 columns, 12058 nonzeros</span></span>
<span><span class="co">## Variable types: 3148 continuous, 872 integer (872 binary)</span></span>
<span><span class="co">## Root relaxation presolved: 4895 rows, 4020 columns, 12058 nonzeros</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Root relaxation: objective 9.516231e+03, 1297 iterations, 0.07 seconds (0.10 work units)</span></span>
<span><span class="co">## </span></span>
<span><span class="co">##     Nodes    |    Current Node    |     Objective Bounds      |     Work</span></span>
<span><span class="co">##  Expl Unexpl |  Obj  Depth IntInf | Incumbent    BestBd   Gap | It/Node Time</span></span>
<span><span class="co">## </span></span>
<span><span class="co">##      0     0 9516.23114    0  311 18343.0934 9516.23114  48.1%     -    0s</span></span>
<span><span class="co">## H    0     0                    13639.424721 9516.23114  30.2%     -    0s</span></span>
<span><span class="co">## H    0     0                    12501.341845 9516.23114  23.9%     -    0s</span></span>
<span><span class="co">## H    0     0                    12233.515013 9516.23114  22.2%     -    0s</span></span>
<span><span class="co">##      0     0 9564.51582    0  330 12233.5150 9564.51582  21.8%     -    0s</span></span>
<span><span class="co">## H    0     0                    11843.700741 9564.85620  19.2%     -    0s</span></span>
<span><span class="co">## H    0     0                    11798.635920 9564.85620  18.9%     -    0s</span></span>
<span><span class="co">##      0     0 9616.33444    0  323 11798.6359 9616.33444  18.5%     -    0s</span></span>
<span><span class="co">##      0     0 9624.88617    0  289 11798.6359 9624.88617  18.4%     -    0s</span></span>
<span><span class="co">##      0     0 9627.57060    0  314 11798.6359 9627.57060  18.4%     -    0s</span></span>
<span><span class="co">##      0     0 9630.97840    0  289 11798.6359 9630.97840  18.4%     -    0s</span></span>
<span><span class="co">##      0     0 9633.36306    0  287 11798.6359 9633.36306  18.4%     -    0s</span></span>
<span><span class="co">##      0     0 9634.35497    0  287 11798.6359 9634.35497  18.3%     -    0s</span></span>
<span><span class="co">## H    0     0                    11699.466283 9634.35497  17.7%     -    0s</span></span>
<span><span class="co">## H    0     0                    11387.774340 9634.35497  15.4%     -    0s</span></span>
<span><span class="co">## H    0     0                    11268.949558 9634.35497  14.5%     -    0s</span></span>
<span><span class="co">## H    0     0                    11234.661427 9634.35497  14.2%     -    0s</span></span>
<span><span class="co">## H    0     0                    11194.982696 9634.35497  13.9%     -    0s</span></span>
<span><span class="co">## H    0     0                    11172.169609 9634.35497  13.8%     -    0s</span></span>
<span><span class="co">## H    0     0                    11165.030893 9634.35497  13.7%     -    0s</span></span>
<span><span class="co">##      0     2 9634.35497    0  287 11165.0309 9634.35497  13.7%     -    0s</span></span>
<span><span class="co">## H   18    18                    11149.468300 9682.80304  13.2%   136    1s</span></span>
<span><span class="co">## H   18    18                    11134.219959 9682.80304  13.0%   136    1s</span></span>
<span><span class="co">## H   18    18                    10851.832531 9682.80304  10.8%   136    1s</span></span>
<span><span class="co">## H   18    18                    10708.613855 9682.80304  9.58%   136    1s</span></span>
<span><span class="co">## H  130   130                    10674.943182 9682.80304  9.29%   114    2s</span></span>
<span><span class="co">## H  239   239                    10578.521820 9682.80304  8.47%  76.3    2s</span></span>
<span><span class="co">## H  239   239                    10508.435291 9682.80304  7.86%  76.3    2s</span></span>
<span><span class="co">## H  239   239                    10497.969765 9682.80304  7.76%  76.3    2s</span></span>
<span><span class="co">## H  239   239                    10496.476241 9682.80304  7.75%  76.3    2s</span></span>
<span><span class="co">## H  239   239                    10485.373665 9682.80304  7.65%  76.3    2s</span></span>
<span><span class="co">## H  512   510                    10471.621505 9682.81219  7.53%  48.0    3s</span></span>
<span><span class="co">##    519     4 10471.6215  341  287 10471.6215 9682.81219  7.53%  47.3    5s</span></span>
<span><span class="co">## H  519     4                    10417.846434 9682.81219  7.06%  47.3    5s</span></span>
<span><span class="co">## H  650   130                    10401.982397 9728.49230  6.47%  55.2    7s</span></span>
<span><span class="co">## H  650   130                    10375.652090 9728.49230  6.24%  55.2    7s</span></span>
<span><span class="co">## H  650   130                    10374.487430 9728.49230  6.23%  55.2    7s</span></span>
<span><span class="co">## H  891   371                    10369.036126 9728.49230  6.18%  41.3    7s</span></span>
<span><span class="co">## H  917   397                    10363.328948 9728.49230  6.13%  40.4    7s</span></span>
<span><span class="co">## H  943   423                    10359.364988 9728.49230  6.09%  39.4    8s</span></span>
<span><span class="co">##   1251   730 11281.2776  256    9 10359.3650 9729.79846  6.08%  37.6   10s</span></span>
<span><span class="co">## H 1572  1039                    10265.819905 9735.74190  5.16%  31.3   10s</span></span>
<span><span class="co">## H 1572   928                    10074.309694 9735.74190  3.36%  31.3   10s</span></span>
<span><span class="co">## H 1576   930                    10001.434711 9735.74190  2.66%  31.4   10s</span></span>
<span><span class="co">## H 1627   977                    9998.5862207 9735.74190  2.63%  32.3   10s</span></span>
<span><span class="co">## H 1627   966                    9983.5761260 9735.74190  2.48%  32.3   10s</span></span>
<span><span class="co">## H 1950  1261                    9948.6785488 9737.24570  2.13%  32.0   11s</span></span>
<span><span class="co">##   2764  2028 10006.8533   21  190 9948.67855 9762.11464  1.88%  30.3   15s</span></span>
<span><span class="co">##   4284  2669 10535.8316   83  126 9948.67855 9849.42265  1.00%  28.1   20s</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Cutting planes:</span></span>
<span><span class="co">##   Cover: 1</span></span>
<span><span class="co">##   MIR: 4</span></span>
<span><span class="co">##   RLT: 8</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Explored 5272 nodes (141503 simplex iterations) in 22.16 seconds (27.24 work units)</span></span>
<span><span class="co">## Thread count was 1 (of 8 available processors)</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Solution count 1000: 9948.68 9983.58 9998.59 ... 10947.2</span></span>
<span><span class="co">## No other solutions better than 10947.2</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Optimal solution found (tolerance 1.00e-01)</span></span>
<span><span class="co">## Best objective 9.948678548832e+03, best bound 9.852864286347e+03, gap 0.9631%</span></span></code></pre>
<div class="sourceCode" id="cb34"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">prt</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Simple feature collection with 1130 features and 1004 fields</span></span>
<span><span class="co">## Geometry type: MULTIPOLYGON</span></span>
<span><span class="co">## Dimension:     XY</span></span>
<span><span class="co">## Bounding box:  xmin: 298809.6 ymin: 5167775 xmax: 613818.8 ymax: 5502544</span></span>
<span><span class="co">## Projected CRS: WGS 84 / UTM zone 55S</span></span>
<span><span class="co">## <span style="color: #949494;"># A tibble: 1,130 × 1,005</span></span></span>
<span><span class="co">##       id  cost locked_in locked_out solution_1 solution_2 solution_3 solution_4</span></span>
<span><span class="co">##  <span style="color: #BCBCBC;">*</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 1</span>     1 60.2  FALSE     TRUE                0          0          0          0</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 2</span>     2 19.9  FALSE     FALSE               0          0          0          0</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 3</span>     3 59.7  FALSE     TRUE                0          0          0          0</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 4</span>     4 32.4  FALSE     FALSE               0          0          0          0</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 5</span>     5 26.2  FALSE     FALSE               0          0          0          0</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 6</span>     6 51.3  FALSE     FALSE               0          0          0          0</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 7</span>     7 32.3  FALSE     FALSE               0          0          0          0</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 8</span>     8 38.4  FALSE     FALSE               0          0          0          0</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 9</span>     9  3.55 FALSE     FALSE               0          0          0          0</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">10</span>    10  1.83 FALSE     FALSE               0          0          0          0</span></span>
<span><span class="co">## <span style="color: #949494;"># ℹ 1,120 more rows</span></span></span>
<span><span class="co">## <span style="color: #949494;"># ℹ 997 more variables: solution_5 &lt;dbl&gt;, solution_6 &lt;dbl&gt;, solution_7 &lt;dbl&gt;,</span></span></span>
<span><span class="co">## <span style="color: #949494;">#   solution_8 &lt;dbl&gt;, solution_9 &lt;dbl&gt;, solution_10 &lt;dbl&gt;, solution_11 &lt;dbl&gt;,</span></span></span>
<span><span class="co">## <span style="color: #949494;">#   solution_12 &lt;dbl&gt;, solution_13 &lt;dbl&gt;, solution_14 &lt;dbl&gt;, solution_15 &lt;dbl&gt;,</span></span></span>
<span><span class="co">## <span style="color: #949494;">#   solution_16 &lt;dbl&gt;, solution_17 &lt;dbl&gt;, solution_18 &lt;dbl&gt;, solution_19 &lt;dbl&gt;,</span></span></span>
<span><span class="co">## <span style="color: #949494;">#   solution_20 &lt;dbl&gt;, solution_21 &lt;dbl&gt;, solution_22 &lt;dbl&gt;, solution_23 &lt;dbl&gt;,</span></span></span>
<span><span class="co">## <span style="color: #949494;">#   solution_24 &lt;dbl&gt;, solution_25 &lt;dbl&gt;, solution_26 &lt;dbl&gt;, …</span></span></span></code></pre>
<p>After generating all these prioritizations, we now want some way to
visualize them. Because it would be onerous to look at each and every
prioritization individually, we will use statistical analyses to help
us. We can visualize the differences between these different
prioritizations – based on which planning units they selected – using a
hierarchical cluster analysis <span class="citation">(Harris <em>et
al.</em> 2014)</span>.</p>
<div class="sourceCode" id="cb36"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># extract solutions</span></span>
<span><span class="va">prt_results</span> <span class="op">&lt;-</span> <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_geometry.html" class="external-link">st_drop_geometry</a></span><span class="op">(</span><span class="va">prt</span><span class="op">)</span></span>
<span><span class="va">prt_results</span> <span class="op">&lt;-</span> <span class="va">prt_results</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/startsWith.html" class="external-link">startsWith</a></span><span class="op">(</span><span class="fu"><a href="https://rspatial.github.io/terra/reference/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">prt_results</span><span class="op">)</span>, <span class="st">"solution_"</span><span class="op">)</span><span class="op">]</span></span>
<span></span>
<span><span class="co"># calculate pair-wise distances between different prioritizations for analysis</span></span>
<span><span class="va">prt_dists</span> <span class="op">&lt;-</span> <span class="fu">vegan</span><span class="fu">::</span><span class="fu"><a href="https://vegandevs.github.io/vegan/reference/vegdist.html" class="external-link">vegdist</a></span><span class="op">(</span><span class="fu"><a href="https://rspatial.github.io/terra/reference/transpose.html" class="external-link">t</a></span><span class="op">(</span><span class="va">prt_results</span><span class="op">)</span>, method <span class="op">=</span> <span class="st">"jaccard"</span>, binary <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># run cluster analysis</span></span>
<span><span class="va">prt_clust</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/hclust.html" class="external-link">hclust</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/dist.html" class="external-link">as.dist</a></span><span class="op">(</span><span class="va">prt_dists</span><span class="op">)</span>, method <span class="op">=</span> <span class="st">"average"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># visualize clusters</span></span>
<span><span class="va">opar</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/graphics/par.html" class="external-link">par</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/par.html" class="external-link">par</a></span><span class="op">(</span>oma <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">)</span>, mar<span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">4.1</span>, <span class="fl">1.5</span>, <span class="fl">2.1</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/plot.html" class="external-link">plot</a></span><span class="op">(</span></span>
<span>  <span class="va">prt_clust</span>, labels <span class="op">=</span> <span class="cn">FALSE</span>, sub <span class="op">=</span> <span class="cn">NA</span>, xlab <span class="op">=</span> <span class="st">""</span>,</span>
<span>  main <span class="op">=</span> <span class="st">"Different prioritizations in portfolio"</span></span>
<span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/warning.html" class="external-link">suppressWarnings</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/graphics/par.html" class="external-link">par</a></span><span class="op">(</span><span class="va">opar</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="prioritizr_files/figure-html/unnamed-chunk-13-1.png" width="672" style="display: block; margin: auto;"></p>
<p>We can see that there are approximately six main groups of
prioritizations in the portfolio. To explore these different groups,
let’s conduct another cluster analysis (i.e., a <em>k</em>-medoids
analysis) to extract the most representative prioritization from each of
these groups. In other words, we will run another statistical analysis
to find the most central prioritization within each group.</p>
<div class="sourceCode" id="cb37"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># run k-medoids analysis</span></span>
<span><span class="va">prt_med</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/cluster/man/pam.html" class="external-link">pam</a></span><span class="op">(</span><span class="va">prt_dists</span>, k <span class="op">=</span> <span class="fl">6</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># extract names of prioritizations that are most central for each group.</span></span>
<span><span class="va">prt_med_names</span> <span class="op">&lt;-</span> <span class="va">prt_med</span><span class="op">$</span><span class="va">medoids</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">prt_med_names</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] "solution_2"   "solution_122" "solution_170" "solution_393" "solution_732"</span></span>
<span><span class="co">## [6] "solution_663"</span></span></code></pre>
<div class="sourceCode" id="cb39"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># create a copy of prt and set values for locked in planning units to -1</span></span>
<span><span class="co"># so we can easily visualize differences between prioritizations</span></span>
<span><span class="va">prt2</span> <span class="op">&lt;-</span> <span class="va">prt</span><span class="op">[</span>, <span class="va">prt_med_names</span><span class="op">]</span></span>
<span><span class="va">prt2</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/which.html" class="external-link">which</a></span><span class="op">(</span><span class="va">tas_pu</span><span class="op">$</span><span class="va">locked_in</span> <span class="op">&gt;</span> <span class="fl">0.5</span><span class="op">)</span>, <span class="va">prt_med_names</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="op">-</span><span class="fl">1</span></span>
<span></span>
<span><span class="co"># plot a map showing main different prioritizations</span></span>
<span><span class="co"># dark grey: locked in planning units</span></span>
<span><span class="co"># grey: planning units not selected</span></span>
<span><span class="co"># green: selected planning units</span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_as_sf.html" class="external-link">st_as_sf</a></span><span class="op">(</span><span class="va">prt2</span><span class="op">)</span>, pal <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"grey60"</span>, <span class="st">"grey90"</span>, <span class="st">"darkgreen"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="prioritizr_files/figure-html/unnamed-chunk-14-1.png" width="672" style="display: block; margin: auto;"></p>
</div>
<div class="section level2">
<h2 id="marxan-compatibility">
<em>Marxan</em> compatibility<a class="anchor" aria-label="anchor" href="#marxan-compatibility"></a>
</h2>
<p>The <em>prioritizr R</em> package provides functionality to help
<em>Marxan</em> users generate prioritizations. Specifically, it can
import conservation planning data prepared for <em>Marxan</em>, and can
generate prioritizations using a similar problem formulation as
<em>Marxan</em> <span class="citation">(based on Beyer <em>et al.</em>
2016)</span>. Indeed, the problem formulation presented earlier in this
vignette is very similar to that used by <em>Marxan</em>. The key
difference is that the problem formulation we specified earlier uses
“hard constraints” for feature representation, and <em>Marxan</em> uses
“soft constraints” for feature representation. This means that
prioritization we generated earlier was mathematically guaranteed to
reach the targets for all features. However, if we used <em>Marxan</em>
to generate the prioritization, then we could have produced a
prioritization that would fail to reach targets (depending the
<em>Species Penalty Factors</em> used to generate the prioritization).
In addition to these differences in terms problem formulation, the
<em>prioritizr R</em> package uses exact algorithms – instead of the
simulated annealing algorithm – which ensures that we obtain
prioritizations that are near optimal.</p>
<p>Here we will show the <em>prioritizr R</em> package can import
<em>Marxan</em> data and generate a prioritization. To begin with, let’s
import a conservation planning data prepared for <em>Marxan</em>.</p>
<div class="sourceCode" id="cb40"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># import data</span></span>
<span><span class="co">## planning unit data</span></span>
<span><span class="va">pu_path</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata/marxan/input/pu.dat"</span>, package <span class="op">=</span> <span class="st">"prioritizr"</span><span class="op">)</span></span>
<span><span class="va">pu_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.csv</a></span><span class="op">(</span><span class="va">pu_path</span>, header <span class="op">=</span> <span class="cn">TRUE</span>, stringsAsFactors <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="fu"><a href="https://rspatial.github.io/terra/reference/headtail.html" class="external-link">head</a></span><span class="op">(</span><span class="va">pu_data</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##   id       cost status    xloc     yloc</span></span>
<span><span class="co">## 1  3      0.000      0 1116623 -4493479</span></span>
<span><span class="co">## 2 30   7527.275      3 1110623 -4496943</span></span>
<span><span class="co">## 3 56  37349.075      0 1092623 -4500408</span></span>
<span><span class="co">## 4 58  16959.021      0 1116623 -4500408</span></span>
<span><span class="co">## 5 84  34220.256      0 1098623 -4503872</span></span>
<span><span class="co">## 6 85 178907.584      0 1110623 -4503872</span></span></code></pre>
<div class="sourceCode" id="cb42"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## feature data</span></span>
<span><span class="va">spec_path</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span></span>
<span>  <span class="st">"extdata/marxan/input/spec.dat"</span>, package <span class="op">=</span> <span class="st">"prioritizr"</span></span>
<span><span class="op">)</span></span>
<span><span class="va">spec_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.csv</a></span><span class="op">(</span><span class="va">spec_path</span>, header <span class="op">=</span> <span class="cn">TRUE</span>, stringsAsFactors <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="fu"><a href="https://rspatial.github.io/terra/reference/headtail.html" class="external-link">head</a></span><span class="op">(</span><span class="va">spec_data</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##   id prop spf   name</span></span>
<span><span class="co">## 1 10  0.3   1  bird1</span></span>
<span><span class="co">## 2 11  0.3   1  nvis2</span></span>
<span><span class="co">## 3 12  0.3   1  nvis8</span></span>
<span><span class="co">## 4 13  0.3   1  nvis9</span></span>
<span><span class="co">## 5 14  0.3   1 nvis14</span></span>
<span><span class="co">## 6 15  0.3   1 nvis20</span></span></code></pre>
<div class="sourceCode" id="cb44"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## amount of each feature within each planning unit data</span></span>
<span><span class="va">puvspr_path</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span></span>
<span>  <span class="st">"extdata/marxan/input/puvspr.dat"</span>, package <span class="op">=</span> <span class="st">"prioritizr"</span></span>
<span><span class="op">)</span></span>
<span><span class="va">puvspr_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.csv</a></span><span class="op">(</span><span class="va">puvspr_path</span>, header <span class="op">=</span> <span class="cn">TRUE</span>, stringsAsFactors <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="fu"><a href="https://rspatial.github.io/terra/reference/headtail.html" class="external-link">head</a></span><span class="op">(</span><span class="va">puvspr_data</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##   species  pu     amount</span></span>
<span><span class="co">## 1      26  56 120.344884</span></span>
<span><span class="co">## 2      26  58  45.167010</span></span>
<span><span class="co">## 3      26  84  68.047375</span></span>
<span><span class="co">## 4      26  85   9.735624</span></span>
<span><span class="co">## 5      26  86   7.803476</span></span>
<span><span class="co">## 6      26 111 478.327417</span></span></code></pre>
<div class="sourceCode" id="cb46"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## boundary data</span></span>
<span><span class="va">bound_path</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span></span>
<span>  <span class="st">"extdata/marxan/input/bound.dat"</span>, package <span class="op">=</span> <span class="st">"prioritizr"</span></span>
<span><span class="op">)</span></span>
<span><span class="va">bound_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.table</a></span><span class="op">(</span><span class="va">bound_path</span>, header <span class="op">=</span> <span class="cn">TRUE</span>, stringsAsFactors <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="fu"><a href="https://rspatial.github.io/terra/reference/headtail.html" class="external-link">head</a></span><span class="op">(</span><span class="va">bound_data</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##   id1 id2 boundary</span></span>
<span><span class="co">## 1   3   3    16000</span></span>
<span><span class="co">## 2   3  30     4000</span></span>
<span><span class="co">## 3   3  58     4000</span></span>
<span><span class="co">## 4  30  30    12000</span></span>
<span><span class="co">## 5  30  58     4000</span></span>
<span><span class="co">## 6  30  85     4000</span></span></code></pre>
<p>After importing the data, we can now generate a prioritization based
on the <em>Marxan</em> problem formulation (using the
<code><a href="../reference/marxan_problem.html">marxan_problem()</a></code> function). <strong>Please note that this
function does not generate prioritizations using
<em>Marxan</em>.</strong> Instead, it uses the data to create an
optimization problem formulation similar to <em>Marxan</em> – using hard
constraints instead of soft constraints – and uses an exact algorithm
solver to generate a prioritization.</p>
<div class="sourceCode" id="cb48"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># create problem</span></span>
<span><span class="va">p3</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/marxan_problem.html">marxan_problem</a></span><span class="op">(</span></span>
<span>  <span class="va">pu_data</span>, <span class="va">spec_data</span>, <span class="va">puvspr_data</span>, <span class="va">bound_data</span>, blm <span class="op">=</span> <span class="fl">0.0005</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># print problem</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">p3</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## A conservation problem (<span style="color: #0000BB;">&lt;ConservationProblem&gt;</span>)</span></span>
<span><span class="co">## <span style="color: #00BBBB;">├•data</span></span></span>
<span><span class="co">## <span style="color: #00BBBB;">│├•</span>features:    <span style="color: #0000BB;">"bird1"</span>, <span style="color: #0000BB;">"nvis2"</span>, <span style="color: #0000BB;">"nvis8"</span>, <span style="color: #0000BB;">"nvis9"</span>, <span style="color: #0000BB;">"nvis14"</span>, <span style="color: #0000BB;">"nvis20"</span>, … (17 total)</span></span>
<span><span class="co">## <span style="color: #00BBBB;">│└•</span>planning units:</span></span>
<span><span class="co">## <span style="color: #00BBBB;">│</span> <span style="color: #00BBBB;">├•</span>data:       <span style="color: #0000BB;">&lt;data.frame&gt;</span> (1751 total)</span></span>
<span><span class="co">## <span style="color: #00BBBB;">│</span> <span style="color: #00BBBB;">├•</span>costs:      continuous values (between <span style="color: #0000BB;">0</span> and <span style="color: #0000BB;">415692.1938</span>)</span></span>
<span><span class="co">## <span style="color: #00BBBB;">│</span> <span style="color: #00BBBB;">├•</span>extent:     <span style="color: #B2B2B2;">NA</span></span></span>
<span><span class="co">## <span style="color: #00BBBB;">│</span> <span style="color: #00BBBB;">└•</span>CRS:        <span style="color: #B2B2B2;">NA</span></span></span>
<span><span class="co">## <span style="color: #00BBBB;">├•formulation</span></span></span>
<span><span class="co">## <span style="color: #00BBBB;">│├•</span>objective:   minimum set objective</span></span>
<span><span class="co">## <span style="color: #00BBBB;">│├•</span>penalties:</span></span>
<span><span class="co">## <span style="color: #00BBBB;">││└•</span>1:          boundary penalties (`penalty` = <span style="color: #0000BB;">5e-04</span>, `edge_factor` = <span style="color: #0000BB;">1</span>, …)</span></span>
<span><span class="co">## <span style="color: #00BBBB;">│├•</span>targets:     relative targets (between <span style="color: #0000BB;">0.3</span> and <span style="color: #0000BB;">0.3</span>)</span></span>
<span><span class="co">## <span style="color: #00BBBB;">│├•</span>constraints:</span></span>
<span><span class="co">## <span style="color: #00BBBB;">││├•</span>1:          locked in constraints (317 planning units)</span></span>
<span><span class="co">## <span style="color: #00BBBB;">││└•</span>2:          locked out constraints (1 planning units)</span></span>
<span><span class="co">## <span style="color: #00BBBB;">│└•</span>decisions:   binary decision</span></span>
<span><span class="co">## <span style="color: #00BBBB;">└•optimization</span></span></span>
<span><span class="co">##  <span style="color: #00BBBB;">├•</span>portfolio:   default portfolio</span></span>
<span><span class="co">##  <span style="color: #00BBBB;">└•</span>solver:      gurobi solver (`gap` = <span style="color: #0000BB;">0.1</span>, `time_limit` = <span style="color: #0000BB;">2147483647</span>, `first_feasible` = <span style="color: #0000BB;">FALSE</span>, …)</span></span>
<span><span class="co">## <span style="color: #555555;"># ℹ Use `summary(...)` to see complete formulation.</span></span></span></code></pre>
<div class="sourceCode" id="cb50"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># solve problem</span></span>
<span><span class="va">s3</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/solve.html">solve</a></span><span class="op">(</span><span class="va">p3</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Set parameter Username</span></span>
<span><span class="co">## Set parameter LicenseID to value 2599748</span></span>
<span><span class="co">## Set parameter TimeLimit to value 2147483647</span></span>
<span><span class="co">## Set parameter MIPGap to value 0.1</span></span>
<span><span class="co">## Set parameter Presolve to value 2</span></span>
<span><span class="co">## Set parameter Threads to value 1</span></span>
<span><span class="co">## Academic license - for non-commercial use only - expires 2025-12-16</span></span>
<span><span class="co">## Gurobi Optimizer version 12.0.2 build v12.0.2rc0 (linux64 - "Ubuntu 24.04.2 LTS")</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## CPU model: 11th Gen Intel(R) Core(TM) i7-1185G7 @ 3.00GHz, instruction set [SSE2|AVX|AVX2|AVX512]</span></span>
<span><span class="co">## Thread count: 4 physical cores, 8 logical processors, using up to 1 threads</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Non-default parameters:</span></span>
<span><span class="co">## TimeLimit  2147483647</span></span>
<span><span class="co">## MIPGap  0.1</span></span>
<span><span class="co">## LogToConsole  0</span></span>
<span><span class="co">## Presolve  2</span></span>
<span><span class="co">## Threads  1</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Optimize a model with 10075 rows, 6780 columns and 24778 nonzeros</span></span>
<span><span class="co">## Model fingerprint: 0xe84a83d7</span></span>
<span><span class="co">## Variable types: 5029 continuous, 1751 integer (1751 binary)</span></span>
<span><span class="co">## Coefficient statistics:</span></span>
<span><span class="co">##   Matrix range     [5e-05, 4e+03]</span></span>
<span><span class="co">##   Objective range  [4e+00, 4e+05]</span></span>
<span><span class="co">##   Bounds range     [1e+00, 1e+00]</span></span>
<span><span class="co">##   RHS range        [5e+03, 3e+05]</span></span>
<span><span class="co">## Found heuristic solution: objective 1.221202e+08</span></span>
<span><span class="co">## Presolve removed 4707 rows and 3103 columns</span></span>
<span><span class="co">## Presolve time: 0.07s</span></span>
<span><span class="co">## Presolved: 5368 rows, 3677 columns, 12704 nonzeros</span></span>
<span><span class="co">## Variable types: 0 continuous, 3677 integer (3677 binary)</span></span>
<span><span class="co">## Root relaxation presolved: 5368 rows, 3677 columns, 12704 nonzeros</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Root relaxation: objective 9.564790e+07, 521 iterations, 0.01 seconds (0.01 work units)</span></span>
<span><span class="co">## </span></span>
<span><span class="co">##     Nodes    |    Current Node    |     Objective Bounds      |     Work</span></span>
<span><span class="co">##  Expl Unexpl |  Obj  Depth IntInf | Incumbent    BestBd   Gap | It/Node Time</span></span>
<span><span class="co">## </span></span>
<span><span class="co">##      0     0 9.5648e+07    0   20 1.2212e+08 9.5648e+07  21.7%     -    0s</span></span>
<span><span class="co">## H    0     0                    9.660231e+07 9.5648e+07  0.99%     -    0s</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Explored 1 nodes (521 simplex iterations) in 0.09 seconds (0.11 work units)</span></span>
<span><span class="co">## Thread count was 1 (of 8 available processors)</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Solution count 3: 9.66023e+07 9.66023e+07 1.2212e+08 </span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Optimal solution found (tolerance 1.00e-01)</span></span>
<span><span class="co">## Best objective 9.660230173667e+07, best bound 9.564790440581e+07, gap 0.9880%</span></span></code></pre>
<div class="sourceCode" id="cb52"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># print first six rows of solution object</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="fu"><a href="https://rspatial.github.io/terra/reference/headtail.html" class="external-link">head</a></span><span class="op">(</span><span class="va">s3</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 6 × 8</span></span></span>
<span><span class="co">##      id    cost status     xloc      yloc locked_in locked_out solution_1</span></span>
<span><span class="co">##   <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;">1</span>     3      0       0 1<span style="text-decoration: underline;">116</span>623. -<span style="color: #BB0000;">4</span><span style="color: #BB0000; text-decoration: underline;">493</span><span style="color: #BB0000;">479.</span> FALSE     FALSE               0</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">2</span>    30   <span style="text-decoration: underline;">7</span>527.      3 1<span style="text-decoration: underline;">110</span>623. -<span style="color: #BB0000;">4</span><span style="color: #BB0000; text-decoration: underline;">496</span><span style="color: #BB0000;">943.</span> FALSE     TRUE                0</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">3</span>    56  <span style="text-decoration: underline;">37</span>349.      0 1<span style="text-decoration: underline;">092</span>623. -<span style="color: #BB0000;">4</span><span style="color: #BB0000; text-decoration: underline;">500</span><span style="color: #BB0000;">408.</span> FALSE     FALSE               1</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">4</span>    58  <span style="text-decoration: underline;">16</span>959.      0 1<span style="text-decoration: underline;">116</span>623. -<span style="color: #BB0000;">4</span><span style="color: #BB0000; text-decoration: underline;">500</span><span style="color: #BB0000;">408.</span> FALSE     FALSE               0</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">5</span>    84  <span style="text-decoration: underline;">34</span>220.      0 1<span style="text-decoration: underline;">098</span>623. -<span style="color: #BB0000;">4</span><span style="color: #BB0000; text-decoration: underline;">503</span><span style="color: #BB0000;">872.</span> FALSE     FALSE               0</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">6</span>    85 <span style="text-decoration: underline;">178</span>908.      0 1<span style="text-decoration: underline;">110</span>623. -<span style="color: #BB0000;">4</span><span style="color: #BB0000; text-decoration: underline;">503</span><span style="color: #BB0000;">872.</span> FALSE     FALSE               0</span></span></code></pre>
</div>
<div class="section level2">
<h2 id="conclusion">Conclusion<a class="anchor" aria-label="anchor" href="#conclusion"></a>
</h2>
<p>This tutorial shows how the <em>prioritizr R</em> package can be used
to build a conservation problem, generate a prioritization, and evaluate
it. Although we explored just a few functions, the package provides many
different functions so that you can build and custom-tailor conservation
planning problems to suit your needs. To learn more about the package,
please see the package vignettes for <a href="package_overview.html">an
overview of the package</a>, <a href="gurobi_installation_guide.html">instructions for installing the
<em>Gurobi</em> optimization suite</a>, <a href="solver_benchmarks.html">benchmarks comparing the performance of
different solvers</a>, and <a href="publication_record.html">a record of
publications that have cited the package</a>. In addition to this
tutorial, the package also provides tutorials on <a href="connectivity_tutorial.html">incorporating connectivity into
prioritizations</a>, <a href="calibrating_trade-offs_tutorial.html">calibrating trade-offs
between different criteria</a> (e.g., total cost and spatial
fragmentation), and <a href="management_zones_tutorial.html">creating
prioritizations that have multiple management zones or management
actions</a>.</p>
</div>
<div class="section level2 unnumbered">
<h2 class="unnumbered" id="references">References<a class="anchor" aria-label="anchor" href="#references"></a>
</h2>
<div id="refs" class="references csl-bib-body hanging-indent">
<div id="ref-r3" class="csl-entry">
Ball, I.R., Possingham, H. &amp; Watts, M.E. (2009). <span class="nocase">Marxan and relatives: Software for spatial conservation
prioritisation</span>. <em><span>Spatial Conservation Prioritisation:
Quantitative Methods &amp; Computational Tools</span></em> (eds A.
Moilanen, K.A. Wilson &amp; H. Possingham), pp. 185–189. Oxford
University Press, Oxford, UK.
</div>
<div id="ref-r1" class="csl-entry">
Beyer, H.L., Dujardin, Y., Watts, M.E. &amp; Possingham, H.P. (2016).
Solving conservation planning problems with integer linear programming.
<em>Ecological Modelling</em>, <em>328</em>, 14–22.
</div>
<div id="ref-r35" class="csl-entry">
Harris, L.R., Watts, M.E., Nel, R., Schoeman, D.S. &amp; Possingham,
H.P. (2014). Using multivariate statistics to explore trade-offs among
spatial planning scenarios (P. Armsworth, Ed.). <em>Journal of Applied
Ecology</em>, <em>51</em>, 1504–1514.
</div>
<div id="ref-r66" class="csl-entry">
Jung, M., Arnell, A., Lamo, X. de, García-Rangel, S., Lewis, M., Mark,
J., Merow, C., Miles, L., Ondo, I., Pironon, S., Ravilious, C., Rivers,
M., Schepaschenko, D., Tallowin, O., Soesbergen, A. van, Govaerts, R.,
Boyle, B.L., Enquist, B.J., Feng, X., Gallagher, R., Maitner, B., Meiri,
S., Mulligan, M., Ofer, G., Roll, U., Hanson, J.O., Jetz, W., Di Marco,
M., McGowan, J., Rinnan, D.S., Sachs, J.D., Lesiv, M., Adams, V.M.,
Andrew, S.C., Burger, J.R., Hannah, L., Marquet, P.A., McCarthy, J.K.,
Morueta-Holme, N., Newman, E.A., Park, D.S., Roehrdanz, P.R., Svenning,
J.-C., Violle, C., Wieringa, J.J., Wynne, G., Fritz, S., Strassburg,
B.B.N., Obersteiner, M., Kapos, V., Burgess, N., Schmidt-Traub, G. &amp;
Visconti, P. (2021). Areas of global importance for conserving
terrestrial biodiversity, carbon and water. <em>Nature Ecology &amp;amp;
Evolution</em>, <em>5</em>, 1499–1509.
</div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://jeffrey-hanson.com" class="external-link">Jeffrey O Hanson</a>, <a href="http://www.richard-schuster.com" class="external-link">Richard Schuster</a>, Nina Morrell, <a href="http://strimas.com" class="external-link">Matthew Strimas-Mackey</a>, Brandon P M Edwards, Matthew E Watts, <a href="https://arcese.forestry.ubc.ca" class="external-link">Peter Arcese</a>, Joseph R Bennett, <a href="http://www.possinghamlab.org" class="external-link">Hugh P Possingham</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
