<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Getting started • prioritizr</title>

<!-- favicons -->
<link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png" />
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png" />
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png" />
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png" />

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>


<!-- docsearch -->
<script src="../docsearch.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.3/docsearch.min.css" integrity="sha256-QOSRU/ra9ActyXkIBbiIB144aDBdtvXBcNc3OTNuX/Q=" crossorigin="anonymous" />
<link href="../docsearch.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script>


  <link href="../extra.css" rel="stylesheet">
  

<meta property="og:title" content="Getting started" />
<meta property="og:description" content="prioritizr" />
<meta property="og:image" content="https://prioritizr.net/logo.png" />






<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-70466840-4"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-70466840-4');
</script>


  

  

  </head>

  <body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">prioritizr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">7.1.1.4</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../articles/prioritizr.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/package_overview.html">Package overview</a>
    </li>
    <li>
      <a href="../articles/gurobi_installation.html">Gurobi installation guide</a>
    </li>
    <li>
      <a href="../articles/calibrating_trade-offs.html">Calibrating trade-offs</a>
    </li>
    <li>
      <a href="../articles/solver_benchmark.html">Solver benchmarks</a>
    </li>
    <li>
      <a href="../articles/saltspring.html">Salt Spring Island tutorial</a>
    </li>
    <li>
      <a href="../articles/zones.html">Management zones</a>
    </li>
    <li>
      <a href="../articles/publication_record.html">Publication record</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/prioritizr/prioritizr/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
      <form class="navbar-form navbar-right hidden-xs hidden-sm" role="search">
        <div class="form-group">
          <input type="search" class="form-control" name="search-input" id="search-input" placeholder="Search..." aria-label="Search for..." autocomplete="off">
        </div>
      </form>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<script src="prioritizr_files/header-attrs-2.11/header-attrs.js"></script>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Getting started</h1>
            
      
      <small class="dont-index">Source: <a href='https://github.com/prioritizr/prioritizr/blob/master/vignettes/prioritizr.Rmd'><code>vignettes/prioritizr.Rmd</code></a></small>
      <div class="hidden name"><code>prioritizr.Rmd</code></div>

    </div>

    
    
<div id="introduction" class="section level2">
<h2>Introduction</h2>
<p>The aim of this tutorial is to provide a short introduction to the <em>prioritizr R</em> package. It is also intended for helping conservation planners familiar the <em>Marxan</em> decision support tool <span class="citation">(Ball <em>et al.</em> 2009)</span> to start using the package for their work.</p>
</div>
<div id="data" class="section level2">
<h2>Data</h2>
<p>Let’s load the packages and data used in this tutorial. Since this tutorial uses data from the <em>prioritizrdata R</em> package, please ensure that it is installed. The data used in this tutorial were obtained from the <em>Introduction to Marxan</em> course. Specifically, the data were originally a subset of a larger spatial prioritization project performed under contract to Australia’s Department of Environment and Water Resources <span class="citation">(Klein <em>et al.</em> 2007)</span>.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># load packages</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(prioritizrdata)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(prioritizr)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(vegan)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(cluster)</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="co"># load planning unit data</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(tas_pu)</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="co"># load feature data</span></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(tas_features)</span></code></pre></div>
<p>The <code>tas_pu</code> object contains planning units represented as spatial polygons (i.e. a <code>SpatialPolygonsDataFrame</code> object). This object has three columns that denote the following information for each planning unit: a unique identifier (<code>id</code>), unimproved land value (<code>cost</code>), and current conservation status (<code>locked_in</code>). Planning units that have at least half of their area overlapping with existing protected areas are denoted with a locked in value of 1, otherwise they are denoted with a value of 0. If you are familiar with the <em>Marxan</em> decision support tool, then you will notice that some of these columns are formatted similar conventions.</p>
<p>Now, let’s have a look at the planning unit data. We can see that the planning units correspond to hexagonal land parcels. We can also see that is a clear spatial pattern in the cost and conservation status the planning units.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># print planning unit data</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(tas_pu)</span></code></pre></div>
<pre><code>## class       : SpatialPolygonsDataFrame 
## features    : 1130 
## extent      : 298809.6, 613818.8, 5167775, 5502544  (xmin, xmax, ymin, ymax)
## crs         : +proj=utm +zone=55 +south +datum=WGS84 +units=m +no_defs +ellps=WGS84 +towgs84=0,0,0 
## variables   : 5
## names       :   id,              cost, status, locked_in, locked_out 
## min values  :    1, 0.192488262910798,      0,         0,          0 
## max values  : 1130,  61.9272727272727,      2,         1,          0</code></pre>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># plot map of planning unit costs</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">st_as_sf</span>(tas_pu[, <span class="st">&quot;cost&quot;</span>]), <span class="at">main =</span> <span class="st">&quot;Planning unit costs&quot;</span>)</span></code></pre></div>
<p><img src="prioritizr_files/figure-html/unnamed-chunk-4-1.png" width="336" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># plot map of planning unit coverage by protected areas</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">st_as_sf</span>(tas_pu[, <span class="st">&quot;locked_in&quot;</span>]), <span class="at">main =</span> <span class="st">&quot;Protected area coverage&quot;</span>)</span></code></pre></div>
<p><img src="prioritizr_files/figure-html/unnamed-chunk-4-2.png" width="336" style="display: block; margin: auto;" /></p>
<p>The <code>tas_features</code> object describes the spatial distribution of the features. Specifically, the feature data are expressed as a stack of 62 rasters (i.e. a <code>RasterStack</code> object). Each layer in the stack corresponds to one of 62 different vegetation communities. To describe the spatial distribution of a given vegetation community, each layer contains a spatially referenced grid of rectangular cells and each of these grid cells is associated with information on the distribution of the a given vegetation community. Specifically, these grid cells are assigned values that indicate if a given vegetation community is present (using value of 1) or absent (using value of 0) within the spatial extent of each grid cell.</p>
<p>Next, let’s examine the feature data. Here we will only plot the first four features as an example. The pixel values denote the presence (denoted by a value of 1) or absence (denoted by a value of zero) of each feature within the extent of the study area.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># print planning unit data</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(tas_features)</span></code></pre></div>
<pre><code>## class      : RasterStack 
## dimensions : 398, 359, 142882, 62  (nrow, ncol, ncell, nlayers)
## resolution : 1000, 1000  (x, y)
## extent     : 288801.7, 647801.7, 5142976, 5540976  (xmin, xmax, ymin, ymax)
## crs        : +proj=utm +zone=55 +south +datum=WGS84 +units=m +no_defs +ellps=WGS84 +towgs84=0,0,0 
## names      : tas_features.1, tas_features.2, tas_features.3, tas_features.4, tas_features.5, tas_features.6, tas_features.7, tas_features.8, tas_features.9, tas_features.10, tas_features.11, tas_features.12, tas_features.13, tas_features.14, tas_features.15, ... 
## min values :              0,              0,              0,              0,              0,              0,              0,              0,              0,               0,               0,               0,               0,               0,               0, ... 
## max values :              1,              1,              1,              1,              1,              1,              1,              1,              1,               1,               1,               1,               1,               1,               1, ...</code></pre>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co"># plot map of the first four vegetation classes</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(tas_features[[<span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>]], <span class="at">main =</span> <span class="fu">paste</span>(<span class="st">&quot;Feature&quot;</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>))</span></code></pre></div>
<p><img src="prioritizr_files/figure-html/unnamed-chunk-5-1.png" width="432" style="display: block; margin: auto;" /></p>
<p>The planning units in this tutorial are stored as spatial polygons. Although spatial polygons provide considerable flexibility in the shape and size of the planning units, such flexibility comes at a cost. This is because the spatial data processing routines needed to combine spatial polygon data and raster data for optimization can be very computationally expensive (e.g. calculating zonal statistics). As a consequence, we generally recommend using raster-based planning unit data where possible to reduce processing time. Another strategy is to complete spatial data processing routines manually using other software (e.g. <em>ESRI ArcGIS</em>) and use the pre-processed data directly with the <em>prioritizr R</em> package.</p>
</div>
<div id="problem-formulation" class="section level2">
<h2>Problem formulation</h2>
<p>Now we will formulate a conservation planing problem. To achieve this, we first specify which objects contain the planning unit and feature data (using the <code>problem</code> function). Next, we specify that we want to use the minimum set objective function (using the <code>add_min_set_objective</code> function). This objective function indicates that we wish to minimize the total cost of planning units selected by the prioritization. We then specify boundary penalties reduce spatial fragmentation in the resulting prioritization (using the <code>add_boundary_penalties</code> function; see the <a href="calibrating_trade-offs.html"><em>Calibrating trade-offs</em> vignette</a> for details on calibrating the penalty value). We also specify representation targets to ensure the resulting prioritization provides adequate coverage of each vegetation community (using the <code>add_relative_targets</code> function). Specifically, we specify targets to ensure at least 17% of the spatial extent of each vegetation community (based on the <a href="https://www.cbd.int/sp/targets/">Aichi Target 11</a>). Additionally, we set constraints to ensure that planning units predominately covered by existing protected areas are selected by the prioritization (using the <code>add_locked_in_constraints</code> function). Finally, we specify that the prioritization should either select – or not select – planning units for prioritization (using the <code>add_binary_decisions</code> function).</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># build problem</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>p1 <span class="ot">&lt;-</span> <span class="fu">problem</span>(tas_pu, tas_features, <span class="at">cost_column =</span> <span class="st">&quot;cost&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>      <span class="fu">add_min_set_objective</span>() <span class="sc">%&gt;%</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>      <span class="fu">add_boundary_penalties</span>(<span class="at">penalty =</span> <span class="fl">0.005</span>) <span class="sc">%&gt;%</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>      <span class="fu">add_relative_targets</span>(<span class="fl">0.17</span>) <span class="sc">%&gt;%</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>      <span class="fu">add_locked_in_constraints</span>(<span class="st">&quot;locked_in&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>      <span class="fu">add_binary_decisions</span>()</span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a><span class="co"># print the problem</span></span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(p1)</span></code></pre></div>
<pre><code>## Conservation Problem
##   planning units: SpatialPolygonsDataFrame (1130 units)
##   cost:           min: 0.19249, max: 61.92727
##   features:       tas_features.1, tas_features.2, tas_features.3, ... (62 features)
##   objective:      Minimum set objective 
##   targets:        Relative targets [targets (min: 0.17, max: 0.17)]
##   decisions:      Binary decision 
##   constraints:    &lt;Locked in planning units [257 locked units]&gt;
##   penalties:      &lt;Boundary penalties [edge factor (min: 0.5, max: 0.5), penalty (0.005), zones]&gt;
##   portfolio:      default
##   solver:         default</code></pre>
</div>
<div id="prioritization" class="section level2">
<h2>Prioritization</h2>
<p>We can now solve the problem formulation (<code>p1</code>) to generate a prioritization (using the <code>solve</code> function). The <em>prioritizr</em> R package supports a range of different exact algorithm solvers, including <em>Gurobi</em>, <em>IBM CPLEX</em>, <em>CBC</em>, <em>Rsymphony</em>, and <em>lpsymphony</em>. Although there are benefits and limitations associated with each of these different solvers, they should return similar results. Note that you will need at least one solver installed on your system to generate prioritizations. Since we did not specify a solver when building the problem, the <em>prioritizr R</em> package will automatically select the best available solver installed. We recommend using the <em>Gurobi</em> solver if possible, and have used it for this tutorial (see the <em>Gurobi Installation Guide</em> vignette for installation instructions). After solving the problem, the prioritization will be stored in the <code>solution_1</code> column of the <code>s1</code> object.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># solve problem</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>s1 <span class="ot">&lt;-</span> <span class="fu">solve</span>(p1)</span></code></pre></div>
<pre><code>## Gurobi Optimizer version 9.5.0 build v9.5.0rc5 (linux64)
## Thread count: 4 physical cores, 8 logical processors, using up to 1 threads
## Optimize a model with 6358 rows, 4278 columns and 14496 nonzeros
## Model fingerprint: 0xc7d1c688
## Variable types: 0 continuous, 4278 integer (4278 binary)
## Coefficient statistics:
##   Matrix range     [2e-06, 4e+01]
##   Objective range  [5e-01, 1e+03]
##   Bounds range     [1e+00, 1e+00]
##   RHS range        [1e-01, 1e+02]
## Found heuristic solution: objective 37703.827706
## Found heuristic solution: objective 27817.085072
## Presolve removed 2077 rows and 1375 columns
## Presolve time: 0.05s
## Presolved: 4281 rows, 2903 columns, 9594 nonzeros
## Found heuristic solution: objective 24454.499456
## Variable types: 0 continuous, 2903 integer (2903 binary)
## Found heuristic solution: objective 23413.987477
## Root relaxation presolved: 4281 rows, 2903 columns, 9594 nonzeros
## 
## 
## Root relaxation: objective 1.955605e+04, 1793 iterations, 0.12 seconds (0.19 work units)
## 
##     Nodes    |    Current Node    |     Objective Bounds      |     Work
##  Expl Unexpl |  Obj  Depth IntInf | Incumbent    BestBd   Gap | It/Node Time
## 
##      0     0 19556.0531    0 1615 23413.9875 19556.0531  16.5%     -    0s
## H    0     0                    23045.733138 19556.0531  15.1%     -    0s
## H    0     0                    22977.771015 19556.0531  14.9%     -    0s
##      0     0 19836.0586    0 1855 22977.7710 19836.0586  13.7%     -    0s
## H    0     0                    21702.297403 19836.0586  8.60%     -    0s
## 
## Cutting planes:
##   Gomory: 2
##   Cover: 5
##   MIR: 4
##   GUB cover: 1
##   Zero half: 2
##   RLT: 10
## 
## Explored 1 nodes (2393 simplex iterations) in 0.45 seconds (0.60 work units)
## Thread count was 1 (of 8 available processors)
## 
## Solution count 7: 21702.3 22977.8 23045.7 ... 37703.8
## 
## Optimal solution found (tolerance 1.00e-01)
## Best objective 2.170229740250e+04, best bound 1.983605855899e+04, gap 8.5993%</code></pre>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># plot map of prioritization</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">st_as_sf</span>(s1[, <span class="st">&quot;solution_1&quot;</span>]), <span class="at">main =</span> <span class="st">&quot;Prioritization&quot;</span>,</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>     <span class="at">pal =</span> <span class="fu">c</span>(<span class="st">&quot;grey90&quot;</span>, <span class="st">&quot;darkgreen&quot;</span>))</span></code></pre></div>
<p><img src="prioritizr_files/figure-html/unnamed-chunk-7-1.png" width="336" style="display: block; margin: auto;" /></p>
</div>
<div id="feature-representation" class="section level2">
<h2>Feature representation</h2>
<p>Let’s examine how well the vegetation communities are represented by existing protected areas and the prioritization.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co"># create column with existing protected areas</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>tas_pu<span class="sc">$</span>pa <span class="ot">&lt;-</span> <span class="fu">round</span>(tas_pu<span class="sc">$</span>locked_in)</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a><span class="co"># calculate feature representation statistics based on existing protected areas</span></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>tc_pa <span class="ot">&lt;-</span> <span class="fu">eval_target_coverage_summary</span>(p1, tas_pu[, <span class="st">&quot;pa&quot;</span>])</span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(tc_pa)</span></code></pre></div>
<pre><code>## # A tibble: 62 × 9
##    feature     met   total_amount absolute_target absolute_held absolute_shortf…
##    &lt;chr&gt;       &lt;lgl&gt;        &lt;dbl&gt;           &lt;dbl&gt;         &lt;dbl&gt;            &lt;dbl&gt;
##  1 tas_featur… FALSE         33.9            5.77         0.556             5.21
##  2 tas_featur… FALSE        170.            28.9         13.5              15.4 
##  3 tas_featur… FALSE         24.0            4.08         2.00              2.08
##  4 tas_featur… FALSE         32.8            5.57         1.37              4.19
##  5 tas_featur… FALSE         24.8            4.21         0                 4.21
##  6 tas_featur… FALSE         22.0            3.74         0                 3.74
##  7 tas_featur… FALSE         16.4            2.78         0                 2.78
##  8 tas_featur… FALSE         43.0            7.31         5.12              2.19
##  9 tas_featur… FALSE        388.            66.0         22.4              43.5 
## 10 tas_featur… FALSE         14.5            2.47         0                 2.47
## # … with 52 more rows, and 3 more variables: relative_target &lt;dbl&gt;,
## #   relative_held &lt;dbl&gt;, relative_shortfall &lt;dbl&gt;</code></pre>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co"># calculate  feature representation statistics based on the prioritization</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>tc_s1 <span class="ot">&lt;-</span> <span class="fu">eval_target_coverage_summary</span>(p1, s1[, <span class="st">&quot;solution_1&quot;</span>])</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(tc_s1)</span></code></pre></div>
<pre><code>## # A tibble: 62 × 9
##    feature     met   total_amount absolute_target absolute_held absolute_shortf…
##    &lt;chr&gt;       &lt;lgl&gt;        &lt;dbl&gt;           &lt;dbl&gt;         &lt;dbl&gt;            &lt;dbl&gt;
##  1 tas_featur… TRUE          33.9            5.77          5.97                0
##  2 tas_featur… TRUE         170.            28.9          43.8                 0
##  3 tas_featur… TRUE          24.0            4.08          4.25                0
##  4 tas_featur… TRUE          32.8            5.57          6.37                0
##  5 tas_featur… TRUE          24.8            4.21          4.98                0
##  6 tas_featur… TRUE          22.0            3.74          7.00                0
##  7 tas_featur… TRUE          16.4            2.78          3.00                0
##  8 tas_featur… TRUE          43.0            7.31          8.12                0
##  9 tas_featur… TRUE         388.            66.0          70.8                 0
## 10 tas_featur… TRUE          14.5            2.47          2.91                0
## # … with 52 more rows, and 3 more variables: relative_target &lt;dbl&gt;,
## #   relative_held &lt;dbl&gt;, relative_shortfall &lt;dbl&gt;</code></pre>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co"># explore representation by existing protected areas</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a><span class="do">## calculate number of features adequately represented by existing protected</span></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a><span class="do">## areas</span></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(tc_pa<span class="sc">$</span>met)</span></code></pre></div>
<pre><code>## [1] 16</code></pre>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="do">## summarize representation (values show percent coverage)</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(tc_pa<span class="sc">$</span>relative_held <span class="sc">*</span> <span class="dv">100</span>)</span></code></pre></div>
<pre><code>##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
##   0.000   0.000   4.845  13.909  16.995  58.488</code></pre>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="do">## visualize representation  (values show percent coverage)</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a><span class="fu">hist</span>(tc_pa<span class="sc">$</span>relative_held <span class="sc">*</span> <span class="dv">100</span>,</span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>     <span class="at">main =</span> <span class="st">&quot;Feature representation by existing protected areas&quot;</span>,</span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>     <span class="at">xlim =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">100</span>),</span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>     <span class="at">xlab =</span> <span class="st">&quot;Percent coverage of features (%)&quot;</span>)</span></code></pre></div>
<p><img src="prioritizr_files/figure-html/unnamed-chunk-8-1.png" width="672" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="co"># explore representation by prioritization</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a><span class="do">## summarize representation (values show percent coverage)</span></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(tc_s1<span class="sc">$</span>relative_held <span class="sc">*</span> <span class="dv">100</span>)</span></code></pre></div>
<pre><code>##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
##   17.14   20.18   25.56   33.83   43.19  100.00</code></pre>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="do">## calculate number of features adequately represented by the prioritization</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(tc_s1<span class="sc">$</span>met)</span></code></pre></div>
<pre><code>## [1] 62</code></pre>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="do">## visualize representation  (values show percent coverage)</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a><span class="fu">hist</span>(tc_s1<span class="sc">$</span>relative_held <span class="sc">*</span> <span class="dv">100</span>,</span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>     <span class="at">main =</span> <span class="st">&quot;Feature representation by prioritization&quot;</span>,</span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a>     <span class="at">xlim =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">100</span>),</span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a>     <span class="at">xlab =</span> <span class="st">&quot;Percent coverage of features (%)&quot;</span>)</span></code></pre></div>
<p><img src="prioritizr_files/figure-html/unnamed-chunk-8-2.png" width="672" style="display: block; margin: auto;" /></p>
<p>We can see that representation of the vegetation communities by existing protected areas is remarkably poor. For example, many of the vegetation communities have nearly zero coverage by existing protected areas. In other words, are almost entirely absent from existing protected areas. We can also see that all vegetation communities have at least 17% coverage by the prioritization – meaning that it meets the representation targets for all of the features.</p>
</div>
<div id="irreplaceability" class="section level2">
<h2>Irreplaceability</h2>
<p>After generating the prioritization, we can examine the relative importance of planning units selected by the prioritization. This can be useful to identify critically important planning units for conservation – in other words, places that contain biodiversity features which cannot be represented anywhere else – and schedule implementation of the prioritization. To achieve this, we will use the Ferrier metric <span class="citation">(Ferrier <em>et al.</em> 2000)</span>.</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="co"># calculate irreplaceability</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>irrep_s1 <span class="ot">&lt;-</span> <span class="fu">eval_ferrier_importance</span>(p1, s1[<span class="st">&quot;solution_1&quot;</span>])</span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(irrep_s1)</span></code></pre></div>
<pre><code>## class       : SpatialPolygonsDataFrame 
## features    : 1130 
## extent      : 298809.6, 613818.8, 5167775, 5502544  (xmin, xmax, ymin, ymax)
## crs         : +proj=utm +zone=55 +south +datum=WGS84 +units=m +no_defs +ellps=WGS84 +towgs84=0,0,0 
## variables   : 63
## names       :      tas_features.1,     tas_features.2,      tas_features.3,      tas_features.4,      tas_features.5,    tas_features.6,      tas_features.7,      tas_features.8,      tas_features.9,     tas_features.10,   tas_features.11,     tas_features.12,    tas_features.13,   tas_features.14,     tas_features.15, ... 
## min values  :                   0,                  0,                   0,                   0,                   0,                 0,                   0,                   0,                   0,                   0,                 0,                   0,                  0,                 0,                   0, ... 
## max values  : 0.00701698358267939, 0.0066775439067078, 0.00248592654648536, 0.00594796984735507, 0.00219848915242862, 0.221777713215686, 0.00352460472775105, 0.00362070014565918, 0.00736044135306282, 0.00691379490000091, 0.225419698234888, 0.00465456428213494, 0.0025318990590772, 0.010045386228309, 0.00609443943530227, ...</code></pre>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="co"># manually coerce values for planning units not selected in prioritization</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a><span class="co"># to NA, so that they are shown in white</span></span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>irrep_s1<span class="sc">$</span>plot_total <span class="ot">&lt;-</span> irrep_s1<span class="sc">$</span>total</span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a>irrep_s1<span class="sc">$</span>plot_total[s1<span class="sc">$</span>solution_1 <span class="sc">&lt;</span> <span class="fl">0.5</span>] <span class="ot">&lt;-</span> <span class="cn">NA_real_</span></span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a><span class="co"># plot map of overall importance scores</span></span>
<span id="cb30-7"><a href="#cb30-7" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">st_as_sf</span>(irrep_s1[, <span class="st">&quot;plot_total&quot;</span>]), <span class="at">main =</span> <span class="st">&quot;Overall importance&quot;</span>)</span></code></pre></div>
<p><img src="prioritizr_files/figure-html/unnamed-chunk-9-1.png" width="336" style="display: block; margin: auto;" /></p>
</div>
<div id="portfolios" class="section level2">
<h2>Portfolios</h2>
<p>Conservation planning exercises often involve generating multiple different prioritizations. This can help decision makers consider different options, and provide starting points for building consensus among stakeholders. To generate a range of different prioritizations given the same problem formulation, we can use portfolio functions. Here we will use the gap portfolio to generate 1000 solutions that are within 30% of optimality. Please note that you will need to have the <em>Gurobi</em> solver installed to use this specific portfolio. If you don’thave access to <em>Gurobi</em>, you could try using the shuffle portfolio instead (using the <code>add_shuffle_portfolio</code> function).</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="co"># create new problem with a portfolio added to it</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>p2 <span class="ot">&lt;-</span> p1 <span class="sc">%&gt;%</span></span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>      <span class="fu">add_gap_portfolio</span>(<span class="at">number_solutions =</span> <span class="dv">1000</span>, <span class="at">pool_gap =</span> <span class="fl">0.2</span>)</span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a><span class="co"># print problem</span></span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(p2)</span></code></pre></div>
<pre><code>## Conservation Problem
##   planning units: SpatialPolygonsDataFrame (1130 units)
##   cost:           min: 0.19249, max: 61.92727
##   features:       tas_features.1, tas_features.2, tas_features.3, ... (62 features)
##   objective:      Minimum set objective 
##   targets:        Relative targets [targets (min: 0.17, max: 0.17)]
##   decisions:      Binary decision 
##   constraints:    &lt;Locked in planning units [257 locked units]&gt;
##   penalties:      &lt;Boundary penalties [edge factor (min: 0.5, max: 0.5), penalty (0.005), zones]&gt;
##   portfolio:      Gap portfolio [number_solutions (1000), pool_gap (0.2)]
##   solver:         default</code></pre>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="co"># generate prioritizations</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>prt <span class="ot">&lt;-</span> <span class="fu">solve</span>(p2)</span></code></pre></div>
<pre><code>## Gurobi Optimizer version 9.5.0 build v9.5.0rc5 (linux64)
## Thread count: 4 physical cores, 8 logical processors, using up to 1 threads
## Optimize a model with 6358 rows, 4278 columns and 14496 nonzeros
## Model fingerprint: 0xc7d1c688
## Variable types: 0 continuous, 4278 integer (4278 binary)
## Coefficient statistics:
##   Matrix range     [2e-06, 4e+01]
##   Objective range  [5e-01, 1e+03]
##   Bounds range     [1e+00, 1e+00]
##   RHS range        [1e-01, 1e+02]
## Found heuristic solution: objective 37703.827706
## Found heuristic solution: objective 27817.085072
## Presolve removed 1434 rows and 258 columns
## Presolve time: 0.02s
## Presolved: 4924 rows, 4020 columns, 10889 nonzeros
## Variable types: 0 continuous, 4020 integer (4020 binary)
## Found heuristic solution: objective 27660.082384
## Root relaxation presolved: 4924 rows, 4020 columns, 10889 nonzeros
## 
## 
## Root relaxation: objective 1.954728e+04, 1905 iterations, 0.11 seconds (0.18 work units)
## 
##     Nodes    |    Current Node    |     Objective Bounds      |     Work
##  Expl Unexpl |  Obj  Depth IntInf | Incumbent    BestBd   Gap | It/Node Time
## 
##      0     0 19547.2818    0 1731 27660.0824 19547.2818  29.3%     -    0s
## H    0     0                    26145.941445 19547.2818  25.2%     -    0s
## H    0     0                    24520.062189 19547.2818  20.3%     -    0s
##      0     0 19820.3758    0 1966 24520.0622 19820.3758  19.2%     -    0s
## H    0     0                    24498.644854 19820.3758  19.1%     -    0s
## H    0     0                    23263.485453 19820.3758  14.8%     -    0s
## H    0     0                    22049.956515 19820.3758  10.1%     -    0s
##      0     0 19847.8388    0 1956 22049.9565 19847.8388  10.0%     -    0s
##      0     0 19854.3259    0 1960 22049.9565 19854.3259  10.0%     -    0s
##      0     0 19854.3439    0 1958 22049.9565 19854.3439  10.0%     -    0s
##      0     0 19924.6889    0 1682 22049.9565 19924.6889  9.64%     -    0s
##      0     0 19936.2410    0 1978 22049.9565 19936.2410  9.59%     -    0s
##      0     0 19937.4882    0 2005 22049.9565 19937.4882  9.58%     -    0s
##      0     0 19937.6761    0 2005 22049.9565 19937.6761  9.58%     -    0s
##      0     0 19968.7333    0 1691 22049.9565 19968.7333  9.44%     -    0s
##      0     0 19970.0998    0 1714 22049.9565 19970.0998  9.43%     -    0s
##      0     0 19970.4702    0 1714 22049.9565 19970.4702  9.43%     -    0s
##      0     0 19983.7957    0 1748 22049.9565 19983.7957  9.37%     -    0s
##      0     0 19984.9623    0 1754 22049.9565 19984.9623  9.37%     -    0s
##      0     0 19985.0928    0 1754 22049.9565 19985.0928  9.36%     -    0s
##      0     0 19990.8490    0 2040 22049.9565 19990.8490  9.34%     -    1s
##      0     0 19991.1771    0 2041 22049.9565 19991.1771  9.34%     -    1s
##      0     0 19991.9721    0 2039 22049.9565 19991.9721  9.33%     -    1s
##      0     0 19992.1795    0 2040 22049.9565 19992.1795  9.33%     -    1s
##      0     0 19995.3797    0 1784 22049.9565 19995.3797  9.32%     -    1s
##      0     0 19995.3847    0 1788 22049.9565 19995.3847  9.32%     -    1s
##      0     0 19995.5716    0 2038 22049.9565 19995.5716  9.32%     -    1s
##      0     0 19995.8374    0 2037 22049.9565 19995.8374  9.32%     -    1s
##      0     0 19996.1519    0 2039 22049.9565 19996.1519  9.31%     -    1s
##      0     0 19996.1519    0 2039 22049.9565 19996.1519  9.31%     -    1s
##      0     2 19996.6237    0 2039 22049.9565 19996.6237  9.31%     -    1s
## H   27    27                    21471.431466 19996.6237  6.87%   117    1s
## H   52    52                    21371.814002 19996.6237  6.43%   115    2s
## H   54    54                    21254.060213 19996.6237  5.92%   117    2s
## H  108   108                    21204.105802 19996.6237  5.69%   123    3s
## H  162   162                    21202.636805 19996.6237  5.69%   104    3s
## H  286   286                    21166.904542 19996.6237  5.53%  69.2    3s
## H  606   599                    20993.604430 19996.6237  4.75%  32.8    4s
##    608     1 20993.6044  242 2039 20993.6044 19998.3522  4.74%  32.7    5s
##    637    17 20993.6044  227 1965 20993.6044 20028.5965  4.60%  31.2   10s
##    668    17 20993.6044  521 1965 20993.6044 20032.3680  4.58%  36.7   15s
## H  750    81                    20939.026645 20082.6816  4.09%  61.7   19s
##    790   123 20985.3775   83  351 20939.0266 20082.6816  4.09%  64.8   20s
## H 1231   560                    20924.385117 20082.6816  4.02%  44.7   22s
##   1322   653 20905.1048   70  918 20924.3851 20084.4398  4.01%  59.4   25s
## H 1975  1297                    20813.687049 20092.6890  3.46%  50.6   27s
##   2457  1779 20483.7470   40 1819 20813.6870 20099.7124  3.43%  46.1   30s
##   3141  2461 20794.1263   54 1444 20813.6870 20109.8128  3.38%  45.5   35s
##   4698  3644 20472.0393   36 1870 20813.6870 20148.3760  3.20%  38.3   40s
##   5021  3770 20969.2800   54 1494 20813.6870 20153.3149  3.17%  40.0   45s
##   5265  3847 20808.1586   66 1040 20813.6870 20155.9610  3.16%  42.9   50s
##   6033  4516 20746.2440   38 1864 20813.6870 20167.5494  3.10%  41.3   55s
##   6500  4737 20341.8201   32 1726 20813.6870 20187.3603  3.01%  42.0   60s
##   6972  4646 21513.4180   62 1483 20813.6870 20193.4398  2.98%  42.7   65s
##   7246  4729 20820.2519   42 1680 20813.6870 20195.9413  2.97%  44.3   70s
## 
## Cutting planes:
##   Gomory: 7
##   Cover: 4
##   MIR: 33
##   StrongCG: 1
##   Flow cover: 10
##   GUB cover: 2
##   Zero half: 22
##   RLT: 24
## 
## Explored 7780 nodes (344017 simplex iterations) in 73.61 seconds (80.68 work units)
## Thread count was 1 (of 8 available processors)
## 
## Solution count 1000: 20813.7 20924.4 20939 ... 22439.4
## 
## Optimal solution found (tolerance 1.00e-01)
## Best objective 2.081368704941e+04, best bound 2.019762823706e+04, gap 2.9599%</code></pre>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(prt)</span></code></pre></div>
<pre><code>## class       : SpatialPolygonsDataFrame 
## features    : 1130 
## extent      : 298809.6, 613818.8, 5167775, 5502544  (xmin, xmax, ymin, ymax)
## crs         : +proj=utm +zone=55 +south +datum=WGS84 +units=m +no_defs +ellps=WGS84 +towgs84=0,0,0 
## variables   : 1005
## names       :   id,              cost, status, locked_in, locked_out, solution_1, solution_2, solution_3, solution_4, solution_5, solution_6, solution_7, solution_8, solution_9, solution_10, ... 
## min values  :    1, 0.192488262910798,      0,         0,          0,          0,          0,          0,          0,          0,          0,          0,          0,          0,           0, ... 
## max values  : 1130,  61.9272727272727,      2,         1,          0,          1,          1,          1,          1,          1,          1,          1,          1,          1,           1, ...</code></pre>
<p>After generating all these prioritizations, we now want some way to visualize them. Because it would be onerous to look at each and every prioritization individually, we will use statistical analyses to help us. We can visualize the differences between these different prioritizations – based on which planning units they selected – using a hierarchical cluster analysis <span class="citation">(Harris <em>et al.</em> 2014)</span>.</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="co"># extract solutions</span></span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>prt_results <span class="ot">&lt;-</span> prt<span class="sc">@</span>data[, <span class="fu">startsWith</span>(<span class="fu">names</span>(prt), <span class="st">&quot;solution_&quot;</span>), ]</span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a><span class="co"># calculate pair-wise distances between different prioritizations for analysis</span></span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a>prt_dists <span class="ot">&lt;-</span> vegan<span class="sc">::</span><span class="fu">vegdist</span>(<span class="fu">t</span>(prt_results), <span class="at">method =</span> <span class="st">&quot;jaccard&quot;</span>, <span class="at">binary =</span> <span class="cn">TRUE</span>)</span>
<span id="cb37-6"><a href="#cb37-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-7"><a href="#cb37-7" aria-hidden="true" tabindex="-1"></a><span class="co"># run cluster analysis</span></span>
<span id="cb37-8"><a href="#cb37-8" aria-hidden="true" tabindex="-1"></a>prt_clust <span class="ot">&lt;-</span> <span class="fu">hclust</span>(<span class="fu">as.dist</span>(prt_dists), <span class="at">method =</span> <span class="st">&quot;average&quot;</span>)</span>
<span id="cb37-9"><a href="#cb37-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-10"><a href="#cb37-10" aria-hidden="true" tabindex="-1"></a><span class="co"># visualize clusters</span></span>
<span id="cb37-11"><a href="#cb37-11" aria-hidden="true" tabindex="-1"></a>opar <span class="ot">&lt;-</span> <span class="fu">par</span>()</span>
<span id="cb37-12"><a href="#cb37-12" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">oma =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>), <span class="at">mar=</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="fl">4.1</span>, <span class="fl">1.5</span>, <span class="fl">2.1</span>))</span>
<span id="cb37-13"><a href="#cb37-13" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(prt_clust, <span class="at">labels =</span> <span class="cn">FALSE</span>, <span class="at">sub =</span> <span class="cn">NA</span>, <span class="at">xlab =</span> <span class="st">&quot;&quot;</span>,</span>
<span id="cb37-14"><a href="#cb37-14" aria-hidden="true" tabindex="-1"></a>     <span class="at">main =</span> <span class="st">&quot;Different prioritizations in portfolio&quot;</span>)</span>
<span id="cb37-15"><a href="#cb37-15" aria-hidden="true" tabindex="-1"></a><span class="fu">suppressWarnings</span>(<span class="fu">par</span>(opar))</span></code></pre></div>
<p><img src="prioritizr_files/figure-html/unnamed-chunk-11-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>We can see that there are approximately six main groups of prioritizations in the portfolio. To explore these different groups, let’s conduct another cluster analysis (i.e. a <em>k</em>-medoids analysis) to extract the most representative prioritization from each of these groups. In other words, we will run another statistical analysis to find the most central prioritization within each group.</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="co"># run k-medoids analysis</span></span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>prt_med <span class="ot">&lt;-</span> <span class="fu">pam</span>(prt_dists, <span class="at">k =</span> <span class="dv">6</span>)</span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a><span class="co"># extract names of prioritizations that are most central for each group.</span></span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true" tabindex="-1"></a>prt_med_names <span class="ot">&lt;-</span> prt_med<span class="sc">$</span>medoids</span>
<span id="cb38-6"><a href="#cb38-6" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(prt_med_names)</span></code></pre></div>
<pre><code>## [1] &quot;solution_29&quot;  &quot;solution_228&quot; &quot;solution_41&quot;  &quot;solution_242&quot; &quot;solution_663&quot;
## [6] &quot;solution_447&quot;</code></pre>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="co"># create a copy of prt and set values for locked in planning units to -1</span></span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a><span class="co"># so we can easily visualize differences between prioritizations</span></span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a>prt2 <span class="ot">&lt;-</span> prt[, prt_med_names]</span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a>prt2<span class="sc">@</span>data[<span class="fu">which</span>(tas_pu<span class="sc">$</span>locked_in <span class="sc">&gt;</span> <span class="fl">0.5</span>), prt_med_names] <span class="ot">&lt;-</span> <span class="sc">-</span><span class="dv">1</span></span>
<span id="cb40-5"><a href="#cb40-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-6"><a href="#cb40-6" aria-hidden="true" tabindex="-1"></a><span class="co"># plot a map showing main different prioritizations</span></span>
<span id="cb40-7"><a href="#cb40-7" aria-hidden="true" tabindex="-1"></a><span class="co"># dark grey: locked in planning units</span></span>
<span id="cb40-8"><a href="#cb40-8" aria-hidden="true" tabindex="-1"></a><span class="co"># grey: planning units not selected</span></span>
<span id="cb40-9"><a href="#cb40-9" aria-hidden="true" tabindex="-1"></a><span class="co"># green: selected planning units</span></span>
<span id="cb40-10"><a href="#cb40-10" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">st_as_sf</span>(prt2), <span class="at">pal =</span> <span class="fu">c</span>(<span class="st">&quot;grey60&quot;</span>, <span class="st">&quot;grey90&quot;</span>, <span class="st">&quot;darkgreen&quot;</span>))</span></code></pre></div>
<p><img src="prioritizr_files/figure-html/unnamed-chunk-12-1.png" width="672" style="display: block; margin: auto;" /></p>
</div>
<div id="marxan-compatibility" class="section level2">
<h2><em>Marxan</em> compatibility</h2>
<p>The <em>prioritizr R</em> package provides functionality to help <em>Marxan</em> users generate prioritizations. Specifically, it can import conservation planning data prepared for <em>Marxan</em>, and can generate prioritizations using a similar problem formulation as <em>Marxan</em> <span class="citation">(based on Beyer <em>et al.</em> 2016)</span>. Indeed, the problem formulation presented earlier in this vignette is very similar to that used by <em>Marxan</em>. The key difference is that the problem formulation we specified earlier uses “hard constraints” for feature representation, and <em>Marxan</em> uses “soft constraints” for feature representation. This means that prioritization we generated earlier was mathematically guaranteed to reach the targets for all features. However, if we used <em>Marxan</em> to generate the prioritization, then we could have produced a prioritization that would fail to reach targets (depending the <em>Species Penalty Factors</em> used to generate the prioritization). In addition to these differences in terms problem formulation, the <em>prioritizr R</em> package uses exact algorithms – instead of the simulated annealing algorithm – which ensures that we obtain prioritizations that are near optimal.</p>
<p>Here we will show the <em>prioritizr R</em> package can import <em>Marxan</em> data and generate a prioritization. To begin with, let’s import a conservation planning data prepared for <em>Marxan</em>.</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="co"># import data</span></span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a><span class="do">## planning unit data</span></span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a>pu_path <span class="ot">&lt;-</span> <span class="fu">system.file</span>(<span class="st">&quot;extdata/input/pu.dat&quot;</span>, <span class="at">package =</span> <span class="st">&quot;prioritizr&quot;</span>)</span></code></pre></div>
<pre><code>## Warning in read.dcf(file.path(p, &quot;DESCRIPTION&quot;), c(&quot;Package&quot;, &quot;Version&quot;)):
## cannot open compressed file &#39;/tmp/RtmpqxJVwj/temp_libpath112436a85bdf9/
## prioritizr/DESCRIPTION&#39;, probable reason &#39;No such file or directory&#39;</code></pre>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a>pu_data <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(pu_path, <span class="at">header =</span> <span class="cn">TRUE</span>, <span class="at">stringsAsFactors =</span> <span class="cn">FALSE</span>)</span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">head</span>(pu_data))</span></code></pre></div>
<pre><code>##   id       cost status    xloc     yloc
## 1  3        0.0      0 1116623 -4493479
## 2 30   752727.5      3 1110623 -4496943
## 3 56  3734907.5      0 1092623 -4500408
## 4 58  1695902.1      0 1116623 -4500408
## 5 84  3422025.6      0 1098623 -4503872
## 6 85 17890758.4      0 1110623 -4503872</code></pre>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="do">## feature data</span></span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a>spec_path <span class="ot">&lt;-</span> <span class="fu">system.file</span>(<span class="st">&quot;extdata/input/spec.dat&quot;</span>, <span class="at">package =</span> <span class="st">&quot;prioritizr&quot;</span>)</span></code></pre></div>
<pre><code>## Warning in read.dcf(file.path(p, &quot;DESCRIPTION&quot;), c(&quot;Package&quot;, &quot;Version&quot;)):
## cannot open compressed file &#39;/tmp/RtmpqxJVwj/temp_libpath112436a85bdf9/
## prioritizr/DESCRIPTION&#39;, probable reason &#39;No such file or directory&#39;</code></pre>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a>spec_data <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(spec_path, <span class="at">header =</span> <span class="cn">TRUE</span>, <span class="at">stringsAsFactors =</span> <span class="cn">FALSE</span>)</span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">head</span>(spec_data))</span></code></pre></div>
<pre><code>##   id prop spf   name
## 1 10  0.3   1  bird1
## 2 11  0.3   1  nvis2
## 3 12  0.3   1  nvis8
## 4 13  0.3   1  nvis9
## 5 14  0.3   1 nvis14
## 6 15  0.3   1 nvis20</code></pre>
<div class="sourceCode" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="do">## amount of each feature within each planning unit data</span></span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a>puvspr_path <span class="ot">&lt;-</span> <span class="fu">system.file</span>(<span class="st">&quot;extdata/input/puvspr.dat&quot;</span>, <span class="at">package =</span> <span class="st">&quot;prioritizr&quot;</span>)</span></code></pre></div>
<pre><code>## Warning in read.dcf(file.path(p, &quot;DESCRIPTION&quot;), c(&quot;Package&quot;, &quot;Version&quot;)):
## cannot open compressed file &#39;/tmp/RtmpqxJVwj/temp_libpath112436a85bdf9/
## prioritizr/DESCRIPTION&#39;, probable reason &#39;No such file or directory&#39;</code></pre>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a>puvspr_data <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(puvspr_path, <span class="at">header =</span> <span class="cn">TRUE</span>, <span class="at">stringsAsFactors =</span> <span class="cn">FALSE</span>)</span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">head</span>(puvspr_data))</span></code></pre></div>
<pre><code>##   species  pu     amount
## 1      26  56 1203448.84
## 2      26  58  451670.10
## 3      26  84  680473.75
## 4      26  85   97356.24
## 5      26  86   78034.76
## 6      26 111 4783274.17</code></pre>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="do">## boundary data</span></span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true" tabindex="-1"></a>bound_path <span class="ot">&lt;-</span> <span class="fu">system.file</span>(<span class="st">&quot;extdata/input/bound.dat&quot;</span>, <span class="at">package =</span> <span class="st">&quot;prioritizr&quot;</span>)</span></code></pre></div>
<pre><code>## Warning in read.dcf(file.path(p, &quot;DESCRIPTION&quot;), c(&quot;Package&quot;, &quot;Version&quot;)):
## cannot open compressed file &#39;/tmp/RtmpqxJVwj/temp_libpath112436a85bdf9/
## prioritizr/DESCRIPTION&#39;, probable reason &#39;No such file or directory&#39;</code></pre>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a>bound_data <span class="ot">&lt;-</span> <span class="fu">read.table</span>(bound_path, <span class="at">header =</span> <span class="cn">TRUE</span>, <span class="at">stringsAsFactors =</span> <span class="cn">FALSE</span>)</span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">head</span>(bound_data))</span></code></pre></div>
<pre><code>##   id1 id2 boundary
## 1   3   3    16000
## 2   3  30     4000
## 3   3  58     4000
## 4  30  30    12000
## 5  30  58     4000
## 6  30  85     4000</code></pre>
<p>After importing the data, we can now generate a prioritization based on the <em>Marxan</em> problem formulation (using the <code>marxan_problem</code> function). <strong>Please note that this function does not generate prioritizations using <em>Marxan</em>.</strong> Instead, it uses the data to create an optimization problem formulation similar to <em>Marxan</em> – using hard constraints instead of soft constraints – and uses an exact algorithm solver to generate a prioritization.</p>
<div class="sourceCode" id="cb57"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="co"># create problem</span></span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a>p2 <span class="ot">&lt;-</span> <span class="fu">marxan_problem</span>(pu_data, spec_data, puvspr_data, bound_data,</span>
<span id="cb57-3"><a href="#cb57-3" aria-hidden="true" tabindex="-1"></a>                     <span class="at">blm =</span> <span class="fl">0.0005</span>)</span>
<span id="cb57-4"><a href="#cb57-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-5"><a href="#cb57-5" aria-hidden="true" tabindex="-1"></a><span class="co"># print problem</span></span>
<span id="cb57-6"><a href="#cb57-6" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(p2)</span></code></pre></div>
<pre><code>## Conservation Problem
##   planning units: data.frame (1751 units)
##   cost:           min: 0, max: 41569219.38232
##   features:       bird1, nvis2, nvis8, ... (17 features)
##   objective:      Minimum set objective 
##   targets:        Relative targets [targets (min: 0.3, max: 0.3)]
##   decisions:      default
##   constraints:    &lt;Locked out planning units [1 locked units]
##                    Locked in planning units [317 locked units]&gt;
##   penalties:      &lt;Boundary penalties [edge factor (min: 1, max: 1), penalty (5e-04), zones]&gt;
##   portfolio:      default
##   solver:         default</code></pre>
<div class="sourceCode" id="cb59"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="co"># solve problem</span></span>
<span id="cb59-2"><a href="#cb59-2" aria-hidden="true" tabindex="-1"></a>s2 <span class="ot">&lt;-</span> <span class="fu">solve</span>(p2)</span></code></pre></div>
<pre><code>## Gurobi Optimizer version 9.5.0 build v9.5.0rc5 (linux64)
## Thread count: 4 physical cores, 8 logical processors, using up to 1 threads
## Optimize a model with 10075 rows, 6780 columns and 24778 nonzeros
## Model fingerprint: 0x2652a1c2
## Variable types: 0 continuous, 6780 integer (6780 binary)
## Coefficient statistics:
##   Matrix range     [5e-01, 4e+07]
##   Objective range  [4e+00, 4e+07]
##   Bounds range     [1e+00, 1e+00]
##   RHS range        [5e+07, 3e+09]
## Warning: Model contains large rhs
##          Consider reformulating model or setting NumericFocus parameter
##          to avoid numerical issues.
## Found heuristic solution: objective 1.221185e+10
## Presolve removed 4707 rows and 3103 columns
## Presolve time: 0.05s
## Presolved: 5368 rows, 3677 columns, 12704 nonzeros
## Variable types: 0 continuous, 3677 integer (3677 binary)
## Found heuristic solution: objective 1.009922e+10
## Root relaxation presolved: 5368 rows, 3677 columns, 12704 nonzeros
## 
## 
## Root relaxation: objective 9.564577e+09, 493 iterations, 0.01 seconds (0.01 work units)
## 
##     Nodes    |    Current Node    |     Objective Bounds      |     Work
##  Expl Unexpl |  Obj  Depth IntInf | Incumbent    BestBd   Gap | It/Node Time
## 
##      0     0 9.5646e+09    0   20 1.0099e+10 9.5646e+09  5.29%     -    0s
## 
## Explored 1 nodes (493 simplex iterations) in 0.07 seconds (0.10 work units)
## Thread count was 1 (of 8 available processors)
## 
## Solution count 2: 1.00992e+10 1.22118e+10 
## 
## Optimal solution found (tolerance 1.00e-01)
## Best objective 1.009922392231e+10, best bound 9.564577117609e+09, gap 5.2939%</code></pre>
<div class="sourceCode" id="cb61"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a><span class="co"># print first six rows of solution object</span></span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">head</span>(s2))</span></code></pre></div>
<pre><code>##   id       cost status    xloc     yloc locked_in locked_out solution_1
## 1  3        0.0      0 1116623 -4493479     FALSE      FALSE          0
## 2 30   752727.5      3 1110623 -4496943     FALSE       TRUE          0
## 3 56  3734907.5      0 1092623 -4500408     FALSE      FALSE          0
## 4 58  1695902.1      0 1116623 -4500408     FALSE      FALSE          0
## 5 84  3422025.6      0 1098623 -4503872     FALSE      FALSE          0
## 6 85 17890758.4      0 1110623 -4503872     FALSE      FALSE          0</code></pre>
</div>
<div id="conclusion" class="section level2">
<h2>Conclusion</h2>
<p>This tutorial shows how the <em>prioritizr R</em> package can be used to build a conservation problem, generate a prioritization, evaluate prioritizations, and calculate importance scores to identify critical places. Although we explored just a few different functions for modifying the a conservation problem, the <em>prioritizr R</em> package provides many functions for specifying objectives, constraints, penalties, and decision variables, so that you can build and custom-tailor a conservation planning problem to suit your exact planning scenario. For further tutorials, please see the other package vignettes.</p>
</div>
<div id="references" class="section level2 unnumbered">
<h2 class="unnumbered">References</h2>
<div id="refs" class="references csl-bib-body hanging-indent">
<div id="ref-r3" class="csl-entry">
Ball, I.R., Possingham, H. &amp; Watts, M.E. (2009). <span class="nocase">Marxan and relatives: Software for spatial conservation prioritisation</span>. <em><span>Spatial Conservation Prioritisation: Quantitative Methods &amp; Computational Tools</span></em> (eds A. Moilanen, K.A. Wilson &amp; H. Possingham), pp. 185–189. Oxford University Press, Oxford, UK.
</div>
<div id="ref-r1" class="csl-entry">
Beyer, H.L., Dujardin, Y., Watts, M.E. &amp; Possingham, H.P. (2016). Solving conservation planning problems with integer linear programming. <em>Ecological Modelling</em>, <em>328</em>, 14–22.
</div>
<div id="ref-r34" class="csl-entry">
Ferrier, S., Pressey, R.L. &amp; Barrett, T.W. (2000). A new predictor of the irreplaceability of areas for achieving a conservation goal, its application to real-world planning, and a research agenda for further refinement. <em>Biological Conservation</em>, <em>93</em>, 303–325.
</div>
<div id="ref-r35" class="csl-entry">
Harris, L.R., Watts, M.E., Nel, R., Schoeman, D.S. &amp; Possingham, H.P. (2014). Using multivariate statistics to explore trade-offs among spatial planning scenarios (P. Armsworth, Ed.). <em>Journal of Applied Ecology</em>, <em>51</em>, 1504–1514.
</div>
<div id="ref-r30" class="csl-entry">
Klein, C., Carwardine, J., Wilson, K., Watts, M. &amp; Possingham, H. (2007). <em><span class="nocase">Spatial Prioritization Approaches for the Conservation of Biodiversity in Australia: Considering Conservation Costs, Ecological &amp; Evolutionary Processes, and Large-Intact Areas</span></em>. Report to the Department of Environment; Water Resources.
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc">
      <h2 data-toc-skip>Contents</h2>
    </nav>
      </div>

</div>



      <footer>
      <div class="copyright">
  <p><p>Developed by <a href="https://jeffrey-hanson.com" class="external-link">Jeffrey O Hanson</a>, <a href="http://www.richard-schuster.com" class="external-link">Richard Schuster</a>, Nina Morrell, <a href="http://strimas.com" class="external-link">Matthew Strimas-Mackey</a>, Brandon P M Edwards, Matthew E Watts, <a href="https://arcese.forestry.ubc.ca" class="external-link">Peter Arcese</a>, <a href="https://josephrbennett.wordpress.com" class="external-link">Joseph Bennett</a>, <a href="http://www.possinghamlab.org" class="external-link">Hugh P Possingham</a>.</p></p>
</div>

<div class="pkgdown">
  <p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 1.6.1.9001.</p></p>
</div>

      </footer>
   </div>

  
<script src="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.1/docsearch.min.js" integrity="sha256-GKvGqXDznoRYHCwKXGnuchvKSwmx9SRMrZOTh2g4Sb0=" crossorigin="anonymous"></script>
<script>
  docsearch({
    
    
    apiKey: '486efa122ea6783724263412c5f28ab3',
    indexName: 'prioritizr',
    inputSelector: 'input#search-input.form-control',
    transformData: function(hits) {
      return hits.map(function (hit) {
        hit.url = updateHitURL(hit);
        return hit;
      });
    }
  });
</script>



  

  </body>
</html>
