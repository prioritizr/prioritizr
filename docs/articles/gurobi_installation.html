<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Gurobi Installation Guide • prioritizr</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><!-- docsearch --><script src="../docsearch.js"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.1/docsearch.min.css" integrity="sha256-QOSRU/ra9ActyXkIBbiIB144aDBdtvXBcNc3OTNuX/Q=" crossorigin="anonymous">
<link href="../docsearch.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script><meta property="og:title" content="Gurobi Installation Guide">
<meta property="og:description" content="">
<meta property="og:image" content="https://prioritizr.net/logo.png">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-70466840-4"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-70466840-4');
</script>
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">prioritizr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">5.0.0.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/prioritizr.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/gurobi_installation.html">Gurobi Installation Guide</a>
    </li>
    <li>
      <a href="../articles/publication_record.html">Publication Record</a>
    </li>
    <li>
      <a href="../articles/saltspring.html">Salt Spring Island Tutorial</a>
    </li>
    <li>
      <a href="../articles/tasmania.html">Tasmania Tutorial</a>
    </li>
    <li>
      <a href="../articles/zones.html">Management Zones</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/prioritizr/prioritizr">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
<form class="navbar-form navbar-right" role="search">
        <div class="form-group">
          <input type="search" class="form-control" name="search-input" id="search-input" placeholder="Search..." aria-label="Search for..." autocomplete="off">
</div>
      </form>
      
    </div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Gurobi Installation Guide</h1>
                        <h4 class="author">Richard Schuster</h4>
            
            <h4 class="date">2020-05-13</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/prioritizr/prioritizr/blob/master/vignettes/gurobi_installation.Rmd"><code>vignettes/gurobi_installation.Rmd</code></a></small>
      <div class="hidden name"><code>gurobi_installation.Rmd</code></div>

    </div>

    
    
<div id="introduction" class="section level2">
<h2 class="hasAnchor">
<a href="#introduction" class="anchor"></a>Introduction</h2>
<p><em>Gurobi</em> is the most powerful and fastest solver that the <em>prioritizr R</em> package can use to solve conservation planning problems. This vignette will walk you through the process of setting up <em>Gurobi</em> on your computer so that you can use it to solve conservation planning problems. If you encounter any problems while following the instructions below, check out the <a href="http://www.gurobi.com/documentation/">official <em>Gurobi</em> documentation</a>.</p>
</div>
<div id="obtaining-a-license" class="section level2">
<h2 class="hasAnchor">
<a href="#obtaining-a-license" class="anchor"></a>Obtaining a license</h2>
<p><em>Gurobi</em> is a commercial computer program. <a href="http://www.gurobi.com/products/licensing-pricing/licensing-overview">This means that users will need to obtain a license for <em>Gurobi</em> before they can use it</a>. Although academics can obtain a special license at no cost, individuals that are not affiliated with a recognized educational institution may need to purchase a license to use <em>Gurobi</em>. If you are an academic that is affiliated with an educational institution, you can take advantage of the <a href="https://www.gurobi.com/downloads/end-user-license-agreement-academic/">special academic license</a> to use <em>Gurobi</em> for no cost. Once you have signed up for a free account you can request a <a href="https://www.gurobi.com/downloads/end-user-license-agreement-academic/">free academic license</a>.</p>
<br><center>
<img src="figures/free-academic-license-page.png" style="width:75.0%">
</center>
<p><br></p>
<p>Once you accept the Terms Of Service you can generate a license.</p>
<br><center>
<img src="figures/actual-license.png" style="width:75.0%">
</center>
<p><br></p>
<p>Now, copy and save the <code>grbgetkey XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX</code> command for later use.</p>
</div>
<div id="downloading-the-gurobi-software-suite" class="section level2">
<h2 class="hasAnchor">
<a href="#downloading-the-gurobi-software-suite" class="anchor"></a>Downloading the <em>Gurobi</em> software suite</h2>
<p>After obtaining a license, you will need to download a copy of the <em>Gurobi</em> installer to your computer. To achieve this, visit the <a href="http://www.gurobi.com/downloads/gurobi-optimizer"><em>Gurobi</em> downloads web page</a> and download the correct version of the installer for your operating system.</p>
</div>
<div id="software-installation" class="section level2">
<h2 class="hasAnchor">
<a href="#software-installation" class="anchor"></a>Software installation</h2>
<p>The installation process for the <em>Gurobi</em> software suite depends on the type of operating system you have installed on your computer. Fortunately, <em>Gurobi</em> provide platform-specific <a href="http://www.gurobi.com/documentation/">“Quick Start Guides”</a> for <a href="http://www.gurobi.com/documentation/8.1/quickstart_windows/software_installation_guid.html#section:Installation">Windows</a>, <a href="http://www.gurobi.com/documentation/8.1/quickstart_mac/software_installation_guid.html">Mac OSX</a>, and <a href="http://www.gurobi.com/documentation/8.1/quickstart_linux/software_installation_guid.html">Linux</a> systems that should help with this. Briefly, on Windows systems, you just need to double-click on the <em>Gurobi</em> installer, follow the prompts, and the installer will take care of rest. Whereas, on Linux systems, you will need to manually extract the downloaded file’s contents to a folder, move the extracted contents to a suitable location (typically <em>/opt/gurobi</em>), and update your system’s variables so that it knows where to find <em>Gurobi</em>. Additionally, if you are using <a href="https://www.rstudio.com/products/rstudio/"><em>RStudio</em></a> on a Linux system, you might need to add the following line to the file located at <em>/etc/rstudio/rserver.conf</em>:</p>
<pre><code>rsession-ld-library-path=/opt/gurobi650/linux64/lib</code></pre>
<p>After installing the <em>Gurobi</em> software suite on your computer, you will need to activate your license.</p>
</div>
<div id="license-activation" class="section level2">
<h2 class="hasAnchor">
<a href="#license-activation" class="anchor"></a>License activation</h2>
<p>Now we will activate the <em>Gurobi</em> software using the license you downloaded earlier. Please note that the correct set of instructions depends on your system and license. In most cases, you should follow the instructions in the “Local license activation”. If, and only if, you are activating a special Academic license on a networked computer that is not connected to your university’s network (e.g. a cloud-based system), then please follow the instructions below in the “Cloud license activation over SSH” section.</p>
<div id="local-license-activation" class="section level3">
<h3 class="hasAnchor">
<a href="#local-license-activation" class="anchor"></a>Local license activation</h3>
<p>To activate the license, simply copy and paste the <code>grbgetkey</code> command into your computer’s command prompt or terminal (note that Windows users can open the command prompt by typing <code>cmd</code> in the search box and pressing the <code>enter</code> key). After running the <code>grbgetkey</code> command with the correct license code, you should see output that looks something like that in the screen shot below.</p>
<br><center>
<img src="figures/cmd-windows-success.png" style="width:75.0%">
</center>
<p><br></p>
</div>
<div id="cloud-license-activation-over-ssh" class="section level3">
<h3 class="hasAnchor">
<a href="#cloud-license-activation-over-ssh" class="anchor"></a>Cloud license activation over SSH</h3>
<p>If you are activating a special Academic license on a networked system that is not connected to your university’s network (e.g. a cloud-based server on <a href="https://aws.amazon.com/ec2/">Amazon EC2</a> or <a href="https://nectar.org.au/">NeCTAR</a>), then you will need to use the following instructions. Here, you will need a local computer that is connected to your university’s network. For brevity, we will refer to your local computer as <em>COMPUTER1</em> and your networked system where upon you wish to activate the <em>Gurobi</em> license as <em>COMPUTER2</em>. We will also assume that your are running Ubuntu (14.04+) on both systems. The following instructions were adapted from a discussion thread on the <a href="https://groups.google.com/forum/#!topic/gurobi/MaEP4cun8o8">official <em>Gurobi</em> emailing list</a>.</p>
<p>First, we will connect to <em>COMPUTER2</em> using <em>COMPUTER1</em>. Here, we will use <em>USER.COMPUTER2</em> to refer to the user name of your account on <em>COMPUTER2</em>, and <em>IP.COMPUTER2</em> to refer to the IP address of <em>COMPUTER2</em>. If you do not know the IP address of <em>COMPUTER2</em>, you should be able to find it on the website where you launched the system. To connect to <em>COMPUTER2</em> from <em>COMPUTER1</em>, type the following command into a new terminal session. Note that you may be prompted to enter a password.</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="fu">ssh</span> USER.COMPUTER2@IP.COMPUTER2</code></pre></div>
<p>Next, we will install <code>sshserver</code> on <em>COMPUTER2</em>. To do this, enter the following command into the same terminal session.</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="fu">sudo</span> apt-get install openssh-server</code></pre></div>
<p>Next, we will execute the following on command on <em>COMPUTER2</em> to tell it to connect to <em>COMPUTER1</em> when attempting to activate the <em>Gurobi</em> license. Similar to before, we will use <em>USER.COMPUTER1</em> to refer to the user name of your account <em>COMPUTER1</em>, and <em>IP.COMPUTER1</em> to refer to the IP address of <em>COMPUTER1</em>. If you do not know the IP address of <em>COMPUTER1</em>, try visiting this website (<a href="https://whatismyipaddress.com" class="uri">https://whatismyipaddress.com</a>) to find out what it is. Also note that your university might automatically block incoming SSH connections, so if you are unable to connect to <em>COMPUTER1</em> from <em>COMPUTER2</em> you may need to enlist the help of a member of your university’s IT support team.</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="fu">ssh</span> -L 8080:apps.gurobi.com:80 USER.COMPUTER1@IP.COMPUTER1</code></pre></div>
<p>Now, we will <strong>open up another session</strong> on <em>COMPUTER1</em>, connect to <em>COMPUTER2</em> from <em>COMPUTER1</em> using the same SSH command as before, and then tell <em>COMPUTER2</em> to activate the license. Please replace <code>XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX</code> with the correct license activation code that you saved earlier (note that the <code>--http</code> flag may not be required for <em>Gurobi</em> versions earlier than 8.0.0).</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="fu">ssh</span> USER.COMPUTER2@IP.COMPUTER2
<span class="ex">grbgetkey</span> --http --server=127.0.0.1 --port=8080 --verbose XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX</code></pre></div>
<p>Finally, after having activated the license, we can terminate our SSH connections and close the bash sessions.</p>
</div>
<div id="verification" class="section level3">
<h3 class="hasAnchor">
<a href="#verification" class="anchor"></a>Verification</h3>
<p>We can double check that the license has been successfully activated by running <em>Gurobi</em> from the command line. Assuming you have installed <em>Gurobi</em> version 8.0.0, Windows users can type in the following the following commands:</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="ex">gurobi_cl</span> c:\gurobi800\win64\examples\data\coins.lp</code></pre></div>
<p>Additionally, Linux users can test their license activation using the following commands</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="ex">gurobi_cl</span> /opt/gurobi800/linux64/examples/data/coins.lp</code></pre></div>
<p>If the license was successfully activated, you should see output that looks something like that in the screen shot below.</p>
<br><center>
<img src="figures/model-test.png" style="width:75.0%">
</center>
<p><br></p>
<p>After activating the license, you now need to install the <em>Gurobi</em> <em>R</em> package named <em>gurobi</em>.</p>
</div>
</div>
<div id="r-package-installation" class="section level2">
<h2 class="hasAnchor">
<a href="#r-package-installation" class="anchor"></a><em>R</em> package installation</h2>
<p>Now we will install the <em>gurobi R</em> package distributed with the <em>Gurobi</em> software suite. The <em>gurobi</em> <em>R</em> package installation file should be located within the folder where you installed the <em>Gurobi</em> software suite. Assuming you installed <em>Gurobi</em> in the default location and assuming you installed version 8.0.0, Windows users can install <em>gurobi</em> <em>R</em> package by running the following code from within <em>R</em>:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/install.packages">install.packages</a></span>(<span class="st">"c:/gurobi800/win64/R/gurobi_8.0-0.zip"</span>, <span class="dt">repos =</span> <span class="ot">NULL</span>)</code></pre></div>
<p>Additionally, Linux users can install the <em>gurobi</em> <em>R</em> package by running the following code from within R:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/install.packages">install.packages</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/file.path">file.path</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/Sys.getenv">Sys.getenv</a></span>(<span class="st">"GUROBI_HOME"</span>),
                           <span class="st">"R/gurobi_8.0-0_R_x86_64-pc-linux-gnu.tar.gz"</span>),
                 <span class="dt">repos =</span> <span class="ot">NULL</span>)</code></pre></div>
<p>Next, you will need to install the <em>slam R</em> package because the <em>gurobi</em> <em>R</em> package needs this package to work. Both Windows and Linux users can do this by running the code below in <em>R</em>:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/install.packages">install.packages</a></span>(<span class="st">"slam"</span>, <span class="dt">repos =</span> <span class="st">"https://cloud.r-project.org"</span>)</code></pre></div>
<p>Let’s check that the <em>gurobi</em> <em>R</em> package has been successfully installed. To do this, we can try using the <em>gurobi R</em> package to solve an optimization problem. Copy and paste the <em>R</em> code below into <em>R</em>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># load gurobi package</span>
<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(gurobi)</code></pre></div>
<pre><code>## Loading required package: slam</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># create optimization problem</span>
model &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/list">list</a></span>()
model<span class="op">$</span>obj        &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">2</span>)
model<span class="op">$</span>modelsense &lt;-<span class="st"> "max"</span>
model<span class="op">$</span>rhs        &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="dv">4</span>, <span class="dv">1</span>)
model<span class="op">$</span>sense      &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"&lt;"</span>, <span class="st">"&gt;"</span>)
model<span class="op">$</span>vtype      &lt;-<span class="st"> "B"</span>
model<span class="op">$</span>A          &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/matrix">matrix</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">0</span>), <span class="dt">nrow =</span> <span class="dv">2</span>, <span class="dt">ncol =</span> <span class="dv">3</span>,
                           <span class="dt">byrow =</span> <span class="ot">TRUE</span>)

<span class="co"># solve the optimization problem using Gurobi</span>
result &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/gurobi/topics/gurobi">gurobi</a></span>(model, <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/list">list</a></span>())</code></pre></div>
<pre><code>## Gurobi Optimizer version 9.0.1 build v9.0.1rc0 (linux64)
## Optimize a model with 2 rows, 3 columns and 5 nonzeros
## Model fingerprint: 0x15e5f516
## Variable types: 0 continuous, 3 integer (3 binary)
## Coefficient statistics:
##   Matrix range     [1e+00, 3e+00]
##   Objective range  [1e+00, 2e+00]
##   Bounds range     [0e+00, 0e+00]
##   RHS range        [1e+00, 4e+00]
## Found heuristic solution: objective 2.0000000
## Presolve removed 2 rows and 3 columns
## Presolve time: 0.00s
## Presolve: All rows and columns removed
## 
## Explored 0 nodes (0 simplex iterations) in 0.00 seconds
## Thread count was 1 (of 4 available processors)
## 
## Solution count 2: 3 
## 
## Optimal solution found (tolerance 1.00e-04)
## Best objective 3.000000000000e+00, best bound 3.000000000000e+00, gap 0.0000%</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># print the solution</span>
<span class="kw"><a href="../reference/print.html">print</a></span>(result<span class="op">$</span>objval) <span class="co"># objective</span></code></pre></div>
<pre><code>## [1] 3</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/print.html">print</a></span>(result<span class="op">$</span>x)      <span class="co"># decision variables</span></code></pre></div>
<pre><code>## [1] 1 0 1</code></pre>
<p>If you see the outputs for <code>result$objval</code> and <code>result$x</code> and you don’t see any error messages, then you have (1) successfully installed the <em>Gurobi</em> software suite, (2) activated a valid license, and (3) successfully installed the <em>gurobi R</em> package. Now you can finally use <em>Gurobi</em> to solve conservation planning problems with <em>prioritizr</em>. If do see an error message, then you might have missed a step while installing the package or activating the license, so try going back through this vignette to see if you missed something.</p>
</div>
<div id="solving-a-prioritzr-problem-with-gurobi" class="section level2">
<h2 class="hasAnchor">
<a href="#solving-a-prioritzr-problem-with-gurobi" class="anchor"></a>Solving a <em>prioritzr</em> problem with <em>Gurobi</em>
</h2>
<p>If you successfully installed the <em>Gurobi</em> software suite and the <em>gurobi</em> <em>R</em> package, you can now try solving conservation planning problems using the <em>prioritzr</em> <em>R</em> package. Although the <em>prioritizr</em> <em>R</em> package should automatically detect that <em>Gurobi</em> has been installed, you can use the function <code>add_gurobi_solver</code> to manually specify that <em>Gurobi</em> should be used to solve problems. This function is also useful because you can use it to customize the optimization process (e.g. specify the desired optimality gap or set a limit on how much time should be spent searching for a solution).</p>
<p>Finally, to check that everything has been installed correctly, we will use the <em>Gurobi</em> software suite to solve a reserve selection problem created using the <em>prioritzr</em> <em>R</em> package.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(prioritizr)

<span class="co"># formulate the problem</span>
p &lt;-<span class="st"> </span><span class="kw"><a href="../reference/problem.html">problem</a></span>(sim_pu_raster, sim_features) <span class="op">%&gt;%</span>
<span class="st">     </span><span class="kw"><a href="../reference/add_min_set_objective.html">add_min_set_objective</a></span>() <span class="op">%&gt;%</span>
<span class="st">     </span><span class="kw"><a href="../reference/add_relative_targets.html">add_relative_targets</a></span>(<span class="fl">0.1</span>) <span class="op">%&gt;%</span>
<span class="st">     </span><span class="kw"><a href="../reference/add_gurobi_solver.html">add_gurobi_solver</a></span>()

<span class="co"># solve the problem</span>
s &lt;-<span class="st"> </span><span class="kw"><a href="../reference/solve.html">solve</a></span>(p)</code></pre></div>
<pre><code>## Gurobi Optimizer version 9.0.1 build v9.0.1rc0 (linux64)
## Optimize a model with 5 rows, 90 columns and 450 nonzeros
## Model fingerprint: 0x6442bf6e
## Variable types: 0 continuous, 90 integer (90 binary)
## Coefficient statistics:
##   Matrix range     [2e-01, 9e-01]
##   Objective range  [2e+02, 2e+02]
##   Bounds range     [1e+00, 1e+00]
##   RHS range        [3e+00, 8e+00]
## Found heuristic solution: objective 2337.9617505
## Presolve time: 0.00s
## Presolved: 5 rows, 90 columns, 450 nonzeros
## Variable types: 0 continuous, 90 integer (90 binary)
## Presolved: 5 rows, 90 columns, 450 nonzeros
## 
## 
## Root relaxation: objective 1.931582e+03, 12 iterations, 0.00 seconds
## 
##     Nodes    |    Current Node    |     Objective Bounds      |     Work
##  Expl Unexpl |  Obj  Depth IntInf | Incumbent    BestBd   Gap | It/Node Time
## 
##      0     0 1931.58191    0    4 2337.96175 1931.58191  17.4%     -    0s
## H    0     0                    1987.3985265 1931.58191  2.81%     -    0s
## 
## Explored 1 nodes (12 simplex iterations) in 0.00 seconds
## Thread count was 1 (of 4 available processors)
## 
## Solution count 2: 1987.4 2337.96 
## 
## Optimal solution found (tolerance 1.00e-01)
## Best objective 1.987398526526e+03, best bound 1.931581908865e+03, gap 2.8085%</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># plot solution</span>
<span class="kw"><a href="https://www.rdocumentation.org/packages/graphics/topics/plot">plot</a></span>(s, <span class="dt">col =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"grey90"</span>, <span class="st">"darkgreen"</span>), <span class="dt">main =</span> <span class="st">"Solution"</span>,
     <span class="dt">xlim =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="op">-</span><span class="fl">0.1</span>, <span class="fl">1.1</span>), <span class="dt">ylim =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="op">-</span><span class="fl">0.1</span>, <span class="fl">1.1</span>))</code></pre></div>
<p><img src="gurobi_installation_files/figure-html/unnamed-chunk-13-1.png" width="336" style="display: block; margin: auto;"></p>
<p>After running this code, hopefully, you should some information printed on-screen about the optimization process and <em>R</em> should produce a map displaying a solution. If this code does not produce any errors, then you have successfully installed everything and can begin using <em>Gurobi</em> and the <em>prioritizr R</em> package to solve your very own conservation planning problems.</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">

        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#introduction">Introduction</a></li>
      <li><a href="#obtaining-a-license">Obtaining a license</a></li>
      <li><a href="#downloading-the-gurobi-software-suite">Downloading the <em>Gurobi</em> software suite</a></li>
      <li><a href="#software-installation">Software installation</a></li>
      <li><a href="#license-activation">License activation</a></li>
      <li><a href="#r-package-installation"><em>R</em> package installation</a></li>
      <li><a href="#solving-a-prioritzr-problem-with-gurobi">Solving a <em>prioritzr</em> problem with <em>Gurobi</em></a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by <a href="https://jeffrey-hanson.com">Jeffrey O Hanson</a>, <a href="http://www.richard-schuster.com">Richard Schuster</a>, Nina Morrell, <a href="http://strimas.com">Matthew Strimas-Mackey</a>, Matthew E Watts, <a href="https://arcese.forestry.ubc.ca">Peter Arcese</a>, <a href="https://josephrbennett.wordpress.com">Joseph Bennett</a>, <a href="http://www.possinghamlab.org">Hugh P Possingham</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
</div>

  
<script src="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.1/docsearch.min.js" integrity="sha256-GKvGqXDznoRYHCwKXGnuchvKSwmx9SRMrZOTh2g4Sb0=" crossorigin="anonymous"></script><script>
  docsearch({
    
    
    apiKey: '486efa122ea6783724263412c5f28ab3',
    indexName: 'prioritizr',
    inputSelector: 'input#search-input.form-control',
    transformData: function(hits) {
      return hits.map(function (hit) {
        hit.url = updateHitURL(hit);
        return hit;
      });
    }
  });
</script>
</body>
</html>
