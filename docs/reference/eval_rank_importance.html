<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Calculate importance scores for planning units selected in a solution
by calculating ranks via an incremental optimization process
(based on Jung et al. 2021)."><title>Evaluate solution importance using incremental ranks — eval_rank_importance • prioritizr</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.11/clipboard.min.js" integrity="sha512-7O5pXpc0oCRrxk8RUfDYFgn0nO1t+jLuIOQdOMRp4APB7uZ4vSjspzp5y6YDtDs4VzUSTbWzBFZ/LKJhnyFOKw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet"><meta property="og:title" content="Evaluate solution importance using incremental ranks — eval_rank_importance"><meta property="og:description" content="Calculate importance scores for planning units selected in a solution
by calculating ranks via an incremental optimization process
(based on Jung et al. 2021)."><meta property="og:image" content="https://prioritizr.net/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-70466840-4"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-70466840-4');
</script></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary" data-bs-theme="dark"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">prioritizr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">8.0.6.4</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item">
  <a class="nav-link" href="../articles/prioritizr.html">Get started</a>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/package_overview.html">Package overview</a>
    <a class="dropdown-item" href="../articles/gurobi_installation_guide.html">Gurobi installation guide</a>
    <a class="dropdown-item" href="../articles/solver_benchmarks.html">Solver benchmarks</a>
    <a class="dropdown-item" href="../articles/publication_record.html">Publication record</a>
  </div>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-tutorials">Tutorials</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-tutorials">
    <a class="dropdown-item" href="../articles/connectivity_tutorial.html">Connectivity</a>
    <a class="dropdown-item" href="../articles/calibrating_trade-offs_tutorial.html">Calibrating trade-offs</a>
    <a class="dropdown-item" href="../articles/management_zones_tutorial.html">Management zones</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/prioritizr/prioritizr/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Evaluate solution importance using incremental ranks</h1>
      <small class="dont-index">Source: <a href="https://github.com/prioritizr/prioritizr/blob/HEAD/R/eval_rank_importance.R" class="external-link"><code>R/eval_rank_importance.R</code></a></small>
      <div class="d-none name"><code>eval_rank_importance.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Calculate importance scores for planning units selected in a solution
by calculating ranks via an incremental optimization process
(based on Jung <em>et al.</em> 2021).</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">eval_rank_importance</span><span class="op">(</span><span class="va">x</span>, <span class="va">solution</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S4 method for ConservationProblem,numeric</span></span>
<span><span class="fu">eval_rank_importance</span><span class="op">(</span><span class="va">x</span>,</span>
<span><span class="va">solution</span>, <span class="va">...</span>, <span class="va">rescale</span>, <span class="va">run_checks</span>, <span class="va">force</span>, <span class="va">by_zone</span>, <span class="va">objective</span>, <span class="va">extra_args</span>,</span>
<span><span class="va">n</span>, <span class="va">budgets</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S4 method for ConservationProblem,matrix</span></span>
<span><span class="fu">eval_rank_importance</span><span class="op">(</span><span class="va">x</span>,</span>
<span><span class="va">solution</span>, <span class="va">...</span>, <span class="va">rescale</span>, <span class="va">run_checks</span>, <span class="va">force</span>, <span class="va">by_zone</span>, <span class="va">objective</span>, <span class="va">extra_args</span>,</span>
<span><span class="va">n</span>, <span class="va">budgets</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S4 method for ConservationProblem,data.frame</span></span>
<span><span class="fu">eval_rank_importance</span><span class="op">(</span><span class="va">x</span>,</span>
<span><span class="va">solution</span>, <span class="va">...</span>, <span class="va">rescale</span>, <span class="va">run_checks</span>, <span class="va">force</span>, <span class="va">by_zone</span>, <span class="va">objective</span>, <span class="va">extra_args</span>,</span>
<span><span class="va">n</span>, <span class="va">budgets</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S4 method for ConservationProblem,Spatial</span></span>
<span><span class="fu">eval_rank_importance</span><span class="op">(</span><span class="va">x</span>,</span>
<span><span class="va">solution</span>, <span class="va">...</span>, <span class="va">rescale</span>, <span class="va">run_checks</span>, <span class="va">force</span>, <span class="va">by_zone</span>, <span class="va">objective</span>, <span class="va">extra_args</span>,</span>
<span><span class="va">n</span>, <span class="va">budgets</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S4 method for ConservationProblem,sf</span></span>
<span><span class="fu">eval_rank_importance</span><span class="op">(</span><span class="va">x</span>, <span class="va">solution</span>,</span>
<span><span class="va">...</span>, <span class="va">rescale</span>, <span class="va">run_checks</span>, <span class="va">force</span>, <span class="va">by_zone</span>, <span class="va">objective</span>, <span class="va">extra_args</span>, <span class="va">n</span>, <span class="va">budgets</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S4 method for ConservationProblem,Raster</span></span>
<span><span class="fu">eval_rank_importance</span><span class="op">(</span><span class="va">x</span>,</span>
<span><span class="va">solution</span>, <span class="va">...</span>, <span class="va">rescale</span>, <span class="va">run_checks</span>, <span class="va">force</span>, <span class="va">by_zone</span>, <span class="va">objective</span>, <span class="va">extra_args</span>,</span>
<span><span class="va">n</span>, <span class="va">budgets</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S4 method for ConservationProblem,SpatRaster</span></span>
<span><span class="fu">eval_rank_importance</span><span class="op">(</span><span class="va">x</span>,</span>
<span><span class="va">solution</span>, <span class="va">...</span>, <span class="va">rescale</span>, <span class="va">run_checks</span>, <span class="va">force</span>, <span class="va">by_zone</span>, <span class="va">objective</span>, <span class="va">extra_args</span>,</span>
<span><span class="va">n</span>, <span class="va">budgets</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>x</dt>
<dd><p><code><a href="problem.html">problem()</a></code> object.</p></dd>


<dt>solution</dt>
<dd><p><code>numeric</code>, <code>matrix</code>, <code>data.frame</code>,
<code><a href="https://rspatial.github.io/terra/reference/rast.html" class="external-link">terra::rast()</a></code>, or <code><a href="https://r-spatial.github.io/sf/reference/sf.html" class="external-link">sf::sf()</a></code> object.
The argument should be in the same format as the planning unit cost
data in the argument to <code>x</code>.
See the Solution format section for more information.</p></dd>


<dt>...</dt>
<dd><p>not used.</p></dd>


<dt>rescale</dt>
<dd><p><code>logical</code> flag indicating if replacement cost
values -- excepting infinite (<code>Inf</code>) and zero values -- should be
rescaled to range between 0.01 and 1. Defaults to <code>TRUE</code>.</p></dd>


<dt>run_checks</dt>
<dd><p><code>logical</code> flag indicating whether presolve checks
should be run prior solving the problem. These checks are performed using
the <code><a href="presolve_check.html">presolve_check()</a></code> function. Defaults to <code>TRUE</code>.
Skipping these checks may reduce run time for large problems.</p></dd>


<dt>force</dt>
<dd><p><code>logical</code> flag indicating if an attempt should be
made to solve the problem even if potential issues were detected during
the presolve checks. Defaults to <code>FALSE</code>.</p></dd>


<dt>by_zone</dt>
<dd><p><code>logical</code> indicating value.
If <code>TRUE</code>, then the optimization process will
increment budgets for each zone separately.
If <code>FALSE</code>, then the optimization process will
increment a single budget that is applied to all zones.
Note that this parameter is only considered if <code>n</code> is specified,
and does not affect processing if <code>budgets</code> is specified.
Defaults to <code>TRUE</code>.</p></dd>


<dt>objective</dt>
<dd><p><code>character</code> value with the name of the objective function
that should be used for the incremental optimization process.
This function must be budget limited (e.g., cannot be
<code><a href="add_min_set_objective.html">add_min_set_objective()</a></code>).
For example, "add_min_shortfall_objective" can be used to specify the
minimum shortfall objective (per <code><a href="add_min_shortfall_objective.html">add_min_shortfall_objective()</a></code>)..
Defaults to <code>NULL</code> such that the same objective is used as specified in
<code>x</code>. If using this default and <code>x</code> has the minimum set objective, then the
minimum shortfall objective is used.</p></dd>


<dt>extra_args</dt>
<dd><p><code>list</code> value with additional arguments for the
objective function (excluding the <code>budgets</code> parameter). For example, this
parameter can be used to supply phylogenetic data for
the phylogenetic diversity objective function (i.e., when using
<code>objective = "add_max_phylo_div_objective"</code>).
Defaults to <code>NULL</code> such that no additional arguments are supplied.</p></dd>


<dt>n</dt>
<dd><p><code>integer</code> number of ranks to evaluate.
Note that either <code>n</code> or <code>budgets</code> (not both) must be specified.
If <code>n</code> is specified, then <code>by_zone</code> is considered during
processing for problems with multiple zones.</p></dd>


<dt>budgets</dt>
<dd><p><code>numeric</code> vector with the budget thresholds for generating
solutions at different steps in an iterative procedure.
Note that either <code>n</code> or <code>budgets</code> (not both) must be specified.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>A <code>numeric</code>, <code>matrix</code>, <code>data.frame</code>,
<code><a href="https://rspatial.github.io/terra/reference/rast.html" class="external-link">terra::rast()</a></code>, or <code><a href="https://r-spatial.github.io/sf/reference/sf.html" class="external-link">sf::sf()</a></code> object
containing the importance scores for each planning
unit in the solution. Specifically, the returned object is in the
same format as the planning unit data in the argument to <code>x</code>.
The object also has the following attributes that provide information
on the incremental optimization process.</p><dl><dt><code>budgets</code></dt>
<dd><p><code>numeric</code> or <code>matrix</code> containing the budgets used for
each increment in the incremental optimization process.
If the problem (per <code>x</code>) has a single zone, then the budgets
are a <code>numeric</code> vector, wherein values correspond to the
budgets for each increment.
Otherwise, if the problem (per <code>x</code>) has multiple zones, then
the budgets are a <code>matrix</code> and their format depends on the
<code>by_zone</code> parameter.
If <code>by_zone = FALSE</code>, then the budgets are are <code>matrix</code>
with a column for each zone and a row for each budget increment.
Alternatively, if <code>by_zone = TRUE</code>, then the <code>matrix</code> has
a single column and a row for each budget increment.</p></dd>

<dt><code>objective</code></dt>
<dd><p><code>numeric</code> mathematical objective values for each solution
generated during the incremental optimization process.</p></dd>

<dt><code>runtime</code></dt>
<dd><p><code>numeric</code> total amount of time elapsed during the optimization
(reported in seconds) of each solution
generated throughout the incremental optimization process.</p></dd>

<dt><code>status</code></dt>
<dd><p><code>character</code> status of the optimization process for each
solution generated during the incremental optimization process.
See <code><a href="solve.html">solve()</a></code> for further details.</p></dd>

<dt><code>gap</code></dt>
<dd><p><code>numeric</code> optimality of each solution
generated during the incremental optimization process.
See <code><a href="solve.html">solve()</a></code> for further details.</p></dd>


</dl></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>Importance scores are calculated using an incremental optimization
process. Note that if a problem has complex constraints (i.e.,
constraints that do not involve locking in or locking out planning
units), then the <code>budgets</code> parameter must be specified.
This optimization process involves the following steps.</p><ol><li><p>A set of budgets are defined.
then the budgets are defined using the <code>budgets</code>.
Otherwise, if an argument to the <code>n</code> parameter is supplied,
then the budgets are defined as a set of <code>n</code> values with equal
increments between them that sum to the total cost of <code>solution</code>.
For example, if
considering a problem with a single zone, a solution with a total
cost of 400, and <code>n = 4</code>: then the budgets will be 100, 200, 300, and 400.
If considering a multiple zone problem and <code>by_zone = FALSE</code>, then the
budgets will based calculated based on the total cost of the <code>solution</code>
across all zones.
Otherwise if <code>by_zone = TRUE</code>, then the budgets are calculated and set
based on the total cost of planning units allocated to each zone (separately)
in the <code>solution</code>. Note that after running this function, you can
see what budgets were used to calculate the ranks by accessing
attributes from the result (see below for examples).</p></li>
<li><p>The problem (per <code>x</code>) is checked for potential issues.
This step is performed to avoid issues during subsequent optimization steps.
Note that this step can be skipped using <code>run_checks = FALSE</code>.
Also, if issues are detected and you wish to proceed anyway,
then use<code>force = TRUE</code> ignore any detected issues.</p></li>
<li><p>The problem is modified for subsequent optimization. In particular, any
planning units not selected in <code>solution</code> are locked out. This is important
to ensure that all subsequent optimization procedures produce solutions
that only contain planning units selected in the <code>solution</code>.</p></li>
<li><p>The problem is further modified for subsequent optimization.
Specifically, its objective is overwritten using the objective defined for
the rank calculations (per <code>objective</code>) with the smallest
budget defined in the first step. Additionally, if an argument to the
<code>extra_args</code> parameter is specified, this argument is also used when
overwriting the objective.</p></li>
<li><p>The modified problem is solved to generate a solution.
Depending on the budget and objective specified when modifying the problem,
the newly generated solution will contain a
subset of the planning units selected in the original <code>solution</code>.
are assigned a rank. In particular, all selected planning units in the
newly generated solution are assigned the same rank.
This rank is based on the number of increments that have been previously
completed. If no previous increments
have been completed, then the rank is equal to the total number of budget
increments.
Otherwise, if previous increments have been completed, then
the rank is equal to the total number of budget increments minus the
number of completed increments.
Note that if previous increments have been completed, then only planning
units in the newly generated solution that have not been previously selected
are assigned this rank.
For example, if no previous increments have been completed and there
are 5 budget increments (e.g. <code>n = 5</code>), then the planning units
selected in the newly generated solution are assigned a rank of 5.
Alternatively, if 3 previous increments have been
completed, then the planning units would be assigned a rank of 2.</p></li>
<li><p>The problem is further modified for subsequent optimization.
Specifically, the planning units selected in the newly generated solution
are locked in. This is to ensure that all subsequent solutions will
select these planning units and, in turn, build on this solution.
Additionally, the newly generated solution is used to specify the starting
solution for the subsequent optimization procedure to reduce processing time
(note this is only done when using the <em>CBC</em> and <em>Gurobi</em> solvers).</p></li>
<li><p>Steps 4--7 are repeated for each of the remaining budget increments.
As the increasingly greater budgets are used at higher increments,
the modified problem will generate new solutions that become increasingly
similar to the original <code>solution</code>. Planning units that are selected at
lower budget increments are assigned greater ranks and considered more
important, and those selected at higher budget increments are assigned
lower ranks and considered less important. This is because
if a planning unit is highly cost-effective for meeting the objective
(per <code>objective</code>), then it is more likely to be selected
earlier in the incremental optimization process.</p></li>
<li><p>The incremental optimization process has completed. If <code>rescale = TRUE</code>,
then the ranks are linearly rescaled to range between 0.01 and 1.
Otherwise, the ranks remain unchanged.</p></li>
<li><p>The rank values are output in the same format as the planning units
in the problem (per <code>x</code>) (see the Solution Format section for details).</p></li>
</ol></div>
    <div class="section level2">
    <h2 id="solution-format">Solution format<a class="anchor" aria-label="anchor" href="#solution-format"></a></h2>
    

<p>Broadly speaking, the argument to <code>solution</code> must be in the same format as
the planning unit data in the argument to <code>x</code>.
Further details on the correct format are listed separately
for each of the different planning unit data formats:</p>
<dl><dt><code>x</code> has <code>numeric</code> planning units</dt>
<dd><p>The argument to <code>solution</code> must be a
<code>numeric</code> vector with each element corresponding to a different planning
unit. It should have the same number of planning units as those
in the argument to <code>x</code>. Additionally, any planning units missing
cost (<code>NA</code>) values should also have missing (<code>NA</code>) values in the
argument to <code>solution</code>.</p></dd>


<dt><code>x</code> has <code>matrix</code> planning units</dt>
<dd><p>The argument to <code>solution</code> must be a
<code>matrix</code> vector with each row corresponding to a different planning
unit, and each column correspond to a different management zone.
It should have the same number of planning units and zones
as those in the argument to <code>x</code>. Additionally, any planning units
missing cost (<code>NA</code>) values for a particular zone should also have a
missing (<code>NA</code>) values in the argument to <code>solution</code>.</p></dd>


<dt><code>x</code> has <code><a href="https://rspatial.github.io/terra/reference/rast.html" class="external-link">terra::rast()</a></code> planning units</dt>
<dd><p>The argument to <code>solution</code>
be a <code><a href="https://rspatial.github.io/terra/reference/rast.html" class="external-link">terra::rast()</a></code> object where different cells correspond
to different planning units and layers correspond to
a different management zones. It should have the same dimensionality
(rows, columns, layers), resolution, extent, and coordinate reference
system as the planning units in the argument to <code>x</code>. Additionally,
any planning units missing cost (<code>NA</code>) values for a particular zone
should also have missing (<code>NA</code>)  values in the argument to <code>solution</code>.</p></dd>


<dt><code>x</code> has <code>data.frame</code> planning units</dt>
<dd><p>The argument to <code>solution</code> must
be a <code>data.frame</code> with each column corresponding to a different zone,
each row corresponding to a different planning unit, and cell values
corresponding to the solution value. This means that if a <code>data.frame</code>
object containing the solution also contains additional columns, then
these columns will need to be subsetted prior to using this function
(see below for example with <code><a href="https://r-spatial.github.io/sf/reference/sf.html" class="external-link">sf::sf()</a></code> data).
Additionally, any planning units missing cost
(<code>NA</code>) values for a particular zone should also have missing (<code>NA</code>)
values in the argument to <code>solution</code>.</p></dd>


<dt><code>x</code> has <code><a href="https://r-spatial.github.io/sf/reference/sf.html" class="external-link">sf::sf()</a></code> planning units</dt>
<dd><p>The argument to <code>solution</code> must be
a <code><a href="https://r-spatial.github.io/sf/reference/sf.html" class="external-link">sf::sf()</a></code> object with each column corresponding to a different
zone, each row corresponding to a different planning unit, and cell values
corresponding to the solution value. This means that if the
<code><a href="https://r-spatial.github.io/sf/reference/sf.html" class="external-link">sf::sf()</a></code> object containing the solution also contains additional
columns, then these columns will need to be subsetted prior to using this
function (see below for example).
Additionally, the argument to <code>solution</code> must also have the same
coordinate reference system as the planning unit data.
Furthermore, any planning units missing cost
(<code>NA</code>) values for a particular zone should also have missing (<code>NA</code>)
values in the argument to <code>solution</code>.</p></dd>


</dl></div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p>Jung M, Arnell A, de Lamo X, García-Rangel S, Lewis M, Mark J, Merow C,
Miles L, Ondo I, Pironon S, Ravilious C, Rivers M, Schepaschenko D,
Tallowin O, van Soesbergen A, Govaerts R, Boyle BL, Enquist BJ, Feng X,
Gallagher R, Maitner B, Meiri S, Mulligan M, Ofer G, Roll U, Hanson JO,
Jetz W, Di Marco M, McGowan J, Rinnan DS, Sachs JD, Lesiv M, Adams VM,
Andrew SC, Burger JR, Hannah L, Marquet PA, McCarthy JK, Morueta-Holme N,
Newman EA, Park DS, Roehrdanz PR, Svenning J-C, Violle C, Wieringa JJ,
Wynne G, Fritz S, Strassburg BBN, Obersteiner M, Kapos V, Burgess N, Schmidt-
Traub G, Visconti P (2021) Areas of global importance for conserving
terrestrial biodiversity, carbon and water. <em>Nature Ecology and Evolution</em>,
5: 1499--1509.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p>Other importances: 
<code><a href="eval_ferrier_importance.html">eval_ferrier_importance</a>()</code>,
<code><a href="eval_rare_richness_importance.html">eval_rare_richness_importance</a>()</code>,
<code><a href="eval_replacement_importance.html">eval_replacement_importance</a>()</code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="co"># seed seed for reproducibility</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">600</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># load data</span></span></span>
<span class="r-in"><span><span class="va">sim_pu_raster</span> <span class="op">&lt;-</span> <span class="fu"><a href="sim_data.html">get_sim_pu_raster</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">sim_pu_polygons</span> <span class="op">&lt;-</span> <span class="fu"><a href="sim_data.html">get_sim_pu_polygons</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">sim_features</span> <span class="op">&lt;-</span> <span class="fu"><a href="sim_data.html">get_sim_features</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">sim_zones_pu_raster</span> <span class="op">&lt;-</span> <span class="fu"><a href="sim_data.html">get_sim_zones_pu_raster</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">sim_zones_features</span> <span class="op">&lt;-</span> <span class="fu"><a href="sim_data.html">get_sim_zones_features</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># create minimal problem with binary decisions</span></span></span>
<span class="r-in"><span><span class="va">p1</span> <span class="op">&lt;-</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="problem.html">problem</a></span><span class="op">(</span><span class="va">sim_pu_raster</span>, <span class="va">sim_features</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="add_min_set_objective.html">add_min_set_objective</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="add_relative_targets.html">add_relative_targets</a></span><span class="op">(</span><span class="fl">0.1</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="add_binary_decisions.html">add_binary_decisions</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="add_default_solver.html">add_default_solver</a></span><span class="op">(</span>gap <span class="op">=</span> <span class="fl">0</span>, verbose <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># solve problem</span></span></span>
<span class="r-in"><span><span class="va">s1</span> <span class="op">&lt;-</span> <span class="fu"><a href="solve.html">solve</a></span><span class="op">(</span><span class="va">p1</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># print solution</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">s1</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> class       : SpatRaster </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> dimensions  : 10, 10, 1  (nrow, ncol, nlyr)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> resolution  : 0.1, 0.1  (x, y)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> extent      : 0, 1, 0, 1  (xmin, xmax, ymin, ymax)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> coord. ref. : Undefined Cartesian SRS </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> source(s)   : memory</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> varname     : sim_pu_raster </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> name        : layer </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> min value   :     0 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> max value   :     1 </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># plot solution</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rspatial.github.io/terra/reference/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">s1</span>, main <span class="op">=</span> <span class="st">"solution"</span>, axes <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="eval_rank_importance-1.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># calculate importance scores using ranks based on 10 budgets</span></span></span>
<span class="r-in"><span><span class="co"># N.B. since the objective for calculating ranks is not explicitly</span></span></span>
<span class="r-in"><span><span class="co"># defined and the problem has a minimum set objective, the</span></span></span>
<span class="r-in"><span><span class="co"># ranks are calculated using the minimum shortfall objective by default</span></span></span>
<span class="r-in"><span><span class="va">rs1</span> <span class="op">&lt;-</span> <span class="fu">eval_rank_importance</span><span class="op">(</span><span class="va">p1</span>, <span class="va">s1</span>, n <span class="op">=</span> <span class="fl">10</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># print importance scores</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">rs1</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> class       : SpatRaster </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> dimensions  : 10, 10, 1  (nrow, ncol, nlyr)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> resolution  : 0.1, 0.1  (x, y)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> extent      : 0, 1, 0, 1  (xmin, xmax, ymin, ymax)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> coord. ref. : Undefined Cartesian SRS </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> source(s)   : memory</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> varname     : sim_pu_raster </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> name        : rs </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> min value   :  0 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> max value   :  1 </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># plot importance scores</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rspatial.github.io/terra/reference/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">rs1</span>, main <span class="op">=</span> <span class="st">"rank importance (10, min shortfall obj"</span>, axes <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="eval_rank_importance-2.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># display optimization information from the attributes</span></span></span>
<span class="r-in"><span><span class="co">## status</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/attr.html" class="external-link">attr</a></span><span class="op">(</span><span class="va">rs1</span>, <span class="st">"status"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1] "OPTIMAL" "OPTIMAL" "OPTIMAL" "OPTIMAL" "OPTIMAL" "OPTIMAL" "OPTIMAL"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [8] "OPTIMAL" "OPTIMAL" "OPTIMAL"</span>
<span class="r-in"><span><span class="co">## optimality gap</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/attr.html" class="external-link">attr</a></span><span class="op">(</span><span class="va">rs1</span>, <span class="st">"gap"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1] 0 0 0 0 0 0 0 0 0 0</span>
<span class="r-in"><span><span class="co">## run time</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/attr.html" class="external-link">attr</a></span><span class="op">(</span><span class="va">rs1</span>, <span class="st">"runtime"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1] 0.004 0.002 0.002 0.002 0.002 0.002 0.001 0.002 0.002 0.002</span>
<span class="r-in"><span><span class="co">## objective value</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/attr.html" class="external-link">attr</a></span><span class="op">(</span><span class="va">rs1</span>, <span class="st">"objective"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1] 4.4831422 3.9636924 3.4483566 2.9239906 2.4229403 1.8946389 1.3955220</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [8] 0.8733925 0.3850706 0.0000000</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># plot relationship between objective values and rank</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rspatial.github.io/terra/reference/plot.html" class="external-link">plot</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  y <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/attr.html" class="external-link">attr</a></span><span class="op">(</span><span class="va">rs1</span>, <span class="st">"objective"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq_along</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/attr.html" class="external-link">attr</a></span><span class="op">(</span><span class="va">rs1</span>, <span class="st">"objective"</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  ylab <span class="op">=</span> <span class="st">"objective value"</span>, xlab <span class="op">=</span> <span class="st">"rank"</span>,</span></span>
<span class="r-in"><span>  main <span class="op">=</span> <span class="st">"relationship between objective values and rank"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="eval_rank_importance-3.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># calculate importance scores using the maximum utility objective and</span></span></span>
<span class="r-in"><span><span class="co"># based on 10 different budgets</span></span></span>
<span class="r-in"><span><span class="va">rs2</span> <span class="op">&lt;-</span> <span class="fu">eval_rank_importance</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">p1</span>, <span class="va">s1</span>, n <span class="op">=</span> <span class="fl">10</span>, objective <span class="op">=</span> <span class="st">"add_max_utility_objective"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>Targets specified for the problem will be ignored.</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> If the targets are important, use a different objective.</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># print importance scores</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">rs2</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> class       : SpatRaster </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> dimensions  : 10, 10, 1  (nrow, ncol, nlyr)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> resolution  : 0.1, 0.1  (x, y)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> extent      : 0, 1, 0, 1  (xmin, xmax, ymin, ymax)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> coord. ref. : Undefined Cartesian SRS </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> source(s)   : memory</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> varname     : sim_pu_raster </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> name        : rs </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> min value   :  0 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> max value   :  1 </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># plot importance scores</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rspatial.github.io/terra/reference/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">rs2</span>, main <span class="op">=</span> <span class="st">"rank importance (10, max utility obj)"</span>, axes <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="eval_rank_importance-4.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># calculate importance scores using ranks based on 5 manually specified</span></span></span>
<span class="r-in"><span><span class="co"># budgets</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># calculate 5 ranks using equal intervals</span></span></span>
<span class="r-in"><span><span class="co"># N.B. we use length.out = 6 because we want 5 budgets &gt; 0</span></span></span>
<span class="r-in"><span><span class="va">budgets</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fu"><a href="eval_cost_summary.html">eval_cost_summary</a></span><span class="op">(</span><span class="va">p1</span>, <span class="va">s1</span><span class="op">)</span><span class="op">$</span><span class="va">cost</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span>, length.out <span class="op">=</span> <span class="fl">6</span><span class="op">)</span><span class="op">[</span><span class="op">-</span><span class="fl">1</span><span class="op">]</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># calculate importance using manually specified budgets</span></span></span>
<span class="r-in"><span><span class="co"># N.B. since the objective for calculating ranks is not explicitly</span></span></span>
<span class="r-in"><span><span class="co"># defined and the problem has a minimum set objective, the</span></span></span>
<span class="r-in"><span><span class="co"># ranks are calculated using the minimum shortfall objective by default</span></span></span>
<span class="r-in"><span><span class="va">rs3</span> <span class="op">&lt;-</span> <span class="fu">eval_rank_importance</span><span class="op">(</span><span class="va">p1</span>, <span class="va">s1</span>, budgets <span class="op">=</span> <span class="va">budgets</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># print importance scores</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">rs3</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> class       : SpatRaster </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> dimensions  : 10, 10, 1  (nrow, ncol, nlyr)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> resolution  : 0.1, 0.1  (x, y)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> extent      : 0, 1, 0, 1  (xmin, xmax, ymin, ymax)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> coord. ref. : Undefined Cartesian SRS </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> source(s)   : memory</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> varname     : sim_pu_raster </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> name        : rs </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> min value   :  0 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> max value   :  1 </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># plot importance scores</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rspatial.github.io/terra/reference/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">rs3</span>, main <span class="op">=</span> <span class="st">"rank importance (manual)"</span>, axes <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="eval_rank_importance-5.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># build multi-zone conservation problem with raster data</span></span></span>
<span class="r-in"><span><span class="va">p4</span> <span class="op">&lt;-</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="problem.html">problem</a></span><span class="op">(</span><span class="va">sim_zones_pu_raster</span>, <span class="va">sim_zones_features</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="add_min_set_objective.html">add_min_set_objective</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="add_relative_targets.html">add_relative_targets</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">15</span>, <span class="fl">0.1</span>, <span class="fl">0.2</span><span class="op">)</span>, nrow <span class="op">=</span> <span class="fl">5</span>, ncol <span class="op">=</span> <span class="fl">3</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="add_binary_decisions.html">add_binary_decisions</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="add_default_solver.html">add_default_solver</a></span><span class="op">(</span>gap <span class="op">=</span> <span class="fl">0</span>, verbose <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># solve the problem</span></span></span>
<span class="r-in"><span><span class="va">s4</span> <span class="op">&lt;-</span> <span class="fu"><a href="solve.html">solve</a></span><span class="op">(</span><span class="va">p4</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rspatial.github.io/terra/reference/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">s4</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"zone "</span>, <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq_len</a></span><span class="op">(</span><span class="fu">terra</span><span class="fu">::</span><span class="fu"><a href="https://rspatial.github.io/terra/reference/dimensions.html" class="external-link">nlyr</a></span><span class="op">(</span><span class="va">sim_zones_pu_raster</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># print solution</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">s4</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> class       : SpatRaster </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> dimensions  : 10, 10, 3  (nrow, ncol, nlyr)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> resolution  : 0.1, 0.1  (x, y)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> extent      : 0, 1, 0, 1  (xmin, xmax, ymin, ymax)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> coord. ref. : Undefined Cartesian SRS </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> source(s)   : memory</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> varnames    : sim_zones_pu_raster </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>               sim_zones_pu_raster </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>               sim_zones_pu_raster </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> names       : zone 1, zone 2, zone 3 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> min values  :      0,      0,      0 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> max values  :      1,      1,      1 </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># plot solution</span></span></span>
<span class="r-in"><span><span class="co"># each panel corresponds to a different zone, and data show the</span></span></span>
<span class="r-in"><span><span class="co"># status of each planning unit in a given zone</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rspatial.github.io/terra/reference/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">s4</span>, axes <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="eval_rank_importance-6.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># calculate importance scores</span></span></span>
<span class="r-in"><span><span class="va">rs4</span> <span class="op">&lt;-</span> <span class="fu">eval_rank_importance</span><span class="op">(</span><span class="va">p4</span>, <span class="va">s4</span>, n <span class="op">=</span> <span class="fl">5</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rspatial.github.io/terra/reference/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">rs4</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"zone "</span>, <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq_len</a></span><span class="op">(</span><span class="fu">terra</span><span class="fu">::</span><span class="fu"><a href="https://rspatial.github.io/terra/reference/dimensions.html" class="external-link">nlyr</a></span><span class="op">(</span><span class="va">sim_zones_pu_raster</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># plot importance</span></span></span>
<span class="r-in"><span><span class="co"># each panel corresponds to a different zone, and data show the</span></span></span>
<span class="r-in"><span><span class="co"># importance of each planning unit in a given zone</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rspatial.github.io/terra/reference/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">rs4</span>, axes <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="eval_rank_importance-7.png" alt="" width="700" height="433"></span>
<span class="r-in"><span><span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://jeffrey-hanson.com" class="external-link">Jeffrey O Hanson</a>, <a href="http://www.richard-schuster.com" class="external-link">Richard Schuster</a>, Nina Morrell, <a href="http://strimas.com" class="external-link">Matthew Strimas-Mackey</a>, Brandon P M Edwards, Matthew E Watts, <a href="https://arcese.forestry.ubc.ca" class="external-link">Peter Arcese</a>, Joseph R Bennett, <a href="http://www.possinghamlab.org" class="external-link">Hugh P Possingham</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

    </footer></div>

  

  

  </body></html>

