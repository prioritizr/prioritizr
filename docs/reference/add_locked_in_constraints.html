<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Add locked in constraints <U+2014> add_locked_in_constraints <e2><80><a2> prioritizr</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/cerulean/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">

<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">


<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script>
<script src="../pkgdown.js"></script>

<!-- mathjax -->
<script src='https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../index.html">prioritizr</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../articles/index.html">Articles</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/prioritizr/prioritizr">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

      <div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Add locked in constraints</h1>
    </div>

    
    <p>Add constraints to ensure that they are prioritized in the solution.
For example, it may be desirable to lock in planning units that are
inside existing protected areas so that the solution fills in the gaps in the
existing reserve network. If specific planning units should be locked out 
of a solution, use <code><a href='add_locked_out_constraints.html'>add_locked_out_constraints</a></code>.</p>
    

    <pre class="usage"><span class='fu'>add_locked_in_constraints</span>(<span class='no'>x</span>, <span class='no'>locked_in</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a> Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>x</th>
      <td><p><code><a href='ConservationProblem-class.html'>ConservationProblem-class</a></code> object.</p></td>
    </tr>
    <tr>
      <th>locked_in</th>
      <td><p>Object that determines which planning units that should be
locked in. See details for more information.</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p><code><a href='ConservationProblem-class.html'>ConservationProblem-class</a></code> object.</p>
    
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>The locked in planning units can be specified in several
  different ways:</p>
<p></p><dl class='dl-horizontal'>
    <dt><code>integer</code></dt><dd><p><code>vector</code> of indices pertaining to which
    planning units should be locked in.</p></dd>
    <dt><code>character</code></dt><dd><p>column name in the attribute table values
    indicating if planning units should be locked in. This option is
    only available if the planning units in <code>x</code> are a
    <code><a href='http://www.rdocumentation.org/packages/sp/topics/Spatial-class'>Spatial-class</a></code> object. The column in the attribute
    table should have <code>logical</code>  (ie. <code>TRUE</code> or <code>FALSE</code>)
    values indicating if the planning unit is to be locked in.</p></dd>
    <dt><code><a href='http://www.rdocumentation.org/packages/raster/topics/Raster-classes'>Raster-class</a></code> object</dt><dd><p>planning units in <code>x</code>
    that intersect with cells in <code>y</code> are locked in. Specifically,
    only if the intersect with cells in <code>y</code> are that are not equal to
    zero or <code>NA</code>.</p></dd>
    <dt><code><a href='http://www.rdocumentation.org/packages/sp/topics/Spatial-class'>Spatial-class</a></code> object.</dt><dd><p>planning units in <code>x</code>
    that spatially intersect with <code>locked_in</code> are locked in.</p></dd>
    </dl>
    
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <p><code><a href='constraints.html'>constraints</a></code>, <code><a href='add_locked_out_constraints.html'>add_locked_out_constraints</a></code>, <code><a href='penalties.html'>penalties</a></code>.</p>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'># create basic problem</span>
<span class='no'>p1</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='problem.html'>problem</a></span>(<span class='no'>sim_pu_polygons</span>, <span class='no'>sim_features</span>) <span class='kw'>%&gt;%</span>
  <span class='fu'><a href='add_min_set_objective.html'>add_min_set_objective</a></span>() <span class='kw'>%&gt;%</span>
  <span class='fu'><a href='add_relative_targets.html'>add_relative_targets</a></span>(<span class='fl'>0.2</span>)

<span class='co'># create problem with added locked in constraints using integers</span>
<span class='no'>p2</span> <span class='kw'>&lt;-</span> <span class='no'>p1</span> <span class='kw'>%&gt;%</span> <span class='fu'>add_locked_in_constraints</span>(<span class='fu'>which</span>(<span class='no'>sim_pu_polygons</span>$<span class='no'>locked_in</span>))

<span class='co'># create problem with added locked in constraints using a field name</span>
<span class='no'>p3</span> <span class='kw'>&lt;-</span> <span class='no'>p1</span> <span class='kw'>%&gt;%</span> <span class='fu'>add_locked_in_constraints</span>(<span class='st'>"locked_in"</span>)

<span class='co'># create problem with added locked in constraints using raster data</span>
<span class='no'>p4</span> <span class='kw'>&lt;-</span> <span class='no'>p1</span> <span class='kw'>%&gt;%</span> <span class='fu'>add_locked_in_constraints</span>(<span class='no'>sim_locked_in_raster</span>)

<span class='co'># create problem with added locked in constraints using spatial polygons data</span>
<span class='no'>locked_in</span> <span class='kw'>&lt;-</span> <span class='no'>sim_pu_polygons</span>[<span class='no'>sim_pu_polygons</span>$<span class='no'>locked_in</span> <span class='kw'>==</span> <span class='fl'>1</span>,]
<span class='no'>p5</span> <span class='kw'>&lt;-</span> <span class='no'>p1</span> <span class='kw'>%&gt;%</span> <span class='fu'>add_locked_in_constraints</span>(<span class='no'>locked_in</span>)


<span class='co'># solve problems</span>
<span class='no'>s1</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='solve.html'>solve</a></span>(<span class='no'>p1</span>)</div><div class='output co'>#&gt; Optimize a model with 5 rows, 90 columns and 450 nonzeros
#&gt; Variable types: 0 continuous, 90 integer (90 binary)
#&gt; Coefficient statistics:
#&gt;   Matrix range     [2e-01, 9e-01]
#&gt;   Objective range  [2e+02, 2e+02]
#&gt;   Bounds range     [1e+00, 1e+00]
#&gt;   RHS range        [6e+00, 1e+01]
#&gt; Found heuristic solution: objective 4135.27
#&gt; Presolve time: 0.00s
#&gt; Presolved: 5 rows, 90 columns, 450 nonzeros
#&gt; Variable types: 0 continuous, 90 integer (90 binary)
#&gt; Presolved: 5 rows, 90 columns, 450 nonzeros
#&gt; 
#&gt; 
#&gt; Root relaxation: objective 3.490348e+03, 17 iterations, 0.00 seconds
#&gt; 
#&gt;     Nodes    |    Current Node    |     Objective Bounds      |     Work
#&gt;  Expl Unexpl |  Obj  Depth IntInf | Incumbent    BestBd   Gap | It/Node Time
#&gt; 
#&gt;      0     0 3490.34813    0    4 4135.27447 3490.34813  15.6%     -    0s
#&gt; H    0     0                    3597.0951275 3490.34813  2.97%     -    0s
#&gt; 
#&gt; Explored 0 nodes (17 simplex iterations) in 0.01 seconds
#&gt; Thread count was 1 (of 4 available processors)
#&gt; 
#&gt; Solution count 2: 3597.1 4135.27 
#&gt; Pool objective bound 3490.35
#&gt; 
#&gt; Optimal solution found (tolerance 1.00e-01)
#&gt; Best objective 3.597095127479e+03, best bound 3.490348127696e+03, gap 2.9676%</div><div class='input'><span class='no'>s2</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='solve.html'>solve</a></span>(<span class='no'>p2</span>)</div><div class='output co'>#&gt; Optimize a model with 5 rows, 90 columns and 450 nonzeros
#&gt; Variable types: 0 continuous, 90 integer (90 binary)
#&gt; Coefficient statistics:
#&gt;   Matrix range     [2e-01, 9e-01]
#&gt;   Objective range  [2e+02, 2e+02]
#&gt;   Bounds range     [1e+00, 1e+00]
#&gt;   RHS range        [6e+00, 1e+01]
#&gt; Found heuristic solution: objective 4020.2
#&gt; Presolve removed 0 rows and 10 columns
#&gt; Presolve time: 0.00s
#&gt; Presolved: 5 rows, 80 columns, 400 nonzeros
#&gt; Variable types: 0 continuous, 80 integer (80 binary)
#&gt; Presolved: 5 rows, 80 columns, 400 nonzeros
#&gt; 
#&gt; 
#&gt; Root relaxation: objective 3.620461e+03, 11 iterations, 0.00 seconds
#&gt; 
#&gt;     Nodes    |    Current Node    |     Objective Bounds      |     Work
#&gt;  Expl Unexpl |  Obj  Depth IntInf | Incumbent    BestBd   Gap | It/Node Time
#&gt; 
#&gt;      0     0 3620.46082    0    3 4020.20382 3620.46082  9.94%     -    0s
#&gt; 
#&gt; Explored 0 nodes (11 simplex iterations) in 0.01 seconds
#&gt; Thread count was 1 (of 4 available processors)
#&gt; 
#&gt; Solution count 1: 4020.2 
#&gt; Pool objective bound 3620.46
#&gt; 
#&gt; Optimal solution found (tolerance 1.00e-01)
#&gt; Best objective 4.020203818008e+03, best bound 3.620460824006e+03, gap 9.9434%</div><div class='input'><span class='no'>s3</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='solve.html'>solve</a></span>(<span class='no'>p3</span>)</div><div class='output co'>#&gt; Optimize a model with 5 rows, 90 columns and 450 nonzeros
#&gt; Variable types: 0 continuous, 90 integer (90 binary)
#&gt; Coefficient statistics:
#&gt;   Matrix range     [2e-01, 9e-01]
#&gt;   Objective range  [2e+02, 2e+02]
#&gt;   Bounds range     [1e+00, 1e+00]
#&gt;   RHS range        [6e+00, 1e+01]
#&gt; Found heuristic solution: objective 4020.2
#&gt; Presolve removed 0 rows and 10 columns
#&gt; Presolve time: 0.00s
#&gt; Presolved: 5 rows, 80 columns, 400 nonzeros
#&gt; Variable types: 0 continuous, 80 integer (80 binary)
#&gt; Presolved: 5 rows, 80 columns, 400 nonzeros
#&gt; 
#&gt; 
#&gt; Root relaxation: objective 3.620461e+03, 11 iterations, 0.00 seconds
#&gt; 
#&gt;     Nodes    |    Current Node    |     Objective Bounds      |     Work
#&gt;  Expl Unexpl |  Obj  Depth IntInf | Incumbent    BestBd   Gap | It/Node Time
#&gt; 
#&gt;      0     0 3620.46082    0    3 4020.20382 3620.46082  9.94%     -    0s
#&gt; 
#&gt; Explored 0 nodes (11 simplex iterations) in 0.01 seconds
#&gt; Thread count was 1 (of 4 available processors)
#&gt; 
#&gt; Solution count 1: 4020.2 
#&gt; Pool objective bound 3620.46
#&gt; 
#&gt; Optimal solution found (tolerance 1.00e-01)
#&gt; Best objective 4.020203818008e+03, best bound 3.620460824006e+03, gap 9.9434%</div><div class='input'><span class='no'>s4</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='solve.html'>solve</a></span>(<span class='no'>p4</span>)</div><div class='output co'>#&gt; Optimize a model with 5 rows, 90 columns and 450 nonzeros
#&gt; Variable types: 0 continuous, 90 integer (90 binary)
#&gt; Coefficient statistics:
#&gt;   Matrix range     [2e-01, 9e-01]
#&gt;   Objective range  [2e+02, 2e+02]
#&gt;   Bounds range     [1e+00, 1e+00]
#&gt;   RHS range        [6e+00, 1e+01]
#&gt; Found heuristic solution: objective 4020.2
#&gt; Presolve removed 0 rows and 10 columns
#&gt; Presolve time: 0.00s
#&gt; Presolved: 5 rows, 80 columns, 400 nonzeros
#&gt; Variable types: 0 continuous, 80 integer (80 binary)
#&gt; Presolved: 5 rows, 80 columns, 400 nonzeros
#&gt; 
#&gt; 
#&gt; Root relaxation: objective 3.620461e+03, 11 iterations, 0.00 seconds
#&gt; 
#&gt;     Nodes    |    Current Node    |     Objective Bounds      |     Work
#&gt;  Expl Unexpl |  Obj  Depth IntInf | Incumbent    BestBd   Gap | It/Node Time
#&gt; 
#&gt;      0     0 3620.46082    0    3 4020.20382 3620.46082  9.94%     -    0s
#&gt; 
#&gt; Explored 0 nodes (11 simplex iterations) in 0.01 seconds
#&gt; Thread count was 1 (of 4 available processors)
#&gt; 
#&gt; Solution count 1: 4020.2 
#&gt; Pool objective bound 3620.46
#&gt; 
#&gt; Optimal solution found (tolerance 1.00e-01)
#&gt; Best objective 4.020203818008e+03, best bound 3.620460824006e+03, gap 9.9434%</div><div class='input'><span class='no'>s5</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='solve.html'>solve</a></span>(<span class='no'>p5</span>)</div><div class='output co'>#&gt; Optimize a model with 5 rows, 90 columns and 450 nonzeros
#&gt; Variable types: 0 continuous, 90 integer (90 binary)
#&gt; Coefficient statistics:
#&gt;   Matrix range     [2e-01, 9e-01]
#&gt;   Objective range  [2e+02, 2e+02]
#&gt;   Bounds range     [1e+00, 1e+00]
#&gt;   RHS range        [6e+00, 1e+01]
#&gt; Found heuristic solution: objective 4020.2
#&gt; Presolve removed 0 rows and 10 columns
#&gt; Presolve time: 0.00s
#&gt; Presolved: 5 rows, 80 columns, 400 nonzeros
#&gt; Variable types: 0 continuous, 80 integer (80 binary)
#&gt; Presolved: 5 rows, 80 columns, 400 nonzeros
#&gt; 
#&gt; 
#&gt; Root relaxation: objective 3.620461e+03, 11 iterations, 0.00 seconds
#&gt; 
#&gt;     Nodes    |    Current Node    |     Objective Bounds      |     Work
#&gt;  Expl Unexpl |  Obj  Depth IntInf | Incumbent    BestBd   Gap | It/Node Time
#&gt; 
#&gt;      0     0 3620.46082    0    3 4020.20382 3620.46082  9.94%     -    0s
#&gt; 
#&gt; Explored 0 nodes (11 simplex iterations) in 0.01 seconds
#&gt; Thread count was 1 (of 4 available processors)
#&gt; 
#&gt; Solution count 1: 4020.2 
#&gt; Pool objective bound 3620.46
#&gt; 
#&gt; Optimal solution found (tolerance 1.00e-01)
#&gt; Best objective 4.020203818008e+03, best bound 3.620460824006e+03, gap 9.9434%</div><div class='input'>
<span class='co'># plot solutions</span>
<span class='fu'>par</span>(<span class='kw'>mfrow</span><span class='kw'>=</span><span class='fu'>c</span>(<span class='fl'>3</span>,<span class='fl'>2</span>))
<span class='fu'>plot</span>(<span class='no'>s1</span>, <span class='kw'>main</span><span class='kw'>=</span><span class='st'>"none locked in"</span>)
<span class='fu'>plot</span>(<span class='no'>s1</span>[<span class='no'>s1</span>$<span class='no'>solution</span><span class='kw'>==</span><span class='fl'>1</span>,], <span class='kw'>col</span><span class='kw'>=</span><span class='st'>"darkgreen"</span>, <span class='kw'>add</span><span class='kw'>=</span><span class='fl'>TRUE</span>)

<span class='fu'>plot</span>(<span class='no'>s2</span>, <span class='kw'>main</span><span class='kw'>=</span><span class='st'>"locked in (integer input)"</span>)
<span class='fu'>plot</span>(<span class='no'>s2</span>[<span class='no'>s2</span>$<span class='no'>solution</span><span class='kw'>==</span><span class='fl'>1</span>,], <span class='kw'>col</span><span class='kw'>=</span><span class='st'>"darkgreen"</span>, <span class='kw'>add</span><span class='kw'>=</span><span class='fl'>TRUE</span>)

<span class='fu'>plot</span>(<span class='no'>s3</span>, <span class='kw'>main</span><span class='kw'>=</span><span class='st'>"locked in (character input)"</span>)
<span class='fu'>plot</span>(<span class='no'>s3</span>[<span class='no'>s3</span>$<span class='no'>solution</span><span class='kw'>==</span><span class='fl'>1</span>,], <span class='kw'>col</span><span class='kw'>=</span><span class='st'>"darkgreen"</span>, <span class='kw'>add</span><span class='kw'>=</span><span class='fl'>TRUE</span>)

<span class='fu'>plot</span>(<span class='no'>s4</span>, <span class='kw'>main</span><span class='kw'>=</span><span class='st'>"locked in (raster input)"</span>)
<span class='fu'>plot</span>(<span class='no'>s4</span>[<span class='no'>s4</span>$<span class='no'>solution</span><span class='kw'>==</span><span class='fl'>1</span>,], <span class='kw'>col</span><span class='kw'>=</span><span class='st'>"darkgreen"</span>, <span class='kw'>add</span><span class='kw'>=</span><span class='fl'>TRUE</span>)

<span class='fu'>plot</span>(<span class='no'>s5</span>, <span class='kw'>main</span><span class='kw'>=</span><span class='st'>"locked in (polygon input)"</span>)
<span class='fu'>plot</span>(<span class='no'>s5</span>[<span class='no'>s5</span>$<span class='no'>solution</span><span class='kw'>==</span><span class='fl'>1</span>,], <span class='kw'>col</span><span class='kw'>=</span><span class='st'>"darkgreen"</span>, <span class='kw'>add</span><span class='kw'>=</span><span class='fl'>TRUE</span>)</div><img src='add_locked_in_constraints-12.png' alt='' width='540' height='400' /></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>

      <li><a href="#details">Details</a></li>

      <li><a href="#see-also">See also</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by <a href='http://jeffrey-hanson.com'>Jeffrey O Hanson</a>, <a href='http://www.richard-schuster.com/'>Richard Schuster</a>, Nina Morrell, <a href='http://strimas.com'>Matthew Strimas-Mackey</a>, Matthew E Watts, <a href='http://arcese.forestry.ubc.ca'>Peter Arcese</a>, <a href='https://josephrbennett.wordpress.com/'>Joeseph Bennett</a>, Hugh P Possingham.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  </body>
</html>
