<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Add feature contiguity constraints — add_feature_contiguity_constraints • prioritizr</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- sticky kit -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>


<!-- docsearch -->
<script src="../docsearch.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.1/docsearch.min.css" integrity="sha256-QOSRU/ra9ActyXkIBbiIB144aDBdtvXBcNc3OTNuX/Q=" crossorigin="anonymous" />
<link href="../docsearch.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script>



<meta property="og:title" content="Add feature contiguity constraints — add_feature_contiguity_constraints" />
<meta property="og:description" content="Add constraints to a problem to ensure that each feature is
represented in a contiguous unit of dispersible habitat. These constraints
are a more advanced version of those implemented in the
add_contiguity_constraints function, because they ensure that
each feature is represented in a contiguous unit and not that the entire
solution should form a contiguous unit. Additionally, this function
can use data showing the distribution of dispersible habitat for each
feature to ensure that all features can disperse through out the areas
designated for their conservation." />
<meta property="og:image" content="https://prioritizr.net/logo.png" />
<meta name="twitter:card" content="summary" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-70466840-4"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-70466840-4');
</script>

  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">prioritizr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">5.0.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/prioritizr.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/gurobi_installation.html">Gurobi Installation Guide</a>
    </li>
    <li>
      <a href="../articles/publication_record.html">Publication Record</a>
    </li>
    <li>
      <a href="../articles/saltspring.html">Salt Spring Island Tutorial</a>
    </li>
    <li>
      <a href="../articles/tasmania.html">Tasmania Tutorial</a>
    </li>
    <li>
      <a href="../articles/zones.html">Management Zones</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/prioritizr/prioritizr">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
      <form class="navbar-form navbar-right" role="search">
        <div class="form-group">
          <input type="search" class="form-control" name="search-input" id="search-input" placeholder="Search..." aria-label="Search for..." autocomplete="off">
        </div>
      </form>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Add feature contiguity constraints</h1>
    <small class="dont-index">Source: <a href='https://github.com/prioritizr/prioritizr/blob/master/R/add_feature_contiguity_constraints.R'><code>R/add_feature_contiguity_constraints.R</code></a></small>
    <div class="hidden name"><code>add_feature_contiguity_constraints.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Add constraints to a <code><a href='problem.html'>problem</a></code> to ensure that each feature is
represented in a contiguous unit of dispersible habitat. These constraints
are a more advanced version of those implemented in the
<code><a href='add_contiguity_constraints.html'>add_contiguity_constraints</a></code> function, because they ensure that
each feature is represented in a contiguous unit and not that the entire
solution should form a contiguous unit. Additionally, this function
can use data showing the distribution of dispersible habitat for each
feature to ensure that all features can disperse through out the areas
designated for their conservation.</p>
    </div>

    <pre class="usage"><span class='co'># S4 method for ConservationProblem,ANY,Matrix</span>
<span class='fu'>add_feature_contiguity_constraints</span>(<span class='no'>x</span>, <span class='no'>zones</span>, <span class='no'>data</span>)

<span class='co'># S4 method for ConservationProblem,ANY,data.frame</span>
<span class='fu'>add_feature_contiguity_constraints</span>(<span class='no'>x</span>, <span class='no'>zones</span>, <span class='no'>data</span>)

<span class='co'># S4 method for ConservationProblem,ANY,matrix</span>
<span class='fu'>add_feature_contiguity_constraints</span>(<span class='no'>x</span>, <span class='no'>zones</span>, <span class='no'>data</span>)

<span class='co'># S4 method for ConservationProblem,ANY,ANY</span>
<span class='fu'>add_feature_contiguity_constraints</span>(<span class='no'>x</span>, <span class='no'>zones</span>, <span class='no'>data</span>)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>x</th>
      <td><p><code><a href='ConservationProblem-class.html'>ConservationProblem-class</a></code> object.</p></td>
    </tr>
    <tr>
      <th>zones</th>
      <td><p><code>matrix</code>, <code>Matrix</code> or <code>list</code> object describing
the connection scheme for different zones. For <code>matrix</code> or
and <code>Matrix</code> arguments, each row and column corresponds
to a different zone in the argument to <code>x</code>, and cell values must
contain binary <code>numeric</code> values (i.e. one or zero) that indicate
if connected planning units (as specified in the argument to
<code>data</code>) should be still considered connected if they are allocated to
different zones. The cell values along the diagonal
of the matrix indicate if planning units should be subject to
contiguity constraints when they are allocated to a given zone. Note
arguments to <code>zones</code> must be symmetric, and that a row or column has
a value of one then the diagonal element for that row or column must also
have a value of one. If the connection scheme between different zones
should differ among the features, then the argument to <code>zones</code> should
be a <code>list</code> of <code>matrix</code> or <code>Matrix</code> objects that shows the
specific scheme for each feature using the conventions described above.
The default argument to <code>zones</code> is an identity
matrix (i.e. a matrix with ones along the matrix diagonal and zeros
elsewhere), so that planning units are only considered connected if they
are both allocated to the same zone.</p></td>
    </tr>
    <tr>
      <th>data</th>
      <td><p><code>NULL</code>, <code>matrix</code>, <code>Matrix</code>, <code>data.frame</code>
or <code>list</code> of <code>matrix</code>, <code>Matrix</code>, or <code>data.frame</code>
objects. The argument to data shows which planning units should be treated
as being connected when implementing constraints to ensure that features
are represented in contiguous units. If different features have
different dispersal capabilities, then it may be desirable to specify
which sets of planning units should be treated as being connected
for which features using a <code>list</code> of objects. The default argument
is <code>NULL</code> which means that the connection data is calculated
automatically using the <code><a href='adjacency_matrix.html'>adjacency_matrix</a></code> function and so
all adjacent planning units are treated as being connected for all
features. See the Details section for more information.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p><code><a href='ConservationProblem-class.html'>ConservationProblem-class</a></code> object with the constraints
  added to it.</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>This function uses connection data to identify solutions that
  represent features in contiguous units of dispersible habitat. In earlier
  versions of the <span class="pkg">prioritizr</span> package, it was known as the
  <code>add_corridor_constraints</code> function but has since been renamed for
  clarity. It was inspired by the mathematical formulations detailed in
  Onal and Briers (2006) and Cardeira <em>et al.</em> 2010. For an
  example that has used these constraints, see Hanson, Fuller,
  and Rhodes (2018). Please note
  that these constraints require the expanded formulation and therefore
  cannot be used with feature data that have negative vales.
  <strong>Please note that adding these constraints to a problem will
  drastically increase the amount of time required to solve it.</strong></p>
<p>The argument to <code>data</code> can be specified in several ways:</p>
<p></p><dl class='dl-horizontal'>
    <dt><code>NULL</code></dt><dd><p>connection data should be calculated automatically
    using the <code><a href='adjacency_matrix.html'>adjacency_matrix</a></code> function. This is the default
    argument and means that all adjacent planning units are treated
    as potentially dispersible for all features.
    Note that the connection data must be manually defined
    using one of the other formats below when the planning unit data
    in the argument to <code>x</code> is not spatially referenced (e.g.
    in <code>data.frame</code> or <code>numeric</code> format).</p></dd>
  <dt><code>matrix</code>, <code>Matrix</code></dt><dd><p>where rows and columns represent
    different planning units and the value of each cell indicates if the
    two planning units are connected or not. Cell values should be binary
    <code>numeric</code> values (i.e. one or zero). Cells that occur along the
    matrix diagonal have no effect on the solution at all because each
    planning unit cannot be a connected with itself. Note that pairs
    of connected planning units are treated as being potentially dispersible
    for all features.</p></dd>
    <dt><code>data.frame</code></dt><dd><p>containing the fields (columns)
    <code>"id1"</code>, <code>"id2"</code>, and <code>"boundary"</code>. Here, each row
    denotes the connectivity between two planning units following the
    <em>Marxan</em> format. The field <code>boundary</code> should contain
    binary <code>numeric</code> values that indicate if the two planning units
    specified in the fields <code>"id1"</code> and <code>"id2"</code> are connected
    or not. This data can be used to describe symmetric or
    asymmetric relationships between planning units. By default,
    input data is assumed to be symmetric unless asymmetric data is
    also included (e.g. if data is present for planning units 2 and 3, then
    the same amount of connectivity is expected for planning units 3 and 2,
    unless connectivity data is also provided for planning units 3 and 2).
    Note that pairs of connected planning units are treated as being
    potentially dispersible for all features.</p></dd>
    <dt><code>list</code></dt><dd><p>containing <code>matrix</code>, <code>Matrix</code>, or
    <code>data.frame</code> objects showing which planning units
    should be treated as connected for each feature. Each element in the
    <code>list</code> should correspond to a different feature (specifically,
    a different target in the problem), and should contain a <code>matrix</code>,
    <code>Matrix</code>, or <code>data.frame</code> object that follows the conventions
    detailed above.</p></dd>
    </dl>
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    
    <p>Onal H and Briers RA (2006) Optimal selection of a connected
reserve network. <em>Operations Research</em>, 54: 379--388.</p>
<p>Cardeira JO, Pinto LS, Cabeza M and Gaston KJ (2010) Species specific
connectivity in reserve-network design using graphs.
<em>Biological Conservation</em>, 2: 408--415.</p>
<p>Hanson JO, Fuller RA, &amp; Rhodes JR (2018) Conventional methods for enhancing
connectivity in conservation planning do not always maintain gene flow.
<em>Journal of Applied Ecology</em>, In press:
<a href='https://doi.org/10.1111/1365-2664.13315'>https://doi.org/10.1111/1365-2664.13315</a>.</p>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><code><a href='constraints.html'>constraints</a></code>.</p></div>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'># load data</span>
<span class='fu'><a href='https://www.rdocumentation.org/packages/utils/topics/data'>data</a></span>(<span class='no'>sim_pu_raster</span>, <span class='no'>sim_pu_zones_stack</span>, <span class='no'>sim_features</span>, <span class='no'>sim_features_zones</span>)

<span class='co'># create minimal problem</span>
<span class='no'>p1</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='problem.html'>problem</a></span>(<span class='no'>sim_pu_raster</span>, <span class='no'>sim_features</span>) <span class='kw'>%&gt;%</span>
      <span class='fu'><a href='add_min_set_objective.html'>add_min_set_objective</a></span>() <span class='kw'>%&gt;%</span>
      <span class='fu'><a href='add_relative_targets.html'>add_relative_targets</a></span>(<span class='fl'>0.3</span>)

<span class='co'># create problem with contiguity constraints</span>
<span class='no'>p2</span> <span class='kw'>&lt;-</span> <span class='no'>p1</span> <span class='kw'>%&gt;%</span> <span class='fu'><a href='add_contiguity_constraints.html'>add_contiguity_constraints</a></span>()

<span class='co'># create problem with constraints to represent features in contiguous</span>
<span class='co'># units</span>
<span class='no'>p3</span> <span class='kw'>&lt;-</span> <span class='no'>p1</span> <span class='kw'>%&gt;%</span> <span class='fu'>add_feature_contiguity_constraints</span>()

<span class='co'># create problem with constraints to represent features in contiguous</span>
<span class='co'># units that contain highly suitable habitat values</span>
<span class='co'># (specifically in the top 1.5th percentile)</span>
<span class='no'>cm4</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/lapply'>lapply</a></span>(<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/seq'>seq_len</a></span>(<span class='fu'>nlayers</span>(<span class='no'>sim_features</span>)), <span class='kw'>function</span>(<span class='no'>i</span>) {
  <span class='co'># create connectivity matrix using the i'th feature's habitat data</span>
  <span class='no'>m</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='connectivity_matrix.html'>connectivity_matrix</a></span>(<span class='no'>sim_pu_raster</span>, <span class='no'>sim_features</span><span class='kw'>[[</span><span class='no'>i</span>]])
  <span class='co'># convert matrix to TRUE/FALSE values in top 20th percentile</span>
  <span class='no'>m</span> <span class='kw'>&lt;-</span> <span class='no'>m</span> <span class='kw'>&gt;</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/stats/topics/quantile'>quantile</a></span>(<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/vector'>as.vector</a></span>(<span class='no'>m</span>), <span class='fl'>1</span> - <span class='fl'>0.015</span>, <span class='kw'>names</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)
  <span class='co'># convert matrix from TRUE/FALSE to sparse matrix with 0/1s</span>
  <span class='no'>m</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='as.html'>as</a></span>(<span class='no'>m</span>, <span class='st'>"dgCMatrix"</span>)
  <span class='co'># remove 0s from the sparse matrix</span>
  <span class='no'>m</span> <span class='kw'>&lt;-</span> <span class='kw pkg'>Matrix</span><span class='kw ns'>::</span><span class='fu'><a href='https://www.rdocumentation.org/packages/Matrix/topics/drop0'>drop0</a></span>(<span class='no'>m</span>)
  <span class='co'># return matrix</span>
  <span class='no'>m</span>
})
<span class='no'>p4</span> <span class='kw'>&lt;-</span> <span class='no'>p1</span> <span class='kw'>%&gt;%</span> <span class='fu'>add_feature_contiguity_constraints</span>(<span class='kw'>data</span> <span class='kw'>=</span> <span class='no'>cm4</span>)</div><div class='input'><span class='co'># solve problems</span>
<span class='no'>s1</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/utils/topics/stack'>stack</a></span>(<span class='fu'><a href='solve.html'>solve</a></span>(<span class='no'>p1</span>), <span class='fu'><a href='solve.html'>solve</a></span>(<span class='no'>p2</span>), <span class='fu'><a href='solve.html'>solve</a></span>(<span class='no'>p3</span>), <span class='fu'><a href='solve.html'>solve</a></span>(<span class='no'>p4</span>))</div><div class='output co'>#&gt; Gurobi Optimizer version 9.0.1 build v9.0.1rc0 (linux64)
#&gt; Optimize a model with 5 rows, 90 columns and 450 nonzeros
#&gt; Model fingerprint: 0xfdd45583
#&gt; Variable types: 0 continuous, 90 integer (90 binary)
#&gt; Coefficient statistics:
#&gt;   Matrix range     [2e-01, 9e-01]
#&gt;   Objective range  [2e+02, 2e+02]
#&gt;   Bounds range     [1e+00, 1e+00]
#&gt;   RHS range        [9e+00, 2e+01]
#&gt; Found heuristic solution: objective 6571.2631720
#&gt; Presolve time: 0.00s
#&gt; Presolved: 5 rows, 90 columns, 450 nonzeros
#&gt; Variable types: 0 continuous, 90 integer (90 binary)
#&gt; Presolved: 5 rows, 90 columns, 450 nonzeros
#&gt; 
#&gt; 
#&gt; Root relaxation: objective 5.894507e+03, 16 iterations, 0.00 seconds
#&gt; 
#&gt;     Nodes    |    Current Node    |     Objective Bounds      |     Work
#&gt;  Expl Unexpl |  Obj  Depth IntInf | Incumbent    BestBd   Gap | It/Node Time
#&gt; 
#&gt;      0     0 5894.50724    0    4 6571.26317 5894.50724  10.3%     -    0s
#&gt; H    0     0                    6035.1349601 5894.50724  2.33%     -    0s
#&gt; 
#&gt; Explored 1 nodes (16 simplex iterations) in 0.00 seconds
#&gt; Thread count was 1 (of 4 available processors)
#&gt; 
#&gt; Solution count 2: 6035.13 6571.26 
#&gt; 
#&gt; Optimal solution found (tolerance 1.00e-01)
#&gt; Best objective 6.035134960093e+03, best bound 5.894507235784e+03, gap 2.3302%
#&gt; Gurobi Optimizer version 9.0.1 build v9.0.1rc0 (linux64)
#&gt; Optimize a model with 236 rows, 234 columns and 1202 nonzeros
#&gt; Model fingerprint: 0x46e2f0fc
#&gt; Variable types: 0 continuous, 234 integer (234 binary)
#&gt; Coefficient statistics:
#&gt;   Matrix range     [2e-01, 1e+00]
#&gt;   Objective range  [2e+02, 2e+02]
#&gt;   Bounds range     [1e+00, 1e+00]
#&gt;   RHS range        [1e+00, 2e+01]
#&gt; Presolve removed 24 rows and 25 columns
#&gt; Presolve time: 0.01s
#&gt; Presolved: 212 rows, 209 columns, 945 nonzeros
#&gt; Variable types: 0 continuous, 209 integer (209 binary)
#&gt; Presolved: 212 rows, 209 columns, 945 nonzeros
#&gt; 
#&gt; 
#&gt; Root relaxation: objective 5.974619e+03, 113 iterations, 0.00 seconds
#&gt; 
#&gt;     Nodes    |    Current Node    |     Objective Bounds      |     Work
#&gt;  Expl Unexpl |  Obj  Depth IntInf | Incumbent    BestBd   Gap | It/Node Time
#&gt; 
#&gt;      0     0 5974.61922    0   87          - 5974.61922      -     -    0s
#&gt;      0     0 5980.28056    0   92          - 5980.28056      -     -    0s
#&gt;      0     0 5981.05378    0   93          - 5981.05378      -     -    0s
#&gt;      0     0 5987.71284    0   93          - 5987.71284      -     -    0s
#&gt;      0     0 5996.27014    0   83          - 5996.27014      -     -    0s
#&gt;      0     0 5996.86398    0   87          - 5996.86398      -     -    0s
#&gt;      0     0 6000.86878    0   96          - 6000.86878      -     -    0s
#&gt;      0     0 6000.86878    0   96          - 6000.86878      -     -    0s
#&gt;      0     0 6000.93283    0   99          - 6000.93283      -     -    0s
#&gt;      0     0 6000.93283    0   98          - 6000.93283      -     -    0s
#&gt; H    0     0                    6519.3118411 6000.93283  7.95%     -    0s
#&gt; 
#&gt; Cutting planes:
#&gt;   Gomory: 1
#&gt;   Clique: 2
#&gt;   Zero half: 10
#&gt;   Mod-K: 1
#&gt;   RLT: 1
#&gt; 
#&gt; Explored 1 nodes (317 simplex iterations) in 0.13 seconds
#&gt; Thread count was 1 (of 4 available processors)
#&gt; 
#&gt; Solution count 1: 6519.31 
#&gt; 
#&gt; Optimal solution found (tolerance 1.00e-01)
#&gt; Best objective 6.519311841128e+03, best bound 6.000932832985e+03, gap 7.9514%
#&gt; Gurobi Optimizer version 9.0.1 build v9.0.1rc0 (linux64)
#&gt; Optimize a model with 1610 rows, 1260 columns and 5110 nonzeros
#&gt; Model fingerprint: 0x0d0ee35d
#&gt; Variable types: 0 continuous, 1260 integer (1260 binary)
#&gt; Coefficient statistics:
#&gt;   Matrix range     [2e-01, 1e+00]
#&gt;   Objective range  [2e+02, 2e+02]
#&gt;   Bounds range     [1e+00, 1e+00]
#&gt;   RHS range        [1e+00, 2e+01]
#&gt; Presolve removed 194 rows and 195 columns
#&gt; Presolve time: 0.06s
#&gt; Presolved: 1416 rows, 1065 columns, 4023 nonzeros
#&gt; Variable types: 0 continuous, 1065 integer (1065 binary)
#&gt; Presolved: 1416 rows, 1065 columns, 4023 nonzeros
#&gt; 
#&gt; 
#&gt; Root relaxation: objective 5.974619e+03, 1132 iterations, 0.03 seconds
#&gt; 
#&gt;     Nodes    |    Current Node    |     Objective Bounds      |     Work
#&gt;  Expl Unexpl |  Obj  Depth IntInf | Incumbent    BestBd   Gap | It/Node Time
#&gt; 
#&gt;      0     0 5974.61922    0  492          - 5974.61922      -     -    0s
#&gt;      0     0 5978.38239    0  522          - 5978.38239      -     -    0s
#&gt;      0     0 5978.45612    0  510          - 5978.45612      -     -    0s
#&gt;      0     0 5980.53296    0  493          - 5980.53296      -     -    0s
#&gt;      0     0 5981.04217    0  523          - 5981.04217      -     -    0s
#&gt;      0     0 5981.05802    0  507          - 5981.05802      -     -    0s
#&gt;      0     0 5981.43297    0  512          - 5981.43297      -     -    0s
#&gt;      0     0 5981.46019    0  517          - 5981.46019      -     -    0s
#&gt;      0     0 5981.46019    0  519          - 5981.46019      -     -    0s
#&gt;      0     0 5981.57408    0  518          - 5981.57408      -     -    0s
#&gt;      0     0 5981.81189    0  521          - 5981.81189      -     -    0s
#&gt;      0     0 5984.70623    0  557          - 5984.70623      -     -    0s
#&gt;      0     0 5984.80790    0  558          - 5984.80790      -     -    0s
#&gt;      0     0 5984.85748    0  550          - 5984.85748      -     -    0s
#&gt;      0     0 5985.59944    0  582          - 5985.59944      -     -    0s
#&gt;      0     0 5985.67508    0  561          - 5985.67508      -     -    0s
#&gt;      0     0 5985.67508    0  557          - 5985.67508      -     -    0s
#&gt; H    0     0                    13027.013855 5985.67508  54.1%     -    0s
#&gt;      0     2 5985.70508    0  555 13027.0139 5985.70508  54.1%     -    0s
#&gt; H   55    51                    6310.2257954 5985.87997  5.14%  58.2    0s
#&gt; 
#&gt; Cutting planes:
#&gt;   Gomory: 1
#&gt;   Zero half: 13
#&gt;   Mod-K: 2
#&gt; 
#&gt; Explored 56 nodes (6215 simplex iterations) in 0.99 seconds
#&gt; Thread count was 1 (of 4 available processors)
#&gt; 
#&gt; Solution count 2: 6310.23 13027 
#&gt; 
#&gt; Optimal solution found (tolerance 1.00e-01)
#&gt; Best objective 6.310225795397e+03, best bound 5.985879968052e+03, gap 5.1400%
#&gt; Gurobi Optimizer version 9.0.1 build v9.0.1rc0 (linux64)
#&gt; Optimize a model with 1076 rows, 915 columns and 3541 nonzeros
#&gt; Model fingerprint: 0x8c7d2574
#&gt; Variable types: 0 continuous, 915 integer (915 binary)
#&gt; Coefficient statistics:
#&gt;   Matrix range     [2e-01, 1e+00]
#&gt;   Objective range  [2e+02, 2e+02]
#&gt;   Bounds range     [1e+00, 1e+00]
#&gt;   RHS range        [1e+00, 2e+01]
#&gt; Presolve removed 608 rows and 529 columns
#&gt; Presolve time: 0.02s
#&gt; Presolved: 468 rows, 386 columns, 1294 nonzeros
#&gt; Variable types: 0 continuous, 386 integer (386 binary)
#&gt; Presolved: 468 rows, 386 columns, 1294 nonzeros
#&gt; 
#&gt; 
#&gt; Root relaxation: objective 1.168422e+04, 353 iterations, 0.00 seconds
#&gt; 
#&gt;     Nodes    |    Current Node    |     Objective Bounds      |     Work
#&gt;  Expl Unexpl |  Obj  Depth IntInf | Incumbent    BestBd   Gap | It/Node Time
#&gt; 
#&gt;      0     0 11684.2161    0   75          - 11684.2161      -     -    0s
#&gt;      0     0 11978.3156    0   55          - 11978.3156      -     -    0s
#&gt; H    0     0                    12318.131414 11978.3156  2.76%     -    0s
#&gt; 
#&gt; Cutting planes:
#&gt;   Gomory: 4
#&gt;   Clique: 50
#&gt;   GUB cover: 1
#&gt;   Zero half: 3
#&gt;   RLT: 2
#&gt; 
#&gt; Explored 1 nodes (514 simplex iterations) in 0.04 seconds
#&gt; Thread count was 1 (of 4 available processors)
#&gt; 
#&gt; Solution count 1: 12318.1 
#&gt; 
#&gt; Optimal solution found (tolerance 1.00e-01)
#&gt; Best objective 1.231813141427e+04, best bound 1.197831562104e+04, gap 2.7587%</div><div class='input'>
<span class='co'># plot solutions</span>
<span class='fu'><a href='https://www.rdocumentation.org/packages/graphics/topics/plot'>plot</a></span>(<span class='no'>s1</span>,  <span class='kw'>axes</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>box</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
     <span class='kw'>main</span> <span class='kw'>=</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/c'>c</a></span>(<span class='st'>"basic solution"</span>, <span class='st'>"contiguity constraints"</span>,
              <span class='st'>"feature contiguity constraints"</span>,
              <span class='st'>"feature contiguity constraints with data"</span>))</div><div class='img'><img src='add_feature_contiguity_constraints-1.png' alt='' width='700' height='433' /></div><div class='input'><span class='co'># create minimal problem with multiple zones, and limit the solver to</span>
<span class='co'># 30 seconds to obtain solutions in a feasible period of time</span>
<span class='no'>p5</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='problem.html'>problem</a></span>(<span class='no'>sim_pu_zones_stack</span>, <span class='no'>sim_features_zones</span>) <span class='kw'>%&gt;%</span>
      <span class='fu'><a href='add_min_set_objective.html'>add_min_set_objective</a></span>() <span class='kw'>%&gt;%</span>
      <span class='fu'><a href='add_relative_targets.html'>add_relative_targets</a></span>(<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/matrix'>matrix</a></span>(<span class='fl'>0.1</span>, <span class='kw'>ncol</span> <span class='kw'>=</span> <span class='fl'>3</span>, <span class='kw'>nrow</span> <span class='kw'>=</span> <span class='fl'>5</span>)) <span class='kw'>%&gt;%</span>
      <span class='fu'><a href='add_default_solver.html'>add_default_solver</a></span>(<span class='kw'>time_limit</span> <span class='kw'>=</span> <span class='fl'>30</span>) <span class='kw'>%&gt;%</span>
      <span class='fu'><a href='add_binary_decisions.html'>add_binary_decisions</a></span>()

<span class='co'># create problem with contiguity constraints that specify that the</span>
<span class='co'># planning units used to conserve each feature in different management</span>
<span class='co'># zones must form separate contiguous units</span>
<span class='no'>p6</span> <span class='kw'>&lt;-</span> <span class='no'>p5</span> <span class='kw'>%&gt;%</span> <span class='fu'>add_feature_contiguity_constraints</span>(<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/diag'>diag</a></span>(<span class='fl'>3</span>))

<span class='co'># create problem with contiguity constraints that specify that the</span>
<span class='co'># planning units used to conserve each feature must form a single</span>
<span class='co'># contiguous unit if the planning units are allocated to zones 1 and 2</span>
<span class='co'># and do not need to form a single contiguous unit if they are allocated</span>
<span class='co'># to zone 3</span>
<span class='no'>zm7</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/matrix'>matrix</a></span>(<span class='fl'>0</span>, <span class='kw'>ncol</span> <span class='kw'>=</span> <span class='fl'>3</span>, <span class='kw'>nrow</span> <span class='kw'>=</span> <span class='fl'>3</span>)
<span class='no'>zm7</span>[<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/seq'>seq_len</a></span>(<span class='fl'>2</span>), <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/seq'>seq_len</a></span>(<span class='fl'>2</span>)] <span class='kw'>&lt;-</span> <span class='fl'>1</span>
<span class='fu'><a href='print.html'>print</a></span>(<span class='no'>zm7</span>)</div><div class='output co'>#&gt;      [,1] [,2] [,3]
#&gt; [1,]    1    1    0
#&gt; [2,]    1    1    0
#&gt; [3,]    0    0    0</div><div class='input'><span class='no'>p7</span> <span class='kw'>&lt;-</span> <span class='no'>p5</span> <span class='kw'>%&gt;%</span> <span class='fu'>add_feature_contiguity_constraints</span>(<span class='no'>zm7</span>)

<span class='co'># create problem with contiguity constraints that specify that all of</span>
<span class='co'># the planning units in all three of the zones must conserve first feature</span>
<span class='co'># in a single contiguous unit but the planning units used to conserve the</span>
<span class='co'># remaining features do not need to be contiguous in any way</span>
<span class='no'>zm8</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/lapply'>lapply</a></span>(<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/seq'>seq_len</a></span>(<span class='fu'><a href='number_of_features.html'>number_of_features</a></span>(<span class='no'>sim_features_zones</span>)), <span class='kw'>function</span>(<span class='no'>i</span>)
  <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/matrix'>matrix</a></span>(<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/ifelse'>ifelse</a></span>(<span class='no'>i</span> <span class='kw'>==</span> <span class='fl'>1</span>, <span class='fl'>1</span>, <span class='fl'>0</span>), <span class='kw'>ncol</span> <span class='kw'>=</span> <span class='fl'>3</span>, <span class='kw'>nrow</span> <span class='kw'>=</span> <span class='fl'>3</span>))
<span class='fu'><a href='print.html'>print</a></span>(<span class='no'>zm8</span>)</div><div class='output co'>#&gt; [[1]]
#&gt;      [,1] [,2] [,3]
#&gt; [1,]    1    1    1
#&gt; [2,]    1    1    1
#&gt; [3,]    1    1    1
#&gt; 
#&gt; [[2]]
#&gt;      [,1] [,2] [,3]
#&gt; [1,]    0    0    0
#&gt; [2,]    0    0    0
#&gt; [3,]    0    0    0
#&gt; 
#&gt; [[3]]
#&gt;      [,1] [,2] [,3]
#&gt; [1,]    0    0    0
#&gt; [2,]    0    0    0
#&gt; [3,]    0    0    0
#&gt; 
#&gt; [[4]]
#&gt;      [,1] [,2] [,3]
#&gt; [1,]    0    0    0
#&gt; [2,]    0    0    0
#&gt; [3,]    0    0    0
#&gt; 
#&gt; [[5]]
#&gt;      [,1] [,2] [,3]
#&gt; [1,]    0    0    0
#&gt; [2,]    0    0    0
#&gt; [3,]    0    0    0
#&gt; </div><div class='input'><span class='no'>p8</span> <span class='kw'>&lt;-</span> <span class='no'>p5</span> <span class='kw'>%&gt;%</span> <span class='fu'>add_feature_contiguity_constraints</span>(<span class='no'>zm8</span>)</div><div class='input'><span class='co'># solve problems</span>
<span class='no'>s2</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/lapply'>lapply</a></span>(<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/list'>list</a></span>(<span class='no'>p5</span>, <span class='no'>p6</span>, <span class='no'>p7</span>, <span class='no'>p8</span>), <span class='no'>solve</span>)</div><div class='output co'>#&gt; Gurobi Optimizer version 9.0.1 build v9.0.1rc0 (linux64)
#&gt; Optimize a model with 105 rows, 270 columns and 1620 nonzeros
#&gt; Model fingerprint: 0x60594edc
#&gt; Variable types: 0 continuous, 270 integer (270 binary)
#&gt; Coefficient statistics:
#&gt;   Matrix range     [2e-01, 1e+00]
#&gt;   Objective range  [2e+02, 2e+02]
#&gt;   Bounds range     [1e+00, 1e+00]
#&gt;   RHS range        [1e+00, 8e+00]
#&gt; Found heuristic solution: objective 7019.1222763
#&gt; Presolve time: 0.00s
#&gt; Presolved: 105 rows, 270 columns, 1620 nonzeros
#&gt; Variable types: 0 continuous, 270 integer (270 binary)
#&gt; Presolved: 105 rows, 270 columns, 1620 nonzeros
#&gt; 
#&gt; 
#&gt; Root relaxation: objective 5.935429e+03, 100 iterations, 0.00 seconds
#&gt; 
#&gt;     Nodes    |    Current Node    |     Objective Bounds      |     Work
#&gt;  Expl Unexpl |  Obj  Depth IntInf | Incumbent    BestBd   Gap | It/Node Time
#&gt; 
#&gt;      0     0 5935.42867    0   13 7019.12228 5935.42867  15.4%     -    0s
#&gt; H    0     0                    6082.2792264 5935.42867  2.41%     -    0s
#&gt; 
#&gt; Explored 1 nodes (100 simplex iterations) in 0.01 seconds
#&gt; Thread count was 1 (of 4 available processors)
#&gt; 
#&gt; Solution count 2: 6082.28 7019.12 
#&gt; 
#&gt; Optimal solution found (tolerance 1.00e-01)
#&gt; Best objective 6.082279226435e+03, best bound 5.935428674960e+03, gap 2.4144%
#&gt; Gurobi Optimizer version 9.0.1 build v9.0.1rc0 (linux64)
#&gt; Optimize a model with 4935 rows, 3795 columns and 15660 nonzeros
#&gt; Model fingerprint: 0x7fb43af1
#&gt; Variable types: 0 continuous, 3795 integer (3795 binary)
#&gt; Coefficient statistics:
#&gt;   Matrix range     [2e-01, 1e+00]
#&gt;   Objective range  [2e+02, 2e+02]
#&gt;   Bounds range     [1e+00, 1e+00]
#&gt;   RHS range        [1e+00, 8e+00]
#&gt; Presolve removed 369 rows and 369 columns
#&gt; Presolve time: 0.48s
#&gt; Presolved: 4566 rows, 3426 columns, 14223 nonzeros
#&gt; Variable types: 0 continuous, 3426 integer (3426 binary)
#&gt; Presolved: 4566 rows, 3426 columns, 14223 nonzeros
#&gt; 
#&gt; 
#&gt; Root relaxation: objective 5.964223e+03, 5400 iterations, 0.24 seconds
#&gt; 
#&gt;     Nodes    |    Current Node    |     Objective Bounds      |     Work
#&gt;  Expl Unexpl |  Obj  Depth IntInf | Incumbent    BestBd   Gap | It/Node Time
#&gt; 
#&gt;      0     0 5964.22270    0  815          - 5964.22270      -     -    0s
#&gt;      0     0 5973.19018    0  889          - 5973.19018      -     -    1s
#&gt;      0     0 5973.94095    0  984          - 5973.94095      -     -    1s
#&gt;      0     0 5974.01606    0  940          - 5974.01606      -     -    1s
#&gt;      0     0 5981.51562    0  944          - 5981.51562      -     -    1s
#&gt;      0     0 5981.71072    0  903          - 5981.71072      -     -    1s
#&gt;      0     0 5982.20813    0  980          - 5982.20813      -     -    1s
#&gt;      0     0 5986.49153    0 1020          - 5986.49153      -     -    1s
#&gt;      0     0 5988.83589    0  992          - 5988.83589      -     -    1s
#&gt;      0     0 5989.11883    0 1031          - 5989.11883      -     -    2s
#&gt;      0     0 5989.22588    0 1040          - 5989.22588      -     -    2s
#&gt;      0     0 5991.41823    0 1007          - 5991.41823      -     -    2s
#&gt;      0     0 5991.44488    0 1057          - 5991.44488      -     -    2s
#&gt;      0     0 5991.51723    0 1103          - 5991.51723      -     -    2s
#&gt;      0     0 5991.73678    0 1108          - 5991.73678      -     -    2s
#&gt;      0     0 5991.79107    0 1083          - 5991.79107      -     -    2s
#&gt;      0     0 5992.41026    0 1105          - 5992.41026      -     -    2s
#&gt;      0     0 5992.41595    0 1090          - 5992.41595      -     -    2s
#&gt;      0     0 5992.62136    0 1067          - 5992.62136      -     -    2s
#&gt;      0     0 5992.62136    0 1068          - 5992.62136      -     -    2s
#&gt;      0     0 5992.66429    0 1132          - 5992.66429      -     -    2s
#&gt;      0     0 5992.66429    0 1132          - 5992.66429      -     -    2s
#&gt;      0     0 5992.70700    0 1129          - 5992.70700      -     -    2s
#&gt;      0     0 5992.70700    0 1117          - 5992.70700      -     -    2s
#&gt;      0     2 5992.71282    0 1117          - 5992.71282      -     -    3s
#&gt;     31    33 7032.39238   21 1164          - 5992.71653      -   447    5s
#&gt; H  127    86                    7284.1244049 5992.71653  17.7%   169    5s
#&gt; H  211   142                    7073.5736394 5993.98639  15.3%   226    8s
#&gt; H  238   156                    7069.6762183 5994.68399  15.2%   224    8s
#&gt;    264   184 6122.50703   15 1144 7069.67622 5994.68399  15.2%   242   10s
#&gt; H  265   183                    7069.2680024 5994.68399  15.2%   241   10s
#&gt; H  292   197                    6896.8412161 5994.68399  13.1%   247   10s
#&gt; H  319   206                    6705.7409310 5994.68399  10.6%   241   11s
#&gt; H  346   216                    6700.3463340 5995.00361  10.5%   245   12s
#&gt; H  373   242                    6679.7692544 5995.00361  10.3%   253   13s
#&gt; H  400   254                    6672.4119443 5995.07848  10.2%   258   13s
#&gt;    427   281 6402.16447   20  748 6672.41194 5995.07848  10.2%   273   15s
#&gt; H  481   317                    6646.7933579 5997.61428  9.77%   271   16s
#&gt; 
#&gt; Cutting planes:
#&gt;   Cover: 9
#&gt;   MIR: 23
#&gt;   Zero half: 23
#&gt; 
#&gt; Explored 482 nodes (143259 simplex iterations) in 16.88 seconds
#&gt; Thread count was 1 (of 4 available processors)
#&gt; 
#&gt; Solution count 10: 6646.79 6672.41 6679.77 ... 7284.12
#&gt; 
#&gt; Optimal solution found (tolerance 1.00e-01)
#&gt; Best objective 6.646793357853e+03, best bound 5.997614282632e+03, gap 9.7668%
#&gt; Gurobi Optimizer version 9.0.1 build v9.0.1rc0 (linux64)
#&gt; Optimize a model with 4495 rows, 3795 columns and 14780 nonzeros
#&gt; Model fingerprint: 0xa0304e18
#&gt; Variable types: 0 continuous, 3795 integer (3795 binary)
#&gt; Coefficient statistics:
#&gt;   Matrix range     [2e-01, 1e+00]
#&gt;   Objective range  [2e+02, 2e+02]
#&gt;   Bounds range     [1e+00, 1e+00]
#&gt;   RHS range        [1e+00, 8e+00]
#&gt; Presolve removed 652 rows and 656 columns
#&gt; Presolve time: 0.31s
#&gt; Presolved: 3843 rows, 3139 columns, 12612 nonzeros
#&gt; Variable types: 0 continuous, 3139 integer (3139 binary)
#&gt; Presolve removed 749 rows and 81 columns
#&gt; Presolved: 3094 rows, 3058 columns, 10608 nonzeros
#&gt; 
#&gt; 
#&gt; Root relaxation: objective 5.956540e+03, 3186 iterations, 0.11 seconds
#&gt; 
#&gt;     Nodes    |    Current Node    |     Objective Bounds      |     Work
#&gt;  Expl Unexpl |  Obj  Depth IntInf | Incumbent    BestBd   Gap | It/Node Time
#&gt; 
#&gt;      0     0 5956.54040    0  505          - 5956.54040      -     -    0s
#&gt;      0     0 5966.87639    0  735          - 5966.87639      -     -    0s
#&gt;      0     0 5970.22737    0  670          - 5970.22737      -     -    0s
#&gt;      0     0 5970.44033    0  624          - 5970.44033      -     -    0s
#&gt;      0     0 5970.47968    0  627          - 5970.47968      -     -    0s
#&gt;      0     0 5970.49294    0  628          - 5970.49294      -     -    0s
#&gt;      0     0 5970.50359    0  676          - 5970.50359      -     -    0s
#&gt;      0     0 5970.51714    0  635          - 5970.51714      -     -    0s
#&gt;      0     0 5977.58514    0  829          - 5977.58514      -     -    0s
#&gt;      0     0 5978.72322    0  958          - 5978.72322      -     -    1s
#&gt;      0     0 5979.11609    0  960          - 5979.11609      -     -    1s
#&gt;      0     0 5979.19721    0  946          - 5979.19721      -     -    1s
#&gt;      0     0 5979.34524    0  933          - 5979.34524      -     -    1s
#&gt;      0     0 5984.99490    0  877          - 5984.99490      -     -    1s
#&gt;      0     0 5985.35917    0  905          - 5985.35917      -     -    1s
#&gt;      0     0 5985.40811    0  926          - 5985.40811      -     -    1s
#&gt;      0     0 5985.42783    0  909          - 5985.42783      -     -    1s
#&gt;      0     0 5986.53736    0  912          - 5986.53736      -     -    1s
#&gt;      0     0 5986.89959    0  974          - 5986.89959      -     -    1s
#&gt;      0     0 5986.94807    0  942          - 5986.94807      -     -    1s
#&gt;      0     0 5986.98084    0 1011          - 5986.98084      -     -    1s
#&gt;      0     0 5987.00363    0  954          - 5987.00363      -     -    1s
#&gt;      0     0 5987.00756    0 1011          - 5987.00756      -     -    1s
#&gt;      0     0 5988.12526    0  955          - 5988.12526      -     -    1s
#&gt;      0     0 5988.17114    0  941          - 5988.17114      -     -    1s
#&gt;      0     0 5988.17669    0  957          - 5988.17669      -     -    1s
#&gt;      0     0 5988.22630    0  952          - 5988.22630      -     -    2s
#&gt;      0     0 5988.42312    0  955          - 5988.42312      -     -    2s
#&gt;      0     0 5988.79494    0  931          - 5988.79494      -     -    2s
#&gt;      0     0 5988.79494    0  937          - 5988.79494      -     -    2s
#&gt;      0     0 5989.33560    0  905          - 5989.33560      -     -    2s
#&gt;      0     0 5989.36951    0  914          - 5989.36951      -     -    2s
#&gt;      0     0 5989.39945    0  903          - 5989.39945      -     -    2s
#&gt;      0     0 5989.40799    0  921          - 5989.40799      -     -    2s
#&gt;      0     0 5989.58187    0  890          - 5989.58187      -     -    2s
#&gt;      0     0 5989.60117    0  876          - 5989.60117      -     -    2s
#&gt;      0     0 5989.60633    0  905          - 5989.60633      -     -    2s
#&gt;      0     0 5989.63033    0  887          - 5989.63033      -     -    2s
#&gt;      0     0 5989.63233    0  882          - 5989.63233      -     -    2s
#&gt;      0     0 5989.64262    0  881          - 5989.64262      -     -    2s
#&gt;      0     0 5989.64262    0  871          - 5989.64262      -     -    2s
#&gt; H    0     0                    14289.899792 5989.64262  58.1%     -    3s
#&gt; H    0     0                    9061.4456454 5989.64824  33.9%     -    4s
#&gt;      0     2 5989.66390    0  871 9061.44565 5989.66390  33.9%     -    4s
#&gt;      4     6 5992.32089    4  790 9061.44565 5989.66390  33.9%   364    5s
#&gt; H   45    45                    6332.0418375 5989.66390  5.41%   204    5s
#&gt; 
#&gt; Cutting planes:
#&gt;   Gomory: 1
#&gt;   MIR: 25
#&gt;   StrongCG: 2
#&gt;   Zero half: 11
#&gt;   Mod-K: 2
#&gt; 
#&gt; Explored 46 nodes (22573 simplex iterations) in 5.70 seconds
#&gt; Thread count was 1 (of 4 available processors)
#&gt; 
#&gt; Solution count 3: 6332.04 9061.45 14289.9 
#&gt; 
#&gt; Optimal solution found (tolerance 1.00e-01)
#&gt; Best objective 6.332041837511e+03, best bound 5.989663900889e+03, gap 5.4071%
#&gt; Gurobi Optimizer version 9.0.1 build v9.0.1rc0 (linux64)
#&gt; Optimize a model with 2584 rows, 2490 columns and 8328 nonzeros
#&gt; Model fingerprint: 0x453468f1
#&gt; Variable types: 0 continuous, 2490 integer (2490 binary)
#&gt; Coefficient statistics:
#&gt;   Matrix range     [2e-01, 1e+00]
#&gt;   Objective range  [2e+02, 2e+02]
#&gt;   Bounds range     [1e+00, 1e+00]
#&gt;   RHS range        [1e+00, 8e+00]
#&gt; Presolve removed 1080 rows and 1080 columns
#&gt; Presolve time: 0.04s
#&gt; Presolved: 1504 rows, 1410 columns, 6879 nonzeros
#&gt; Variable types: 0 continuous, 1410 integer (1410 binary)
#&gt; Presolve removed 290 rows and 0 columns
#&gt; Presolved: 1214 rows, 1410 columns, 6009 nonzeros
#&gt; 
#&gt; 
#&gt; Root relaxation: objective 5.956523e+03, 1708 iterations, 0.03 seconds
#&gt; 
#&gt;     Nodes    |    Current Node    |     Objective Bounds      |     Work
#&gt;  Expl Unexpl |  Obj  Depth IntInf | Incumbent    BestBd   Gap | It/Node Time
#&gt; 
#&gt;      0     0 5956.52331    0  172          - 5956.52331      -     -    0s
#&gt;      0     0 5965.87304    0  241          - 5965.87304      -     -    0s
#&gt;      0     0 5972.15690    0  296          - 5972.15690      -     -    0s
#&gt;      0     0 5972.16676    0  307          - 5972.16676      -     -    0s
#&gt;      0     0 5972.92926    0  321          - 5972.92926      -     -    0s
#&gt;      0     0 5972.94405    0  321          - 5972.94405      -     -    0s
#&gt;      0     0 5976.59831    0  316          - 5976.59831      -     -    0s
#&gt;      0     0 5980.45798    0  323          - 5980.45798      -     -    0s
#&gt;      0     0 5980.56903    0  322          - 5980.56903      -     -    0s
#&gt;      0     0 5980.62420    0  343          - 5980.62420      -     -    0s
#&gt;      0     0 5980.63159    0  331          - 5980.63159      -     -    0s
#&gt;      0     0 5984.35178    0  341          - 5984.35178      -     -    0s
#&gt;      0     0 5985.24358    0  338          - 5985.24358      -     -    0s
#&gt;      0     0 5985.37509    0  348          - 5985.37509      -     -    0s
#&gt;      0     0 5985.45972    0  344          - 5985.45972      -     -    0s
#&gt;      0     0 5988.18758    0  351          - 5988.18758      -     -    0s
#&gt;      0     0 5988.75635    0  361          - 5988.75635      -     -    0s
#&gt;      0     0 5989.37638    0  362          - 5989.37638      -     -    0s
#&gt;      0     0 5989.47605    0  362          - 5989.47605      -     -    0s
#&gt;      0     0 5989.49374    0  359          - 5989.49374      -     -    0s
#&gt;      0     0 5989.50544    0  369          - 5989.50544      -     -    0s
#&gt;      0     0 5990.22429    0  374          - 5990.22429      -     -    0s
#&gt;      0     0 5990.78012    0  320          - 5990.78012      -     -    0s
#&gt;      0     0 5990.91296    0  330          - 5990.91296      -     -    0s
#&gt;      0     0 5991.03341    0  353          - 5991.03341      -     -    0s
#&gt;      0     0 5991.04614    0  361          - 5991.04614      -     -    0s
#&gt;      0     0 5991.71331    0  343          - 5991.71331      -     -    0s
#&gt;      0     0 5991.78879    0  362          - 5991.78879      -     -    0s
#&gt;      0     0 5991.81726    0  366          - 5991.81726      -     -    0s
#&gt;      0     0 5991.84106    0  363          - 5991.84106      -     -    0s
#&gt;      0     0 5992.02796    0  355          - 5992.02796      -     -    0s
#&gt;      0     0 5992.13505    0  362          - 5992.13505      -     -    0s
#&gt;      0     0 5992.17456    0  372          - 5992.17456      -     -    0s
#&gt;      0     0 5992.21553    0  371          - 5992.21553      -     -    0s
#&gt;      0     0 5992.22019    0  375          - 5992.22019      -     -    0s
#&gt;      0     0 5992.56953    0  367          - 5992.56953      -     -    1s
#&gt;      0     0 5992.69062    0  368          - 5992.69062      -     -    1s
#&gt;      0     0 5992.73052    0  373          - 5992.73052      -     -    1s
#&gt;      0     0 5992.74229    0  381          - 5992.74229      -     -    1s
#&gt;      0     0 5992.74891    0  381          - 5992.74891      -     -    1s
#&gt;      0     0 5992.74891    0  374          - 5992.74891      -     -    1s
#&gt;      0     2 5992.76645    0  374          - 5992.76645      -     -    1s
#&gt; H   70    65                    6578.0783960 5992.80971  8.90%  87.8    1s
#&gt; 
#&gt; Cutting planes:
#&gt;   Cover: 3
#&gt;   MIR: 26
#&gt;   StrongCG: 3
#&gt;   Zero half: 18
#&gt; 
#&gt; Explored 71 nodes (11352 simplex iterations) in 1.78 seconds
#&gt; Thread count was 1 (of 4 available processors)
#&gt; 
#&gt; Solution count 1: 6578.08 
#&gt; 
#&gt; Optimal solution found (tolerance 1.00e-01)
#&gt; Best objective 6.578078395996e+03, best bound 5.992809714820e+03, gap 8.8973%</div><div class='input'><span class='no'>s2</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/utils/topics/stack'>stack</a></span>(<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/lapply'>lapply</a></span>(<span class='no'>s2</span>, <span class='no'>category_layer</span>))

<span class='co'># plot solutions</span>
<span class='fu'><a href='https://www.rdocumentation.org/packages/graphics/topics/plot'>plot</a></span>(<span class='no'>s2</span>, <span class='kw'>main</span> <span class='kw'>=</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/c'>c</a></span>(<span class='st'>"p5"</span>, <span class='st'>"p6"</span>, <span class='st'>"p7"</span>, <span class='st'>"p8"</span>), <span class='kw'>axes</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>box</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)</div><div class='img'><img src='add_feature_contiguity_constraints-2.png' alt='' width='700' height='433' /></div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      <li><a href="#value">Value</a></li>
      <li><a href="#details">Details</a></li>
      <li><a href="#references">References</a></li>
      <li><a href="#see-also">See also</a></li>
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by <a href='https://jeffrey-hanson.com'>Jeffrey O Hanson</a>, <a href='http://www.richard-schuster.com'>Richard Schuster</a>, Nina Morrell, <a href='http://strimas.com'>Matthew Strimas-Mackey</a>, Matthew E Watts, <a href='https://arcese.forestry.ubc.ca'>Peter Arcese</a>, <a href='https://josephrbennett.wordpress.com'>Joseph Bennett</a>, <a href='http://www.possinghamlab.org'>Hugh P Possingham</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
   </div>

  
<script src="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.1/docsearch.min.js" integrity="sha256-GKvGqXDznoRYHCwKXGnuchvKSwmx9SRMrZOTh2g4Sb0=" crossorigin="anonymous"></script>
<script>
  docsearch({
    
    
    apiKey: '486efa122ea6783724263412c5f28ab3',
    indexName: 'prioritizr',
    inputSelector: 'input#search-input.form-control',
    transformData: function(hits) {
      return hits.map(function (hit) {
        hit.url = updateHitURL(hit);
        return hit;
      });
    }
  });
</script>


  </body>
</html>

