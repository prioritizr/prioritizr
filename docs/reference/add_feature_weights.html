<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Add feature weights — add_feature_weights • prioritizr</title>

<!-- favicons -->
<link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png" />
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png" />
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png" />
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png" />

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>


<!-- docsearch -->
<script src="../docsearch.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.3/docsearch.min.css" integrity="sha256-QOSRU/ra9ActyXkIBbiIB144aDBdtvXBcNc3OTNuX/Q=" crossorigin="anonymous" />
<link href="../docsearch.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script>



<meta property="og:title" content="Add feature weights — add_feature_weights" />
<meta property="og:description" content="Conservation planning problems that aim to maximize the
representation of features given a budget often will not able to conserve
all of the features unless the budget is very high. In such budget-limited
problems, it may be desirable to prefer the representation of some features
over other features. This information can be incorporated into the problem
using weights. Weights can be applied to a problem to favor the
representation of some features over other features when making decisions
about how the budget should be allocated." />
<meta property="og:image" content="https://prioritizr.net/logo.png" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-70466840-4"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-70466840-4');
</script>


  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">prioritizr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">5.0.2.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/prioritizr.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/gurobi_installation.html">Gurobi Installation Guide</a>
    </li>
    <li>
      <a href="../articles/publication_record.html">Publication Record</a>
    </li>
    <li>
      <a href="../articles/saltspring.html">Salt Spring Island Tutorial</a>
    </li>
    <li>
      <a href="../articles/tasmania.html">Tasmania Tutorial</a>
    </li>
    <li>
      <a href="../articles/zones.html">Management Zones</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/prioritizr/prioritizr/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
      <form class="navbar-form navbar-right hidden-xs hidden-sm" role="search">
        <div class="form-group">
          <input type="search" class="form-control" name="search-input" id="search-input" placeholder="Search..." aria-label="Search for..." autocomplete="off">
        </div>
      </form>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Add feature weights</h1>
    <small class="dont-index">Source: <a href='https://github.com/prioritizr/prioritizr/blob/master/R/add_feature_weights.R'><code>R/add_feature_weights.R</code></a></small>
    <div class="hidden name"><code>add_feature_weights.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Conservation planning problems that aim to maximize the
representation of features given a budget often will not able to conserve
all of the features unless the budget is very high. In such budget-limited
problems, it may be desirable to prefer the representation of some features
over other features. This information can be incorporated into the problem
using weights. Weights can be applied to a problem to favor the
representation of some features over other features when making decisions
about how the budget should be allocated.</p>
    </div>

    <pre class="usage"><span class='co'># S4 method for ConservationProblem,numeric</span>
<span class='fu'>add_feature_weights</span>(<span class='no'>x</span>, <span class='no'>weights</span>)

<span class='co'># S4 method for ConservationProblem,matrix</span>
<span class='fu'>add_feature_weights</span>(<span class='no'>x</span>, <span class='no'>weights</span>)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>x</th>
      <td><p><code><a href='problem.html'>problem()</a></code> (i.e. <code><a href='ConservationProblem-class.html'>ConservationProblem</a></code>) object.</p></td>
    </tr>
    <tr>
      <th>weights</th>
      <td><p><code>numeric</code> or <code>matrix</code> of weights. See the
Details section for more information.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>Object (i.e. <code><a href='ConservationProblem-class.html'>ConservationProblem</a></code>) with the weights
added to it.</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>Weights can only be applied to problems that have an objective
that is budget limited (e.g. <code><a href='add_max_cover_objective.html'>add_max_cover_objective()</a></code>). #'
They can be applied to problems that aim to maximize phylogenetic
representation (<code><a href='add_max_phylo_div_objective.html'>add_max_phylo_div_objective()</a></code>) to favor the
representation of specific features over the representation of
some phylogenetic branches. Weights cannot be negative values
and must have values that are equal to or larger than zero.
<strong>Note that planning unit costs are scaled to 0.01 to identify
the cheapest solution among multiple optimal solutions. This means
that the optimization process will favor cheaper solutions over solutions
that meet feature targets (or occurrences) when feature weights are
lower than 0.01.</strong></p>
<dl'>

<dt><code>numeric</code></dt><dd><p>containing weights for each feature. Note that this
type of argument cannot be used to specify weights for problems with
multiple zones.</p></dd>

<dt><code>matrix</code></dt><dd><p>containing weights for each feature in each zone.
Here, each row corresponds to a different feature in argument to
<code>x</code>, each column corresponds to a different zone in argument to
<code>x</code>, and each cell contains the weight value for a given feature
that the solution can to secure in a given zone. Note that
if the problem contains targets created using
<code><a href='add_manual_targets.html'>add_manual_targets()</a></code> then a <code>matrix</code> should be
supplied containing a single column that indicates that weight for
fulfilling each target.</p></dd>


</dl>

    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><a href='objectives.html'>objectives</a>.</p></div>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'># load ape package</span>
<span class='fu'><a href='https://rdrr.io/r/base/library.html'>require</a></span>(<span class='no'>ape</span>)</div><div class='output co'>#&gt; <span class='message'>Loading required package: ape</span></div><div class='output co'>#&gt; <span class='message'></span>
#&gt; <span class='message'>Attaching package: 'ape'</span></div><div class='output co'>#&gt; <span class='message'>The following objects are masked from 'package:raster':</span>
#&gt; <span class='message'></span>
#&gt; <span class='message'>    rotate, zoom</span></div><div class='input'>
<span class='co'># load data</span>
<span class='fu'><a href='https://rdrr.io/r/utils/data.html'>data</a></span>(<span class='no'>sim_pu_raster</span>, <span class='no'>sim_features</span>, <span class='no'>sim_phylogeny</span>, <span class='no'>sim_pu_zones_stack</span>,
     <span class='no'>sim_features_zones</span>)

<span class='co'># create minimal problem that aims to maximize the number of features</span>
<span class='co'># adequately conserved given a total budget of 3800. Here, each feature</span>
<span class='co'># needs 20 % of its habitat for it to be considered adequately conserved</span>
<span class='no'>p1</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='problem.html'>problem</a></span>(<span class='no'>sim_pu_raster</span>, <span class='no'>sim_features</span>) <span class='kw'>%&gt;%</span>
      <span class='fu'><a href='add_max_features_objective.html'>add_max_features_objective</a></span>(<span class='kw'>budget</span> <span class='kw'>=</span> <span class='fl'>3800</span>) <span class='kw'>%&gt;%</span>
      <span class='fu'><a href='add_relative_targets.html'>add_relative_targets</a></span>(<span class='fl'>0.2</span>) <span class='kw'>%&gt;%</span>
      <span class='fu'><a href='add_binary_decisions.html'>add_binary_decisions</a></span>()

<span class='co'># create weights that assign higher importance to features with less</span>
<span class='co'># suitable habitat in the study area</span>
(<span class='no'>w2</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/Log.html'>exp</a></span>((<span class='fl'>1</span> / <span class='fu'>cellStats</span>(<span class='no'>sim_features</span>, <span class='st'>"sum"</span>)) * <span class='fl'>200</span>))</div><div class='output co'>#&gt;   layer.1   layer.2   layer.3   layer.4   layer.5 
#&gt;  11.03585 606.63186  16.11015 108.65716  34.01731 </div><div class='input'>
<span class='co'># create problem using rarity weights</span>
<span class='no'>p2</span> <span class='kw'>&lt;-</span> <span class='no'>p1</span> <span class='kw'>%&gt;%</span> <span class='fu'>add_feature_weights</span>(<span class='no'>w2</span>)

<span class='co'># create manually specified weights that assign higher importance to</span>
<span class='co'># certain features. These weights could be based on a pre-calculated index</span>
<span class='co'># (e.g. an index measuring extinction risk where higher values</span>
<span class='co'># denote higher extinction risk)</span>
<span class='no'>w3</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>0</span>, <span class='fl'>0</span>, <span class='fl'>0</span>, <span class='fl'>100</span>, <span class='fl'>200</span>)
<span class='no'>p3</span> <span class='kw'>&lt;-</span> <span class='no'>p1</span> <span class='kw'>%&gt;%</span> <span class='fu'>add_feature_weights</span>(<span class='no'>w3</span>)
<span class='co'># \dontrun{</span>
<span class='co'># solve problems</span>
<span class='no'>s1</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/utils/stack.html'>stack</a></span>(<span class='fu'><a href='solve.html'>solve</a></span>(<span class='no'>p1</span>), <span class='fu'><a href='solve.html'>solve</a></span>(<span class='no'>p2</span>), <span class='fu'><a href='solve.html'>solve</a></span>(<span class='no'>p3</span>))</div><div class='output co'>#&gt; Gurobi Optimizer version 9.0.2 build v9.0.2rc0 (linux64)
#&gt; Optimize a model with 6 rows, 95 columns and 545 nonzeros
#&gt; Model fingerprint: 0x15e6d43f
#&gt; Variable types: 0 continuous, 95 integer (95 binary)
#&gt; Coefficient statistics:
#&gt;   Matrix range     [2e-01, 2e+02]
#&gt;   Objective range  [1e-04, 1e+00]
#&gt;   Bounds range     [1e+00, 1e+00]
#&gt;   RHS range        [4e+03, 4e+03]
#&gt; Found heuristic solution: objective -0.0000000
#&gt; Presolve time: 0.00s
#&gt; Presolved: 6 rows, 95 columns, 545 nonzeros
#&gt; Variable types: 0 continuous, 95 integer (95 binary)
#&gt; Presolved: 6 rows, 95 columns, 545 nonzeros
#&gt; 
#&gt; 
#&gt; Root relaxation: objective 4.909018e+00, 30 iterations, 0.00 seconds
#&gt; 
#&gt;     Nodes    |    Current Node    |     Objective Bounds      |     Work
#&gt;  Expl Unexpl |  Obj  Depth IntInf | Incumbent    BestBd   Gap | It/Node Time
#&gt; 
#&gt;      0     0    4.90902    0    6   -0.00000    4.90902      -     -    0s
#&gt; H    0     0                       1.9979863    4.90902   146%     -    0s
#&gt; H    0     0                       2.9979659    4.90902  63.7%     -    0s
#&gt;      0     0    4.90824    0    9    2.99797    4.90824  63.7%     -    0s
#&gt;      0     0    4.90725    0    9    2.99797    4.90725  63.7%     -    0s
#&gt;      0     0    4.90713    0   10    2.99797    4.90713  63.7%     -    0s
#&gt;      0     0    4.90686    0   14    2.99797    4.90686  63.7%     -    0s
#&gt;      0     0    4.90685    0   14    2.99797    4.90685  63.7%     -    0s
#&gt;      0     0    4.90599    0   11    2.99797    4.90599  63.6%     -    0s
#&gt;      0     0    4.90593    0   13    2.99797    4.90593  63.6%     -    0s
#&gt;      0     0    4.90592    0   14    2.99797    4.90592  63.6%     -    0s
#&gt;      0     2    4.90477    0   14    2.99797    4.90477  63.6%     -    0s
#&gt; 
#&gt; Cutting planes:
#&gt;   Cover: 1
#&gt;   MIR: 6
#&gt;   StrongCG: 3
#&gt;   RLT: 1
#&gt; 
#&gt; Explored 8 nodes (231 simplex iterations) in 0.03 seconds
#&gt; Thread count was 1 (of 4 available processors)
#&gt; 
#&gt; Solution count 3: 2.99797 1.99799 -0 
#&gt; 
#&gt; Optimal solution found (tolerance 1.00e-01)
#&gt; Best objective 2.997965888532e+00, best bound 2.997988029529e+00, gap 0.0007%
#&gt; Gurobi Optimizer version 9.0.2 build v9.0.2rc0 (linux64)
#&gt; Optimize a model with 6 rows, 95 columns and 545 nonzeros
#&gt; Model fingerprint: 0xcde35cb0
#&gt; Variable types: 0 continuous, 95 integer (95 binary)
#&gt; Coefficient statistics:
#&gt;   Matrix range     [2e-01, 2e+02]
#&gt;   Objective range  [1e-04, 6e+02]
#&gt;   Bounds range     [1e+00, 1e+00]
#&gt;   RHS range        [4e+03, 4e+03]
#&gt; Found heuristic solution: objective -0.0000000
#&gt; Presolve time: 0.00s
#&gt; Presolved: 6 rows, 95 columns, 545 nonzeros
#&gt; Variable types: 0 continuous, 95 integer (95 binary)
#&gt; Presolved: 6 rows, 95 columns, 545 nonzeros
#&gt; 
#&gt; 
#&gt; Root relaxation: objective 7.747768e+02, 18 iterations, 0.00 seconds
#&gt; 
#&gt;     Nodes    |    Current Node    |     Objective Bounds      |     Work
#&gt;  Expl Unexpl |  Obj  Depth IntInf | Incumbent    BestBd   Gap | It/Node Time
#&gt; 
#&gt;      0     0  774.77680    0    6   -0.00000  774.77680      -     -    0s
#&gt;      0     0  774.71251    0    9   -0.00000  774.71251      -     -    0s
#&gt;      0     0  774.69670    0   11   -0.00000  774.69670      -     -    0s
#&gt;      0     0  774.69259    0   11   -0.00000  774.69259      -     -    0s
#&gt;      0     0  774.68882    0   11   -0.00000  774.68882      -     -    0s
#&gt;      0     0  774.68208    0   10   -0.00000  774.68208      -     -    0s
#&gt;      0     0  774.68139    0   11   -0.00000  774.68139      -     -    0s
#&gt;      0     0  774.66995    0   13   -0.00000  774.66995      -     -    0s
#&gt; H    0     0                      45.0511449  774.66995  1620%     -    0s
#&gt; H    0     0                     153.7082788  774.66995   404%     -    0s
#&gt;      0     0  774.66871    0   12  153.70828  774.66871   404%     -    0s
#&gt;      0     0  774.66860    0   13  153.70828  774.66860   404%     -    0s
#&gt;      0     0  774.65196    0   14  153.70828  774.65196   404%     -    0s
#&gt;      0     0  774.64180    0   15  153.70828  774.64180   404%     -    0s
#&gt;      0     0  774.63891    0   16  153.70828  774.63891   404%     -    0s
#&gt;      0     0  774.58304    0   15  153.70828  774.58304   404%     -    0s
#&gt;      0     0  774.57292    0   15  153.70828  774.57292   404%     -    0s
#&gt;      0     0  774.57018    0   15  153.70828  774.57018   404%     -    0s
#&gt;      0     0  774.56045    0   15  153.70828  774.56045   404%     -    0s
#&gt; H    0     0                     606.6298845  774.56045  27.7%     -    0s
#&gt; H    0     0                     715.2870431  774.56045  8.29%     -    0s
#&gt; 
#&gt; Cutting planes:
#&gt;   MIR: 6
#&gt;   StrongCG: 1
#&gt;   RLT: 2
#&gt; 
#&gt; Explored 1 nodes (157 simplex iterations) in 0.04 seconds
#&gt; Thread count was 1 (of 4 available processors)
#&gt; 
#&gt; Solution count 5: 715.287 606.63 153.708 ... -0
#&gt; 
#&gt; Optimal solution found (tolerance 1.00e-01)
#&gt; Best objective 7.152870430944e+02, best bound 7.745604502585e+02, gap 8.2867%
#&gt; Gurobi Optimizer version 9.0.2 build v9.0.2rc0 (linux64)
#&gt; Optimize a model with 6 rows, 95 columns and 545 nonzeros
#&gt; Model fingerprint: 0x34972506
#&gt; Variable types: 0 continuous, 95 integer (95 binary)
#&gt; Coefficient statistics:
#&gt;   Matrix range     [2e-01, 2e+02]
#&gt;   Objective range  [1e-04, 2e+02]
#&gt;   Bounds range     [1e+00, 1e+00]
#&gt;   RHS range        [4e+03, 4e+03]
#&gt; Found heuristic solution: objective -0.0000000
#&gt; Presolve removed 3 rows and 3 columns
#&gt; Presolve time: 0.00s
#&gt; Presolved: 3 rows, 92 columns, 272 nonzeros
#&gt; Variable types: 0 continuous, 92 integer (92 binary)
#&gt; Presolved: 3 rows, 92 columns, 272 nonzeros
#&gt; 
#&gt; 
#&gt; Root relaxation: objective 2.999981e+02, 23 iterations, 0.00 seconds
#&gt; 
#&gt;     Nodes    |    Current Node    |     Objective Bounds      |     Work
#&gt;  Expl Unexpl |  Obj  Depth IntInf | Incumbent    BestBd   Gap | It/Node Time
#&gt; 
#&gt;      0     0  299.99806    0    2   -0.00000  299.99806      -     -    0s
#&gt; H    0     0                     199.9980909  299.99806  50.0%     -    0s
#&gt; H    0     0                     299.9980622  299.99806  0.00%     -    0s
#&gt;      0     0  299.99806    0    2  299.99806  299.99806  0.00%     -    0s
#&gt; 
#&gt; Explored 1 nodes (23 simplex iterations) in 0.00 seconds
#&gt; Thread count was 1 (of 4 available processors)
#&gt; 
#&gt; Solution count 3: 299.998 199.998 -0 
#&gt; 
#&gt; Optimal solution found (tolerance 1.00e-01)
#&gt; Best objective 2.999980621935e+02, best bound 2.999980621935e+02, gap 0.0000%</div><div class='input'>
<span class='co'># plot solutions</span>
<span class='fu'><a href='https://rdrr.io/r/base/plot.html'>plot</a></span>(<span class='no'>s1</span>, <span class='kw'>main</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"equal weights"</span>, <span class='st'>"rarity weights"</span>, <span class='st'>"manual weights"</span>),
     <span class='kw'>axes</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>box</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)</div><div class='img'><img src='add_feature_weights-1.png' alt='' width='700' height='433' /></div><div class='input'><span class='co'># }</span>

<span class='co'># plot the example phylogeny</span>
<span class='co'># \dontrun{</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/par.html'>par</a></span>(<span class='kw'>mfrow</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>1</span>, <span class='fl'>1</span>))
<span class='fu'><a href='https://rdrr.io/r/base/plot.html'>plot</a></span>(<span class='no'>sim_phylogeny</span>, <span class='kw'>main</span> <span class='kw'>=</span> <span class='st'>"simulated phylogeny"</span>)</div><div class='img'><img src='add_feature_weights-2.png' alt='' width='700' height='433' /></div><div class='input'><span class='co'># }</span>
<span class='co'># create problem with a maximum phylogenetic diversity objective,</span>
<span class='co'># where each feature needs 10 % of its distribution to be secured for</span>
<span class='co'># it to be adequately conserved and a total budget of 1900</span>
<span class='no'>p4</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='problem.html'>problem</a></span>(<span class='no'>sim_pu_raster</span>, <span class='no'>sim_features</span>) <span class='kw'>%&gt;%</span>
      <span class='fu'><a href='add_max_phylo_div_objective.html'>add_max_phylo_div_objective</a></span>(<span class='fl'>1900</span>, <span class='no'>sim_phylogeny</span>) <span class='kw'>%&gt;%</span>
      <span class='fu'><a href='add_relative_targets.html'>add_relative_targets</a></span>(<span class='fl'>0.1</span>) <span class='kw'>%&gt;%</span>
      <span class='fu'><a href='add_binary_decisions.html'>add_binary_decisions</a></span>()
<span class='co'># \dontrun{</span>
<span class='co'># solve problem</span>
<span class='no'>s4</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='solve.html'>solve</a></span>(<span class='no'>p4</span>)</div><div class='output co'>#&gt; Gurobi Optimizer version 9.0.2 build v9.0.2rc0 (linux64)
#&gt; Optimize a model with 14 rows, 103 columns and 565 nonzeros
#&gt; Model fingerprint: 0x19bea6ab
#&gt; Variable types: 0 continuous, 103 integer (103 binary)
#&gt; Coefficient statistics:
#&gt;   Matrix range     [2e-01, 2e+02]
#&gt;   Objective range  [4e-06, 1e+00]
#&gt;   Bounds range     [1e+00, 1e+00]
#&gt;   RHS range        [2e+03, 2e+03]
#&gt; Found heuristic solution: objective -0.0000000
#&gt; Presolve removed 5 rows and 5 columns
#&gt; Presolve time: 0.00s
#&gt; Presolved: 9 rows, 98 columns, 555 nonzeros
#&gt; Variable types: 0 continuous, 98 integer (98 binary)
#&gt; Presolved: 9 rows, 98 columns, 555 nonzeros
#&gt; 
#&gt; 
#&gt; Root relaxation: objective 5.344516e+00, 23 iterations, 0.00 seconds
#&gt; 
#&gt;     Nodes    |    Current Node    |     Objective Bounds      |     Work
#&gt;  Expl Unexpl |  Obj  Depth IntInf | Incumbent    BestBd   Gap | It/Node Time
#&gt; 
#&gt;      0     0    5.34452    0    5   -0.00000    5.34452      -     -    0s
#&gt;      0     0    5.24678    0    6   -0.00000    5.24678      -     -    0s
#&gt; H    0     0                       2.9402664    5.24678  78.4%     -    0s
#&gt;      0     0    5.24429    0    7    2.94027    5.24429  78.4%     -    0s
#&gt;      0     0    5.24428    0    8    2.94027    5.24428  78.4%     -    0s
#&gt;      0     0    5.24405    0    8    2.94027    5.24405  78.4%     -    0s
#&gt;      0     0    5.24401    0    9    2.94027    5.24401  78.4%     -    0s
#&gt;      0     0    5.24399    0   10    2.94027    5.24399  78.4%     -    0s
#&gt;      0     0    5.24397    0   10    2.94027    5.24397  78.4%     -    0s
#&gt;      0     2    5.24023    0   10    2.94027    5.24023  78.2%     -    0s
#&gt; H    6     3                       3.5363171    4.18960  18.5%   6.8    0s
#&gt; 
#&gt; Cutting planes:
#&gt;   Cover: 1
#&gt;   MIR: 3
#&gt;   RLT: 1
#&gt; 
#&gt; Explored 9 nodes (111 simplex iterations) in 0.04 seconds
#&gt; Thread count was 1 (of 4 available processors)
#&gt; 
#&gt; Solution count 3: 3.53632 2.94027 -0 
#&gt; 
#&gt; Optimal solution found (tolerance 1.00e-01)
#&gt; Best objective 3.536317127664e+00, best bound 3.833000595646e+00, gap 8.3896%</div><div class='input'>
<span class='co'># plot solution</span>
<span class='fu'><a href='https://rdrr.io/r/base/plot.html'>plot</a></span>(<span class='no'>s4</span>, <span class='kw'>main</span> <span class='kw'>=</span> <span class='st'>"solution"</span>, <span class='kw'>axes</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>box</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)</div><div class='img'><img src='add_feature_weights-3.png' alt='' width='700' height='433' /></div><div class='input'>
<span class='co'># find which features have their targets met</span>
<span class='no'>targets_met4</span> <span class='kw'>&lt;-</span> <span class='fu'>cellStats</span>(<span class='no'>s4</span> * <span class='no'>sim_features</span>, <span class='st'>"sum"</span>) <span class='kw'>&gt;</span>
                (<span class='fl'>0.1</span> * <span class='fu'>cellStats</span>(<span class='no'>sim_features</span>, <span class='st'>"sum"</span>))

<span class='co'># plot the example phylogeny and color the represented features in red</span>
<span class='fu'><a href='https://rdrr.io/r/base/plot.html'>plot</a></span>(<span class='no'>sim_phylogeny</span>, <span class='kw'>main</span> <span class='kw'>=</span> <span class='st'>"represented features"</span>,
     <span class='kw'>tip.color</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/replace.html'>replace</a></span>(<span class='fu'><a href='https://rdrr.io/r/base/rep.html'>rep</a></span>(<span class='st'>"black"</span>, <span class='fu'>nlayers</span>(<span class='no'>sim_features</span>)),
                         <span class='fu'><a href='https://rdrr.io/r/base/which.html'>which</a></span>(<span class='no'>targets_met4</span>), <span class='st'>"red"</span>))</div><div class='img'><img src='add_feature_weights-4.png' alt='' width='700' height='433' /></div><div class='input'><span class='co'># }</span>
<span class='co'># we can see here that the third feature ("layer.3", i.e.</span>
<span class='co'># sim_features[[3]]) is not represented in the solution. Let us pretend</span>
<span class='co'># that it is absolutely critical this feature is adequately conserved</span>
<span class='co'># in the solution. For example, this feature could represent a species</span>
<span class='co'># that plays important role in the ecosystem, or a species that is</span>
<span class='co'># important commercial activities (e.g. eco-tourism). So, to generate</span>
<span class='co'># a solution that conserves the third feature whilst also aiming to</span>
<span class='co'># maximize phylogenetic diversity, we will create a set of weights that</span>
<span class='co'># assign a particularly high weighting to the third feature</span>
<span class='no'>w5</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>0</span>, <span class='fl'>0</span>, <span class='fl'>1000</span>, <span class='fl'>0</span>, <span class='fl'>0</span>)

<span class='co'># we can see that this weighting (i.e. w5[3]) has a much higher value than</span>
<span class='co'># the branch lengths in the phylogeny so solutions that represent this</span>
<span class='co'># feature be much closer to optimality</span>
<span class='fu'><a href='print.html'>print</a></span>(<span class='no'>sim_phylogeny</span>$<span class='no'>edge.length</span>)</div><div class='output co'>#&gt; [1] 1.42105185 0.34712544 0.04100098 0.30612447 0.30612447 0.59604770 1.17212960
#&gt; [8] 1.17212960</div><div class='input'><span class='co'># \dontrun{</span>
<span class='co'># create problem with high weighting for the third feature and solve it</span>
<span class='no'>s5</span> <span class='kw'>&lt;-</span> <span class='no'>p4</span> <span class='kw'>%&gt;%</span> <span class='fu'>add_feature_weights</span>(<span class='no'>w5</span>) <span class='kw'>%&gt;%</span> <span class='fu'><a href='solve.html'>solve</a></span>()</div><div class='output co'>#&gt; Gurobi Optimizer version 9.0.2 build v9.0.2rc0 (linux64)
#&gt; Optimize a model with 14 rows, 103 columns and 565 nonzeros
#&gt; Model fingerprint: 0x19bea6ab
#&gt; Variable types: 0 continuous, 103 integer (103 binary)
#&gt; Coefficient statistics:
#&gt;   Matrix range     [2e-01, 2e+02]
#&gt;   Objective range  [4e-06, 1e+00]
#&gt;   Bounds range     [1e+00, 1e+00]
#&gt;   RHS range        [2e+03, 2e+03]
#&gt; Found heuristic solution: objective -0.0000000
#&gt; Presolve removed 5 rows and 5 columns
#&gt; Presolve time: 0.00s
#&gt; Presolved: 9 rows, 98 columns, 555 nonzeros
#&gt; Variable types: 0 continuous, 98 integer (98 binary)
#&gt; Presolved: 9 rows, 98 columns, 555 nonzeros
#&gt; 
#&gt; 
#&gt; Root relaxation: objective 5.344516e+00, 23 iterations, 0.00 seconds
#&gt; 
#&gt;     Nodes    |    Current Node    |     Objective Bounds      |     Work
#&gt;  Expl Unexpl |  Obj  Depth IntInf | Incumbent    BestBd   Gap | It/Node Time
#&gt; 
#&gt;      0     0    5.34452    0    5   -0.00000    5.34452      -     -    0s
#&gt;      0     0    5.24678    0    6   -0.00000    5.24678      -     -    0s
#&gt; H    0     0                       2.9402664    5.24678  78.4%     -    0s
#&gt;      0     0    5.24429    0    7    2.94027    5.24429  78.4%     -    0s
#&gt;      0     0    5.24428    0    8    2.94027    5.24428  78.4%     -    0s
#&gt;      0     0    5.24405    0    8    2.94027    5.24405  78.4%     -    0s
#&gt;      0     0    5.24401    0    9    2.94027    5.24401  78.4%     -    0s
#&gt;      0     0    5.24399    0   10    2.94027    5.24399  78.4%     -    0s
#&gt;      0     0    5.24397    0   10    2.94027    5.24397  78.4%     -    0s
#&gt;      0     2    5.24023    0   10    2.94027    5.24023  78.2%     -    0s
#&gt; H    6     3                       3.5363171    4.18960  18.5%   6.8    0s
#&gt; 
#&gt; Cutting planes:
#&gt;   Cover: 1
#&gt;   MIR: 3
#&gt;   RLT: 1
#&gt; 
#&gt; Explored 9 nodes (111 simplex iterations) in 0.02 seconds
#&gt; Thread count was 1 (of 4 available processors)
#&gt; 
#&gt; Solution count 3: 3.53632 2.94027 -0 
#&gt; 
#&gt; Optimal solution found (tolerance 1.00e-01)
#&gt; Best objective 3.536317127664e+00, best bound 3.833000595646e+00, gap 8.3896%</div><div class='input'>
<span class='co'># plot solution</span>
<span class='fu'><a href='https://rdrr.io/r/base/plot.html'>plot</a></span>(<span class='no'>s5</span>, <span class='kw'>main</span> <span class='kw'>=</span> <span class='st'>"solution"</span>, <span class='kw'>axes</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>box</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)</div><div class='img'><img src='add_feature_weights-5.png' alt='' width='700' height='433' /></div><div class='input'>
<span class='co'># find which features have their targets met</span>
<span class='no'>targets_met5</span> <span class='kw'>&lt;-</span> <span class='fu'>cellStats</span>(<span class='no'>s5</span> * <span class='no'>sim_features</span>, <span class='st'>"sum"</span>) <span class='kw'>&gt;</span>
                (<span class='fl'>0.1</span> * <span class='fu'>cellStats</span>(<span class='no'>sim_features</span>, <span class='st'>"sum"</span>))

<span class='co'># plot the example phylogeny and color the represented features in red</span>
<span class='co'># here we can see that this solution only adequately conserves the</span>
<span class='co'># third feature. This means that, given the budget, we are faced with the</span>
<span class='co'># trade-off of conserving either the third feature, or a phylogenetically</span>
<span class='co'># diverse set of three different features.</span>
<span class='fu'><a href='https://rdrr.io/r/base/plot.html'>plot</a></span>(<span class='no'>sim_phylogeny</span>, <span class='kw'>main</span> <span class='kw'>=</span> <span class='st'>"represented features"</span>,
     <span class='kw'>tip.color</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/replace.html'>replace</a></span>(<span class='fu'><a href='https://rdrr.io/r/base/rep.html'>rep</a></span>(<span class='st'>"black"</span>, <span class='fu'>nlayers</span>(<span class='no'>sim_features</span>)),
                         <span class='fu'><a href='https://rdrr.io/r/base/which.html'>which</a></span>(<span class='no'>targets_met5</span>), <span class='st'>"red"</span>))</div><div class='img'><img src='add_feature_weights-6.png' alt='' width='700' height='433' /></div><div class='input'><span class='co'># }</span>
<span class='co'># create multi-zone problem with maximum features objective,</span>
<span class='co'># with 10 % representation targets for each feature, and set</span>
<span class='co'># a budget such that the total maximum expenditure in all zones</span>
<span class='co'># cannot exceed 3000</span>
<span class='no'>p6</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='problem.html'>problem</a></span>(<span class='no'>sim_pu_zones_stack</span>, <span class='no'>sim_features_zones</span>) <span class='kw'>%&gt;%</span>
      <span class='fu'><a href='add_max_features_objective.html'>add_max_features_objective</a></span>(<span class='fl'>3000</span>) <span class='kw'>%&gt;%</span>
      <span class='fu'><a href='add_relative_targets.html'>add_relative_targets</a></span>(<span class='fu'><a href='https://rdrr.io/r/base/matrix.html'>matrix</a></span>(<span class='fl'>0.1</span>, <span class='kw'>ncol</span> <span class='kw'>=</span> <span class='fl'>3</span>, <span class='kw'>nrow</span> <span class='kw'>=</span> <span class='fl'>5</span>)) <span class='kw'>%&gt;%</span>
      <span class='fu'><a href='add_binary_decisions.html'>add_binary_decisions</a></span>()

<span class='co'># create weights that assign equal weighting for the representation</span>
<span class='co'># of each feature in each zone except that it does not matter if</span>
<span class='co'># feature 1 is represented in zone 1 and it really important</span>
<span class='co'># that feature 3 is really in zone 1</span>
<span class='no'>w7</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/matrix.html'>matrix</a></span>(<span class='fl'>1</span>, <span class='kw'>ncol</span> <span class='kw'>=</span> <span class='fl'>3</span>, <span class='kw'>nrow</span> <span class='kw'>=</span> <span class='fl'>5</span>)
<span class='no'>w7</span>[<span class='fl'>1</span>, <span class='fl'>1</span>] <span class='kw'>&lt;-</span> <span class='fl'>0</span>
<span class='no'>w7</span>[<span class='fl'>3</span>, <span class='fl'>1</span>] <span class='kw'>&lt;-</span> <span class='fl'>100</span>

<span class='co'># create problem with weights</span>
<span class='no'>p7</span> <span class='kw'>&lt;-</span> <span class='no'>p6</span> <span class='kw'>%&gt;%</span> <span class='fu'>add_feature_weights</span>(<span class='no'>w7</span>)
<span class='co'># \dontrun{</span>
<span class='co'># solve problems</span>
<span class='no'>s6</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='solve.html'>solve</a></span>(<span class='no'>p6</span>)</div><div class='output co'>#&gt; Gurobi Optimizer version 9.0.2 build v9.0.2rc0 (linux64)
#&gt; Optimize a model with 106 rows, 285 columns and 1905 nonzeros
#&gt; Model fingerprint: 0xe9518199
#&gt; Variable types: 0 continuous, 285 integer (285 binary)
#&gt; Coefficient statistics:
#&gt;   Matrix range     [2e-01, 2e+02]
#&gt;   Objective range  [3e-05, 1e+00]
#&gt;   Bounds range     [1e+00, 1e+00]
#&gt;   RHS range        [1e+00, 3e+03]
#&gt; Found heuristic solution: objective -0.0000000
#&gt; Presolve time: 0.00s
#&gt; Presolved: 106 rows, 285 columns, 1905 nonzeros
#&gt; Variable types: 0 continuous, 285 integer (285 binary)
#&gt; Presolved: 106 rows, 285 columns, 1905 nonzeros
#&gt; 
#&gt; 
#&gt; Root relaxation: objective 7.938175e+00, 248 iterations, 0.00 seconds
#&gt; 
#&gt;     Nodes    |    Current Node    |     Objective Bounds      |     Work
#&gt;  Expl Unexpl |  Obj  Depth IntInf | Incumbent    BestBd   Gap | It/Node Time
#&gt; 
#&gt;      0     0    7.93818    0   11   -0.00000    7.93818      -     -    0s
#&gt; H    0     0                       4.9996186    7.93818  58.8%     -    0s
#&gt;      0     0    7.56188    0   18    4.99962    7.56188  51.2%     -    0s
#&gt; H    0     0                       4.9996398    7.56188  51.2%     -    0s
#&gt;      0     0    7.56101    0   19    4.99964    7.56101  51.2%     -    0s
#&gt;      0     0    7.27065    0   11    4.99964    7.27065  45.4%     -    0s
#&gt; H    0     0                       4.9996466    7.27065  45.4%     -    0s
#&gt;      0     0    7.26884    0   12    4.99965    7.26884  45.4%     -    0s
#&gt;      0     0    7.25820    0   14    4.99965    7.25820  45.2%     -    0s
#&gt; H    0     0                       4.9996473    7.25820  45.2%     -    0s
#&gt;      0     0    7.25660    0   16    4.99965    7.25660  45.1%     -    0s
#&gt;      0     0    7.25580    0   18    4.99965    7.25580  45.1%     -    0s
#&gt;      0     0    7.25572    0   19    4.99965    7.25572  45.1%     -    0s
#&gt;      0     0    7.25341    0   21    4.99965    7.25341  45.1%     -    0s
#&gt;      0     0    7.25246    0   22    4.99965    7.25246  45.1%     -    0s
#&gt;      0     0    7.25219    0   23    4.99965    7.25219  45.1%     -    0s
#&gt;      0     0    7.25144    0   24    4.99965    7.25144  45.0%     -    0s
#&gt;      0     0    7.25144    0   24    4.99965    7.25144  45.0%     -    0s
#&gt; H    0     0                       4.9996488    7.25144  45.0%     -    0s
#&gt;      0     2    7.25041    0   24    4.99965    7.25041  45.0%     -    0s
#&gt; 
#&gt; Cutting planes:
#&gt;   Gomory: 1
#&gt;   Cover: 10
#&gt;   MIR: 5
#&gt;   StrongCG: 4
#&gt;   GUB cover: 1
#&gt;   RLT: 6
#&gt; 
#&gt; Explored 124 nodes (1709 simplex iterations) in 0.16 seconds
#&gt; Thread count was 1 (of 4 available processors)
#&gt; 
#&gt; Solution count 6: 4.99965 4.99965 4.99965 ... -0
#&gt; 
#&gt; Optimal solution found (tolerance 1.00e-01)
#&gt; Best objective 4.999648781179e+00, best bound 5.312475879683e+00, gap 6.2570%</div><div class='input'><span class='no'>s7</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='solve.html'>solve</a></span>(<span class='no'>p7</span>)</div><div class='output co'>#&gt; Gurobi Optimizer version 9.0.2 build v9.0.2rc0 (linux64)
#&gt; Optimize a model with 106 rows, 285 columns and 1905 nonzeros
#&gt; Model fingerprint: 0xbdbcef08
#&gt; Variable types: 0 continuous, 285 integer (285 binary)
#&gt; Coefficient statistics:
#&gt;   Matrix range     [2e-01, 2e+02]
#&gt;   Objective range  [3e-05, 1e+02]
#&gt;   Bounds range     [1e+00, 1e+00]
#&gt;   RHS range        [1e+00, 3e+03]
#&gt; Found heuristic solution: objective -0.0000000
#&gt; Presolve removed 1 rows and 1 columns
#&gt; Presolve time: 0.00s
#&gt; Presolved: 105 rows, 284 columns, 1814 nonzeros
#&gt; Variable types: 0 continuous, 284 integer (284 binary)
#&gt; Presolved: 105 rows, 284 columns, 1814 nonzeros
#&gt; 
#&gt; 
#&gt; Root relaxation: objective 1.058784e+02, 121 iterations, 0.00 seconds
#&gt; 
#&gt;     Nodes    |    Current Node    |     Objective Bounds      |     Work
#&gt;  Expl Unexpl |  Obj  Depth IntInf | Incumbent    BestBd   Gap | It/Node Time
#&gt; 
#&gt;      0     0  105.87844    0   10   -0.00000  105.87844      -     -    0s
#&gt; H    0     0                     102.9996465  105.87844  2.79%     -    0s
#&gt; 
#&gt; Explored 1 nodes (121 simplex iterations) in 0.01 seconds
#&gt; Thread count was 1 (of 4 available processors)
#&gt; 
#&gt; Solution count 2: 103 -0 
#&gt; 
#&gt; Optimal solution found (tolerance 1.00e-01)
#&gt; Best objective 1.029996464541e+02, best bound 1.058784434632e+02, gap 2.7950%</div><div class='input'>
<span class='co'># plot solutions</span>
<span class='fu'><a href='https://rdrr.io/r/base/plot.html'>plot</a></span>(<span class='fu'><a href='https://rdrr.io/r/utils/stack.html'>stack</a></span>(<span class='fu'><a href='category_layer.html'>category_layer</a></span>(<span class='no'>s6</span>), <span class='fu'><a href='category_layer.html'>category_layer</a></span>(<span class='no'>s7</span>)),
     <span class='kw'>main</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"equal weights"</span>, <span class='st'>"manual weights"</span>), <span class='kw'>axes</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>box</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)</div><div class='img'><img src='add_feature_weights-7.png' alt='' width='700' height='433' /></div><div class='input'><span class='co'># }</span>
<span class='co'># create minimal problem to show the correct method for setting</span>
<span class='co'># weights for problems with manual targets</span>
<span class='no'>p8</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='problem.html'>problem</a></span>(<span class='no'>sim_pu_raster</span>, <span class='no'>sim_features</span>) <span class='kw'>%&gt;%</span>
      <span class='fu'><a href='add_max_features_objective.html'>add_max_features_objective</a></span>(<span class='kw'>budget</span> <span class='kw'>=</span> <span class='fl'>1500</span>) <span class='kw'>%&gt;%</span>
      <span class='fu'><a href='add_manual_targets.html'>add_manual_targets</a></span>(<span class='fu'><a href='https://rdrr.io/r/base/data.frame.html'>data.frame</a></span>(<span class='kw'>feature</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"layer.1"</span>, <span class='st'>"layer.4"</span>),
                                    <span class='kw'>type</span> <span class='kw'>=</span> <span class='st'>"relative"</span>,
                                    <span class='kw'>target</span> <span class='kw'>=</span> <span class='fl'>0.1</span>)) <span class='kw'>%&gt;%</span>
      <span class='fu'>add_feature_weights</span>(<span class='fu'><a href='https://rdrr.io/r/base/matrix.html'>matrix</a></span>(<span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>1</span>, <span class='fl'>200</span>), <span class='kw'>ncol</span> <span class='kw'>=</span> <span class='fl'>1</span>)) <span class='kw'>%&gt;%</span>
      <span class='fu'><a href='add_binary_decisions.html'>add_binary_decisions</a></span>()
<span class='co'># \dontrun{</span>
<span class='co'># solve problem</span>
<span class='no'>s8</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='solve.html'>solve</a></span>(<span class='no'>p8</span>)</div><div class='output co'>#&gt; Gurobi Optimizer version 9.0.2 build v9.0.2rc0 (linux64)
#&gt; Optimize a model with 3 rows, 92 columns and 272 nonzeros
#&gt; Model fingerprint: 0x2bbe4267
#&gt; Variable types: 0 continuous, 92 integer (92 binary)
#&gt; Coefficient statistics:
#&gt;   Matrix range     [2e-01, 2e+02]
#&gt;   Objective range  [1e-04, 2e+02]
#&gt;   Bounds range     [1e+00, 1e+00]
#&gt;   RHS range        [2e+03, 2e+03]
#&gt; Found heuristic solution: objective -0.0000000
#&gt; Presolve removed 3 rows and 92 columns
#&gt; Presolve time: 0.00s
#&gt; Presolve: All rows and columns removed
#&gt; 
#&gt; Explored 0 nodes (0 simplex iterations) in 0.00 seconds
#&gt; Thread count was 1 (of 4 available processors)
#&gt; 
#&gt; Solution count 1: -0 
#&gt; No other solutions better than -0
#&gt; 
#&gt; Optimal solution found (tolerance 1.00e-01)
#&gt; Best objective -0.000000000000e+00, best bound -0.000000000000e+00, gap 0.0000%</div><div class='input'>
<span class='co'># plot solution</span>
<span class='fu'><a href='https://rdrr.io/r/base/plot.html'>plot</a></span>(<span class='no'>s8</span>, <span class='kw'>main</span> <span class='kw'>=</span> <span class='st'>"solution"</span>, <span class='kw'>axes</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>box</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)</div><div class='img'><img src='add_feature_weights-8.png' alt='' width='700' height='433' /></div><div class='input'># }
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by <a href='https://jeffrey-hanson.com'>Jeffrey O Hanson</a>, <a href='http://www.richard-schuster.com'>Richard Schuster</a>, Nina Morrell, <a href='http://strimas.com'>Matthew Strimas-Mackey</a>, Matthew E Watts, <a href='https://arcese.forestry.ubc.ca'>Peter Arcese</a>, <a href='https://josephrbennett.wordpress.com'>Joseph Bennett</a>, <a href='http://www.possinghamlab.org'>Hugh P Possingham</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
   </div>

  
<script src="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.1/docsearch.min.js" integrity="sha256-GKvGqXDznoRYHCwKXGnuchvKSwmx9SRMrZOTh2g4Sb0=" crossorigin="anonymous"></script>
<script>
  docsearch({
    
    
    apiKey: '486efa122ea6783724263412c5f28ab3',
    indexName: 'prioritizr',
    inputSelector: 'input#search-input.form-control',
    transformData: function(hits) {
      return hits.map(function (hit) {
        hit.url = updateHitURL(hit);
        return hit;
      });
    }
  });
</script>



  </body>
</html>


