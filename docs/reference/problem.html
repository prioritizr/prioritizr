<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Conservation planning problem — problem • prioritizr</title>

<!-- favicons -->
<link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png" />
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png" />
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png" />
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png" />

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>


<!-- docsearch -->
<script src="../docsearch.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.3/docsearch.min.css" integrity="sha256-QOSRU/ra9ActyXkIBbiIB144aDBdtvXBcNc3OTNuX/Q=" crossorigin="anonymous" />
<link href="../docsearch.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script>



<meta property="og:title" content="Conservation planning problem — problem" />
<meta property="og:description" content="Create a systematic conservation planning problem. This function is used to
specify the basic data used in a spatial prioritization problem: the
spatial distribution of the planning units and their costs, as well as
the features (e.g. species, ecosystems) that need to be conserved. After
constructing this ConservationProblem-class object, it can be
customized to meet specific goals using objectives,
targets, constraints, and
penalties. After building the problem, the
solve() function can be used to identify solutions." />
<meta property="og:image" content="https://prioritizr.net/logo.png" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-70466840-4"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-70466840-4');
</script>


  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">prioritizr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">7.0.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/prioritizr.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/gurobi_installation.html">Gurobi Installation Guide</a>
    </li>
    <li>
      <a href="../articles/publication_record.html">Publication Record</a>
    </li>
    <li>
      <a href="../articles/saltspring.html">Salt Spring Island Tutorial</a>
    </li>
    <li>
      <a href="../articles/tasmania.html">Tasmania Tutorial</a>
    </li>
    <li>
      <a href="../articles/zones.html">Management Zones</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/prioritizr/prioritizr/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
      <form class="navbar-form navbar-right hidden-xs hidden-sm" role="search">
        <div class="form-group">
          <input type="search" class="form-control" name="search-input" id="search-input" placeholder="Search..." aria-label="Search for..." autocomplete="off">
        </div>
      </form>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Conservation planning problem</h1>
    <small class="dont-index">Source: <a href='https://github.com/prioritizr/prioritizr/blob/master/R/problem.R'><code>R/problem.R</code></a></small>
    <div class="hidden name"><code>problem.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Create a systematic conservation planning problem. This function is used to
specify the basic data used in a spatial prioritization problem: the
spatial distribution of the planning units and their costs, as well as
the features (e.g. species, ecosystems) that need to be conserved. After
constructing this <code>ConservationProblem-class</code> object, it can be
customized to meet specific goals using <a href='objectives.html'>objectives</a>,
<a href='targets.html'>targets</a>, <a href='constraints.html'>constraints</a>, and
<a href='penalties.html'>penalties</a>. After building the problem, the
<code><a href='solve.html'>solve()</a></code> function can be used to identify solutions.</p>
    </div>

    <pre class="usage"><span class='fu'>problem</span><span class='op'>(</span><span class='va'>x</span>, <span class='va'>features</span>, <span class='va'>...</span><span class='op'>)</span>

<span class='co'># S4 method for Raster,Raster</span>
<span class='fu'>problem</span><span class='op'>(</span><span class='va'>x</span>, <span class='va'>features</span>, <span class='va'>run_checks</span>, <span class='va'>...</span><span class='op'>)</span>

<span class='co'># S4 method for Raster,ZonesRaster</span>
<span class='fu'>problem</span><span class='op'>(</span><span class='va'>x</span>, <span class='va'>features</span>, <span class='va'>run_checks</span>, <span class='va'>...</span><span class='op'>)</span>

<span class='co'># S4 method for Spatial,Raster</span>
<span class='fu'>problem</span><span class='op'>(</span><span class='va'>x</span>, <span class='va'>features</span>, <span class='va'>cost_column</span>, <span class='va'>run_checks</span>, <span class='va'>...</span><span class='op'>)</span>

<span class='co'># S4 method for Spatial,ZonesRaster</span>
<span class='fu'>problem</span><span class='op'>(</span><span class='va'>x</span>, <span class='va'>features</span>, <span class='va'>cost_column</span>, <span class='va'>run_checks</span>, <span class='va'>...</span><span class='op'>)</span>

<span class='co'># S4 method for Spatial,character</span>
<span class='fu'>problem</span><span class='op'>(</span><span class='va'>x</span>, <span class='va'>features</span>, <span class='va'>cost_column</span>, <span class='va'>...</span><span class='op'>)</span>

<span class='co'># S4 method for Spatial,ZonesCharacter</span>
<span class='fu'>problem</span><span class='op'>(</span><span class='va'>x</span>, <span class='va'>features</span>, <span class='va'>cost_column</span>, <span class='va'>...</span><span class='op'>)</span>

<span class='co'># S4 method for data.frame,character</span>
<span class='fu'>problem</span><span class='op'>(</span><span class='va'>x</span>, <span class='va'>features</span>, <span class='va'>cost_column</span>, <span class='va'>...</span><span class='op'>)</span>

<span class='co'># S4 method for data.frame,ZonesCharacter</span>
<span class='fu'>problem</span><span class='op'>(</span><span class='va'>x</span>, <span class='va'>features</span>, <span class='va'>cost_column</span>, <span class='va'>...</span><span class='op'>)</span>

<span class='co'># S4 method for data.frame,data.frame</span>
<span class='fu'>problem</span><span class='op'>(</span><span class='va'>x</span>, <span class='va'>features</span>, <span class='va'>rij</span>, <span class='va'>cost_column</span>, <span class='va'>zones</span>, <span class='va'>...</span><span class='op'>)</span>

<span class='co'># S4 method for numeric,data.frame</span>
<span class='fu'>problem</span><span class='op'>(</span><span class='va'>x</span>, <span class='va'>features</span>, <span class='va'>rij_matrix</span>, <span class='va'>...</span><span class='op'>)</span>

<span class='co'># S4 method for matrix,data.frame</span>
<span class='fu'>problem</span><span class='op'>(</span><span class='va'>x</span>, <span class='va'>features</span>, <span class='va'>rij_matrix</span>, <span class='va'>...</span><span class='op'>)</span>

<span class='co'># S4 method for sf,Raster</span>
<span class='fu'>problem</span><span class='op'>(</span><span class='va'>x</span>, <span class='va'>features</span>, <span class='va'>cost_column</span>, <span class='va'>run_checks</span>, <span class='va'>...</span><span class='op'>)</span>

<span class='co'># S4 method for sf,ZonesRaster</span>
<span class='fu'>problem</span><span class='op'>(</span><span class='va'>x</span>, <span class='va'>features</span>, <span class='va'>cost_column</span>, <span class='va'>run_checks</span>, <span class='va'>...</span><span class='op'>)</span>

<span class='co'># S4 method for sf,character</span>
<span class='fu'>problem</span><span class='op'>(</span><span class='va'>x</span>, <span class='va'>features</span>, <span class='va'>cost_column</span>, <span class='va'>...</span><span class='op'>)</span>

<span class='co'># S4 method for sf,ZonesCharacter</span>
<span class='fu'>problem</span><span class='op'>(</span><span class='va'>x</span>, <span class='va'>features</span>, <span class='va'>cost_column</span>, <span class='va'>...</span><span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>x</th>
      <td><p><code>Raster</code>,
<code><a href='https://r-spatial.github.io/sf/reference/sf.html'>sf::st_sf()</a></code>,
<code>SpatialPolygonsDataFrame</code>,
<code>SpatialLinesDataFrame</code>,
<code>SpatialPointsDataFrame</code>,
<code><a href='https://rdrr.io/r/base/data.frame.html'>data.frame()</a></code> object,
<code><a href='https://rdrr.io/r/base/numeric.html'>numeric()</a></code> vector, or
<code><a href='https://rdrr.io/r/base/matrix.html'>matrix()</a></code> specifying the planning units to use in the reserve
design exercise and their corresponding cost. It may be desirable to
exclude some planning units from the analysis, for example those outside
the study area. To exclude planning units, set the cost for those raster
cells to <code>NA</code>, or use the <code>add_locked_out_constraint</code> function.</p></td>
    </tr>
    <tr>
      <th>features</th>
      <td><p>The feature data can be specified in a variety of ways.
The specific formats that can be used depend on the cost data format (i.e.
argument to <code>x</code>) and whether the problem should have a single zone or
multiple zones. If the problem should have a single zone, then the feature
data can be specified following:</p><ul>
<li><p><code>x = RasterLayer-class</code>, or
<code><a href='https://rdrr.io/pkg/sp/man/Spatial-class.html'>x = Spatial-class</a></code>, or
<code><a href='https://r-spatial.github.io/sf/reference/sf.html'>x = sf::st_sf()</a></code>:
<code>y = Raster-class</code>
object showing the distribution of conservation features. Missing
values (i.e. <code>NA</code> values) can be used to indicate the absence of
a feature in a particular cell instead of explicitly setting these
cells to zero. Note that this argument type for <code>features</code> can
only be used to specify data for problems involving a single zone.</p></li>
<li><p><code><a href='https://rdrr.io/pkg/sp/man/Spatial-class.html'>x = Spatial-class</a></code>, or
<code><a href='https://r-spatial.github.io/sf/reference/sf.html'>x = sf::st_sf()</a></code>, or
<code>x = data.frame</code>:
<code>y = character</code> vector
with column names that correspond to the abundance or occurrence of
different features in each planning unit. Note that this argument
type can only be used to create problems involving a single zone.</p></li>
<li><p><code><a href='https://rdrr.io/pkg/sp/man/Spatial-class.html'>x = Spatial-class</a></code>, or
<code><a href='https://r-spatial.github.io/sf/reference/sf.html'>x = sf::st_sf()</a></code>, or
<code>x = data.frame</code>, or
<code>x = numeric</code> vector, or
<code>x = matrix</code>:
<code>y = data.frame</code> object
containing the names of the features. Note that if this
type of argument is supplied to <code>features</code> then the argument
<code>rij</code> or <code>rij_matrix</code> must also be supplied. This type of
argument should follow the conventions used by <em>Marxan</em>, wherein
each row corresponds to a different feature. It must also contain the
following columns:</p><dl>
<dt>id</dt><dd><p><code>integer</code> unique identifier for each feature
These identifiers are used in the argument to <code>rij</code>.</p></dd>
<dt>name</dt><dd><p><code>character</code> name for each feature.</p></dd>
<dt>prop</dt><dd><p><code>numeric</code> relative target for each feature
(optional).</p></dd>
<dt>amount</dt><dd><p><code>numeric</code> absolute target for each
feature (optional).</p></dd>

</dl></li>
</ul>

<p>If the problem should have multiple zones, then the feature
data can be specified following:</p><ul>
<li><p><code>x = RasterStack-class</code>, or
<code>x = RasterBrick-class</code>, or
<code><a href='https://rdrr.io/pkg/sp/man/Spatial-class.html'>x = Spatial-class</a></code>, or
<code><a href='https://r-spatial.github.io/sf/reference/sf.html'>x = sf::st_sf()</a></code>:
<code><a href='zones.html'>y = ZonesRaster</a></code>:
object showing the distribution of conservation features in multiple
zones. As above, missing values (i.e. <code>NA</code> values) can be used to
indicate the absence of a feature in a particular cell instead of
explicitly setting these cells to zero.</p></li>
<li><p><code><a href='https://rdrr.io/pkg/sp/man/Spatial-class.html'>x = Spatial-class</a></code>, or
<code><a href='https://r-spatial.github.io/sf/reference/sf.html'>x = sf::st_sf()</a></code>, or
or <code>x = data.frame</code>:
<code><a href='zones.html'>y = ZonesCharacter</a></code>
object with column names that correspond to the abundance or
occurrence of different features in each planning unit in different
zones.</p></li>
</ul></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>not used.</p></td>
    </tr>
    <tr>
      <th>run_checks</th>
      <td><p><code>logical</code> flag indicating whether checks should be
run to ensure the integrity of the input data. These checks are run by
default; however, for large datasets they may increase run time. If it is
taking a prohibitively long time to create the prioritization problem, it
is suggested to try setting <code>run_checks</code> to <code>FALSE</code>.</p></td>
    </tr>
    <tr>
      <th>cost_column</th>
      <td><p><code>character</code> name or <code>integer</code> indicating the
column(s) with the cost data. This argument must be supplied when the
argument to <code>x</code> is a <code>Spatial</code> or
<code>data.frame</code> object. This argument should contain the name of each
column containing cost data for each management zone when creating
problems with multiple zones. To create a problem with a single zone, then
set the argument to <code>cost_column</code> as a single column name.</p></td>
    </tr>
    <tr>
      <th>rij</th>
      <td><p><code>data.frame</code> containing information on the amount of
each feature in each planning unit assuming each management zone. Similar
to <code>data.frame</code> arguments for <code>features</code>, the <code>data.frame</code>
objects must follow the conventions used by <em>Marxan</em>. Note that the
<code>"zone"</code> column is not needed for problems involving a single
management zone. Specifically, the argument should contain the following
columns:</p><dl>
<dt>pu</dt><dd><p><code>integer</code> planning unit identifier.</p></dd>
<dt>species</dt><dd><p><code>integer</code> feature identifier.</p></dd>
<dt>zone</dt><dd><p><code>integer</code> zone identifier (optional for
problems involving a single zone).</p></dd>
<dt>amount</dt><dd><p><code>numeric</code> amount of the feature in the
planning unit.</p></dd>

</dl></td>
    </tr>
    <tr>
      <th>zones</th>
      <td><p><code>data.frame</code> containing information on the zones. This
argument is only used when argument to <code>x</code> and <code>y</code> are
both <code>data.frame</code> objects and the problem being built contains
multiple zones. Following conventions used in <code>MarZone</code>, this
argument should contain the following columns:
columns:</p><dl>
<dt>id</dt><dd><p><code>integer</code> zone identifier.</p></dd>
<dt>name</dt><dd><p><code>character</code> zone name.</p></dd>

</dl></td>
    </tr>
    <tr>
      <th>rij_matrix</th>
      <td><p><code>list</code> of <code>matrix</code> or
<code><a href='https://rdrr.io/pkg/Matrix/man/dgCMatrix-class.html'>dgCMatrix</a></code>
objects specifying the amount of each feature (rows) within each planning
unit (columns) for each zone. The <code>list</code> elements denote
different zones, matrix rows denote features, and matrix columns denote
planning units. For convenience, the argument to
<code>rij_matrix</code> can be a single <code>matrix</code> or
<code><a href='https://rdrr.io/pkg/Matrix/man/dgCMatrix-class.html'>dgCMatrix</a></code> when specifying a problem with a
single management zone. This argument is only used when the argument
to <code>x</code> is a <code>numeric</code> or <code>matrix</code> object.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p><code><a href='ConservationProblem-class.html'>ConservationProblem</a></code> object containing
data for building a prioritization problem.</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>A reserve design exercise starts by dividing the study region
into planning units (typically square or hexagonal cells) and, for
each planning unit, assigning values that quantify socioeconomic
cost and conservation benefit for a set of conservation features. The
cost can be the acquisition cost of the land, the cost of management,
the opportunity cost of foregone commercial activities (e.g. from logging
or agriculture), or simply the area. The conservation features are
typically species (e.g. Clouded Leopard) or habitats (e.g. mangroves or
cloud forest). The benefit that each feature derives from a planning unit
can take a variety of forms, but is typically either occupancy (i.e.
presence or absence) or area of occurrence within each planning unit.
Finally, in some types of reserve design models, representation targets
must be set for each conservation feature, such as 20% of the current
extent of cloud forest or 10,000 km^2 of Clouded Leopard habitat
(see <a href='targets.html'>targets</a>).</p>
<p>The goal of the reserve design exercise is then to optimize the trade-off
between conservation benefit and socioeconomic cost, i.e. to get the most
benefit for your limited conservation funds. In general, the goal of an
optimization problem is to minimize an objective function over a set of
decision variables, subject to a series of constraints. The decision
variables are what we control, usually there is one binary variable for
each planning unit specifying whether or not to protect that unit (but
other approaches are available, see <a href='decisions.html'>decisions</a>). The
constraints can be thought of as rules that need to be followed, for
example, that the reserve must stay within a certain budget or meet the
representation targets.</p>
<p>Integer linear programming (ILP) is the subset of optimization algorithms
used in this package to solve reserve design problems. The general form of
an integer programming problem can be expressed in matrix notation using
the following equation.</p>
<p>$$\mathit{Minimize} \space \mathbf{c}^{\mathbf{T}}\mathbf{x} \space
  \mathit{subject \space to} \space
  \mathbf{Ax}\geq= or\leq \mathbf{b}$$</p>
<p>Here, \(x\) is a vector of decision variables, \(c\) and \(b\) are
vectors of known coefficients, and \(A\) is the constraint
matrix. The final term specifies a series of structural
constraints where relational operators for the constraint can be either
\(\ge\), \(=\), or \(\le\) the coefficients. For example, in the
minimum set
cover problem, \(c\) would be a vector of costs for each planning unit,
\(b\) a vector of targets for each conservation feature, the relational
operator would be \(\ge\) for all features, and \(A\) would be the
representation matrix with \(A_{ij}=r_{ij}\), the
representation level of feature \(i\) in planning unit \(j\).</p>
<p>Please note that this function internally computes the amount of each
feature in each planning unit when this data is not supplied (using the
<code>rij_matrix</code> parameter). As a consequence, it can take a while to
initialize large-scale conservation planning problems that involve
millions of planning units.</p>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><a href='constraints.html'>constraints</a>, <a href='decisions.html'>decisions</a>,
<a href='objectives.html'>objectives</a> <a href='penalties.html'>penalties</a>,
<a href='portfolios.html'>portfolios</a>, <a href='solvers.html'>solvers</a>, <a href='targets.html'>targets</a>,
<a href='summaries.html'>summaries</a>, <a href='importance.html'>importance</a>.</p></div>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'># load data</span>
<span class='fu'><a href='https://rdrr.io/r/utils/data.html'>data</a></span><span class='op'>(</span><span class='va'>sim_pu_raster</span>, <span class='va'>sim_pu_polygons</span>, <span class='va'>sim_pu_lines</span>, <span class='va'>sim_pu_points</span>,
     <span class='va'>sim_pu_sf</span>, <span class='va'>sim_features</span><span class='op'>)</span>

<span class='co'># create problem using raster planning unit data</span>
<span class='va'>p1</span> <span class='op'>&lt;-</span> <span class='fu'>problem</span><span class='op'>(</span><span class='va'>sim_pu_raster</span>, <span class='va'>sim_features</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
      <span class='fu'><a href='add_min_set_objective.html'>add_min_set_objective</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
      <span class='fu'><a href='add_relative_targets.html'>add_relative_targets</a></span><span class='op'>(</span><span class='fl'>0.2</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
      <span class='fu'><a href='add_binary_decisions.html'>add_binary_decisions</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
      <span class='fu'><a href='add_default_solver.html'>add_default_solver</a></span><span class='op'>(</span>verbose <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span>

<span class='co'># \dontrun{</span>
<span class='co'># create problem using polygon (Spatial) planning unit data</span>
<span class='va'>p2</span> <span class='op'>&lt;-</span> <span class='fu'>problem</span><span class='op'>(</span><span class='va'>sim_pu_polygons</span>, <span class='va'>sim_features</span>, <span class='st'>"cost"</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
      <span class='fu'><a href='add_min_set_objective.html'>add_min_set_objective</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
      <span class='fu'><a href='add_relative_targets.html'>add_relative_targets</a></span><span class='op'>(</span><span class='fl'>0.2</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
      <span class='fu'><a href='add_binary_decisions.html'>add_binary_decisions</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
      <span class='fu'><a href='add_default_solver.html'>add_default_solver</a></span><span class='op'>(</span>verbose <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span>

<span class='co'># create problem using line (Spatial) planning unit data</span>
<span class='va'>p3</span> <span class='op'>&lt;-</span> <span class='fu'>problem</span><span class='op'>(</span><span class='va'>sim_pu_lines</span>, <span class='va'>sim_features</span>, <span class='st'>"cost"</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
      <span class='fu'><a href='add_min_set_objective.html'>add_min_set_objective</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
      <span class='fu'><a href='add_relative_targets.html'>add_relative_targets</a></span><span class='op'>(</span><span class='fl'>0.2</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
      <span class='fu'><a href='add_binary_decisions.html'>add_binary_decisions</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
      <span class='fu'><a href='add_default_solver.html'>add_default_solver</a></span><span class='op'>(</span>verbose <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span>

<span class='co'># create problem using point (Spatial) planning unit data</span>
<span class='va'>p4</span> <span class='op'>&lt;-</span> <span class='fu'>problem</span><span class='op'>(</span><span class='va'>sim_pu_points</span>, <span class='va'>sim_features</span>, <span class='st'>"cost"</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
      <span class='fu'><a href='add_min_set_objective.html'>add_min_set_objective</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
      <span class='fu'><a href='add_relative_targets.html'>add_relative_targets</a></span><span class='op'>(</span><span class='fl'>0.2</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
      <span class='fu'><a href='add_binary_decisions.html'>add_binary_decisions</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
      <span class='fu'><a href='add_default_solver.html'>add_default_solver</a></span><span class='op'>(</span>verbose <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span>

<span class='co'># create problem using polygon (sf) planning unit data</span>
<span class='va'>p5</span> <span class='op'>&lt;-</span> <span class='fu'>problem</span><span class='op'>(</span><span class='va'>sim_pu_sf</span>, <span class='va'>sim_features</span>, <span class='st'>"cost"</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
      <span class='fu'><a href='add_min_set_objective.html'>add_min_set_objective</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
      <span class='fu'><a href='add_relative_targets.html'>add_relative_targets</a></span><span class='op'>(</span><span class='fl'>0.2</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
      <span class='fu'><a href='add_binary_decisions.html'>add_binary_decisions</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
      <span class='fu'><a href='add_default_solver.html'>add_default_solver</a></span><span class='op'>(</span>verbose <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span>

<span class='co'># add columns to polygon planning unit data representing the abundance</span>
<span class='co'># of species inside them</span>
<span class='va'>sim_pu_polygons</span><span class='op'>$</span><span class='va'>spp_1</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/Poisson.html'>rpois</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/length.html'>length</a></span><span class='op'>(</span><span class='va'>sim_pu_polygons</span><span class='op'>)</span>, <span class='fl'>5</span><span class='op'>)</span>
<span class='va'>sim_pu_polygons</span><span class='op'>$</span><span class='va'>spp_2</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/Poisson.html'>rpois</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/length.html'>length</a></span><span class='op'>(</span><span class='va'>sim_pu_polygons</span><span class='op'>)</span>, <span class='fl'>8</span><span class='op'>)</span>
<span class='va'>sim_pu_polygons</span><span class='op'>$</span><span class='va'>spp_3</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/Poisson.html'>rpois</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/length.html'>length</a></span><span class='op'>(</span><span class='va'>sim_pu_polygons</span><span class='op'>)</span>, <span class='fl'>2</span><span class='op'>)</span>

<span class='co'># create problem using pre-processed data when feature abundances are</span>
<span class='co'># stored in the columns of an attribute table for a spatial vector dataset</span>
<span class='va'>p6</span> <span class='op'>&lt;-</span> <span class='fu'>problem</span><span class='op'>(</span><span class='va'>sim_pu_polygons</span>, features <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"spp_1"</span>, <span class='st'>"spp_2"</span>, <span class='st'>"spp_3"</span><span class='op'>)</span>,
              <span class='st'>"cost"</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
      <span class='fu'><a href='add_min_set_objective.html'>add_min_set_objective</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
      <span class='fu'><a href='add_relative_targets.html'>add_relative_targets</a></span><span class='op'>(</span><span class='fl'>0.2</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
      <span class='fu'><a href='add_binary_decisions.html'>add_binary_decisions</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
      <span class='fu'><a href='add_default_solver.html'>add_default_solver</a></span><span class='op'>(</span>verbose <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span>

<span class='co'># alternatively one can supply pre-processed aspatial data</span>
<span class='va'>costs</span> <span class='op'>&lt;-</span> <span class='va'>sim_pu_polygons</span><span class='op'>$</span><span class='va'>cost</span>
<span class='va'>features</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/data.frame.html'>data.frame</a></span><span class='op'>(</span>id <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/seq.html'>seq_len</a></span><span class='op'>(</span><span class='fu'>nlayers</span><span class='op'>(</span><span class='va'>sim_features</span><span class='op'>)</span><span class='op'>)</span>,
                       name <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/names.html'>names</a></span><span class='op'>(</span><span class='va'>sim_features</span><span class='op'>)</span><span class='op'>)</span>
<span class='va'>rij_mat</span> <span class='op'>&lt;-</span> <span class='fu'><a href='rij_matrix.html'>rij_matrix</a></span><span class='op'>(</span><span class='va'>sim_pu_polygons</span>, <span class='va'>sim_features</span><span class='op'>)</span>
<span class='va'>p7</span> <span class='op'>&lt;-</span> <span class='fu'>problem</span><span class='op'>(</span><span class='va'>costs</span>, <span class='va'>features</span>, rij_matrix <span class='op'>=</span> <span class='va'>rij_mat</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
      <span class='fu'><a href='add_min_set_objective.html'>add_min_set_objective</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
      <span class='fu'><a href='add_relative_targets.html'>add_relative_targets</a></span><span class='op'>(</span><span class='fl'>0.2</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
      <span class='fu'><a href='add_binary_decisions.html'>add_binary_decisions</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
      <span class='fu'><a href='add_default_solver.html'>add_default_solver</a></span><span class='op'>(</span>verbose <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span>

<span class='co'># solve problems</span>
<span class='va'>s1</span> <span class='op'>&lt;-</span> <span class='fu'><a href='solve.html'>solve</a></span><span class='op'>(</span><span class='va'>p1</span><span class='op'>)</span>
<span class='va'>s2</span> <span class='op'>&lt;-</span> <span class='fu'><a href='solve.html'>solve</a></span><span class='op'>(</span><span class='va'>p2</span><span class='op'>)</span>
<span class='va'>s3</span> <span class='op'>&lt;-</span> <span class='fu'><a href='solve.html'>solve</a></span><span class='op'>(</span><span class='va'>p3</span><span class='op'>)</span>
<span class='va'>s4</span> <span class='op'>&lt;-</span> <span class='fu'><a href='solve.html'>solve</a></span><span class='op'>(</span><span class='va'>p4</span><span class='op'>)</span>
<span class='va'>s5</span> <span class='op'>&lt;-</span> <span class='fu'><a href='solve.html'>solve</a></span><span class='op'>(</span><span class='va'>p5</span><span class='op'>)</span>
<span class='va'>s6</span> <span class='op'>&lt;-</span> <span class='fu'><a href='solve.html'>solve</a></span><span class='op'>(</span><span class='va'>p6</span><span class='op'>)</span>
<span class='va'>s7</span> <span class='op'>&lt;-</span> <span class='fu'><a href='solve.html'>solve</a></span><span class='op'>(</span><span class='va'>p7</span><span class='op'>)</span>

<span class='co'># plot solutions for problems associated with spatial data</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/par.html'>par</a></span><span class='op'>(</span>mfrow <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>3</span>, <span class='fl'>2</span><span class='op'>)</span>, mar <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>0</span>, <span class='fl'>0</span>, <span class='fl'>4.1</span>, <span class='fl'>0</span><span class='op'>)</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>s1</span>, main <span class='op'>=</span> <span class='st'>"raster data"</span>, axes <span class='op'>=</span> <span class='cn'>FALSE</span>, box <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span>

<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>s2</span>, main <span class='op'>=</span> <span class='st'>"polygon data"</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>s2</span><span class='op'>[</span><span class='va'>s2</span><span class='op'>$</span><span class='va'>solution_1</span> <span class='op'>==</span> <span class='fl'>1</span>, <span class='op'>]</span>, col <span class='op'>=</span> <span class='st'>"darkgreen"</span>, add <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>

<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>s3</span>, main <span class='op'>=</span> <span class='st'>"line data"</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/lines.html'>lines</a></span><span class='op'>(</span><span class='va'>s3</span><span class='op'>[</span><span class='va'>s3</span><span class='op'>$</span><span class='va'>solution_1</span> <span class='op'>==</span> <span class='fl'>1</span>, <span class='op'>]</span>, col <span class='op'>=</span> <span class='st'>"darkgreen"</span>, lwd <span class='op'>=</span> <span class='fl'>2</span><span class='op'>)</span>

<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>s4</span>, main <span class='op'>=</span> <span class='st'>"point data"</span>, pch <span class='op'>=</span> <span class='fl'>19</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/points.html'>points</a></span><span class='op'>(</span><span class='va'>s4</span><span class='op'>[</span><span class='va'>s4</span><span class='op'>$</span><span class='va'>solution_1</span> <span class='op'>==</span> <span class='fl'>1</span>, <span class='op'>]</span>, col <span class='op'>=</span> <span class='st'>"darkgreen"</span>, cex <span class='op'>=</span> <span class='fl'>2</span>, pch <span class='op'>=</span> <span class='fl'>19</span><span class='op'>)</span>

<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>s5</span>, main <span class='op'>=</span> <span class='st'>"sf (polygon) data"</span>, pch <span class='op'>=</span> <span class='fl'>19</span><span class='op'>)</span>
</div><div class='img'><img src='problem-1.png' alt='' width='700' height='433' /></div><div class='input'><span class='fu'><a href='https://rdrr.io/r/graphics/points.html'>points</a></span><span class='op'>(</span><span class='va'>s5</span><span class='op'>[</span><span class='va'>s5</span><span class='op'>$</span><span class='va'>solution_1</span> <span class='op'>==</span> <span class='fl'>1</span>, <span class='op'>]</span>, col <span class='op'>=</span> <span class='st'>"darkgreen"</span>, cex <span class='op'>=</span> <span class='fl'>2</span>, pch <span class='op'>=</span> <span class='fl'>19</span><span class='op'>)</span>
</div><div class='img'><img src='problem-2.png' alt='' width='700' height='433' /></div><div class='input'>
<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>s6</span>, main <span class='op'>=</span> <span class='st'>"preprocessed data"</span>, pch <span class='op'>=</span> <span class='fl'>19</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>s6</span><span class='op'>[</span><span class='va'>s6</span><span class='op'>$</span><span class='va'>solution_1</span> <span class='op'>==</span> <span class='fl'>1</span>, <span class='op'>]</span>, col <span class='op'>=</span> <span class='st'>"darkgreen"</span>, add <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>

<span class='co'># show solutions for problems associated with aspatial data</span>
<span class='fu'><a href='https://rdrr.io/r/utils/str.html'>str</a></span><span class='op'>(</span><span class='va'>s7</span><span class='op'>)</span>
</div><div class='output co'>#&gt;  num [1:90] 0 0 0 0 0 0 0 0 0 1 ...
#&gt;  - attr(*, "objective")= Named num 3586
#&gt;   ..- attr(*, "names")= chr "solution_1"
#&gt;  - attr(*, "status")= Named chr "OPTIMAL"
#&gt;   ..- attr(*, "names")= chr "solution_1"
#&gt;  - attr(*, "runtime")= Named num 0.004
#&gt;   ..- attr(*, "names")= chr "solution_1"</div><div class='input'><span class='co'># }</span>
<span class='co'># create some problems with multiple zones</span>

<span class='co'># first, create a matrix containing the targets for multi-zone problems</span>
<span class='co'># here each row corresponds to a different feature, each</span>
<span class='co'># column corresponds to a different zone, and values correspond</span>
<span class='co'># to the total (absolute) amount of a given feature that needs to be secured</span>
<span class='co'># in a given zone</span>
<span class='va'>targets</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/matrix.html'>matrix</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/stats/Poisson.html'>rpois</a></span><span class='op'>(</span><span class='fl'>15</span>, <span class='fl'>1</span><span class='op'>)</span>,
                  nrow <span class='op'>=</span> <span class='fu'><a href='number_of_features.html'>number_of_features</a></span><span class='op'>(</span><span class='va'>sim_features_zones</span><span class='op'>)</span>,
                  ncol <span class='op'>=</span> <span class='fu'><a href='number_of_zones.html'>number_of_zones</a></span><span class='op'>(</span><span class='va'>sim_features_zones</span><span class='op'>)</span>,
                  dimnames <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span><span class='fu'><a href='feature_names.html'>feature_names</a></span><span class='op'>(</span><span class='va'>sim_features_zones</span><span class='op'>)</span>,
                                  <span class='fu'><a href='zone_names.html'>zone_names</a></span><span class='op'>(</span><span class='va'>sim_features_zones</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span>

<span class='co'># print targets</span>
<span class='fu'><a href='print.html'>print</a></span><span class='op'>(</span><span class='va'>targets</span><span class='op'>)</span>
</div><div class='output co'>#&gt;           zone_1 zone_2 zone_3
#&gt; feature_1      2      0      2
#&gt; feature_2      1      2      0
#&gt; feature_3      0      1      0
#&gt; feature_4      0      0      2
#&gt; feature_5      1      4      3</div><div class='input'>
<span class='co'># create a multi-zone problem with raster data</span>
<span class='va'>p8</span> <span class='op'>&lt;-</span> <span class='fu'>problem</span><span class='op'>(</span><span class='va'>sim_pu_zones_stack</span>, <span class='va'>sim_features_zones</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
      <span class='fu'><a href='add_min_set_objective.html'>add_min_set_objective</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
      <span class='fu'><a href='add_absolute_targets.html'>add_absolute_targets</a></span><span class='op'>(</span><span class='va'>targets</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
      <span class='fu'><a href='add_binary_decisions.html'>add_binary_decisions</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
      <span class='fu'><a href='add_default_solver.html'>add_default_solver</a></span><span class='op'>(</span>verbose <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span>
<span class='co'># \dontrun{</span>
<span class='co'># solve problem</span>
<span class='va'>s8</span> <span class='op'>&lt;-</span> <span class='fu'><a href='solve.html'>solve</a></span><span class='op'>(</span><span class='va'>p8</span><span class='op'>)</span>

<span class='co'># plot solution</span>
<span class='co'># here, each layer/panel corresponds to a different zone and pixel values</span>
<span class='co'># indicate if a given planning unit has been allocated to a given zone</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/par.html'>par</a></span><span class='op'>(</span>mfrow <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>1</span>, <span class='fl'>1</span><span class='op'>)</span><span class='op'>)</span>
</div><div class='img'><img src='problem-3.png' alt='' width='700' height='433' /></div><div class='input'><span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>s8</span>, main <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"zone 1"</span>, <span class='st'>"zone 2"</span>, <span class='st'>"zone 3"</span><span class='op'>)</span>, axes <span class='op'>=</span> <span class='cn'>FALSE</span>, box <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span>
</div><div class='img'><img src='problem-4.png' alt='' width='700' height='433' /></div><div class='input'>
<span class='co'># alternatively, the category_layer function can be used to create</span>
<span class='co'># a new raster object containing the zone ids for each planning unit</span>
<span class='co'># in the solution (note this only works for problems with binary decisions)</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/par.html'>par</a></span><span class='op'>(</span>mfrow <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>1</span>, <span class='fl'>1</span><span class='op'>)</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='fu'><a href='category_layer.html'>category_layer</a></span><span class='op'>(</span><span class='va'>s8</span><span class='op'>)</span>, axes <span class='op'>=</span> <span class='cn'>FALSE</span>, box <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span>
</div><div class='img'><img src='problem-5.png' alt='' width='700' height='433' /></div><div class='input'>
<span class='co'># create a multi-zone problem with polygon data</span>
<span class='va'>p9</span> <span class='op'>&lt;-</span> <span class='fu'>problem</span><span class='op'>(</span><span class='va'>sim_pu_zones_polygons</span>, <span class='va'>sim_features_zones</span>,
              cost_column <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"cost_1"</span>, <span class='st'>"cost_2"</span>, <span class='st'>"cost_3"</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
      <span class='fu'><a href='add_min_set_objective.html'>add_min_set_objective</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
      <span class='fu'><a href='add_absolute_targets.html'>add_absolute_targets</a></span><span class='op'>(</span><span class='va'>targets</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
      <span class='fu'><a href='add_binary_decisions.html'>add_binary_decisions</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
      <span class='fu'><a href='add_default_solver.html'>add_default_solver</a></span><span class='op'>(</span>verbose <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span>

<span class='co'># solve problem</span>
<span class='va'>s9</span> <span class='op'>&lt;-</span> <span class='fu'><a href='solve.html'>solve</a></span><span class='op'>(</span><span class='va'>p9</span><span class='op'>)</span>

<span class='co'># create column containing the zone id for which each planning unit was</span>
<span class='co'># allocated to in the solution</span>
<span class='va'>s9</span><span class='op'>$</span><span class='va'>solution</span> <span class='op'>&lt;-</span> <span class='fu'><a href='category_vector.html'>category_vector</a></span><span class='op'>(</span><span class='va'>s9</span><span class='op'>@</span><span class='va'>data</span><span class='op'>[</span>, <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"solution_1_zone_1"</span>,
                                           <span class='st'>"solution_1_zone_2"</span>,
                                           <span class='st'>"solution_1_zone_3"</span><span class='op'>)</span><span class='op'>]</span><span class='op'>)</span>
<span class='va'>s9</span><span class='op'>$</span><span class='va'>solution</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/factor.html'>factor</a></span><span class='op'>(</span><span class='va'>s9</span><span class='op'>$</span><span class='va'>solution</span><span class='op'>)</span>

<span class='co'># plot solution</span>
<span class='fu'>spplot</span><span class='op'>(</span><span class='va'>s9</span>, zcol <span class='op'>=</span> <span class='st'>"solution"</span>, main <span class='op'>=</span> <span class='st'>"solution"</span>, axes <span class='op'>=</span> <span class='cn'>FALSE</span>, box <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span>
</div><div class='img'><img src='problem-6.png' alt='' width='700' height='433' /></div><div class='input'>
<span class='co'># create a multi-zone problem with polygon planning unit data</span>
<span class='co'># and where fields (columns) in the attribute table correspond</span>
<span class='co'># to feature abundances</span>

<span class='co'># first fields need to be added to the planning unit data</span>
<span class='co'># which indicate the amount of each feature in each zone</span>
<span class='co'># to do this, the fields will be populated with random counts</span>
<span class='va'>sim_pu_zones_polygons</span><span class='op'>$</span><span class='va'>spp1_z1</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/Poisson.html'>rpois</a></span><span class='op'>(</span><span class='fu'><a href='OptimizationProblem-methods.html'>nrow</a></span><span class='op'>(</span><span class='va'>sim_pu_zones_polygons</span><span class='op'>)</span>, <span class='fl'>1</span><span class='op'>)</span>
<span class='va'>sim_pu_zones_polygons</span><span class='op'>$</span><span class='va'>spp2_z1</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/Poisson.html'>rpois</a></span><span class='op'>(</span><span class='fu'><a href='OptimizationProblem-methods.html'>nrow</a></span><span class='op'>(</span><span class='va'>sim_pu_zones_polygons</span><span class='op'>)</span>, <span class='fl'>1</span><span class='op'>)</span>
<span class='va'>sim_pu_zones_polygons</span><span class='op'>$</span><span class='va'>spp3_z1</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/Poisson.html'>rpois</a></span><span class='op'>(</span><span class='fu'><a href='OptimizationProblem-methods.html'>nrow</a></span><span class='op'>(</span><span class='va'>sim_pu_zones_polygons</span><span class='op'>)</span>, <span class='fl'>1</span><span class='op'>)</span>
<span class='va'>sim_pu_zones_polygons</span><span class='op'>$</span><span class='va'>spp1_z2</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/Poisson.html'>rpois</a></span><span class='op'>(</span><span class='fu'><a href='OptimizationProblem-methods.html'>nrow</a></span><span class='op'>(</span><span class='va'>sim_pu_zones_polygons</span><span class='op'>)</span>, <span class='fl'>1</span><span class='op'>)</span>
<span class='va'>sim_pu_zones_polygons</span><span class='op'>$</span><span class='va'>spp2_z2</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/Poisson.html'>rpois</a></span><span class='op'>(</span><span class='fu'><a href='OptimizationProblem-methods.html'>nrow</a></span><span class='op'>(</span><span class='va'>sim_pu_zones_polygons</span><span class='op'>)</span>, <span class='fl'>1</span><span class='op'>)</span>
<span class='va'>sim_pu_zones_polygons</span><span class='op'>$</span><span class='va'>spp3_z2</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/Poisson.html'>rpois</a></span><span class='op'>(</span><span class='fu'><a href='OptimizationProblem-methods.html'>nrow</a></span><span class='op'>(</span><span class='va'>sim_pu_zones_polygons</span><span class='op'>)</span>, <span class='fl'>1</span><span class='op'>)</span>

<span class='co'># create problem with polygon planning unit data and use field names</span>
<span class='co'># to indicate feature data</span>
<span class='co'># additionally, to make this example slightly more interesting,</span>
<span class='co'># the problem will have prfoportion-type decisions such that</span>
<span class='co'># a proportion of each planning unit can be allocated to each of the</span>
<span class='co'># two management zones</span>
<span class='va'>p10</span> <span class='op'>&lt;-</span> <span class='fu'>problem</span><span class='op'>(</span><span class='va'>sim_pu_zones_polygons</span>,
               <span class='fu'><a href='zones.html'>zones</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"spp1_z1"</span>, <span class='st'>"spp2_z1"</span>, <span class='st'>"spp3_z1"</span><span class='op'>)</span>,
                     <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"spp1_z2"</span>, <span class='st'>"spp2_z2"</span>, <span class='st'>"spp3_z2"</span><span class='op'>)</span>,
                     zone_names <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"z1"</span>, <span class='st'>"z2"</span><span class='op'>)</span><span class='op'>)</span>,
               cost_column <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"cost_1"</span>, <span class='st'>"cost_2"</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
       <span class='fu'><a href='add_min_set_objective.html'>add_min_set_objective</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
       <span class='fu'><a href='add_absolute_targets.html'>add_absolute_targets</a></span><span class='op'>(</span><span class='va'>targets</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>:</span><span class='fl'>3</span>, <span class='fl'>1</span><span class='op'>:</span><span class='fl'>2</span><span class='op'>]</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
       <span class='fu'><a href='add_proportion_decisions.html'>add_proportion_decisions</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
      <span class='fu'><a href='add_default_solver.html'>add_default_solver</a></span><span class='op'>(</span>verbose <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span>

<span class='co'># solve problem</span>
<span class='va'>s10</span> <span class='op'>&lt;-</span> <span class='fu'><a href='solve.html'>solve</a></span><span class='op'>(</span><span class='va'>p10</span><span class='op'>)</span>

<span class='co'># plot solution</span>
<span class='fu'>spplot</span><span class='op'>(</span><span class='va'>s10</span>, zcol <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"solution_1_z1"</span>, <span class='st'>"solution_1_z2"</span><span class='op'>)</span>, main <span class='op'>=</span> <span class='st'>"solution"</span>,
       axes <span class='op'>=</span> <span class='cn'>FALSE</span>, box <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span>
</div><div class='img'><img src='problem-7.png' alt='' width='700' height='433' /></div><div class='input'><span class='co'># }</span>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by <a href='https://jeffrey-hanson.com'>Jeffrey O Hanson</a>, <a href='http://www.richard-schuster.com'>Richard Schuster</a>, Nina Morrell, <a href='http://strimas.com'>Matthew Strimas-Mackey</a>, Matthew E Watts, <a href='https://arcese.forestry.ubc.ca'>Peter Arcese</a>, <a href='https://josephrbennett.wordpress.com'>Joseph Bennett</a>, <a href='http://www.possinghamlab.org'>Hugh P Possingham</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  
<script src="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.1/docsearch.min.js" integrity="sha256-GKvGqXDznoRYHCwKXGnuchvKSwmx9SRMrZOTh2g4Sb0=" crossorigin="anonymous"></script>
<script>
  docsearch({
    
    
    apiKey: '486efa122ea6783724263412c5f28ab3',
    indexName: 'prioritizr',
    inputSelector: 'input#search-input.form-control',
    transformData: function(hits) {
      return hits.map(function (hit) {
        hit.url = updateHitURL(hit);
        return hit;
      });
    }
  });
</script>



  </body>
</html>


