<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Specify targets following a set of rules — spec_rule_targets • prioritizr</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><!-- katex math --><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.css" integrity="sha384-nB0miv6/jRmo5UMMR1wu3Gz6NLsoTkbqJghGIsx//Rlm+ZU03BU6SQNC66uf4l5+" crossorigin="anonymous"><script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.js" integrity="sha384-7zkQWkzuo3B5mTepMUcHkMB5jZaolc2xDwL6VFqjFALcbeS9Ggm/Yr2r3Dy4lfFg" crossorigin="anonymous"></script><script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/contrib/auto-render.min.js" integrity="sha384-43gviWU0YVjaDtb/GhzOouOXtZMP/7XUzwPTstBeZFe/+rCMvRwr4yROQP43s0Xk" crossorigin="anonymous" onload="renderMathInElement(document.body);"></script><script src="../katex-auto.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet"><meta property="og:title" content="Specify targets following a set of rules — spec_rule_targets"><meta name="description" content="Specify targets based on a set of rules for ecological and ecosystem
criteria. This is a customizable version of the
approach in Harris and Holness (2023).
To help prevent widespread features from obscuring priorities,
targets are capped following Butchart et al. (2015).
This method was designed to help set targets for a broad range of features
(e.g., species, ecosystems, ecosystem services, ecological processes)
at local and national scales.
Note that this function is designed to be used with add_auto_targets()
and add_group_targets()."><meta property="og:description" content="Specify targets based on a set of rules for ecological and ecosystem
criteria. This is a customizable version of the
approach in Harris and Holness (2023).
To help prevent widespread features from obscuring priorities,
targets are capped following Butchart et al. (2015).
This method was designed to help set targets for a broad range of features
(e.g., species, ecosystems, ecosystem services, ecological processes)
at local and national scales.
Note that this function is designed to be used with add_auto_targets()
and add_group_targets()."><meta property="og:image" content="https://prioritizr.net/logo.png"><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-70466840-4"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-70466840-4');
</script></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">prioritizr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">8.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/prioritizr.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/package_overview.html">Package overview</a></li>
    <li><a class="dropdown-item" href="../articles/gurobi_installation_guide.html">Gurobi installation guide</a></li>
    <li><a class="dropdown-item" href="../articles/solver_benchmarks.html">Solver benchmarks</a></li>
    <li><a class="dropdown-item" href="../articles/publication_record.html">Publication record</a></li>
  </ul></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-tutorials" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Tutorials</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-tutorials"><li><a class="dropdown-item" href="../articles/connectivity_tutorial.html">Connectivity</a></li>
    <li><a class="dropdown-item" href="../articles/calibrating_trade-offs_tutorial.html">Calibrating trade-offs</a></li>
    <li><a class="dropdown-item" href="../articles/management_zones_tutorial.html">Management zones</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/prioritizr/prioritizr/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Specify targets following a set of rules</h1>
      <small class="dont-index">Source: <a href="https://github.com/prioritizr/prioritizr/blob/HEAD/R/spec_rule_targets.R" class="external-link"><code>R/spec_rule_targets.R</code></a></small>
      <div class="d-none name"><code>spec_rule_targets.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Specify targets based on a set of rules for ecological and ecosystem
criteria. This is a customizable version of the
approach in Harris and Holness (2023).
To help prevent widespread features from obscuring priorities,
targets are capped following Butchart <em>et al.</em> (2015).
This method was designed to help set targets for a broad range of features
(e.g., species, ecosystems, ecosystem services, ecological processes)
at local and national scales.
Note that this function is designed to be used with <code><a href="add_auto_targets.html">add_auto_targets()</a></code>
and <code><a href="add_group_targets.html">add_group_targets()</a></code>.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">spec_rule_targets</span><span class="op">(</span></span>
<span>  <span class="va">baseline_relative_target</span>,</span>
<span>  <span class="va">rules_relative_target</span>,</span>
<span>  <span class="va">data</span>,</span>
<span>  cap_area_target <span class="op">=</span> <span class="fl">1e+06</span>,</span>
<span>  area_units <span class="op">=</span> <span class="st">"km^2"</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-baseline-relative-target">baseline_relative_target<a class="anchor" aria-label="anchor" href="#arg-baseline-relative-target"></a></dt>
<dd><p><code>numeric</code> value indicating the baseline
target values as a proportion (ranging between 0 and 1). Depending on
context of the prioritization exercise, a value of 0.3 (i.e., 30%)
may be appropriate (Harris <em>et al.</em> 2023).</p></dd>


<dt id="arg-rules-relative-target">rules_relative_target<a class="anchor" aria-label="anchor" href="#arg-rules-relative-target"></a></dt>
<dd><p>named <code>numeric</code> vector with name-value key pairs
denoting the values that should be added together when calculating the
relative target for a given feature. Note that values must range
between -1 and 1, and the names must correspond to column names of <code>data</code>.</p></dd>


<dt id="arg-data">data<a class="anchor" aria-label="anchor" href="#arg-data"></a></dt>
<dd><p><code>data.frame</code> indicating if each feature meets the criteria
for applying each rule (or not) during the target calculations.
Here, each row must correspond to a different feature, and each column
contains information about the feature (per <code>feature_names(x)</code>).
In particular, <code>data</code>
must have a <code>"feature"</code> column that contains <code>character</code> values with the
feature names. Additionally, <code>data</code> must also contain columns
with <code>logical</code> (<code>TRUE</code>/<code>FALSE</code>) values that indicate if the feature
meets a particular criterion for calculating targets.
For example,
<code>data</code> could contain columns that indicate if each feature corresponds
to a threatened species, ecosystem service, or culturally important site.
Note that if different rules should be applied to species based on their
particular threat status (e.g., Critically Endangered and Vulnerable species
should receive different target thresholds), then <code>data</code> should contain a
column for each threat status (separately).</p></dd>


<dt id="arg-cap-area-target">cap_area_target<a class="anchor" aria-label="anchor" href="#arg-cap-area-target"></a></dt>
<dd><p><code>numeric</code> value denoting the area-based target cap.
To avoid setting a target cap, a missing (<code>NA</code>) value can be specified.
Defaults to 1000000
(i.e., 1,000,000 km<sup>2</sup>).</p></dd>


<dt id="arg-area-units">area_units<a class="anchor" aria-label="anchor" href="#arg-area-units"></a></dt>
<dd><p><code>character</code> value denoting the unit of measurement
for the area-based arguments.
Defaults to <code>"km^2"</code>
(i.e., km<sup>2</sup>).</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>An object (<code><a href="TargetMethod-class.html">TargetMethod</a></code>) for specifying targets that
can be used with <code><a href="add_auto_targets.html">add_auto_targets()</a></code> and <code><a href="add_group_targets.html">add_group_targets()</a></code>
to update the targets for a <code><a href="problem.html">problem()</a></code>.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>This method has been applied to set target thresholds at national
scales (e.g., Harris <em>et al.</em> 2023).
It is based on the rationale that it is appropriate to set the target
for a feature based on a linear combination of values.
When using this method in a planning exercise, it is important to ensure
that the criteria and values used to parameterize the rules
reflect the stakeholder objectives.
Additionally, the baseline relative target (per <code>baseline_relative_target</code>)
and cap threshold (per <code>cap_area_target</code> and <code>area_units</code>) may need to
set based on the features and spatial extent of the planning region.
Please note that this function is provided as convenient method to
set targets for problems with a single management zone, and cannot
be used for those with multiple management zones.</p>
    </div>
    <div class="section level2">
    <h2 id="mathematical-formulation">Mathematical formulation<a class="anchor" aria-label="anchor" href="#mathematical-formulation"></a></h2>


<p>This method provides a flexible approach for setting target thresholds based
on a set of rules.
To express this mathematically, we will define the following terminology.
Let \(f\) denote the total abundance of a feature (e.g., geographic
range), \(b\) denote the baseline relative target threshold
(per <code>baseline_relative_target</code>), and let \(c\) denote the cap threshold
(per <code>cap_area_target</code> and <code>area_units</code>).
To describe the rules, let \(U\) denote the set of rules
(indexed by \(u\)), \(d_u\) indicate if the target for
the feature should be calculated based on each rule \(u \in U\)
(using binary values, per <code>data</code>), and \(a_u\) denote the value
that should be added to the target given each rule \(u \in U\)
(per <code>rules_relative_target</code>).
Given this terminology, the target threshold (\(t\)) for the feature
is calculated as follows.
$$
t = min(f \times max(min(b + \sum_{u \in U} d_u \times a_u, 1), 0), c)
$$</p>
    </div>
    <div class="section level2">
    <h2 id="data-calculations">Data calculations<a class="anchor" aria-label="anchor" href="#data-calculations"></a></h2>


<p>This function involves calculating targets based on the spatial extent
of the features in <code>x</code>.
Although it can be readily applied to <code><a href="problem.html">problem()</a></code> objects that
have the feature data provided as a <code><a href="https://rspatial.github.io/terra/reference/rast.html" class="external-link">terra::rast()</a></code> object,
you will need to specify the spatial units for the features
when initializing the <code><a href="problem.html">problem()</a></code> objects if the feature data
are provided in a different format. In particular, if the feature
data are provided as a <code>data.frame</code> or <code>character</code> vector,
then you will need to specify an argument to <code>feature_units</code> when
using the <code><a href="problem.html">problem()</a></code> function.
See the Examples section of the documentation for <code><a href="add_auto_targets.html">add_auto_targets()</a></code>
for a demonstration of specifying the spatial units for features.</p>
    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p>Butchart SHM, Clarke M, Smith RJ, Sykes RE, Scharlemann JPW, Harfoot M,
Buchanan GM, Angulo A, Balmford A, Bertzky B, Brooks TM, Carpenter KE,
Comeros‐Raynal MT, Cornell J, Ficetola GF, Fishpool LDC, Fuller RA,
Geldmann J, Harwell H, Hilton‐Taylor C, Hoffmann M, Joolia A, Joppa L,
Kingston N, May I, Milam A, Polidoro B, Ralph G, Richman N, Rondinini C,
Segan DB, Skolnik B, Spalding MD, Stuart SN, Symes A, Taylor J, Visconti P,
Watson JEM, Wood L, Burgess ND (2015) Shortfalls and solutions for meeting
national and global conservation area targets. <em>Conservation Letters</em>,
8: 329–337.</p>
<p>Harris LR, Holness SD (2023) A practical approach to setting heuristic
marine biodiversity targets for systematic conservation planning.
<em>Biological Conservation</em>, 285: 110218.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p>Other target setting methods:
<code><a href="spec_absolute_targets.html">spec_absolute_targets</a>()</code>,
<code><a href="spec_area_targets.html">spec_area_targets</a>()</code>,
<code><a href="spec_duran_targets.html">spec_duran_targets</a>()</code>,
<code><a href="spec_interp_absolute_targets.html">spec_interp_absolute_targets</a>()</code>,
<code><a href="spec_interp_area_targets.html">spec_interp_area_targets</a>()</code>,
<code><a href="spec_jung_targets.html">spec_jung_targets</a>()</code>,
<code><a href="spec_max_targets.html">spec_max_targets</a>()</code>,
<code><a href="spec_min_targets.html">spec_min_targets</a>()</code>,
<code><a href="spec_polak_targets.html">spec_polak_targets</a>()</code>,
<code><a href="spec_pop_size_targets.html">spec_pop_size_targets</a>()</code>,
<code><a href="spec_relative_targets.html">spec_relative_targets</a>()</code>,
<code><a href="spec_rl_ecosystem_targets.html">spec_rl_ecosystem_targets</a>()</code>,
<code><a href="spec_rl_species_targets.html">spec_rl_species_targets</a>()</code>,
<code><a href="spec_rodrigues_targets.html">spec_rodrigues_targets</a>()</code>,
<code><a href="spec_ward_targets.html">spec_ward_targets</a>()</code>,
<code><a href="spec_watson_targets.html">spec_watson_targets</a>()</code>,
<code><a href="spec_wilson_targets.html">spec_wilson_targets</a>()</code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="co"># set seed for reproducibility</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">500</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># load data</span></span></span>
<span class="r-in"><span><span class="va">sim_complex_pu_raster</span> <span class="op">&lt;-</span> <span class="fu"><a href="sim_data.html">get_sim_complex_pu_raster</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">sim_complex_features</span> <span class="op">&lt;-</span> <span class="fu"><a href="sim_data.html">get_sim_complex_features</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># calculate total distribution size for features in km^2</span></span></span>
<span class="r-in"><span><span class="va">feature_size</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="fu">units</span><span class="fu">::</span><span class="fu"><a href="https://r-quantities.github.io/units/reference/units.html" class="external-link">set_units</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="fu">units</span><span class="fu">::</span><span class="fu"><a href="https://r-quantities.github.io/units/reference/units.html" class="external-link">set_units</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="fu">terra</span><span class="fu">::</span><span class="fu"><a href="https://rspatial.github.io/terra/reference/global.html" class="external-link">global</a></span><span class="op">(</span><span class="va">sim_complex_features</span>, <span class="st">"sum"</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span> <span class="op">*</span></span></span>
<span class="r-in"><span>      <span class="fu"><a href="https://rdrr.io/r/base/prod.html" class="external-link">prod</a></span><span class="op">(</span><span class="fu">terra</span><span class="fu">::</span><span class="fu"><a href="https://rspatial.github.io/terra/reference/dimensions.html" class="external-link">res</a></span><span class="op">(</span><span class="va">sim_complex_features</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    <span class="st">"m^2"</span></span></span>
<span class="r-in"><span>  <span class="op">)</span>,</span></span>
<span class="r-in"><span>  <span class="st">"km^2"</span></span></span>
<span class="r-in"><span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># simulate data that provide additional information for each feature</span></span></span>
<span class="r-in"><span><span class="va">rule_data</span> <span class="op">&lt;-</span> <span class="fu">tibble</span><span class="fu">::</span><span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span>feature <span class="op">=</span> <span class="fu"><a href="https://rspatial.github.io/terra/reference/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">sim_complex_features</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># add a column indicating if each feature has a small distribution,</span></span></span>
<span class="r-in"><span><span class="va">rule_data</span><span class="op">$</span><span class="va">small_distribution</span> <span class="op">&lt;-</span> <span class="va">feature_size</span> <span class="op">&lt;=</span> <span class="fl">1000</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># add a column indicating if each feature has a large distribution,</span></span></span>
<span class="r-in"><span><span class="va">rule_data</span><span class="op">$</span><span class="va">large_distribution</span> <span class="op">&lt;-</span> <span class="va">feature_size</span> <span class="op">&gt;=</span> <span class="fl">5000</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># add a column indicating if each feature has low quality data</span></span></span>
<span class="r-in"><span><span class="co"># associated with it, based on random simulated values</span></span></span>
<span class="r-in"><span><span class="va">rule_data</span><span class="op">$</span><span class="va">low_quality</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="cn">TRUE</span>, <span class="cn">FALSE</span><span class="op">)</span>, <span class="fu">terra</span><span class="fu">::</span><span class="fu"><a href="https://rspatial.github.io/terra/reference/dimensions.html" class="external-link">nlyr</a></span><span class="op">(</span><span class="va">sim_complex_features</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  replace <span class="op">=</span> <span class="cn">TRUE</span>, prob <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.2</span>, <span class="fl">0.8</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># next, we will add simulate dat for columns indicating the threat status of</span></span></span>
<span class="r-in"><span><span class="co"># the features. since all columns must contain logical (TRUE/FALSE) values,</span></span></span>
<span class="r-in"><span><span class="co"># we will add a column for each threat status separately. note that these</span></span></span>
<span class="r-in"><span><span class="co"># values will be simulated such that a feature will only have a value of</span></span></span>
<span class="r-in"><span><span class="co"># TRUE for, at most, a single threat status</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># add a column indicating if each feature has a Vulnerable threat status</span></span></span>
<span class="r-in"><span><span class="va">rule_data</span><span class="op">$</span><span class="va">vulnerable</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="cn">TRUE</span>, <span class="cn">FALSE</span><span class="op">)</span>, <span class="fu">terra</span><span class="fu">::</span><span class="fu"><a href="https://rspatial.github.io/terra/reference/dimensions.html" class="external-link">nlyr</a></span><span class="op">(</span><span class="va">sim_complex_features</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  replace <span class="op">=</span> <span class="cn">TRUE</span>, prob <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.3</span>, <span class="fl">0.7</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># add a column indicating if each feature has an Endangered threat status,</span></span></span>
<span class="r-in"><span><span class="co"># based on random simulated values</span></span></span>
<span class="r-in"><span><span class="va">rule_data</span><span class="op">$</span><span class="va">endangered</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="cn">TRUE</span>, <span class="cn">FALSE</span><span class="op">)</span>, <span class="fu">terra</span><span class="fu">::</span><span class="fu"><a href="https://rspatial.github.io/terra/reference/dimensions.html" class="external-link">nlyr</a></span><span class="op">(</span><span class="va">sim_complex_features</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  replace <span class="op">=</span> <span class="cn">TRUE</span>, prob <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.3</span>, <span class="fl">0.7</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span> <span class="op">&amp;</span> <span class="op">!</span><span class="va">rule_data</span><span class="op">$</span><span class="va">vulnerable</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># add a column indicating if each feature has a Critically Endangered threat</span></span></span>
<span class="r-in"><span><span class="co"># status, based on random simulated values</span></span></span>
<span class="r-in"><span><span class="va">rule_data</span><span class="op">$</span><span class="va">critically_endangered</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="cn">TRUE</span>, <span class="cn">FALSE</span><span class="op">)</span>, <span class="fu">terra</span><span class="fu">::</span><span class="fu"><a href="https://rspatial.github.io/terra/reference/dimensions.html" class="external-link">nlyr</a></span><span class="op">(</span><span class="va">sim_complex_features</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  replace <span class="op">=</span> <span class="cn">TRUE</span>, prob <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.3</span>, <span class="fl">0.7</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span> <span class="op">&amp;</span> <span class="op">!</span><span class="va">rule_data</span><span class="op">$</span><span class="va">endangered</span> <span class="op">&amp;</span> <span class="op">!</span><span class="va">rule_data</span><span class="op">$</span><span class="va">vulnerable</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># preview rule data</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">rule_data</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 100 × 7</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    feature    small_distribution large_distribution low_quality vulnerable</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 1</span> feature_1  FALSE              TRUE               TRUE        TRUE      </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 2</span> feature_2  FALSE              TRUE               FALSE       FALSE     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 3</span> feature_3  FALSE              TRUE               TRUE        TRUE      </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 4</span> feature_4  FALSE              TRUE               FALSE       FALSE     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 5</span> feature_5  FALSE              TRUE               TRUE        TRUE      </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 6</span> feature_6  FALSE              TRUE               FALSE       TRUE      </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 7</span> feature_7  FALSE              TRUE               FALSE       FALSE     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 8</span> feature_8  FALSE              TRUE               TRUE        FALSE     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 9</span> feature_9  FALSE              TRUE               TRUE        TRUE      </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">10</span> feature_10 FALSE              TRUE               FALSE       FALSE     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 90 more rows</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 2 more variables: endangered &lt;lgl&gt;, critically_endangered &lt;lgl&gt;</span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># create problem with rule based targets, wherein targets are calculated</span></span></span>
<span class="r-in"><span><span class="co"># with a baseline of 30%, features with a small distribution are assigned</span></span></span>
<span class="r-in"><span><span class="co"># targets of an additional 10%, features with a large distribution are</span></span></span>
<span class="r-in"><span><span class="co"># assigned targets reduced by 10%, features with low quality data are</span></span></span>
<span class="r-in"><span><span class="co"># assigned targets reduced by 10%, features with a Vulnerable threat status</span></span></span>
<span class="r-in"><span><span class="co"># are assigned targets of an additional 5%, features with an Endangered</span></span></span>
<span class="r-in"><span><span class="co"># threat status are assigned targets of an additional 10%, and features with</span></span></span>
<span class="r-in"><span><span class="co"># a Critically Endangered threat status are assigned targets of an</span></span></span>
<span class="r-in"><span><span class="co"># additional 20%</span></span></span>
<span class="r-in"><span><span class="va">p1</span> <span class="op">&lt;-</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="problem.html">problem</a></span><span class="op">(</span><span class="va">sim_complex_pu_raster</span>, <span class="va">sim_complex_features</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="add_min_set_objective.html">add_min_set_objective</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="add_auto_targets.html">add_auto_targets</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    method <span class="op">=</span> <span class="fu">spec_rule_targets</span><span class="op">(</span></span></span>
<span class="r-in"><span>      baseline_relative_target <span class="op">=</span> <span class="fl">0.3</span>,</span></span>
<span class="r-in"><span>      rules_relative_target <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>        <span class="st">"small_distribution"</span> <span class="op">=</span> <span class="fl">0.1</span>,</span></span>
<span class="r-in"><span>        <span class="st">"large_distribution"</span> <span class="op">=</span> <span class="op">-</span><span class="fl">0.1</span>,</span></span>
<span class="r-in"><span>        <span class="st">"low_quality"</span> <span class="op">=</span> <span class="op">-</span><span class="fl">0.1</span>,</span></span>
<span class="r-in"><span>        <span class="st">"vulnerable"</span> <span class="op">=</span> <span class="fl">0.05</span>,</span></span>
<span class="r-in"><span>        <span class="st">"endangered"</span> <span class="op">=</span> <span class="fl">0.1</span>,</span></span>
<span class="r-in"><span>        <span class="st">"critically_endangered"</span> <span class="op">=</span> <span class="fl">0.2</span></span></span>
<span class="r-in"><span>      <span class="op">)</span>,</span></span>
<span class="r-in"><span>      data <span class="op">=</span> <span class="va">rule_data</span></span></span>
<span class="r-in"><span>    <span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="add_binary_decisions.html">add_binary_decisions</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="add_default_solver.html">add_default_solver</a></span><span class="op">(</span>verbose <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># solve problem</span></span></span>
<span class="r-in"><span><span class="va">s1</span> <span class="op">&lt;-</span> <span class="fu"><a href="solve.html">solve</a></span><span class="op">(</span><span class="va">p1</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># plot solution</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rspatial.github.io/terra/reference/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">s1</span>, main <span class="op">=</span> <span class="st">"solution"</span>, axes <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="spec_rule_targets-1.png" alt="" width="700" height="433"></span>
<span class="r-in"><span><span class="co"># }</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://jeffrey-hanson.com" class="external-link">Jeffrey O Hanson</a>, <a href="http://www.richard-schuster.com" class="external-link">Richard Schuster</a>, Nina Morrell, <a href="http://strimas.com" class="external-link">Matthew Strimas-Mackey</a>, Brandon P M Edwards, Matthew E Watts, <a href="https://arcese.forestry.ubc.ca" class="external-link">Peter Arcese</a>, Joseph R Bennett, <a href="http://www.possinghamlab.org" class="external-link">Hugh P Possingham</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

