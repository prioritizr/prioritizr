<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Add Maximum Feature Representation Objective — add_max_features_objective  prioritizr</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/cerulean/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">

<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">


<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script>
<script src="../pkgdown.js"></script>

<!-- mathjax -->
<script src='https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../index.html">prioritizr</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../articles/index.html">Articles</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/prioritizr/prioritizr">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

      <div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Add Maximum Feature Representation Objective</h1>
    </div>

    
    <p>Set an objective to find to find the solution that fulfills as many targets
as possible while ensuring that the cost of the solution does not exceed
budget and that all constraints are met. This objective was inspired by the
conservation problem defined in Cabeza and Moilanen (2001).</p>
    

    <pre class="usage"><span class='fu'>add_max_features_objective</span>(<span class='no'>x</span>, <span class='no'>budget</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a> Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>x</th>
      <td><p><code><a href='ConservationProblem-class.html'>ConservationProblem-class</a></code> object.</p></td>
    </tr>
    <tr>
      <th>budget</th>
      <td><p><code>numeric</code> value specifying the maximum expenditure of
the prioritization.</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>A problem objective is used to specify the overall goal of the
conservation planning problem. Please note that <strong>all conservation planning 
problems formulated in the prioritizr package require the addition of both 
objectives and targets</strong>. Failing to do so will return a default error message 
when solving.</p>
<p>The maximum target coverage problem is a hybrid between the minimum set and maximum 
cover problems in that it allows for both a budget and targets to be set. This 
problem finds the set of planning units that meets representation targets for 
the most species while staying within a fixed budget. If multiple solutions can 
meet all targets while staying within budget, the cheapest solution is chosen.</p>
<p>The maximum target coverage problem can be stated mathematically, for <em>n</em> 
planning units and <em>m</em> conservation features, as:
    $$\text{Maximize} \space -a\sum_{i=1}^{n} x_i c_i + \sum_{j=1}^{m}y_j 
\text{ subject to } \sum_{i=1}^{n}x_i c_i \leq B \space \text{and} \space 
\sum_{j=1}^{n} x_j r_{ij}\geq y_iT_i \space \forall \space i$$</p>
<p>where \(x_i\) is a binary decision variable specifying whether planning unit 
<em>i</em> has been selected (1) or not (0), \(y_i\) is a binary decision variable 
specifying whether the target for species <em>i</em> should be met, \(c_i\) is 
the cost of planning unit <em>i</em>, \(r_ij\) is the representation level of 
feature <em>i</em> in planning unit <em>j</em>, <em>B</em> is the budget, and \(T_i\) 
is the target for feature <em>i</em>. Finally, the factor <em>a</em> is chosen so that the 
first term of the objective function is much smaller than the second. This ensures that 
the reserve cost only plays a role in distinguishing between solutions that meet the 
same number of targets.</p>
    
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <p><code><a href='objectives.html'>objectives</a></code>, <code><a href='constraints.html'>constraints</a></code>, <code><a href='problem.html'>problem</a></code>,
  <code><a href='targets.html'>targets</a></code>.</p>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'># load data</span>
<span class='fu'>data</span>(<span class='no'>sim_pu_raster</span>, <span class='no'>sim_features</span>, <span class='no'>sim_phylogeny</span>)

<span class='co'># create base problem</span>
<span class='no'>p</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='problem.html'>problem</a></span>(<span class='no'>sim_pu_raster</span>, <span class='no'>sim_features</span>) <span class='kw'>%&gt;%</span>
 <span class='fu'><a href='add_relative_targets.html'>add_relative_targets</a></span>(<span class='fl'>0.1</span>)

<span class='no'>p1</span> <span class='kw'>&lt;-</span> <span class='no'>p</span> <span class='kw'>%&gt;%</span> <span class='fu'><a href='add_min_set_objective.html'>add_min_set_objective</a></span>()
<span class='co'># create problem with added maximum coverage objective</span>
<span class='co'># note that this objective does not use targets</span>
<span class='no'>p2</span> <span class='kw'>&lt;-</span> <span class='no'>p</span> <span class='kw'>%&gt;%</span> <span class='fu'><a href='add_max_cover_objective.html'>add_max_cover_objective</a></span>(<span class='fl'>5000</span>)

<span class='co'># create problem with added maximum feature representation objective</span>
<span class='no'>p3</span> <span class='kw'>&lt;-</span> <span class='no'>p</span> <span class='kw'>%&gt;%</span> <span class='fu'>add_max_features_objective</span>(<span class='fl'>5000</span>)

<span class='co'># create problem with added maximum phylogenetic representation objective</span>
<span class='no'>p4</span> <span class='kw'>&lt;-</span> <span class='no'>p</span> <span class='kw'>%&gt;%</span> <span class='fu'><a href='add_max_phylo_objective.html'>add_max_phylo_objective</a></span>(<span class='fl'>5000</span>, <span class='no'>sim_phylogeny</span>)


<span class='co'># solve problems</span>
<span class='no'>s</span> <span class='kw'>&lt;-</span> <span class='fu'>stack</span>(<span class='fu'><a href='solve.html'>solve</a></span>(<span class='no'>p1</span>), <span class='fu'><a href='solve.html'>solve</a></span>(<span class='no'>p2</span>), <span class='fu'><a href='solve.html'>solve</a></span>(<span class='no'>p3</span>), <span class='fu'><a href='solve.html'>solve</a></span>(<span class='no'>p4</span>))</div><div class='output co'>#&gt; Optimize a model with 5 rows, 90 columns and 450 nonzeros
#&gt; Variable types: 0 continuous, 90 integer (90 binary)
#&gt; Coefficient statistics:
#&gt;   Matrix range     [2e-01, 9e-01]
#&gt;   Objective range  [2e+02, 2e+02]
#&gt;   Bounds range     [1e+00, 1e+00]
#&gt;   RHS range        [3e+00, 7e+00]
#&gt; Found heuristic solution: objective 2145.27
#&gt; Presolve time: 0.00s
#&gt; Presolved: 5 rows, 90 columns, 450 nonzeros
#&gt; Variable types: 0 continuous, 90 integer (90 binary)
#&gt; Presolved: 5 rows, 90 columns, 450 nonzeros
#&gt; 
#&gt; 
#&gt; Root relaxation: objective 1.726522e+03, 11 iterations, 0.00 seconds
#&gt; 
#&gt;     Nodes    |    Current Node    |     Objective Bounds      |     Work
#&gt;  Expl Unexpl |  Obj  Depth IntInf | Incumbent    BestBd   Gap | It/Node Time
#&gt; 
#&gt;      0     0 1726.52215    0    4 2145.26789 1726.52215  19.5%     -    0s
#&gt; H    0     0                    1792.7738341 1726.52215  3.70%     -    0s
#&gt; 
#&gt; Explored 0 nodes (11 simplex iterations) in 0.00 seconds
#&gt; Thread count was 1 (of 4 available processors)
#&gt; 
#&gt; Solution count 2: 1792.77 2145.27 
#&gt; Pool objective bound 1726.52
#&gt; 
#&gt; Optimal solution found (tolerance 1.00e-01)
#&gt; Best objective 1.792773834063e+03, best bound 1.726522151579e+03, gap 3.6955%</div><div class='output co'>#&gt; <span class='warning'>Warning: ignoring targets since the maximum coverage objective function doesn"t use targets</span></div><div class='output co'>#&gt; Optimize a model with 6 rows, 95 columns and 545 nonzeros
#&gt; Variable types: 5 continuous, 90 integer (90 binary)
#&gt; Coefficient statistics:
#&gt;   Matrix range     [2e-01, 2e+02]
#&gt;   Objective range  [1e-10, 1e+00]
#&gt;   Bounds range     [1e+00, 7e+01]
#&gt;   RHS range        [5e+03, 5e+03]
#&gt; Found heuristic solution: objective -0
#&gt; Presolve removed 5 rows and 5 columns
#&gt; Presolve time: 0.00s
#&gt; Presolved: 1 rows, 90 columns, 90 nonzeros
#&gt; Variable types: 0 continuous, 90 integer (90 binary)
#&gt; Presolved: 1 rows, 90 columns, 90 nonzeros
#&gt; 
#&gt; 
#&gt; Root relaxation: objective 7.459075e+01, 1 iterations, 0.00 seconds
#&gt; 
#&gt;     Nodes    |    Current Node    |     Objective Bounds      |     Work
#&gt;  Expl Unexpl |  Obj  Depth IntInf | Incumbent    BestBd   Gap | It/Node Time
#&gt; 
#&gt;      0     0   74.59075    0    1   -0.00000   74.59075      -     -    0s
#&gt; H    0     0                      74.1209659   74.59075  0.63%     -    0s
#&gt; 
#&gt; Explored 0 nodes (1 simplex iterations) in 0.00 seconds
#&gt; Thread count was 1 (of 4 available processors)
#&gt; 
#&gt; Solution count 2: 74.121 -0 
#&gt; Pool objective bound 74.5908
#&gt; 
#&gt; Optimal solution found (tolerance 1.00e-01)
#&gt; Best objective 7.412096587626e+01, best bound 7.459075047045e+01, gap 0.6338%
#&gt; Optimize a model with 6 rows, 95 columns and 545 nonzeros
#&gt; Variable types: 0 continuous, 95 integer (95 binary)
#&gt; Coefficient statistics:
#&gt;   Matrix range     [2e-01, 2e+02]
#&gt;   Objective range  [1e-10, 1e+00]
#&gt;   Bounds range     [1e+00, 1e+00]
#&gt;   RHS range        [5e+03, 5e+03]
#&gt; Found heuristic solution: objective 5
#&gt; 
#&gt; Explored 0 nodes (0 simplex iterations) in 0.00 seconds
#&gt; Thread count was 1 (of 4 available processors)
#&gt; 
#&gt; Solution count 1: 5 
#&gt; Pool objective bound 5
#&gt; 
#&gt; Optimal solution found (tolerance 1.00e-01)
#&gt; Best objective 5.000000002557e+00, best bound 5.000000009723e+00, gap 0.0000%
#&gt; Optimize a model with 14 rows, 103 columns and 567 nonzeros
#&gt; Variable types: 0 continuous, 103 integer (103 binary)
#&gt; Coefficient statistics:
#&gt;   Matrix range     [2e-01, 2e+02]
#&gt;   Objective range  [1e-10, 9e-01]
#&gt;   Bounds range     [1e+00, 1e+00]
#&gt;   RHS range        [5e+03, 5e+03]
#&gt; Found heuristic solution: objective 2.55673e-09
#&gt; Presolve removed 5 rows and 5 columns
#&gt; Presolve time: 0.00s
#&gt; Presolved: 9 rows, 98 columns, 557 nonzeros
#&gt; Variable types: 0 continuous, 98 integer (98 binary)
#&gt; Presolved: 9 rows, 98 columns, 557 nonzeros
#&gt; 
#&gt; 
#&gt; Root relaxation: objective 4.353296e+00, 7 iterations, 0.00 seconds
#&gt; 
#&gt;     Nodes    |    Current Node    |     Objective Bounds      |     Work
#&gt;  Expl Unexpl |  Obj  Depth IntInf | Incumbent    BestBd   Gap | It/Node Time
#&gt; 
#&gt;      0     0    4.35330    0    1    0.00000    4.35330      -     -    0s
#&gt; H    0     0                       4.3532957    4.35330  0.00%     -    0s
#&gt; 
#&gt; Explored 0 nodes (8 simplex iterations) in 0.00 seconds
#&gt; Thread count was 1 (of 4 available processors)
#&gt; 
#&gt; Solution count 2: 4.3533 2.55673e-09 
#&gt; Pool objective bound 4.3533
#&gt; 
#&gt; Optimal solution found (tolerance 1.00e-01)
#&gt; Best objective 4.353295744592e+00, best bound 4.353295744592e+00, gap 0.0000%</div><div class='input'>
<span class='co'># plot solutions</span>
<span class='fu'>plot</span>(<span class='no'>s</span>, <span class='kw'>main</span><span class='kw'>=</span><span class='fu'>c</span>(<span class='st'>"minimum set"</span>, <span class='st'>"maximum coverage"</span>, <span class='st'>"maximum representation"</span>,
               <span class='st'>"phylogenetic representation"</span>))</div><img src='add_max_features_objective-6.png' alt='' width='540' height='400' /><div class='input'>

</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#details">Details</a></li>

      <li><a href="#see-also">See also</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by <a href='http://jeffrey-hanson.com'>Jeffrey O Hanson</a>, <a href='http://arcese.forestry.ubc.ca.people/richard-schuster/'>Richard Schuster</a>, <a href='http://strimas.com'>Matthew Strimas-Mackey</a>, Matthew E Watts, <a href='http://arcese.forestry.ubc.ca'>Peter Arcese</a>, <a href='https://josephrbennett.wordpress.com/'>Joeseph Bennett</a>, Hugh P Possingham.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  </body>
</html>
