<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Marxan conservation problem — marxan_problem  prioritizr</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">


<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script>
<script src="../pkgdown.js"></script>

<!-- mathjax -->
<script src='https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../index.html">prioritizr</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../articles/index.html">Articles</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/prioritizr/prioritizr">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

      <div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Marxan conservation problem</h1>
    </div>

    
    <p>Create a Marxan conservation problem. Although users are encouraged to
build and tailor conservation planning problems to suit their own needs,
sometimes it is easier to use a more familiar &quot;canned&quot; approach. This
function provides a convenient wrapper for generating
and solving Marxan-style conservation problems. If users already have
their conservation planning data in the Marxan input format, this function
can also be used to read Marxan data files and solve the Marxan-style
problems using exact algorithm solvers.</p>
    

    <pre><span class='fu'>marxan_problem</span>(<span class='no'>x</span>, <span class='no'>...</span>)

<span class='co'># S3 method for default</span>
<span class='fu'>marxan_problem</span>(<span class='no'>x</span>, <span class='no'>features</span>, <span class='no'>targets</span>,
  <span class='kw'>targets_type</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"relative"</span>, <span class='st'>"absolute"</span>), <span class='kw'>locked_in</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>locked_out</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>penalty</span> <span class='kw'>=</span> <span class='fl'>0</span>, <span class='kw'>edge_factor</span> <span class='kw'>=</span> <span class='fl'>0.5</span>, <span class='no'>...</span>)

<span class='co'># S3 method for data.frame</span>
<span class='fu'>marxan_problem</span>(<span class='no'>x</span>, <span class='no'>spec</span>, <span class='no'>puvspr</span>, <span class='kw'>bound</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>blm</span> <span class='kw'>=</span> <span class='fl'>0</span>,
  <span class='kw'>asymmetric_connectivity</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='no'>...</span>)

<span class='co'># S3 method for character</span>
<span class='fu'>marxan_problem</span>(<span class='no'>x</span>, <span class='no'>...</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a> Arguments</h2>
    <dl class="dl-horizontal">
      <dt>x</dt>
      <dd><code>character</code> file path for Marxan input file (typically
called <code>&quot;input.dat&quot;</code>), a <code>data.frame</code> object containing
planning unit data following conventions (ie. <code>&quot;pu.dat&quot;</code>), or a
<code><a href='http://www.rdocumentation.org/packages/sp/topics/Spatial-class'>Spatial-class</a></code> or <code><a href='http://www.rdocumentation.org/packages/raster/topics/Raster-classes'>Raster-class</a></code>
object containing planning unit data.</dd>
      <dt>...</dt>
      <dd>not used</dd>
      <dt>features</dt>
      <dd><code><a href='http://www.rdocumentation.org/packages/raster/topics/Raster-classes'>Raster-class</a></code> object containing
data on the distribution of features across the study area.</dd>
      <dt>targets</dt>
      <dd><code>numeric</code> amount of each feature to be represented
in the solution.</dd>
      <dt>targets_type</dt>
      <dd><code>character</code> name indicating if the <code>targets</code>
are expressed as <code>&quot;relative&quot;</code> (eg. <code>0.2</code> meaning that 20 % of a
feature needs to be conserved), or <code>&quot;absolute&quot;</code> (eg. <code>200</code>
meaning that 200 units of a feature need to be conserved) amounts.</dd>
      <dt>locked_in</dt>
      <dd>Object that determines which planning units that should be
locked in. See details for more information.</dd>
      <dt>locked_out</dt>
      <dd>Object that determines which planning units that should be
locked out. See details for more information.</dd>
      <dt>penalty</dt>
      <dd><code>numeric</code> penalty for exposed edges. This
is equivalent to the
<a href = 'boundary length modifier (BLM)'>http://marxan.net/downloads/uq_marxan_web_2/module2.html</a>
parameter in <a href = 'Marxan'>http://marxan.net</a>.</dd>
      <dt>edge_factor</dt>
      <dd><code>numeric</code> proportion to scale edges that do
not have any neighboring planning units. For example, an edge factor
of <code>0.5</code> is commonly used for planning units along the coast line.</dd>
      <dt>spec</dt>
      <dd><code>data.frame</code> containing information on the features.
The argument to <code>spec</code> must follow the conventions used by
Marxan for the species data file (conventionally called <code>&quot;spec.dat&quot;</code>).
Each row corresponds to a different feature. It must also contain
the following columns:
<dl class='dl-horizontal'>
  <dt><code>&quot;id&quot;</code></dt><dd><code>integer</code> unique identifier for each feature
    These identifiers are used in the argument to <code>rij_data</code>.</dd>
  <dt><code>&quot;name&quot;</code></dt><dd><code>character</code> name for each feature.</dd>
  <dt><code>&quot;prop&quot;</code></dt><dd><code>numeric</code> relative target for each feature
     (optional).</dd>&#39;
  <dt><code>&quot;amount&quot;</code></dt><dd><code>numeric</code> absolute target for each
      feature (optional).</dd>
</dl>
</dd>
      <dt>puvspr</dt>
      <dd><code>data.frame</code> containing information on the amount of
each feature in each planning unit. The argument to
<code>puvspr</code> must follow the conventions used in the Marxan input data
file (conventionally called <code>&quot;puvspr.dat&quot;</code>). It must contain the
following columns:
<dl class='dl-horizontal'>
  <dt><code>&quot;pu&quot;</code></dt><dd><code>integer</code> planning unit identifier.</dd>
  <dt><code>&quot;species&quot;</code></dt><dd><code>integer</code> feature identifier.</dd>
  <dt><code>&quot;amount&quot;</code></dt><dd><code>numeric</code> amount of the feature in the
    planning unit.</dd>
</dl>
</dd>
      <dt>bound</dt>
      <dd><code>data.frame</code> containing information on the
planning units&#39; boundaries or the connectivity between planning units.
The argument to <code>bound</code> must follow the
conventions used in the Marxan input data file (conventionally called
<code>&quot;bound.dat&quot;</code>). It must contain the following columns:
<dl class='dl-horizontal'>
  <dt><code>&quot;id1&quot;</code></dt><dd><code>integer</code> planning unit identifier.</dd>
  <dt><code>&quot;id2&quot;</code></dt><dd><code>integer</code> planning unit identifier.</dd>
  <dt><code>&quot;boundary&quot;</code></dt><dd><code>numeric</code> length of shared boundary
    between planning units, or the strength of the connectivity between
    the two planning units.</dd>
</dl>
</dd>
      <dt>blm</dt>
      <dd><code>numeric</code> boundary length modifier. This argument only
has an effect when argument to <code>x</code> is a <code>data.frame</code>. Defaults
to zero.</dd>
      <dt>asymmetric_connectivity</dt>
      <dd><code>logical</code> does the argument
to <code>bound</code> denote asymmetric connectivity between planning units?
This argument only has an effect when argument to <code>bound</code> is a
<code>data.frame</code>. Defaults to <code>FALSE</code>.</dd>
    </dl>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p><code><a href='ConservationProblem-class.html'>ConservationProblem-class</a></code> object.</p>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'>
<span class='co'># create Marxan problem using spatial data</span>
<span class='fu'>data</span>(<span class='no'>sim_pu_raster</span>, <span class='no'>sim_features</span>)
<span class='no'>p1</span> <span class='kw'>&lt;-</span> <span class='fu'>marxan_problem</span>(<span class='no'>sim_pu_raster</span>, <span class='kw'>features</span><span class='kw'>=</span><span class='no'>sim_features</span>, <span class='kw'>targets</span><span class='kw'>=</span><span class='fl'>0.2</span>,
                     <span class='kw'>targets_type</span><span class='kw'>=</span><span class='st'>"relative"</span>, <span class='kw'>penalty</span><span class='kw'>=</span><span class='fl'>1</span>,
                     <span class='kw'>edge_factor</span><span class='kw'>=</span><span class='fl'>0.5</span>)

<span class='co'># solve problem</span>
<span class='no'>s1</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='solve.html'>solve</a></span>(<span class='no'>p1</span>)</div><div class='output co'>#&gt; Optimize a model with 293 rows, 234 columns and 1026 nonzeros
#&gt; Variable types: 0 continuous, 234 integer (234 binary)
#&gt; Coefficient statistics:
#&gt;   Matrix range     [2e-01, 1e+00]
#&gt;   Objective range  [2e-01, 2e+02]
#&gt;   Bounds range     [1e+00, 1e+00]
#&gt;   RHS range        [6e+00, 1e+01]
#&gt; Found heuristic solution: objective 4137.27
#&gt; Presolve time: 0.00s
#&gt; Presolved: 293 rows, 234 columns, 1026 nonzeros
#&gt; Variable types: 0 continuous, 234 integer (234 binary)
#&gt; Presolved: 293 rows, 234 columns, 1026 nonzeros
#&gt; 
#&gt; 
#&gt; Root relaxation: objective 3.493551e+03, 164 iterations, 0.00 seconds
#&gt; 
#&gt;     Nodes    |    Current Node    |     Objective Bounds      |     Work
#&gt;  Expl Unexpl |  Obj  Depth IntInf | Incumbent    BestBd   Gap | It/Node Time
#&gt; 
#&gt;      0     0 3493.55127    0    6 4137.27447 3493.55127  15.6%     -    0s
#&gt; H    0     0                    3600.5951275 3493.55127  2.97%     -    0s
#&gt; 
#&gt; Explored 0 nodes (164 simplex iterations) in 0.00 seconds
#&gt; Thread count was 1 (of 4 available processors)
#&gt; 
#&gt; Solution count 2: 3600.6 4137.27 
#&gt; Pool objective bound 3493.55
#&gt; 
#&gt; Optimal solution found (tolerance 1.00e-01)
#&gt; Best objective 3.600595127479e+03, best bound 3.493551269369e+03, gap 2.9729%</div><div class='input'>
<span class='co'># show solution</span>
<span class='fu'>plot</span>(<span class='no'>s1</span>)</div><img src='marxan_problem-4.png' alt='' width='540' height='400' /><div class='input'>

<span class='co'># create Marxan problem using Marxan input files</span>
<span class='no'>input_file</span> <span class='kw'>&lt;-</span> <span class='fu'>system.file</span>(<span class='st'>"extdata/input.dat"</span>, <span class='kw'>package</span><span class='kw'>=</span><span class='st'>"prioritizr"</span>)
<span class='no'>p2</span> <span class='kw'>&lt;-</span> <span class='fu'>marxan_problem</span>(<span class='no'>input_file</span>)

<span class='co'># solve problem</span>
<span class='no'>s2</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='solve.html'>solve</a></span>(<span class='no'>p2</span>)</div><div class='output co'>#&gt; Optimize a model with 10075 rows, 6780 columns and 24778 nonzeros
#&gt; Variable types: 0 continuous, 6780 integer (6780 binary)
#&gt; Coefficient statistics:
#&gt;   Matrix range     [5e-01, 4e+07]
#&gt;   Objective range  [8e+03, 4e+07]
#&gt;   Bounds range     [1e+00, 1e+00]
#&gt;   RHS range        [5e+07, 3e+09]
#&gt; Warning: Model contains large rhs
#&gt;          Consider reformulating model or setting NumericFocus parameter
#&gt;          to avoid numerical issues.
#&gt; Found heuristic solution: objective 1.22153e+10
#&gt; Presolve removed 2491 rows and 1608 columns
#&gt; Presolve time: 0.04s
#&gt; Presolved: 7584 rows, 5172 columns, 17242 nonzeros
#&gt; Variable types: 0 continuous, 5172 integer (5172 binary)
#&gt; Presolved: 7584 rows, 5172 columns, 17242 nonzeros
#&gt; 
#&gt; 
#&gt; Root relaxation: objective 9.568885e+09, 3825 iterations, 0.01 seconds
#&gt; 
#&gt;     Nodes    |    Current Node    |     Objective Bounds      |     Work
#&gt;  Expl Unexpl |  Obj  Depth IntInf | Incumbent    BestBd   Gap | It/Node Time
#&gt; 
#&gt;      0     0 9.5689e+09    0   20 1.2215e+10 9.5689e+09  21.7%     -    0s
#&gt; H    0     0                    9.594148e+09 9.5689e+09  0.26%     -    0s
#&gt; 
#&gt; Explored 0 nodes (3825 simplex iterations) in 0.08 seconds
#&gt; Thread count was 1 (of 4 available processors)
#&gt; 
#&gt; Solution count 2: 9.59415e+09 1.22153e+10 
#&gt; Pool objective bound 9.56888e+09
#&gt; 
#&gt; Optimal solution found (tolerance 1.00e-01)
#&gt; Best objective 9.594148369417e+09, best bound 9.568884517812e+09, gap 0.2633%</div><div class='input'>
<span class='co'># count number of selected planning units in solution</span>
<span class='fu'><a href='print.html'>print</a></span>(<span class='fu'>sum</span>(<span class='no'>s2</span>))</div><div class='output co'>#&gt; [1] 26583807540</div><div class='input'>

</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by <a href='http://jeffrey-hanson.com'>Jeffrey O Hanson</a>, <a href='http://arcese.forestry.ubc.ca.people/richard-schuster/'>Richard Schuster</a>, <a href='http://strimas.com'>Matthew Strimas-Mackey</a>, <a href='http://arcese.forestry.ubc.ca'>Peter Arcese</a>, Joeseph Bennett.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  </body>
</html>
