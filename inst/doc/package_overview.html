<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />



<title>Package overview</title>

<script>// Pandoc 2.9 adds attributes on both header and div. We remove the former (to
// be compatible with the behavior of Pandoc < 2.8).
document.addEventListener('DOMContentLoaded', function(e) {
  var hs = document.querySelectorAll("div.section[class*='level'] > :first-child");
  var i, h, a;
  for (i = 0; i < hs.length; i++) {
    h = hs[i];
    if (!/^h[1-6]$/i.test(h.tagName)) continue;  // it should be a header h1-h6
    a = h.attributes;
    while (a.length > 0) h.removeAttribute(a[0].name);
  }
});
</script>

<style type="text/css">
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
</style>



<style type="text/css">
code {
white-space: pre;
}
.sourceCode {
overflow: visible;
}
</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
{ counter-reset: source-line 0; }
pre.numberSource code > span
{ position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
{ content: counter(source-line);
position: relative; left: -1em; text-align: right; vertical-align: baseline;
border: none; display: inline-block;
-webkit-touch-callout: none; -webkit-user-select: none;
-khtml-user-select: none; -moz-user-select: none;
-ms-user-select: none; user-select: none;
padding: 0 4px; width: 4em;
color: #aaaaaa;
}
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa; padding-left: 4px; }
div.sourceCode
{ }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } 
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.at { color: #7d9029; } 
code span.bn { color: #40a070; } 
code span.bu { color: #008000; } 
code span.cf { color: #007020; font-weight: bold; } 
code span.ch { color: #4070a0; } 
code span.cn { color: #880000; } 
code span.co { color: #60a0b0; font-style: italic; } 
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.do { color: #ba2121; font-style: italic; } 
code span.dt { color: #902000; } 
code span.dv { color: #40a070; } 
code span.er { color: #ff0000; font-weight: bold; } 
code span.ex { } 
code span.fl { color: #40a070; } 
code span.fu { color: #06287e; } 
code span.im { color: #008000; font-weight: bold; } 
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.kw { color: #007020; font-weight: bold; } 
code span.op { color: #666666; } 
code span.ot { color: #007020; } 
code span.pp { color: #bc7a00; } 
code span.sc { color: #4070a0; } 
code span.ss { color: #bb6688; } 
code span.st { color: #4070a0; } 
code span.va { color: #19177c; } 
code span.vs { color: #4070a0; } 
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } 
</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    var j = 0;
    while (j < rules.length) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") {
        j++;
        continue;
      }
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') {
        j++;
        continue;
      }
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>



<style type="text/css">

div.csl-bib-body { }
div.csl-entry {
clear: both;
}
.hanging div.csl-entry {
margin-left:2em;
text-indent:-2em;
}
div.csl-left-margin {
min-width:2em;
float:left;
}
div.csl-right-inline {
margin-left:2em;
padding-left:1em;
}
div.csl-indent {
margin-left: 2em;
}
</style>

<style type="text/css">body {
background-color: #fff;
margin: 1em auto;
max-width: 700px;
overflow: visible;
padding-left: 2em;
padding-right: 2em;
font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
font-size: 14px;
line-height: 1.35;
}
#TOC {
clear: both;
margin: 0 0 10px 10px;
padding: 4px;
width: 400px;
border: 1px solid #CCCCCC;
border-radius: 5px;
background-color: #f6f6f6;
font-size: 13px;
line-height: 1.3;
}
#TOC .toctitle {
font-weight: bold;
font-size: 15px;
margin-left: 5px;
}
#TOC ul {
padding-left: 40px;
margin-left: -1.5em;
margin-top: 5px;
margin-bottom: 5px;
}
#TOC ul ul {
margin-left: -2em;
}
#TOC li {
line-height: 16px;
}
table {
margin: 1em auto;
border-width: 1px;
border-color: #DDDDDD;
border-style: outset;
border-collapse: collapse;
}
table th {
border-width: 2px;
padding: 5px;
border-style: inset;
}
table td {
border-width: 1px;
border-style: inset;
line-height: 18px;
padding: 5px 5px;
}
table, table th, table td {
border-left-style: none;
border-right-style: none;
}
table thead, table tr.even {
background-color: #f7f7f7;
}
p {
margin: 0.5em 0;
}
blockquote {
background-color: #f6f6f6;
padding: 0.25em 0.75em;
}
hr {
border-style: solid;
border: none;
border-top: 1px solid #777;
margin: 28px 0;
}
dl {
margin-left: 0;
}
dl dd {
margin-bottom: 13px;
margin-left: 13px;
}
dl dt {
font-weight: bold;
}
ul {
margin-top: 0;
}
ul li {
list-style: circle outside;
}
ul ul {
margin-bottom: 0;
}
pre, code {
background-color: #f7f7f7;
border-radius: 3px;
color: #333;
white-space: pre-wrap; 
}
pre {
border-radius: 3px;
margin: 5px 0px 10px 0px;
padding: 10px;
}
pre:not([class]) {
background-color: #f7f7f7;
}
code {
font-family: Consolas, Monaco, 'Courier New', monospace;
font-size: 85%;
}
p > code, li > code {
padding: 2px 0px;
}
div.figure {
text-align: center;
}
img {
background-color: #FFFFFF;
padding: 2px;
border: 1px solid #DDDDDD;
border-radius: 3px;
border: 1px solid #CCCCCC;
margin: 0 5px;
}
h1 {
margin-top: 0;
font-size: 35px;
line-height: 40px;
}
h2 {
border-bottom: 4px solid #f7f7f7;
padding-top: 10px;
padding-bottom: 2px;
font-size: 145%;
}
h3 {
border-bottom: 2px solid #f7f7f7;
padding-top: 10px;
font-size: 120%;
}
h4 {
border-bottom: 1px solid #f7f7f7;
margin-left: 8px;
font-size: 105%;
}
h5, h6 {
border-bottom: 1px solid #ccc;
font-size: 105%;
}
a {
color: #0033dd;
text-decoration: none;
}
a:hover {
color: #6666ff; }
a:visited {
color: #800080; }
a:visited:hover {
color: #BB00BB; }
a[href^="http:"] {
text-decoration: underline; }
a[href^="https:"] {
text-decoration: underline; }

code > span.kw { color: #555; font-weight: bold; } 
code > span.dt { color: #902000; } 
code > span.dv { color: #40a070; } 
code > span.bn { color: #d14; } 
code > span.fl { color: #d14; } 
code > span.ch { color: #d14; } 
code > span.st { color: #d14; } 
code > span.co { color: #888888; font-style: italic; } 
code > span.ot { color: #007020; } 
code > span.al { color: #ff0000; font-weight: bold; } 
code > span.fu { color: #900; font-weight: bold; } 
code > span.er { color: #a61717; background-color: #e3d2d2; } 
</style>




</head>

<body>




<h1 class="title toc-ignore">Package overview</h1>


<div id="TOC">
<ul>
<li><a href="#summary" id="toc-summary">Summary</a></li>
<li><a href="#introduction" id="toc-introduction">Introduction</a></li>
<li><a href="#a-grammar-for-conservation-planning" id="toc-a-grammar-for-conservation-planning">A grammar for conservation
planning</a></li>
<li><a href="#workflow" id="toc-workflow">Workflow</a></li>
<li><a href="#usage" id="toc-usage">Usage</a>
<ul>
<li><a href="#data" id="toc-data">Data</a></li>
<li><a href="#initialize-a-problem" id="toc-initialize-a-problem">Initialize a problem</a></li>
<li><a href="#add-an-objective" id="toc-add-an-objective">Add an
objective</a></li>
<li><a href="#add-targets" id="toc-add-targets">Add targets</a></li>
<li><a href="#add-constraints" id="toc-add-constraints">Add
constraints</a></li>
<li><a href="#add-penalties" id="toc-add-penalties">Add
penalties</a></li>
<li><a href="#add-the-decision-types" id="toc-add-the-decision-types">Add the decision types</a></li>
<li><a href="#add-a-solver" id="toc-add-a-solver">Add a solver</a></li>
<li><a href="#add-a-portfolio" id="toc-add-a-portfolio">Add a
portfolio</a></li>
<li><a href="#solve-the-problem" id="toc-solve-the-problem">Solve the
problem</a></li>
</ul></li>
<li><a href="#evaluate-the-solution" id="toc-evaluate-the-solution">Evaluate the solution</a>
<ul>
<li><a href="#evaluating-performance" id="toc-evaluating-performance">Evaluating performance</a></li>
<li><a href="#evaluating-relative-importance" id="toc-evaluating-relative-importance">Evaluating relative
importance</a></li>
</ul></li>
<li><a href="#marxan-problems" id="toc-marxan-problems"><em>Marxan</em>
problems</a></li>
<li><a href="#conclusion" id="toc-conclusion">Conclusion</a></li>
<li><a href="#references" id="toc-references">References</a></li>
</ul>
</div>

<div id="summary" class="section level2">
<h2>Summary</h2>
<p>The <em>prioritizr R</em> package uses mixed integer linear
programming (MILP) techniques to provide a flexible interface for
building and solving conservation planning problems <span class="citation">(Rodrigues <em>et al.</em> 2000; Billionnet
2013)</span>. It supports a broad range of objectives, constraints, and
penalties that can be used to custom-tailor conservation planning
problems to the specific needs of a conservation planning exercise. Once
built, conservation planning problems can be solved using a variety of
commercial and open-source exact algorithm solvers. In contrast to the
algorithms conventionally used to solve conservation problems, such as
heuristics or simulated annealing <span class="citation">(Ball <em>et
al.</em> 2009)</span>, the exact algorithms used here are guaranteed to
find optimal solutions. Furthermore, conservation problems can be
constructed to optimize the spatial allocation of different management
zones (or actions), meaning that conservation practitioners can identify
solutions that benefit multiple stakeholders. Finally, this package has
the functionality to read input data formatted for the <em>Marxan</em>
conservation planning program <span class="citation">(Ball <em>et
al.</em> 2009)</span>, and find much cheaper solutions in a much shorter
period of time than <em>Marxan</em> <span class="citation">(Beyer <em>et
al.</em> 2016)</span>.</p>
</div>
<div id="introduction" class="section level2">
<h2>Introduction</h2>
<p>Systematic conservation planning is a rigorous, repeatable, and
structured approach to designing new protected areas that efficiently
meet conservation objectives <span class="citation">(Margules &amp;
Pressey 2000)</span>. Historically, conservation decision-making has
often evaluated parcels opportunistically as they became available for
purchase, donation, or under threat. Although purchasing such areas may
improve the <em>status quo</em>, such decisions may not substantially
enhance the long-term persistence of target species or communities.
Faced with this realization, conservation planners began using decision
support tools to help simulate alternative reserve designs over a range
of different biodiversity and management goals and, ultimately, guide
protected area acquisitions and management actions. Due to the
systematic, evidence-based nature of these tools, conservation
prioritization can help contribute to a transparent, inclusive, and more
defensible decision making process.</p>
<p>A conservation planning exercise typically starts by defining a study
area. This study area should encompass all the areas relevant to the
decision maker or the hypothesis being tested. The extent of a study
area could encompass a few important localities <span class="citation">(e.g., Stigner <em>et al.</em> 2016)</span>, a single
state <span class="citation">(e.g., Kirkpatrick 1983)</span>, an entire
country <span class="citation">(Fuller <em>et al.</em> 2010)</span>, or
the entire planet <span class="citation">(Butchart <em>et al.</em>
2015)</span>. Next, the study area is divided into a set of discrete
areas termed <em>planning units</em>. Each planning unit represents a
discrete locality in the study area that can be managed independently of
other areas. The general idea is that some combination of the planning
units can be selected for conservation actions (e.g., protected area
establishment, habitat restoration). Planning units are often created as
square or hexagon cells that are sized according to the scale of the
conservation actions, and the resolution of the data that underpin the
planning exercise <span class="citation">(but see Klein <em>et al.</em>
2009)</span>.</p>
<p>Cost data (or a surrogate thereof) are needed to inform the
prioritization process. Specifically, these cost data describe the
relative expenditure associated with managing each planning unit for
conservation. For example, if the goal of the conservation planning
exercise is to identify priority areas for expanding a local protected
area system, then the cost data could represent the physical cost of
purchasing the land. Alternatively, if such data are not available, then
surrogate data are often used instead (e.g., human population density,
opportunity cost of foregone commercial activities, or planning unit
size).</p>
<p>Conservation planning exercises also require data on the biodiversity
elements that are of conservation interest (termed <em>conservation
features</em>). These features could be species (e.g., <em>Neofelis
nebulosa</em>, the Clouded Leopard), populations, or habitats (e.g.,
mangroves or cloud forest). After identifying the set of relevant
conservation features for a conservation planning exercise, spatially
explicit data need to be obtained for each and every feature to describe
their spatial distribution (e.g., habitat suitability data, probability
of occurrence data, presence/absence data). This is important to ensure
that conservation features are adequately covered (represented) by
prioritizations. After assembling all the data, the next step is to
define the conservation planning problem.</p>
<p>The <em>prioritizr R</em> package is designed to help you build and
solve conservation planning problems. Specifically, prioritizations are
generated by formulating a mathematical optimization problem and then
solving it to generate a solution. These mathematical optimization
problems are formulated using the planning unit data, cost data, and
feature data, and with information related to the overarching aim of the
prioritization process. In general, the goal of an optimization problem
is to minimize (or maximize) an <em>objective function</em> that is
calculated using a set of <em>decision variables</em>, subject to a
series of constraints to ensure that solution exhibits specific
properties. The objective function describes the quantity which we are
trying to minimize (e.g., cost of the solution) or maximize (e.g.,
number of features conserved). The decision variables describe the
entities that we can control, and indicate which planning units are
selected for conservation management and which are not. The constraints
can be thought of as rules that the decision variables need to follow.
For example, a commonly used constraint is specifying that the solution
must not exceed a certain budget.</p>
<p>A wide variety of approaches have been developed for solving
optimization problems. Reserve design problems are frequently solved
using simulated annealing <span class="citation">(Kirkpatrick <em>et
al.</em> 1983)</span> or heuristics <span class="citation">(Nicholls
&amp; Margules 1993; Moilanen 2007)</span>. These methods are
conceptually simple and can be applied to a wide variety of optimization
problems. However, they do not scale well for large or complex problems
<span class="citation">(Beyer <em>et al.</em> 2016)</span>.
Additionally, these methods cannot tell you how close any given solution
is to the optimal solution. The <em>prioritizr</em> package uses exact
algorithms to efficiently solve conservation planning problems to within
a pre-specified optimality gap. In other words, you can specify that you
need the optimal solution (i.e., a gap of 0%) and the algorithms will,
given enough time, find a solution that meets this criteria. In the
past, exact algorithms have been too slow for conservation planning
exercises <span class="citation">(Pressey <em>et al.</em> 1996)</span>.
However, improvements over the last decade mean that they are now much
faster <span class="citation">(Achterberg &amp; Wunderling 2013; Beyer
<em>et al.</em> 2016)</span>.</p>
<p>In this package, optimization problems are expressed using
<em>integer linear programming</em> (ILP) so that they can be solved
using (linear) exact algorithm solvers. The general form of an integer
programming problem can be expressed in matrix notation using the
following equation.</p>
<p><span class="math display">\[\text{Minimize} \space
\boldsymbol{c}^\text{T} \boldsymbol{x} \space
\space \text{subject to} \space A\boldsymbol{x}
\space \Box \space \boldsymbol{b}\]</span></p>
<p>Where <span class="math inline">\(x\)</span> is a vector of decision
variables, <span class="math inline">\(c\)</span> and <span class="math inline">\(b\)</span> are vectors of known coefficients, and
<span class="math inline">\(A\)</span> is the constraint matrix. The
final term specifies a series of structural constants and the <span class="math inline">\(\Box\)</span> symbol is used to indicate that the
relational operators for the constraints can be either <span class="math inline">\(\geq\)</span>, <span class="math inline">\(=\)</span>, or <span class="math inline">\(\leq\)</span>. In the context of a conservation
planning problem, <span class="math inline">\(c\)</span> could be used
to represent the planning unit costs, <span class="math inline">\(A\)</span> could be used to store the data showing
the presence / absence (or amount) of each feature in each planning
unit, <span class="math inline">\(b\)</span> could be used to represent
minimum amount of habitat required for each species in the solution, the
<span class="math inline">\(\Box\)</span> could be set to <span class="math inline">\(\geq\)</span> symbols to indicate that the total
amount of each feature in the solution must exceed the quantities in
<span class="math inline">\(b\)</span>. But there are many other ways of
formulating the reserve selection problem <span class="citation">(Rodrigues <em>et al.</em> 2000)</span>.</p>
</div>
<div id="a-grammar-for-conservation-planning" class="section level2">
<h2>A grammar for conservation planning</h2>
<p>The <em>prioritizr R</em> package uses a grammar to describe elements
of conservation planning. This means that functions are organized into
verbs that relate to specific concepts. For example, all of the
functions used to specify the primary objective for optimization end
with the <code>_objective</code> suffix (e.g.,
<code>add_min_set_objective()</code> and
<code>add_min_shortfall_objective()</code>). By combining multiple
functions together, they can be used to formulate a complete
conservation planning problem. Specifically, the verbs for formulating
problems are described below.</p>
<ul>
<li>Create a new conservation planning <a href="https://prioritizr.net/reference/problem.html">problem</a> by
specifying the planning units, features, and management zones of
conservation interest.</li>
<li>Add a primary <a href="https://prioritizr.net/reference/objectives.html">objective</a> to
a conservation planning problem (e.g., minimize overall cost).</li>
<li>Add <a href="https://prioritizr.net/reference/penalties.html">penalties</a> to
a conservation planning problem to penalize solutions according to
specific metric (e.g., connectivity).</li>
<li>Add <a href="https://prioritizr.net/reference/targets.html">targets</a> to a
conservation planning problem to specify how much of each feature should
ideally be represented by solutions.</li>
<li>Add <a href="https://prioritizr.net/reference/constraints.html">constraints</a>
to a conservation planning problem to ensure that solutions exhibit
specific properties (e.g., select specific planning units for
protection).</li>
<li>Add <a href="https://prioritizr.net/reference/decisions.html">decisions</a> to
a conservation planning problem to specify the nature of the decisions
in the problem (e.g., binary decisions indicate the planning units
should be selected or not selected for management).</li>
<li>Add a <a href="https://prioritizr.net/reference/portfolios.html">portfolio</a> to
a conservation planning problem to specify a methodological approach for
generating multiple solutions (e.g., generate multiple solutions by
finding 100 solutions within 10% of optimality).</li>
<li>Add a <a href="https://prioritizr.net/reference/solvers.html">solver</a> to a
conservation problem to specify the optimization software (e.g., Gurobi)
for generating solutions and customize the optimization settings (e.g.,
generate an optimal solution).</li>
</ul>
<p>After building a conservation planning problem, it can be solved to
generate a prioritization (using the <code>solve()</code> function).
There are also verbs available to help evaluate and interpret solutions.
These verbs are described below.</p>
<ul>
<li>Evaluate performance by computing <a href="https://prioritizr.net/reference/summaries.html">summary
statistics</a> (e.g., overall cost, feature representation, or total
boundary length).</li>
<li>Evaluate the relative <a href="https://prioritizr.net/reference/importance.html">importance</a>
of planning units selected by a solution (e.g., based on
irreplaceability).</li>
</ul>
</div>
<div id="workflow" class="section level2">
<h2>Workflow</h2>
<p>The general workflow when using the <em>prioritizr R</em> package
starts with creating a new conservation planning <code>problem()</code>
object using data. Specifically, the <code>problem()</code> object
should be constructed using data that specify the planning units,
biodiversity features, management zones (if applicable), and costs.
After creating a new <code>problem()</code> object, it can be
customized—by adding objectives, penalties, constraints, and other
information—to build a precise representation of the conservation
planning problem required, and then solved to obtain a solution.</p>
<p>All conservation planning problems require an objective. An objective
specifies the property which is used to compare different feasible
solutions. Simply put, the objective is the property of the solution
which should be maximized or minimized during the optimization process.
For instance, with the minimum set objective (specified using
<code>add_min_set_objective()</code>), we are seeking to minimize the
cost of the solution (similar to <em>Marxan</em>). On the other hand,
with the minimum shortfall objective (specified using
<code>add_min_shortfall_objective()</code>), we are seeking to minimize
the average target shortfall for all features represented in the
solution, subject to a budget.</p>
<p>Many objectives require representation targets (e.g., the minimum set
objective). These targets are a specialized set of constraints that
relate to the total quantity of each feature secured in the solution
(e.g., amount of suitable habitat or number of individuals). In the case
of the minimum set objective ( <code>add_min_set_objective()</code>),
they are used to ensure that solutions secure a sufficient quantity of
each feature, and in other objectives, such as the maximum features
objective ( <code>add_max_features_objective()</code>) they are used to
assess whether a feature has been adequately conserved by a candidate
solution. Targets can be expressed numerically as the total amount
required for a given feature (using
<code>add_absolute_targets()</code>), or as a proportion of the total
amount found in the planning units (using
<code>add_relative_targets()</code>). Note that not all objectives
require targets, and a warning will be thrown if an attempt is made to
add targets to a problem with an objective that does not use them.</p>
<p>Constraints and penalties can be added to a conservation planning
problem to ensure that solutions exhibit a specific property or penalize
solutions which don’t exhibit a specific property (respectively). The
difference between constraints and penalties, strictly speaking, is
constraints are used to rule out potential solutions that don’t exhibit
a specific property. For instance, constraints can be used to ensure
that specific planning units are selected in the solution for
prioritization (using <code>add_locked_in_constraints()</code>) or not
selected in the solution for prioritization (using
<code>add_locked_out_constraints()</code>). On the other hand, penalties
are combined with the objective of a problem, with a penalty factor, and
the overall objective of the problem then becomes to minimize (or
maximize) the primary objective function and the penalty function. For
example, penalties can be added to a problem to penalize solutions that
are excessively fragmented (using
<code>add_boundary_penalties()</code>). These penalties have a
<code>penalty</code> argument that specifies the relative importance of
having spatially clustered solutions. When the argument to
<code>penalty</code> is high, then solutions which are less fragmented
are valued more highly – even if they cost more – and when the argument
to <code>penalty</code> is low, then the solutions which are more
fragmented are valued less highly.</p>
<p>After building a conservation problem, it can then be solved to
obtain a solution (or portfolio of solutions if desired). The solution
is returned in the same format as the planning unit data used to
construct the problem. For instance, this means that if raster data was
used to initialize the problem, then the solution will also be output in
raster format. This can be very helpful when it comes to interpreting
and visualizing solutions because it means that the solution data does
not first have to be merged with spatial data before they can be plotted
on a map.</p>
</div>
<div id="usage" class="section level2">
<h2>Usage</h2>
<p>Here we will provide an introduction to using the <em>prioritizr
R</em> package to build and solve a conservation planning problem.
Please note that we will not discuss conservation planning with multiple
zones in this vignette, for more information on working with multiple
management zones please see the <a href="management_zones_tutorial.html"><em>Management zones
tutorial</em></a>.</p>
<p>First, we will load the <em>prioritizr</em> package.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="co"># load package</span></span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="fu">library</span>(prioritizr)</span></code></pre></div>
<div id="data" class="section level3">
<h3>Data</h3>
<p>Now we will load some built-in data sets that are distributed with
the <em>prioritizr R</em> package. This package contains several
different planning unit data sets. To provide a comprehensive overview
of the different ways that we can initialize a conservation planning
problem, we will load each of them.</p>
<p>First, we will load the raster planning unit data
(<code>sim_pu_raster</code>). Here, the planning units are represented
as a single-layer raster object (i.e., a <code>terra::rast()</code>
object) and each pixel corresponds to the spatial extent of each panning
unit. The pixel values correspond to the acquisition costs of each
planning unit.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="co"># load raster planning unit data</span></span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a>sim_pu_raster <span class="ot">&lt;-</span> <span class="fu">get_sim_pu_raster</span>()</span>
<span id="cb2-3"><a href="#cb2-3" tabindex="-1"></a></span>
<span id="cb2-4"><a href="#cb2-4" tabindex="-1"></a><span class="co"># print data</span></span>
<span id="cb2-5"><a href="#cb2-5" tabindex="-1"></a><span class="fu">print</span>(sim_pu_raster)</span></code></pre></div>
<pre><code>## class       : SpatRaster 
## dimensions  : 10, 10, 1  (nrow, ncol, nlyr)
## resolution  : 0.1, 0.1  (x, y)
## extent      : 0, 1, 0, 1  (xmin, xmax, ymin, ymax)
## coord. ref. : Undefined Cartesian SRS 
## source      : sim_pu_raster.tif 
## name        :    layer 
## min value   : 190.1328 
## max value   : 215.8638</code></pre>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="co"># plot data</span></span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a><span class="fu">plot</span>(</span>
<span id="cb4-3"><a href="#cb4-3" tabindex="-1"></a>  sim_pu_raster, <span class="at">main =</span> <span class="st">&quot;Planning unit costs&quot;</span>,</span>
<span id="cb4-4"><a href="#cb4-4" tabindex="-1"></a>  <span class="at">xlim =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="fl">0.1</span>, <span class="fl">1.1</span>), <span class="at">ylim =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="fl">0.1</span>, <span class="fl">1.1</span>), <span class="at">axes =</span> <span class="cn">FALSE</span></span>
<span id="cb4-5"><a href="#cb4-5" tabindex="-1"></a>)</span></code></pre></div>
<p><img role="img" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAeAAAAEzCAMAAADeoCAmAAAACXBIWXMAAA7DAAAOwwHHb6hkAAADAFBMVEX///940VIijI203Ss5uXYhj40tb46F1ElWxmYfoIhyz1Y+SYkxtXo9vHMjqYNGwG5byGNszVmt3C+L1kVEAVTP4RxIKHgqdo4foYfMzMxIF2kiio0lhI4oe441t3hGDF+m2zQpeY4zYo0em4kvao48T4onfo4fk4wgkYwflYtIIXOZ2D3I4B9gyl8gpIX95yXk5Bjw5Rwlgo4enYlEOoMrc44AAAD9//8wZ445U4xHLHsrsX1ENoEAAAYLDxs1XI0mrYFHEWRIHG5FBloOBBMGHRsJFRwIIxkPChgQJhVeu6omgI4jh44fmIo0YI09TYpIJHVBvXGS10G63ifW4hkhpoVARIcHGRwkLAj///M+keH//NoaKg7///76x3QUEAf//u2KNwXG+v83WIz///qz+P8uLQVGMn4ubY6mUQ0/R4if2TlQxGlLwWx/003B3yPd4xgscY4BEF1my1wGAABCP4b25iCeSQcDCQkzhNUJAwsmBADomkYDInHHdSZkuPfe391vwvljpa6a3YZ5SYR5cqZ8ZZ5mna6s4nrv7+/W+v/m6OcAARIAAyEQAgDt/P73s1///Ob/+cYeHT1uIgMjIEac0fXxypH0///i/f8hW3Mdln4kRB5Ehz0FOIp5LBT/97o3ECvq5RpeXAqMiRAaAwH/+NGXQwo2iNkQLnksRmkUKUpVqvW64vTbsnnx0qW/+P9WOSNLn+xFDQEACD5JJBqOjo5hNRUvGwn2+fPAxMP935RnodKUvd1oHSbcjjx1cnSv7vv+7KSGwuoPQpJdXV4EIWCampoaJ28eNVxPGwSI1/yLPBl5rdn869DVpmuT4f1tQCIiG2XX5fR/VTECHWwNTKCqq6XRl1IeUpwZZbilazjChkMLGCw3OistftCEma4bJzGzgkk5e75MRFHX1NTat5azu73Ep3utWRGbdFBGaZzw8+momHushW9ThLZIkdKrxdnxqVRcdY4rXp1SlMX75bS81649XYTi7+9wVzOPhHTz3r/frFpDdanY1cmPG9PzAAAMRUlEQVR42uzdCXgU5R3H8bGK9kCrVqvRahXvW1s7Y48Ntg+EYO8TN2GyEVdoetemFQJC0jsEEkAgwbaQbRskxFzkviAQQrhCYgEDAuGQmwjFttR61XeO3fzfvLO6Cc+D+87+vuvDrsPswX7yzsyu44uiIIQQQgghhBBCCCGEEEIIIYTQ+5d/umrkSVjeoimpT6lPPhHBnSJdL9w981tbF0Z8l0GtjMIAs2bP0M4RsD4tfdaMSO8xqJWRE7DnoY6ON+rS1eKZkcL5D3fsWzS0pzPuCeBzDPw8uy6cr1Z3W8CpRyt9k/e8VqooyY+pT/93my9++UL+trkeXaAoW47X7zn1VvrsLOth581XF89UlDm5nhXawHuu3lWvevafsH9C3jxen2E+mfEYNbnxyzsL2E1vGXsN+0+UKqn2yqEFaGjATKF6kwnnnZ5ubrLXrTYW7ql3uB0EDi1Q5i1hN2b1hgPm7rn6OeNfFlvATRvNJ3uyW1HOzDdvzno5T/GvyrVfw1x75dACkA19BK824dZsVNe1xO1KZ4sZjVqy75WN6iz+dhA4tMA/Pd3zbM+2dDUMMH9Pa6urGevNfUqdfarxQJH6UkHqMdXz+JGjG43HYK9mXcv/DxR59mrWymQBzIa6D167yHz7z7S2t2nKnCJPkmYOa0V5NdezjLsdBA4tYO//9grjZyAMMH9PslttqlJfzFPYMN1esaaKHQUoWspUhm3cLtWST7Z22sBkAcwGfRTtMf+pbgseHW/peaOySLWAmZuSMtUzhbsdBA4tYE4vaYq+Ktwmmr8nAWYrJDGyhuxsLaWI/QCY9yyeuZRt8T0l/zqdFzzIIgvQkD4msUMg+3Nw6u4i9maOzbWAn57QDxy6HTrICi5gvxjbzjm54Q6yJoQBfjXd3EHY1iusg4HtFXp+nXEg4ClZaAOTBWhI+2DjA4kFzLaRxafzGMeggM0RPC19sMD2CPY3NNARzNb2v/lKJTuuWjwzuHJoAcyGCmx//Flljphp6YMBLtxo3Ga7UgLMNsv+VenvDqzz+2BDz9wHl9fWlpqH1cGVyQKYnSUwo93ZeLRKHQywlx0Bj+zZlhsCZmSzRvQcn6qGAfYkNZhHS8lsvbf7j6JHmkfRM9ghnrr2dObRKmsEs5XJApidJTAbVGxntz+XvecRA1sfZz1jg8C6Pi3XfBTHEaykFIU+B+dXhT7fks/BSzer6fbXp9bKmWQBOjtgPb/SV3KqvIp9Lo4cWCnf5kt4e0doH6yk7qjJ2HPqLcd9sDL3QP3knfY3WWe21WfsOTHwm6zkk5U+6z+A2CuTBejs0nRjCBpvZORvZuqhuK3Wx6RNwUcZqoSu9/8qLEbvU+yYqrqz4bB5qIVcmF5mftmsVrdhE+rStpxsP9i+byveCLcOYRbb72L8IoQQQiibD2+Iyzqk+mjqIbwl7ipu4n20iXEOH+3wqc6NwHp+ZUZJc4GieKcnaYr3mPH9TDfeLwmBf0XrB15T85//lQWy/GWvFzHg5M3NmZk5BXi/3AM8p3iC4k3b6z9cW8eAC1caoxdf0MgI/ACtH3juVk2Zt+R5tnVOY8BNgV5fSSdGsIuAFV0vf2HnTMUCzj/Y0tcVyML7JVt6nO/vNF9rR0ej9VtLdz3TbJx+awIbm+fUNJxOL1+Nvr/RfAfb22st383/ts7rMoD18hZjWz0FwPKN4Il/pZGDrPWlOTk5efYITlnQ1lAW2IQ3TMJ98P20ELDf/H/rjFOwTWBvV03iBpym4CJg5Brgn9EADGAkGfB3aAAGMAIwiibgK2kABjCSC/jRu2mPxhzwfWLni10g9kGHrhS7W+w8sYvEPuzQp4UeAXDMA/+UBmAAA1gy4G/TAAxgAAMYwNEEzP1BAAxgAEsGfDkNwAAGsGTAN9AADGAAAxjA0QT8QxqAAQxguYDH30UbD2AAA1gu4G/RAAxgl+WgeZeYw5t9XmRO94tdLvaA2MccGsKfD8CuB+YeAcAABrBkwNzLATCAASwZ8E9oAAYwgCUD5l7h+JibjDRWgXV+MlKl/IXE5QsB7KIRzE9GunTJyzm7iycAWEJg7lWPDzMZaco/nlAKV2YB2D3A3GSk+rS1i5S5zyVpAJYP+DLaeOfJSPVVL+axG8sALB1w4+Q/0yaH5qrkJiPFCJYX2PcXmq+2p8caxNxkpGwfXMH2wTOwD5ZvEz32F7SxcfZfnDtgMtJ5S/7ZsGN9BYDdAGw2YDJSJb9u1AZ8DpYS+B7a2Hf7qlIDsLuBXZnDmVUOTDeIfdShe8QiO3PLwdzhVVwkkv/xvYEvpQEYwACWDJh7bgADGMAABnA0Af+IBmAAA1gy4B/TAAxgAEsGzL1CAAMYwJIBf5MGYAADGMAAjibgi2kABjCA5QIew80sMgbAAAawXMDX02IP+FKxy8QcMC92yEHzejEHOYfzuxxOFjtfPDPsNwAGMIDdDTycBmAAA1gy4M/TAOxC4OHkAmCMYABLB/xw/z8AxggGsGTAD9MADGAAAxjAAAbwOQO+hAZgAANYMuDv0vqBg5ORWrOQeo+pqlrdDWD3ANuTkdqzkCZvbs7MzCkAsHuA7clI7VlIC1cao1cDsITA99LGDJiMdIU9h2FToNdX0unGEfwhsQ+IXRBZw8UcntLhB8jhx8zpxV4t9MiQge3JSO1ZSPMPtvR1BbIALBuwfkSdTFN9Pl+79VvmZKT9s5BqSmraXg3A0o3g0X+ijW7Mzm6wfK3JSO1ZSMtbjDkNpwBYQmDuzza6/yDLmozUnoU0ZUFbQ1lgEzbRrgEOTUZqzULq7apJ3NCmAdg9I5jmyllIYwaY+/uGR8fcV5UABrDkwDfRAAxgAEsG/FUagAEMYAADOJqA76ABGMAAlgz4NhqAAQxgyYBvpwEYwACWDHgYLfaA7xC7TexesWEOOfy0OJyad7uYw8/UJxz6lNCvAQxgALsbmHtUAAMYwJIBX0sDMIABLBfwuK/QxgEYwAAGMICjCJh7BAADGMCSAXPrAxjAAJYM+Ms0AAMYwAAGcDQB30oDMIABLBnwdbTYAx4WUeLJUFdf4pDD498kdqHYZ8Suc+gqoT8AOOaBb6QBOFaAdX4y0uAVgF0zgvnJSO0rAEsIzK0/LsxkpPYVgN0DzE9GGprREMCyASc8S4vviYvLCe6FyWSk9hWApQM+4kmgefb39rZav8NNRooRLCmwHpfwc1oC20Trli83Gal9hX2whJtoAdg+yOImI7WvACwhMPdECWEmI1XsKwC7BZhL464A7DpgfFUpM/D3aQAGMIAlA76ZBmAAA1gy4IdoAAawy4qMyWF+pGsdulHMQTOyF/YRhx4U+h2AAQxglwOPIBcAuw94BA3AAAawZMBfowEYwAAGMICjCXgkDcAABrBcwPEccDyAAQxguYAfpwEYwACWDPizNAADGMAABjCAAXzugG8hl3j8zWeOOUxz5PRgI8RuEXO4451i1zh0hdBv3xuYe24AAxjAkgF/nQZgAAMYwACOJmDuOBzAAAawZMA/oHHAW7YC2M3A3ulJmuLPr/RtWKh4j6mqWt0NYAmBv0frB/aXvV7EgJsCzX2711ckb27OzMwpALCLgA/X1iVpujHF3dIlMwpXdmMT7S5gtolOS9L8BnDyY8uaAr2+kk6MYBmBf0kbCKykBDr7dhTtzT/Y0tcVyAKwdMCNGQtoGa21tUcosLerJv61umWaoimpaXs1AEsGrDdmPEPLaG9t7aDAqdnGrMIzyluYddoUALtuE90UaOvbXTwhZUFbQ1lgEzbR8gEncicIJA4E9nfVJLxWamypEze0aQB2E3B/NqyOj0kyAn+Blhhz30WLMxNddbPYrWIOJ1td6HAalcNTflzsk2JXOCTe8fcRAD9ILgB2ITBGMIABLDPwJHIBsPuAJ9EADGAASwb8ORqAXQg8iVwAjBEMYAADGMAAPmfA3PoABjCAJQP+Bg3AAAYwgAEcTcDcaQQABjCA5QIe9SXaqJgDdnsG8J39FwC7ERgjGMBIXmDuxFsAAxgBGEUT8BdpAHYh8DXkAmCMYARgFE3A3BegAAYwAvA77dwxEcAgDEBRE91xQQWgAyOd2NGJj67BAeTei4P8y8bBSYFbJHDCwCWMwC6Y2wI/YQTOF3h7EyKwwFxl1S+qy0pyeeeIpo1k07f/67qFAAAAAAAAAAAAAAAAAAAAAMBxflkjygfa19mIAAAAAElFTkSuQmCC" style="display: block; margin: auto;" /></p>
<p>Secondly, we will load one of the spatial vector planning unit data
sets (<code>sim_pu_polygons</code>). Here, each polygon (i.e., feature
using ArcGIS terminology) corresponds to a different planning unit. This
data set has an attribute table that contains additional information
about each polygon. Namely, the <code>cost</code> field (column) in the
attribute table contains the acquisition cost for each planning
unit.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="co"># load polygon planning unit data</span></span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a>sim_pu_polygons <span class="ot">&lt;-</span> <span class="fu">get_sim_pu_polygons</span>()</span>
<span id="cb5-3"><a href="#cb5-3" tabindex="-1"></a></span>
<span id="cb5-4"><a href="#cb5-4" tabindex="-1"></a><span class="co"># print data</span></span>
<span id="cb5-5"><a href="#cb5-5" tabindex="-1"></a><span class="fu">print</span>(sim_pu_polygons)</span></code></pre></div>
<pre><code>## Simple feature collection with 90 features and 3 fields
## Geometry type: POLYGON
## Dimension:     XY
## Bounding box:  xmin: 0 ymin: 0 xmax: 1 ymax: 1
## Projected CRS: Undefined Cartesian SRS
## # A tibble: 90 × 4
##     cost locked_in locked_out                                      geom
##  * &lt;dbl&gt; &lt;lgl&gt;     &lt;lgl&gt;                                  &lt;POLYGON [m]&gt;
##  1  216. FALSE     FALSE            ((0 1, 0.1 1, 0.1 0.9, 0 0.9, 0 1))
##  2  213. FALSE     FALSE      ((0.1 1, 0.2 1, 0.2 0.9, 0.1 0.9, 0.1 1))
##  3  207. FALSE     FALSE      ((0.2 1, 0.3 1, 0.3 0.9, 0.2 0.9, 0.2 1))
##  4  209. FALSE     TRUE       ((0.3 1, 0.4 1, 0.4 0.9, 0.3 0.9, 0.3 1))
##  5  214. FALSE     FALSE      ((0.4 1, 0.5 1, 0.5 0.9, 0.4 0.9, 0.4 1))
##  6  214. FALSE     FALSE      ((0.5 1, 0.6 1, 0.6 0.9, 0.5 0.9, 0.5 1))
##  7  210. FALSE     FALSE      ((0.6 1, 0.7 1, 0.7 0.9, 0.6 0.9, 0.6 1))
##  8  211. FALSE     TRUE       ((0.7 1, 0.8 1, 0.8 0.9, 0.7 0.9, 0.7 1))
##  9  210. FALSE     FALSE      ((0.8 1, 0.9 1, 0.9 0.9, 0.8 0.9, 0.8 1))
## 10  204. FALSE     FALSE          ((0.9 1, 1 1, 1 0.9, 0.9 0.9, 0.9 1))
## # ℹ 80 more rows</code></pre>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="co"># plot the planning units, and color them according to cost values</span></span>
<span id="cb7-2"><a href="#cb7-2" tabindex="-1"></a><span class="fu">plot</span>(sim_pu_polygons[, <span class="st">&quot;cost&quot;</span>])</span></code></pre></div>
<p><img role="img" src="data:image/png;base64,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" style="display: block; margin: auto;" /></p>
<p>Thirdly, we will load some planning unit data stored in tabular
format (i.e., <code>data.frame</code> format). For those familiar with
<em>Marxan</em> or dealing with very large conservation planning
problems (&gt; 10 million planning units), it may be useful to work with
data in this format because it does not contain any spatial information
which will reduce computational burden. When using tabular data to
initialize conservation planning problems, the data must follow the
conventions used by <em>Marxan</em>. Specifically, each row in the
planning unit table must correspond to a different planning unit. The
table must also have an “id” column to provide a unique integer
identifier for each planning unit, and it must also have a column that
indicates the cost of each planning unit. For more information, please
see the <a href="https://marxansolutions.org/">official <em>Marxan</em>
documentation</a>.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a><span class="co"># specify file path for planning unit data</span></span>
<span id="cb8-2"><a href="#cb8-2" tabindex="-1"></a>pu_path <span class="ot">&lt;-</span> <span class="fu">system.file</span>(<span class="st">&quot;extdata/marxan/input/pu.dat&quot;</span>, <span class="at">package =</span> <span class="st">&quot;prioritizr&quot;</span>)</span>
<span id="cb8-3"><a href="#cb8-3" tabindex="-1"></a></span>
<span id="cb8-4"><a href="#cb8-4" tabindex="-1"></a><span class="co"># load in the tabular planning unit data</span></span>
<span id="cb8-5"><a href="#cb8-5" tabindex="-1"></a><span class="co"># note that we use the data.table::fread function, as opposed to the read.csv</span></span>
<span id="cb8-6"><a href="#cb8-6" tabindex="-1"></a><span class="co"># function, because it is much faster</span></span>
<span id="cb8-7"><a href="#cb8-7" tabindex="-1"></a>pu_dat <span class="ot">&lt;-</span> data.table<span class="sc">::</span><span class="fu">fread</span>(pu_path, <span class="at">data.table =</span> <span class="cn">FALSE</span>)</span>
<span id="cb8-8"><a href="#cb8-8" tabindex="-1"></a></span>
<span id="cb8-9"><a href="#cb8-9" tabindex="-1"></a><span class="co"># preview first six rows of the tabular planning unit data</span></span>
<span id="cb8-10"><a href="#cb8-10" tabindex="-1"></a><span class="co"># note that it has some extra columns other than id and cost as per the</span></span>
<span id="cb8-11"><a href="#cb8-11" tabindex="-1"></a><span class="co"># Marxan format</span></span>
<span id="cb8-12"><a href="#cb8-12" tabindex="-1"></a><span class="fu">head</span>(pu_dat)</span></code></pre></div>
<pre><code>##   id       cost status    xloc     yloc
## 1  3      0.000      0 1116623 -4493479
## 2 30   7527.275      3 1110623 -4496943
## 3 56  37349.075      0 1092623 -4500408
## 4 58  16959.021      0 1116623 -4500408
## 5 84  34220.256      0 1098623 -4503872
## 6 85 178907.584      0 1110623 -4503872</code></pre>
<p>Finally, we will load data showing the spatial distribution of the
conservation features. Our conservation features
(<code>sim_features</code>) are represented as a multi-layer raster
object (i.e., a <code>terra::rast()</code> object), where each layer
corresponds to a different feature. The pixel values in each layer
correspond to the amount of suitable habitat available in a given
planning unit. Note that our planning unit and our feature data have
exactly the same spatial properties (i.e., resolution, extent,
coordinate reference system) so their pixels line up perfectly.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a><span class="co"># load feature data</span></span>
<span id="cb10-2"><a href="#cb10-2" tabindex="-1"></a>sim_features <span class="ot">&lt;-</span> <span class="fu">get_sim_features</span>()</span>
<span id="cb10-3"><a href="#cb10-3" tabindex="-1"></a></span>
<span id="cb10-4"><a href="#cb10-4" tabindex="-1"></a><span class="co"># plot the distribution of suitable habitat for each feature</span></span>
<span id="cb10-5"><a href="#cb10-5" tabindex="-1"></a><span class="fu">plot</span>(</span>
<span id="cb10-6"><a href="#cb10-6" tabindex="-1"></a>  sim_features, <span class="at">nr =</span> <span class="dv">2</span>,</span>
<span id="cb10-7"><a href="#cb10-7" tabindex="-1"></a>  <span class="at">axes =</span> <span class="cn">FALSE</span>, <span class="at">xlim =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="fl">0.1</span>, <span class="fl">1.1</span>), <span class="at">ylim =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="fl">0.1</span>, <span class="fl">1.1</span>)</span>
<span id="cb10-8"><a href="#cb10-8" tabindex="-1"></a>)</span></code></pre></div>
<p><img role="img" src="data:image/png;base64,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" style="display: block; margin: auto;" /></p>
</div>
<div id="initialize-a-problem" class="section level3">
<h3>Initialize a problem</h3>
<p>After having loaded our planning unit and feature data, we will now
try initializing some conservation planning problems. There are a lot of
different ways to initialize a conservation planning problem, so here we
will just showcase a few of the more commonly used methods. For an
exhaustive description of all the ways you can initialize a conservation
problem, see the help file for the <code>problem()</code> function.
First off, we will initialize a conservation planning problem using the
raster data.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a><span class="co"># create problem</span></span>
<span id="cb11-2"><a href="#cb11-2" tabindex="-1"></a>p1 <span class="ot">&lt;-</span> <span class="fu">problem</span>(sim_pu_raster, sim_features)</span>
<span id="cb11-3"><a href="#cb11-3" tabindex="-1"></a></span>
<span id="cb11-4"><a href="#cb11-4" tabindex="-1"></a><span class="co"># print problem</span></span>
<span id="cb11-5"><a href="#cb11-5" tabindex="-1"></a><span class="fu">print</span>(p1)</span></code></pre></div>
<pre><code>## A conservation problem (&lt;ConservationProblem&gt;)
## ├•data
## │├•features:    &quot;feature_1&quot;, &quot;feature_2&quot;, &quot;feature_3&quot;, &quot;feature_4&quot;, and &quot;feature_5&quot; (5 total)
## │└•planning units:
## │ ├•data:       &lt;SpatRaster&gt; (90 total)
## │ ├•costs:      continuous values (between 190.1328 and 215.8638)
## │ ├•extent:     0, 0, 1, 1 (xmin, ymin, xmax, ymax)
## │ └•CRS:        Undefined Cartesian SRS (projected)
## ├•formulation
## │├•objective:   none specified
## │├•penalties:   none specified
## │├•targets:     none specified
## │├•constraints: none specified
## │└•decisions:   binary decision
## └•optimization
##  ├•portfolio:   default portfolio
##  └•solver:      gurobi solver (`gap` = 0.1, `time_limit` = 2147483647, `first_feasible` = FALSE, …)
## # ℹ Use `summary(...)` to see complete formulation.</code></pre>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a><span class="co"># print number of planning units</span></span>
<span id="cb13-2"><a href="#cb13-2" tabindex="-1"></a><span class="fu">number_of_planning_units</span>(p1)</span></code></pre></div>
<pre><code>## [1] 90</code></pre>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" tabindex="-1"></a><span class="co"># print number of features</span></span>
<span id="cb15-2"><a href="#cb15-2" tabindex="-1"></a><span class="fu">number_of_features</span>(p1)</span></code></pre></div>
<pre><code>## [1] 5</code></pre>
<p>Generally, we recommend initializing problems using raster data where
possible. This is because the <code>problem()</code> function needs to
calculate the amount of each feature in each planning unit, and by
providing both the planning unit and feature data in raster format with
the same spatial resolution, extents, and coordinate systems, this means
that the <code>problem()</code> function does not need to do any
geoprocessing behind the scenes. But sometimes we can’t use raster
planning unit data, because our planning units aren’t equal-sized grid
cells. So, below is an example showing how we can initialize a
conservation planning problem using planning units that are formatted as
spatial vector data. Note that we could reduce run-time by pre-computing
the amount of each feature in each planning unit and storing the data in
the attribute table (e.g., by performing zonal statistics with
<em>R</em> or <em>ESRI ArcGIS</em>), and then passing in the names of
the columns as an argument to the <code>problem()</code> function (see
Examples section for <code>problem()</code> for details).</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" tabindex="-1"></a><span class="co"># create problem with spatial vector data</span></span>
<span id="cb17-2"><a href="#cb17-2" tabindex="-1"></a><span class="co"># note that we have to specify which column in the attribute table contains</span></span>
<span id="cb17-3"><a href="#cb17-3" tabindex="-1"></a><span class="co"># the cost data</span></span>
<span id="cb17-4"><a href="#cb17-4" tabindex="-1"></a>p2 <span class="ot">&lt;-</span> <span class="fu">problem</span>(sim_pu_polygons, sim_features, <span class="at">cost_column =</span> <span class="st">&quot;cost&quot;</span>)</span>
<span id="cb17-5"><a href="#cb17-5" tabindex="-1"></a></span>
<span id="cb17-6"><a href="#cb17-6" tabindex="-1"></a><span class="co"># print problem</span></span>
<span id="cb17-7"><a href="#cb17-7" tabindex="-1"></a><span class="fu">print</span>(p2)</span></code></pre></div>
<pre><code>## A conservation problem (&lt;ConservationProblem&gt;)
## ├•data
## │├•features:    &quot;feature_1&quot;, &quot;feature_2&quot;, &quot;feature_3&quot;, &quot;feature_4&quot;, and &quot;feature_5&quot; (5 total)
## │└•planning units:
## │ ├•data:       &lt;sftbl_dftbldata.frame&gt; (90 total)
## │ ├•costs:      continuous values (between 190.1328 and 215.8638)
## │ ├•extent:     0, 0, 1, 1 (xmin, ymin, xmax, ymax)
## │ └•CRS:        Undefined Cartesian SRS (projected)
## ├•formulation
## │├•objective:   none specified
## │├•penalties:   none specified
## │├•targets:     none specified
## │├•constraints: none specified
## │└•decisions:   binary decision
## └•optimization
##  ├•portfolio:   default portfolio
##  └•solver:      gurobi solver (`gap` = 0.1, `time_limit` = 2147483647, `first_feasible` = FALSE, …)
## # ℹ Use `summary(...)` to see complete formulation.</code></pre>
<p>We can also initialize a conservation planning problem using tabular
planning unit data (i.e., <code>data.frame</code> format). Since the
tabular planning unit data does not contain any spatial information, we
also have to provide the feature data in tabular format (i.e.,
<code>data.frame</code> format) and data showing the amount of each
feature in each planning unit in tabular format (i.e.,
<code>data.frame</code> format). The feature data must have an “id”
column containing a unique integer identifier for each feature, and the
planning unit by feature data must contain the following three columns:
<code>pu</code> corresponding to the planning unit identifiers,
<code>species</code> corresponding to the feature identifiers, and
<code>amount</code> showing the amount of a given feature in a given
planning unit.</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" tabindex="-1"></a><span class="co"># set file path for feature data</span></span>
<span id="cb19-2"><a href="#cb19-2" tabindex="-1"></a>spec_path <span class="ot">&lt;-</span> <span class="fu">system.file</span>(</span>
<span id="cb19-3"><a href="#cb19-3" tabindex="-1"></a>  <span class="st">&quot;extdata/marxan/input/spec.dat&quot;</span>, <span class="at">package =</span> <span class="st">&quot;prioritizr&quot;</span></span>
<span id="cb19-4"><a href="#cb19-4" tabindex="-1"></a>)</span>
<span id="cb19-5"><a href="#cb19-5" tabindex="-1"></a></span>
<span id="cb19-6"><a href="#cb19-6" tabindex="-1"></a><span class="co"># load in feature data</span></span>
<span id="cb19-7"><a href="#cb19-7" tabindex="-1"></a>spec_dat <span class="ot">&lt;-</span> data.table<span class="sc">::</span><span class="fu">fread</span>(spec_path, <span class="at">data.table =</span> <span class="cn">FALSE</span>)</span>
<span id="cb19-8"><a href="#cb19-8" tabindex="-1"></a></span>
<span id="cb19-9"><a href="#cb19-9" tabindex="-1"></a><span class="co"># print first six rows of the data</span></span>
<span id="cb19-10"><a href="#cb19-10" tabindex="-1"></a><span class="co"># note that it contains extra columns</span></span>
<span id="cb19-11"><a href="#cb19-11" tabindex="-1"></a><span class="fu">head</span>(spec_dat)</span></code></pre></div>
<pre><code>##   id prop spf   name
## 1 10  0.3   1  bird1
## 2 11  0.3   1  nvis2
## 3 12  0.3   1  nvis8
## 4 13  0.3   1  nvis9
## 5 14  0.3   1 nvis14
## 6 15  0.3   1 nvis20</code></pre>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" tabindex="-1"></a><span class="co"># set file path for planning unit vs. feature data</span></span>
<span id="cb21-2"><a href="#cb21-2" tabindex="-1"></a>puvspr_path <span class="ot">&lt;-</span> <span class="fu">system.file</span>(</span>
<span id="cb21-3"><a href="#cb21-3" tabindex="-1"></a>  <span class="st">&quot;extdata/marxan/input/puvspr.dat&quot;</span>, <span class="at">package =</span> <span class="st">&quot;prioritizr&quot;</span></span>
<span id="cb21-4"><a href="#cb21-4" tabindex="-1"></a>)</span>
<span id="cb21-5"><a href="#cb21-5" tabindex="-1"></a></span>
<span id="cb21-6"><a href="#cb21-6" tabindex="-1"></a><span class="co"># load in planning unit vs feature data</span></span>
<span id="cb21-7"><a href="#cb21-7" tabindex="-1"></a>puvspr_dat <span class="ot">&lt;-</span> data.table<span class="sc">::</span><span class="fu">fread</span>(puvspr_path, <span class="at">data.table =</span> <span class="cn">FALSE</span>)</span>
<span id="cb21-8"><a href="#cb21-8" tabindex="-1"></a></span>
<span id="cb21-9"><a href="#cb21-9" tabindex="-1"></a><span class="co"># print first six rows of the data</span></span>
<span id="cb21-10"><a href="#cb21-10" tabindex="-1"></a><span class="fu">head</span>(puvspr_dat)</span></code></pre></div>
<pre><code>##   species  pu     amount
## 1      26  56 120.344884
## 2      26  58  45.167010
## 3      26  84  68.047375
## 4      26  85   9.735624
## 5      26  86   7.803476
## 6      26 111 478.327417</code></pre>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" tabindex="-1"></a><span class="co"># create problem</span></span>
<span id="cb23-2"><a href="#cb23-2" tabindex="-1"></a>p3 <span class="ot">&lt;-</span> <span class="fu">problem</span>(pu_dat, spec_dat, <span class="at">cost_column =</span> <span class="st">&quot;cost&quot;</span>, <span class="at">rij =</span> puvspr_dat)</span>
<span id="cb23-3"><a href="#cb23-3" tabindex="-1"></a></span>
<span id="cb23-4"><a href="#cb23-4" tabindex="-1"></a><span class="co"># print problem</span></span>
<span id="cb23-5"><a href="#cb23-5" tabindex="-1"></a><span class="fu">print</span>(p3)</span></code></pre></div>
<pre><code>## A conservation problem (&lt;ConservationProblem&gt;)
## ├•data
## │├•features:    &quot;bird1&quot;, &quot;nvis2&quot;, &quot;nvis8&quot;, &quot;nvis9&quot;, &quot;nvis14&quot;, &quot;nvis20&quot;, … (17 total)
## │└•planning units:
## │ ├•data:       &lt;data.frame&gt; (1751 total)
## │ ├•costs:      continuous values (between 0 and 415692.1938)
## │ ├•extent:     NA
## │ └•CRS:        NA
## ├•formulation
## │├•objective:   none specified
## │├•penalties:   none specified
## │├•targets:     none specified
## │├•constraints: none specified
## │└•decisions:   binary decision
## └•optimization
##  ├•portfolio:   default portfolio
##  └•solver:      gurobi solver (`gap` = 0.1, `time_limit` = 2147483647, `first_feasible` = FALSE, …)
## # ℹ Use `summary(...)` to see complete formulation.</code></pre>
<p>For more information on initializing problems, please see the help
page for the <code>problem()</code> function (which you can open by
entering the code: <code>?problem</code>). Now that we have initialized
a conservation planning problem, we will show you how you can customize
it to suit the exact needs of your conservation planning scenario.
Although we initialized the conservation planning problems using several
different methods, moving forward, we will only use raster-based
planning unit data to keep things simple.</p>
</div>
<div id="add-an-objective" class="section level3">
<h3>Add an objective</h3>
<p>The next step is to add a primary objective to the problem. A problem
objective is used to specify the primary goal of the problem (i.e., the
quantity that is to be maximized or minimized). All conservation
planning problems involve minimizing or maximizing some kind of
objective. For instance, we might require a solution that conserves
enough habitat for each species while minimizing the overall cost of the
reserve network. Alternatively, we might require a solution that
maximizes the number of conserved species while ensuring that the cost
of the reserve network does not exceed the budget. Please note that
objectives are added in the same way regardless of the type of data used
to initialize the problem. The following objectives are available.</p>
<ul>
<li><strong>Minimum set objective</strong>: Minimize the cost of the
solution whilst ensuring that all targets are met <span class="citation">(Rodrigues <em>et al.</em> 2000)</span>. This objective
is similar to that used in <em>Marxan</em> <span class="citation">(Ball
<em>et al.</em> 2009)</span>. For example, we can add a minimum set
objective to a problem using the following code.</li>
</ul>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" tabindex="-1"></a><span class="co"># create a new problem that has the minimum set objective</span></span>
<span id="cb25-2"><a href="#cb25-2" tabindex="-1"></a>p3 <span class="ot">&lt;-</span></span>
<span id="cb25-3"><a href="#cb25-3" tabindex="-1"></a>  <span class="fu">problem</span>(sim_pu_raster, sim_features) <span class="sc">%&gt;%</span></span>
<span id="cb25-4"><a href="#cb25-4" tabindex="-1"></a>  <span class="fu">add_min_set_objective</span>()</span>
<span id="cb25-5"><a href="#cb25-5" tabindex="-1"></a></span>
<span id="cb25-6"><a href="#cb25-6" tabindex="-1"></a><span class="co"># print problem</span></span>
<span id="cb25-7"><a href="#cb25-7" tabindex="-1"></a><span class="fu">print</span>(p3)</span></code></pre></div>
<pre><code>## A conservation problem (&lt;ConservationProblem&gt;)
## ├•data
## │├•features:    &quot;feature_1&quot;, &quot;feature_2&quot;, &quot;feature_3&quot;, &quot;feature_4&quot;, and &quot;feature_5&quot; (5 total)
## │└•planning units:
## │ ├•data:       &lt;SpatRaster&gt; (90 total)
## │ ├•costs:      continuous values (between 190.1328 and 215.8638)
## │ ├•extent:     0, 0, 1, 1 (xmin, ymin, xmax, ymax)
## │ └•CRS:        Undefined Cartesian SRS (projected)
## ├•formulation
## │├•objective:   minimum set objective
## │├•penalties:   none specified
## │├•targets:     none specified
## │├•constraints: none specified
## │└•decisions:   binary decision
## └•optimization
##  ├•portfolio:   default portfolio
##  └•solver:      gurobi solver (`gap` = 0.1, `time_limit` = 2147483647, `first_feasible` = FALSE, …)
## # ℹ Use `summary(...)` to see complete formulation.</code></pre>
<ul>
<li><strong>Maximum cover objective</strong>: Represent at least one
instance of as many features as possible within a given budget <span class="citation">(Church <em>et al.</em> 1996)</span>.</li>
</ul>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" tabindex="-1"></a><span class="co"># create a new problem that has the maximum coverage objective and a budget</span></span>
<span id="cb27-2"><a href="#cb27-2" tabindex="-1"></a><span class="co"># of 5000</span></span>
<span id="cb27-3"><a href="#cb27-3" tabindex="-1"></a>p4 <span class="ot">&lt;-</span></span>
<span id="cb27-4"><a href="#cb27-4" tabindex="-1"></a>  <span class="fu">problem</span>(sim_pu_raster, sim_features) <span class="sc">%&gt;%</span></span>
<span id="cb27-5"><a href="#cb27-5" tabindex="-1"></a>  <span class="fu">add_max_cover_objective</span>(<span class="dv">5000</span>)</span>
<span id="cb27-6"><a href="#cb27-6" tabindex="-1"></a></span>
<span id="cb27-7"><a href="#cb27-7" tabindex="-1"></a><span class="co"># print problem</span></span>
<span id="cb27-8"><a href="#cb27-8" tabindex="-1"></a><span class="fu">print</span>(p4)</span></code></pre></div>
<pre><code>## A conservation problem (&lt;ConservationProblem&gt;)
## ├•data
## │├•features:    &quot;feature_1&quot;, &quot;feature_2&quot;, &quot;feature_3&quot;, &quot;feature_4&quot;, and &quot;feature_5&quot; (5 total)
## │└•planning units:
## │ ├•data:       &lt;SpatRaster&gt; (90 total)
## │ ├•costs:      continuous values (between 190.1328 and 215.8638)
## │ ├•extent:     0, 0, 1, 1 (xmin, ymin, xmax, ymax)
## │ └•CRS:        Undefined Cartesian SRS (projected)
## ├•formulation
## │├•objective:   maximum coverage objective (`budget` = 5000)
## │├•penalties:   none specified
## │├•targets:     none specified
## │├•constraints: none specified
## │└•decisions:   binary decision
## └•optimization
##  ├•portfolio:   default portfolio
##  └•solver:      gurobi solver (`gap` = 0.1, `time_limit` = 2147483647, `first_feasible` = FALSE, …)
## # ℹ Use `summary(...)` to see complete formulation.</code></pre>
<ul>
<li><strong>Maximum features objective</strong>: Fulfill as many targets
as possible while ensuring that the cost of the solution does not exceed
a budget <span class="citation">(inspired by Cabeza &amp; Moilanen
2001)</span>. This object is similar to the maximum cover objective
except that we have the option of later specifying targets for each
feature. In practice, this objective is more useful than the maximum
cover objective because features often require a certain amount of area
for them to persist and simply capturing a single instance of habitat
for each feature is generally unlikely to enhance their long-term
persistence.</li>
</ul>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" tabindex="-1"></a><span class="co"># create a new problem that has the maximum features objective and a budget</span></span>
<span id="cb29-2"><a href="#cb29-2" tabindex="-1"></a><span class="co"># of 5000</span></span>
<span id="cb29-3"><a href="#cb29-3" tabindex="-1"></a>p5 <span class="ot">&lt;-</span></span>
<span id="cb29-4"><a href="#cb29-4" tabindex="-1"></a>  <span class="fu">problem</span>(sim_pu_raster, sim_features) <span class="sc">%&gt;%</span></span>
<span id="cb29-5"><a href="#cb29-5" tabindex="-1"></a>  <span class="fu">add_max_features_objective</span>(<span class="at">budget =</span> <span class="dv">5000</span>)</span>
<span id="cb29-6"><a href="#cb29-6" tabindex="-1"></a></span>
<span id="cb29-7"><a href="#cb29-7" tabindex="-1"></a><span class="co"># print problem</span></span>
<span id="cb29-8"><a href="#cb29-8" tabindex="-1"></a><span class="fu">print</span>(p5)</span></code></pre></div>
<pre><code>## A conservation problem (&lt;ConservationProblem&gt;)
## ├•data
## │├•features:    &quot;feature_1&quot;, &quot;feature_2&quot;, &quot;feature_3&quot;, &quot;feature_4&quot;, and &quot;feature_5&quot; (5 total)
## │└•planning units:
## │ ├•data:       &lt;SpatRaster&gt; (90 total)
## │ ├•costs:      continuous values (between 190.1328 and 215.8638)
## │ ├•extent:     0, 0, 1, 1 (xmin, ymin, xmax, ymax)
## │ └•CRS:        Undefined Cartesian SRS (projected)
## ├•formulation
## │├•objective:   maximum representation objective (`budget` = 5000)
## │├•penalties:   none specified
## │├•targets:     none specified
## │├•constraints: none specified
## │└•decisions:   binary decision
## └•optimization
##  ├•portfolio:   default portfolio
##  └•solver:      gurobi solver (`gap` = 0.1, `time_limit` = 2147483647, `first_feasible` = FALSE, …)
## # ℹ Use `summary(...)` to see complete formulation.</code></pre>
<ul>
<li><strong>Minimum shortfall objective</strong>: Minimize the overall
(weighted sum) shortfall for as many targets as possible while ensuring
that the cost of the solution does not exceed a budget. In practice,
this objective is useful when there is a large amount of left-over
budget when using the maximum feature representation objective and the
remaining funds need to be allocated to places that will enhance the
representation of features with unmet targets.</li>
</ul>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" tabindex="-1"></a><span class="co"># create a new problem that has the minimum shortfall objective and a budget</span></span>
<span id="cb31-2"><a href="#cb31-2" tabindex="-1"></a><span class="co"># of 5000</span></span>
<span id="cb31-3"><a href="#cb31-3" tabindex="-1"></a>p6 <span class="ot">&lt;-</span></span>
<span id="cb31-4"><a href="#cb31-4" tabindex="-1"></a>  <span class="fu">problem</span>(sim_pu_raster, sim_features) <span class="sc">%&gt;%</span></span>
<span id="cb31-5"><a href="#cb31-5" tabindex="-1"></a>  <span class="fu">add_min_shortfall_objective</span>(<span class="at">budget =</span> <span class="dv">5000</span>)</span>
<span id="cb31-6"><a href="#cb31-6" tabindex="-1"></a></span>
<span id="cb31-7"><a href="#cb31-7" tabindex="-1"></a><span class="co"># print problem</span></span>
<span id="cb31-8"><a href="#cb31-8" tabindex="-1"></a><span class="fu">print</span>(p6)</span></code></pre></div>
<pre><code>## A conservation problem (&lt;ConservationProblem&gt;)
## ├•data
## │├•features:    &quot;feature_1&quot;, &quot;feature_2&quot;, &quot;feature_3&quot;, &quot;feature_4&quot;, and &quot;feature_5&quot; (5 total)
## │└•planning units:
## │ ├•data:       &lt;SpatRaster&gt; (90 total)
## │ ├•costs:      continuous values (between 190.1328 and 215.8638)
## │ ├•extent:     0, 0, 1, 1 (xmin, ymin, xmax, ymax)
## │ └•CRS:        Undefined Cartesian SRS (projected)
## ├•formulation
## │├•objective:   minimum shortfall objective (`budget` = 5000)
## │├•penalties:   none specified
## │├•targets:     none specified
## │├•constraints: none specified
## │└•decisions:   binary decision
## └•optimization
##  ├•portfolio:   default portfolio
##  └•solver:      gurobi solver (`gap` = 0.1, `time_limit` = 2147483647, `first_feasible` = FALSE, …)
## # ℹ Use `summary(...)` to see complete formulation.</code></pre>
<ul>
<li><strong>Minimum largest shortfall objective</strong>: Minimize the
largest (maximum) shortfall while ensuring that the cost of the solution
does not exceed a budget. In practice, this objective useful when the
minimum shortfall objective returns solutions that focus too much on
representing a small number of features (e.g., because they occur in
much cheaper planning units), and solutions are needed to spread
conservation effort out more evenly among all features—even if it means
that all features will have (relatively) poor representation.</li>
</ul>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" tabindex="-1"></a><span class="co"># create a new problem that has the minimum largest shortfall objective and a</span></span>
<span id="cb33-2"><a href="#cb33-2" tabindex="-1"></a><span class="co"># budget of 5000</span></span>
<span id="cb33-3"><a href="#cb33-3" tabindex="-1"></a>p7 <span class="ot">&lt;-</span></span>
<span id="cb33-4"><a href="#cb33-4" tabindex="-1"></a>  <span class="fu">problem</span>(sim_pu_raster, sim_features) <span class="sc">%&gt;%</span></span>
<span id="cb33-5"><a href="#cb33-5" tabindex="-1"></a>  <span class="fu">add_min_largest_shortfall_objective</span>(<span class="at">budget =</span> <span class="dv">5000</span>)</span>
<span id="cb33-6"><a href="#cb33-6" tabindex="-1"></a></span>
<span id="cb33-7"><a href="#cb33-7" tabindex="-1"></a><span class="co"># print problem</span></span>
<span id="cb33-8"><a href="#cb33-8" tabindex="-1"></a><span class="fu">print</span>(p7)</span></code></pre></div>
<pre><code>## A conservation problem (&lt;ConservationProblem&gt;)
## ├•data
## │├•features:    &quot;feature_1&quot;, &quot;feature_2&quot;, &quot;feature_3&quot;, &quot;feature_4&quot;, and &quot;feature_5&quot; (5 total)
## │└•planning units:
## │ ├•data:       &lt;SpatRaster&gt; (90 total)
## │ ├•costs:      continuous values (between 190.1328 and 215.8638)
## │ ├•extent:     0, 0, 1, 1 (xmin, ymin, xmax, ymax)
## │ └•CRS:        Undefined Cartesian SRS (projected)
## ├•formulation
## │├•objective:   minimum largest shortfall objective (`budget` = 5000)
## │├•penalties:   none specified
## │├•targets:     none specified
## │├•constraints: none specified
## │└•decisions:   binary decision
## └•optimization
##  ├•portfolio:   default portfolio
##  └•solver:      gurobi solver (`gap` = 0.1, `time_limit` = 2147483647, `first_feasible` = FALSE, …)
## # ℹ Use `summary(...)` to see complete formulation.</code></pre>
<ul>
<li><strong>Maximum phylogenetic diversity objective</strong>: Maximize
the phylogenetic diversity of the features represented in the solution
subject to a budget <span class="citation">(inspired by Faith 1992;
Rodrigues &amp; Gaston 2002)</span>. This objective is similar to the
maximum features objective except that emphasis is placed on protecting
features which are associated with a diverse range of evolutionary
histories. The package contains a simulated phylogeny that can be used
with the simulated feature data (<code>sim_phylogny</code>).</li>
</ul>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" tabindex="-1"></a><span class="co"># load simulated phylogeny data</span></span>
<span id="cb35-2"><a href="#cb35-2" tabindex="-1"></a>sim_phylogeny <span class="ot">&lt;-</span> <span class="fu">get_sim_phylogeny</span>()</span>
<span id="cb35-3"><a href="#cb35-3" tabindex="-1"></a></span>
<span id="cb35-4"><a href="#cb35-4" tabindex="-1"></a><span class="co"># create a new problem that has the maximum phylogenetic diversity</span></span>
<span id="cb35-5"><a href="#cb35-5" tabindex="-1"></a><span class="co"># objective and a budget of 5000</span></span>
<span id="cb35-6"><a href="#cb35-6" tabindex="-1"></a>p8 <span class="ot">&lt;-</span></span>
<span id="cb35-7"><a href="#cb35-7" tabindex="-1"></a>  <span class="fu">problem</span>(sim_pu_raster, sim_features) <span class="sc">%&gt;%</span></span>
<span id="cb35-8"><a href="#cb35-8" tabindex="-1"></a>  <span class="fu">add_max_phylo_div_objective</span>(<span class="at">budget =</span> <span class="dv">5000</span>, <span class="at">tree =</span> sim_phylogeny)</span>
<span id="cb35-9"><a href="#cb35-9" tabindex="-1"></a></span>
<span id="cb35-10"><a href="#cb35-10" tabindex="-1"></a><span class="co"># print problem</span></span>
<span id="cb35-11"><a href="#cb35-11" tabindex="-1"></a><span class="fu">print</span>(p8)</span></code></pre></div>
<pre><code>## A conservation problem (&lt;ConservationProblem&gt;)
## ├•data
## │├•features:    &quot;feature_1&quot;, &quot;feature_2&quot;, &quot;feature_3&quot;, &quot;feature_4&quot;, and &quot;feature_5&quot; (5 total)
## │└•planning units:
## │ ├•data:       &lt;SpatRaster&gt; (90 total)
## │ ├•costs:      continuous values (between 190.1328 and 215.8638)
## │ ├•extent:     0, 0, 1, 1 (xmin, ymin, xmax, ymax)
## │ └•CRS:        Undefined Cartesian SRS (projected)
## ├•formulation
## │├•objective:   phylogenetic diversity objective (`budget` = 5000, `tree` = phylogenetic tree (branch lengths between 0.041 and 1.4211))
## │├•penalties:   none specified
## │├•targets:     none specified
## │├•constraints: none specified
## │└•decisions:   binary decision
## └•optimization
##  ├•portfolio:   default portfolio
##  └•solver:      gurobi solver (`gap` = 0.1, `time_limit` = 2147483647, `first_feasible` = FALSE, …)
## # ℹ Use `summary(...)` to see complete formulation.</code></pre>
<ul>
<li><strong>Maximum phylogenetic endemism objective</strong>: Maximize
the phylogenetic endemism of the features represented in the solution
subject to a budget <span class="citation">(inspired by Faith 1992;
Rodrigues &amp; Gaston 2002; Rosauer <em>et al.</em> 2009)</span>. This
objective is similar to the maximum phylogenetic diversity except that
emphasis is placed on conserving features that are associated with
geographically restricted periods of evolutionary history rather than a
diverse range of evolutionary histories.</li>
</ul>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" tabindex="-1"></a><span class="co"># load simulated phylogeny data</span></span>
<span id="cb37-2"><a href="#cb37-2" tabindex="-1"></a>sim_phylogeny <span class="ot">&lt;-</span> <span class="fu">get_sim_phylogeny</span>()</span>
<span id="cb37-3"><a href="#cb37-3" tabindex="-1"></a></span>
<span id="cb37-4"><a href="#cb37-4" tabindex="-1"></a><span class="co"># create a new problem that has the maximum phylogenetic diversity</span></span>
<span id="cb37-5"><a href="#cb37-5" tabindex="-1"></a><span class="co"># objective and a budget of 5000</span></span>
<span id="cb37-6"><a href="#cb37-6" tabindex="-1"></a>p9 <span class="ot">&lt;-</span></span>
<span id="cb37-7"><a href="#cb37-7" tabindex="-1"></a>  <span class="fu">problem</span>(sim_pu_raster, sim_features) <span class="sc">%&gt;%</span></span>
<span id="cb37-8"><a href="#cb37-8" tabindex="-1"></a>  <span class="fu">add_max_phylo_end_objective</span>(<span class="at">budget =</span> <span class="dv">5000</span>, <span class="at">tree =</span> sim_phylogeny)</span>
<span id="cb37-9"><a href="#cb37-9" tabindex="-1"></a></span>
<span id="cb37-10"><a href="#cb37-10" tabindex="-1"></a><span class="co"># print problem</span></span>
<span id="cb37-11"><a href="#cb37-11" tabindex="-1"></a><span class="fu">print</span>(p9)</span></code></pre></div>
<pre><code>## A conservation problem (&lt;ConservationProblem&gt;)
## ├•data
## │├•features:    &quot;feature_1&quot;, &quot;feature_2&quot;, &quot;feature_3&quot;, &quot;feature_4&quot;, and &quot;feature_5&quot; (5 total)
## │└•planning units:
## │ ├•data:       &lt;SpatRaster&gt; (90 total)
## │ ├•costs:      continuous values (between 190.1328 and 215.8638)
## │ ├•extent:     0, 0, 1, 1 (xmin, ymin, xmax, ymax)
## │ └•CRS:        Undefined Cartesian SRS (projected)
## ├•formulation
## │├•objective:   phylogenetic endemism objective (`budget` = 5000, `tree` = phylogenetic tree (branch lengths between 0.041 and 1.4211))
## │├•penalties:   none specified
## │├•targets:     none specified
## │├•constraints: none specified
## │└•decisions:   binary decision
## └•optimization
##  ├•portfolio:   default portfolio
##  └•solver:      gurobi solver (`gap` = 0.1, `time_limit` = 2147483647, `first_feasible` = FALSE, …)
## # ℹ Use `summary(...)` to see complete formulation.</code></pre>
<ul>
<li><strong>Maximum utility objective</strong>: Secure as much of the
features as possible without exceeding a budget. This objective is
functionally equivalent to selecting the planning units with the
greatest amounts of each feature (e.g., species richness). Generally, we
don’t encourage the use of this objective because it will only rarely
identify complementary solutions–solutions which adequately conserve a
range of different features—except perhaps to explore trade-offs or
provide a baseline solution with which to compare other solutions.</li>
</ul>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" tabindex="-1"></a><span class="co"># create a new problem that has the maximum utility objective and a budget</span></span>
<span id="cb39-2"><a href="#cb39-2" tabindex="-1"></a><span class="co"># of 5000</span></span>
<span id="cb39-3"><a href="#cb39-3" tabindex="-1"></a>p10 <span class="ot">&lt;-</span></span>
<span id="cb39-4"><a href="#cb39-4" tabindex="-1"></a>  <span class="fu">problem</span>(sim_pu_raster, sim_features) <span class="sc">%&gt;%</span></span>
<span id="cb39-5"><a href="#cb39-5" tabindex="-1"></a>  <span class="fu">add_max_utility_objective</span>(<span class="at">budget =</span> <span class="dv">5000</span>)</span>
<span id="cb39-6"><a href="#cb39-6" tabindex="-1"></a></span>
<span id="cb39-7"><a href="#cb39-7" tabindex="-1"></a><span class="co"># print problem</span></span>
<span id="cb39-8"><a href="#cb39-8" tabindex="-1"></a><span class="fu">print</span>(p10)</span></code></pre></div>
<pre><code>## A conservation problem (&lt;ConservationProblem&gt;)
## ├•data
## │├•features:    &quot;feature_1&quot;, &quot;feature_2&quot;, &quot;feature_3&quot;, &quot;feature_4&quot;, and &quot;feature_5&quot; (5 total)
## │└•planning units:
## │ ├•data:       &lt;SpatRaster&gt; (90 total)
## │ ├•costs:      continuous values (between 190.1328 and 215.8638)
## │ ├•extent:     0, 0, 1, 1 (xmin, ymin, xmax, ymax)
## │ └•CRS:        Undefined Cartesian SRS (projected)
## ├•formulation
## │├•objective:   maximum utility objective (`budget` = 5000)
## │├•penalties:   none specified
## │├•targets:     none specified
## │├•constraints: none specified
## │└•decisions:   binary decision
## └•optimization
##  ├•portfolio:   default portfolio
##  └•solver:      gurobi solver (`gap` = 0.1, `time_limit` = 2147483647, `first_feasible` = FALSE, …)
## # ℹ Use `summary(...)` to see complete formulation.</code></pre>
</div>
<div id="add-targets" class="section level3">
<h3>Add targets</h3>
<p>Most conservation planning problems require targets. Targets are used
to specify the minimum amount or proportion of a feature’s distribution
that needs to be protected in the solution. For example, we may want to
develop a reserve network that will secure 20% of the distribution for
each feature for minimal cost. The following methods are available for
specifying targets.</p>
<ul>
<li><strong>Absolute targets</strong>: Targets are expressed as the
total amount of each feature in the study area that need to be secured.
For example, if we had binary feature data that showed the absence or
presence of suitable habitat across the study area, we could set an
absolute target of 5 to mean that we require 5 planning units with
suitable habitat in the solution.</li>
</ul>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" tabindex="-1"></a><span class="co"># create a problem with targets which specify that the solution must conserve</span></span>
<span id="cb41-2"><a href="#cb41-2" tabindex="-1"></a><span class="co"># a sum total of 3 units of suitable habitat for each feature</span></span>
<span id="cb41-3"><a href="#cb41-3" tabindex="-1"></a>p11 <span class="ot">&lt;-</span></span>
<span id="cb41-4"><a href="#cb41-4" tabindex="-1"></a>  <span class="fu">problem</span>(sim_pu_raster, sim_features) <span class="sc">%&gt;%</span></span>
<span id="cb41-5"><a href="#cb41-5" tabindex="-1"></a>  <span class="fu">add_min_set_objective</span>() <span class="sc">%&gt;%</span></span>
<span id="cb41-6"><a href="#cb41-6" tabindex="-1"></a>  <span class="fu">add_absolute_targets</span>(<span class="dv">3</span>)</span>
<span id="cb41-7"><a href="#cb41-7" tabindex="-1"></a></span>
<span id="cb41-8"><a href="#cb41-8" tabindex="-1"></a><span class="co"># print problem</span></span>
<span id="cb41-9"><a href="#cb41-9" tabindex="-1"></a><span class="fu">print</span>(p11)</span></code></pre></div>
<pre><code>## A conservation problem (&lt;ConservationProblem&gt;)
## ├•data
## │├•features:    &quot;feature_1&quot;, &quot;feature_2&quot;, &quot;feature_3&quot;, &quot;feature_4&quot;, and &quot;feature_5&quot; (5 total)
## │└•planning units:
## │ ├•data:       &lt;SpatRaster&gt; (90 total)
## │ ├•costs:      continuous values (between 190.1328 and 215.8638)
## │ ├•extent:     0, 0, 1, 1 (xmin, ymin, xmax, ymax)
## │ └•CRS:        Undefined Cartesian SRS (projected)
## ├•formulation
## │├•objective:   minimum set objective
## │├•penalties:   none specified
## │├•targets:     absolute targets (between 3 and 3)
## │├•constraints: none specified
## │└•decisions:   binary decision
## └•optimization
##  ├•portfolio:   default portfolio
##  └•solver:      gurobi solver (`gap` = 0.1, `time_limit` = 2147483647, `first_feasible` = FALSE, …)
## # ℹ Use `summary(...)` to see complete formulation.</code></pre>
<ul>
<li><strong>Relative targets</strong>: Targets are set as a proportion
(between 0 and 1) of the total amount of each feature in the study area.
For example, if we had binary feature data and the feature occupied a
total of 20 planning units in the study area, we could set a relative
target of 0.5 (i.e., 50%) to specify that the solution must secure 10
planning units for the feature. We could alternatively specify an
absolute target of 10 to achieve the same result, but sometimes
proportions are easier to work with.</li>
</ul>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" tabindex="-1"></a><span class="co"># create a problem with the minimum set objective and relative targets of 10 %</span></span>
<span id="cb43-2"><a href="#cb43-2" tabindex="-1"></a><span class="co"># for each feature</span></span>
<span id="cb43-3"><a href="#cb43-3" tabindex="-1"></a>p12 <span class="ot">&lt;-</span></span>
<span id="cb43-4"><a href="#cb43-4" tabindex="-1"></a>  <span class="fu">problem</span>(sim_pu_raster, sim_features) <span class="sc">%&gt;%</span></span>
<span id="cb43-5"><a href="#cb43-5" tabindex="-1"></a>  <span class="fu">add_min_set_objective</span>() <span class="sc">%&gt;%</span></span>
<span id="cb43-6"><a href="#cb43-6" tabindex="-1"></a>  <span class="fu">add_relative_targets</span>(<span class="fl">0.1</span>)</span>
<span id="cb43-7"><a href="#cb43-7" tabindex="-1"></a></span>
<span id="cb43-8"><a href="#cb43-8" tabindex="-1"></a><span class="co"># print problem</span></span>
<span id="cb43-9"><a href="#cb43-9" tabindex="-1"></a><span class="fu">print</span>(p12)</span></code></pre></div>
<pre><code>## A conservation problem (&lt;ConservationProblem&gt;)
## ├•data
## │├•features:    &quot;feature_1&quot;, &quot;feature_2&quot;, &quot;feature_3&quot;, &quot;feature_4&quot;, and &quot;feature_5&quot; (5 total)
## │└•planning units:
## │ ├•data:       &lt;SpatRaster&gt; (90 total)
## │ ├•costs:      continuous values (between 190.1328 and 215.8638)
## │ ├•extent:     0, 0, 1, 1 (xmin, ymin, xmax, ymax)
## │ └•CRS:        Undefined Cartesian SRS (projected)
## ├•formulation
## │├•objective:   minimum set objective
## │├•penalties:   none specified
## │├•targets:     relative targets (between 0.1 and 0.1)
## │├•constraints: none specified
## │└•decisions:   binary decision
## └•optimization
##  ├•portfolio:   default portfolio
##  └•solver:      gurobi solver (`gap` = 0.1, `time_limit` = 2147483647, `first_feasible` = FALSE, …)
## # ℹ Use `summary(...)` to see complete formulation.</code></pre>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" tabindex="-1"></a><span class="co"># create a problem with targets which specify that we need 10 % of the habitat</span></span>
<span id="cb45-2"><a href="#cb45-2" tabindex="-1"></a><span class="co"># for the first feature, 15 % for the second feature, 20 % for the third feature</span></span>
<span id="cb45-3"><a href="#cb45-3" tabindex="-1"></a><span class="co"># 25 % for the fourth feature and 30 % of the habitat for the fifth feature</span></span>
<span id="cb45-4"><a href="#cb45-4" tabindex="-1"></a>targets <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fl">0.1</span>, <span class="fl">0.15</span>, <span class="fl">0.2</span>, <span class="fl">0.25</span>, <span class="fl">0.3</span>)</span>
<span id="cb45-5"><a href="#cb45-5" tabindex="-1"></a>p13 <span class="ot">&lt;-</span></span>
<span id="cb45-6"><a href="#cb45-6" tabindex="-1"></a>  <span class="fu">problem</span>(sim_pu_raster, sim_features) <span class="sc">%&gt;%</span></span>
<span id="cb45-7"><a href="#cb45-7" tabindex="-1"></a>  <span class="fu">add_min_set_objective</span>() <span class="sc">%&gt;%</span></span>
<span id="cb45-8"><a href="#cb45-8" tabindex="-1"></a>  <span class="fu">add_relative_targets</span>(targets)</span>
<span id="cb45-9"><a href="#cb45-9" tabindex="-1"></a></span>
<span id="cb45-10"><a href="#cb45-10" tabindex="-1"></a><span class="co"># print problem</span></span>
<span id="cb45-11"><a href="#cb45-11" tabindex="-1"></a><span class="fu">print</span>(p13)</span></code></pre></div>
<pre><code>## A conservation problem (&lt;ConservationProblem&gt;)
## ├•data
## │├•features:    &quot;feature_1&quot;, &quot;feature_2&quot;, &quot;feature_3&quot;, &quot;feature_4&quot;, and &quot;feature_5&quot; (5 total)
## │└•planning units:
## │ ├•data:       &lt;SpatRaster&gt; (90 total)
## │ ├•costs:      continuous values (between 190.1328 and 215.8638)
## │ ├•extent:     0, 0, 1, 1 (xmin, ymin, xmax, ymax)
## │ └•CRS:        Undefined Cartesian SRS (projected)
## ├•formulation
## │├•objective:   minimum set objective
## │├•penalties:   none specified
## │├•targets:     relative targets (between 0.1 and 0.3)
## │├•constraints: none specified
## │└•decisions:   binary decision
## └•optimization
##  ├•portfolio:   default portfolio
##  └•solver:      gurobi solver (`gap` = 0.1, `time_limit` = 2147483647, `first_feasible` = FALSE, …)
## # ℹ Use `summary(...)` to see complete formulation.</code></pre>
<ul>
<li><strong>Log-linear targets</strong>: Targets are expressed using
scaling factors and log-linear interpolation. This method for specifying
targets is commonly used for global prioritization analyses <span class="citation">(Rodrigues <em>et al.</em> 2004)</span>.</li>
</ul>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" tabindex="-1"></a><span class="co"># create problem with added log-linear targets</span></span>
<span id="cb47-2"><a href="#cb47-2" tabindex="-1"></a>p14 <span class="ot">&lt;-</span></span>
<span id="cb47-3"><a href="#cb47-3" tabindex="-1"></a>  <span class="fu">problem</span>(sim_pu_raster, sim_features) <span class="sc">%&gt;%</span></span>
<span id="cb47-4"><a href="#cb47-4" tabindex="-1"></a>  <span class="fu">add_min_set_objective</span>() <span class="sc">%&gt;%</span></span>
<span id="cb47-5"><a href="#cb47-5" tabindex="-1"></a>  <span class="fu">add_loglinear_targets</span>(<span class="dv">10</span>, <span class="fl">0.9</span>, <span class="dv">100</span>, <span class="fl">0.2</span>)</span>
<span id="cb47-6"><a href="#cb47-6" tabindex="-1"></a></span>
<span id="cb47-7"><a href="#cb47-7" tabindex="-1"></a><span class="co"># print problem</span></span>
<span id="cb47-8"><a href="#cb47-8" tabindex="-1"></a><span class="fu">print</span>(p14)</span></code></pre></div>
<pre><code>## A conservation problem (&lt;ConservationProblem&gt;)
## ├•data
## │├•features:    &quot;feature_1&quot;, &quot;feature_2&quot;, &quot;feature_3&quot;, &quot;feature_4&quot;, and &quot;feature_5&quot; (5 total)
## │└•planning units:
## │ ├•data:       &lt;SpatRaster&gt; (90 total)
## │ ├•costs:      continuous values (between 190.1328 and 215.8638)
## │ ├•extent:     0, 0, 1, 1 (xmin, ymin, xmax, ymax)
## │ └•CRS:        Undefined Cartesian SRS (projected)
## ├•formulation
## │├•objective:   minimum set objective
## │├•penalties:   none specified
## │├•targets:     absolute targets (between 17.2905 and 21.5906)
## │├•constraints: none specified
## │└•decisions:   binary decision
## └•optimization
##  ├•portfolio:   default portfolio
##  └•solver:      gurobi solver (`gap` = 0.1, `time_limit` = 2147483647, `first_feasible` = FALSE, …)
## # ℹ Use `summary(...)` to see complete formulation.</code></pre>
<ul>
<li><strong>Manual targets</strong>: Targets are manually specified.
This is only really recommended for advanced users or problems that
involve multiple management zones. See the <a href="management_zones_tutorial.html"><em>Management zones
tutorial</em></a> for more information on these targets.</li>
</ul>
<p>As with the functions for specifying the objective of a problem, if
we try adding multiple targets to a problem, only the most recently
added set of targets are used.</p>
</div>
<div id="add-constraints" class="section level3">
<h3>Add constraints</h3>
<p>A constraint can be added to a conservation planning problem to
ensure that all solutions exhibit a specific property. For example, they
can be used to make sure that all solutions select a specific planning
unit or that all selected planning units in the solution follow a
certain configuration. The following constraints are available.</p>
<ul>
<li><strong>Locked in constraints</strong>: Add constraints to ensure
that certain planning units are prioritized in the solution. For
example, it may be desirable to lock in planning units that are inside
existing protected areas so that the solution fills in the gaps in the
existing reserve network.</li>
</ul>
<div class="sourceCode" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" tabindex="-1"></a><span class="co"># create problem with constraints which specify that the first planning unit</span></span>
<span id="cb49-2"><a href="#cb49-2" tabindex="-1"></a><span class="co"># must be selected in the solution</span></span>
<span id="cb49-3"><a href="#cb49-3" tabindex="-1"></a>p15 <span class="ot">&lt;-</span></span>
<span id="cb49-4"><a href="#cb49-4" tabindex="-1"></a>  <span class="fu">problem</span>(sim_pu_raster, sim_features) <span class="sc">%&gt;%</span></span>
<span id="cb49-5"><a href="#cb49-5" tabindex="-1"></a>  <span class="fu">add_min_set_objective</span>() <span class="sc">%&gt;%</span></span>
<span id="cb49-6"><a href="#cb49-6" tabindex="-1"></a>  <span class="fu">add_relative_targets</span>(<span class="fl">0.1</span>) <span class="sc">%&gt;%</span></span>
<span id="cb49-7"><a href="#cb49-7" tabindex="-1"></a>  <span class="fu">add_locked_in_constraints</span>(<span class="dv">1</span>)</span>
<span id="cb49-8"><a href="#cb49-8" tabindex="-1"></a></span>
<span id="cb49-9"><a href="#cb49-9" tabindex="-1"></a><span class="co"># print problem</span></span>
<span id="cb49-10"><a href="#cb49-10" tabindex="-1"></a><span class="fu">print</span>(p15)</span></code></pre></div>
<pre><code>## A conservation problem (&lt;ConservationProblem&gt;)
## ├•data
## │├•features:    &quot;feature_1&quot;, &quot;feature_2&quot;, &quot;feature_3&quot;, &quot;feature_4&quot;, and &quot;feature_5&quot; (5 total)
## │└•planning units:
## │ ├•data:       &lt;SpatRaster&gt; (90 total)
## │ ├•costs:      continuous values (between 190.1328 and 215.8638)
## │ ├•extent:     0, 0, 1, 1 (xmin, ymin, xmax, ymax)
## │ └•CRS:        Undefined Cartesian SRS (projected)
## ├•formulation
## │├•objective:   minimum set objective
## │├•penalties:   none specified
## │├•targets:     relative targets (between 0.1 and 0.1)
## │├•constraints:
## ││└•1:          locked in constraints (1 planning units)
## │└•decisions:   binary decision
## └•optimization
##  ├•portfolio:   default portfolio
##  └•solver:      gurobi solver (`gap` = 0.1, `time_limit` = 2147483647, `first_feasible` = FALSE, …)
## # ℹ Use `summary(...)` to see complete formulation.</code></pre>
<ul>
<li><strong>Locked out constraints</strong>: Add constraints to ensure
that certain planning units are not prioritized in the solution. For
example, it may be useful to lock out planning units that have been
degraded and are not suitable for conserving species.</li>
</ul>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" tabindex="-1"></a><span class="co"># create problem with constraints which specify that the second planning unit</span></span>
<span id="cb51-2"><a href="#cb51-2" tabindex="-1"></a><span class="co"># must not be selected in the solution</span></span>
<span id="cb51-3"><a href="#cb51-3" tabindex="-1"></a>p16 <span class="ot">&lt;-</span></span>
<span id="cb51-4"><a href="#cb51-4" tabindex="-1"></a>  <span class="fu">problem</span>(sim_pu_raster, sim_features) <span class="sc">%&gt;%</span></span>
<span id="cb51-5"><a href="#cb51-5" tabindex="-1"></a>  <span class="fu">add_min_set_objective</span>() <span class="sc">%&gt;%</span></span>
<span id="cb51-6"><a href="#cb51-6" tabindex="-1"></a>  <span class="fu">add_relative_targets</span>(<span class="fl">0.1</span>) <span class="sc">%&gt;%</span></span>
<span id="cb51-7"><a href="#cb51-7" tabindex="-1"></a>  <span class="fu">add_locked_out_constraints</span>(<span class="dv">2</span>)</span>
<span id="cb51-8"><a href="#cb51-8" tabindex="-1"></a></span>
<span id="cb51-9"><a href="#cb51-9" tabindex="-1"></a><span class="co"># print problem</span></span>
<span id="cb51-10"><a href="#cb51-10" tabindex="-1"></a><span class="fu">print</span>(p16)</span></code></pre></div>
<pre><code>## A conservation problem (&lt;ConservationProblem&gt;)
## ├•data
## │├•features:    &quot;feature_1&quot;, &quot;feature_2&quot;, &quot;feature_3&quot;, &quot;feature_4&quot;, and &quot;feature_5&quot; (5 total)
## │└•planning units:
## │ ├•data:       &lt;SpatRaster&gt; (90 total)
## │ ├•costs:      continuous values (between 190.1328 and 215.8638)
## │ ├•extent:     0, 0, 1, 1 (xmin, ymin, xmax, ymax)
## │ └•CRS:        Undefined Cartesian SRS (projected)
## ├•formulation
## │├•objective:   minimum set objective
## │├•penalties:   none specified
## │├•targets:     relative targets (between 0.1 and 0.1)
## │├•constraints:
## ││└•1:          locked out constraints (1 planning units)
## │└•decisions:   binary decision
## └•optimization
##  ├•portfolio:   default portfolio
##  └•solver:      gurobi solver (`gap` = 0.1, `time_limit` = 2147483647, `first_feasible` = FALSE, …)
## # ℹ Use `summary(...)` to see complete formulation.</code></pre>
<ul>
<li><strong>Neighbor constraints</strong>: Add constraints to a
conservation problem to ensure that all selected planning units have at
least a certain number of neighbors.</li>
</ul>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" tabindex="-1"></a><span class="co"># create problem with constraints which specify that all selected planning units</span></span>
<span id="cb53-2"><a href="#cb53-2" tabindex="-1"></a><span class="co"># in the solution must have at least 1 neighbor</span></span>
<span id="cb53-3"><a href="#cb53-3" tabindex="-1"></a>p17 <span class="ot">&lt;-</span></span>
<span id="cb53-4"><a href="#cb53-4" tabindex="-1"></a>  <span class="fu">problem</span>(sim_pu_raster, sim_features) <span class="sc">%&gt;%</span></span>
<span id="cb53-5"><a href="#cb53-5" tabindex="-1"></a>  <span class="fu">add_min_set_objective</span>() <span class="sc">%&gt;%</span></span>
<span id="cb53-6"><a href="#cb53-6" tabindex="-1"></a>  <span class="fu">add_relative_targets</span>(<span class="fl">0.1</span>) <span class="sc">%&gt;%</span></span>
<span id="cb53-7"><a href="#cb53-7" tabindex="-1"></a>  <span class="fu">add_neighbor_constraints</span>(<span class="dv">1</span>)</span>
<span id="cb53-8"><a href="#cb53-8" tabindex="-1"></a></span>
<span id="cb53-9"><a href="#cb53-9" tabindex="-1"></a><span class="co"># print problem</span></span>
<span id="cb53-10"><a href="#cb53-10" tabindex="-1"></a><span class="fu">print</span>(p17)</span></code></pre></div>
<pre><code>## A conservation problem (&lt;ConservationProblem&gt;)
## ├•data
## │├•features:    &quot;feature_1&quot;, &quot;feature_2&quot;, &quot;feature_3&quot;, &quot;feature_4&quot;, and &quot;feature_5&quot; (5 total)
## │└•planning units:
## │ ├•data:       &lt;SpatRaster&gt; (90 total)
## │ ├•costs:      continuous values (between 190.1328 and 215.8638)
## │ ├•extent:     0, 0, 1, 1 (xmin, ymin, xmax, ymax)
## │ └•CRS:        Undefined Cartesian SRS (projected)
## ├•formulation
## │├•objective:   minimum set objective
## │├•penalties:   none specified
## │├•targets:     relative targets (between 0.1 and 0.1)
## │├•constraints:
## ││└•1:          neighbor constraints (`k` = 1, `clamp` = TRUE, …)
## │└•decisions:   binary decision
## └•optimization
##  ├•portfolio:   default portfolio
##  └•solver:      gurobi solver (`gap` = 0.1, `time_limit` = 2147483647, `first_feasible` = FALSE, …)
## # ℹ Use `summary(...)` to see complete formulation.</code></pre>
<ul>
<li><strong>Contiguity constraints</strong>: Add constraints to a
conservation problem to ensure that all selected planning units are
spatially connected to each other and form spatially contiguous
unit.</li>
</ul>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1" tabindex="-1"></a><span class="co"># create problem with constraints which specify that all selected planning units</span></span>
<span id="cb55-2"><a href="#cb55-2" tabindex="-1"></a><span class="co"># in the solution must form a single contiguous unit</span></span>
<span id="cb55-3"><a href="#cb55-3" tabindex="-1"></a>p18 <span class="ot">&lt;-</span></span>
<span id="cb55-4"><a href="#cb55-4" tabindex="-1"></a>  <span class="fu">problem</span>(sim_pu_raster, sim_features) <span class="sc">%&gt;%</span></span>
<span id="cb55-5"><a href="#cb55-5" tabindex="-1"></a>  <span class="fu">add_min_set_objective</span>() <span class="sc">%&gt;%</span></span>
<span id="cb55-6"><a href="#cb55-6" tabindex="-1"></a>  <span class="fu">add_relative_targets</span>(<span class="fl">0.1</span>) <span class="sc">%&gt;%</span></span>
<span id="cb55-7"><a href="#cb55-7" tabindex="-1"></a>  <span class="fu">add_contiguity_constraints</span>()</span>
<span id="cb55-8"><a href="#cb55-8" tabindex="-1"></a></span>
<span id="cb55-9"><a href="#cb55-9" tabindex="-1"></a><span class="co"># print problem</span></span>
<span id="cb55-10"><a href="#cb55-10" tabindex="-1"></a><span class="fu">print</span>(p18)</span></code></pre></div>
<pre><code>## A conservation problem (&lt;ConservationProblem&gt;)
## ├•data
## │├•features:    &quot;feature_1&quot;, &quot;feature_2&quot;, &quot;feature_3&quot;, &quot;feature_4&quot;, and &quot;feature_5&quot; (5 total)
## │└•planning units:
## │ ├•data:       &lt;SpatRaster&gt; (90 total)
## │ ├•costs:      continuous values (between 190.1328 and 215.8638)
## │ ├•extent:     0, 0, 1, 1 (xmin, ymin, xmax, ymax)
## │ └•CRS:        Undefined Cartesian SRS (projected)
## ├•formulation
## │├•objective:   minimum set objective
## │├•penalties:   none specified
## │├•targets:     relative targets (between 0.1 and 0.1)
## │├•constraints:
## ││└•1:          contiguity constraints
## │└•decisions:   binary decision
## └•optimization
##  ├•portfolio:   default portfolio
##  └•solver:      gurobi solver (`gap` = 0.1, `time_limit` = 2147483647, `first_feasible` = FALSE, …)
## # ℹ Use `summary(...)` to see complete formulation.</code></pre>
<ul>
<li><strong>Feature contiguity constraints</strong>: Add constraints to
ensure that each feature is represented in a contiguous unit of
dispersible habitat. These constraints are a more advanced version of
those implemented in the <code>add_contiguity_constraints</code>
function, because they ensure that each feature is represented in a
contiguous unit and not that the entire solution should form a
contiguous unit.</li>
</ul>
<div class="sourceCode" id="cb57"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" tabindex="-1"></a><span class="co"># create problem with constraints which specify that the planning units used</span></span>
<span id="cb57-2"><a href="#cb57-2" tabindex="-1"></a><span class="co"># to conserve each feature must form a contiguous unit</span></span>
<span id="cb57-3"><a href="#cb57-3" tabindex="-1"></a>p19 <span class="ot">&lt;-</span></span>
<span id="cb57-4"><a href="#cb57-4" tabindex="-1"></a>  <span class="fu">problem</span>(sim_pu_raster, sim_features) <span class="sc">%&gt;%</span></span>
<span id="cb57-5"><a href="#cb57-5" tabindex="-1"></a>  <span class="fu">add_min_set_objective</span>() <span class="sc">%&gt;%</span></span>
<span id="cb57-6"><a href="#cb57-6" tabindex="-1"></a>  <span class="fu">add_relative_targets</span>(<span class="fl">0.1</span>) <span class="sc">%&gt;%</span></span>
<span id="cb57-7"><a href="#cb57-7" tabindex="-1"></a>  <span class="fu">add_feature_contiguity_constraints</span>()</span>
<span id="cb57-8"><a href="#cb57-8" tabindex="-1"></a></span>
<span id="cb57-9"><a href="#cb57-9" tabindex="-1"></a><span class="co"># print problem</span></span>
<span id="cb57-10"><a href="#cb57-10" tabindex="-1"></a><span class="fu">print</span>(p19)</span></code></pre></div>
<pre><code>## A conservation problem (&lt;ConservationProblem&gt;)
## ├•data
## │├•features:    &quot;feature_1&quot;, &quot;feature_2&quot;, &quot;feature_3&quot;, &quot;feature_4&quot;, and &quot;feature_5&quot; (5 total)
## │└•planning units:
## │ ├•data:       &lt;SpatRaster&gt; (90 total)
## │ ├•costs:      continuous values (between 190.1328 and 215.8638)
## │ ├•extent:     0, 0, 1, 1 (xmin, ymin, xmax, ymax)
## │ └•CRS:        Undefined Cartesian SRS (projected)
## ├•formulation
## │├•objective:   minimum set objective
## │├•penalties:   none specified
## │├•targets:     relative targets (between 0.1 and 0.1)
## │├•constraints:
## ││└•1:          feature contiguity constraints
## │└•decisions:   binary decision
## └•optimization
##  ├•portfolio:   default portfolio
##  └•solver:      gurobi solver (`gap` = 0.1, `time_limit` = 2147483647, `first_feasible` = FALSE, …)
## # ℹ Use `summary(...)` to see complete formulation.</code></pre>
<ul>
<li><strong>Linear constraints</strong>: Add constraints to ensure that
all selected planning units meet certain criteria. For example, they can
be used to add multiple budgets, or limit the number of planning units
selected in different administrative areas within a study region (e.g.,
different countries).</li>
</ul>
<div class="sourceCode" id="cb59"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1" tabindex="-1"></a><span class="co"># create problem with constraints which specify that the sum of</span></span>
<span id="cb59-2"><a href="#cb59-2" tabindex="-1"></a><span class="co"># values in sim_features[[1]] among selected planning units must not exceed a</span></span>
<span id="cb59-3"><a href="#cb59-3" tabindex="-1"></a><span class="co"># threshold value of 190.</span></span>
<span id="cb59-4"><a href="#cb59-4" tabindex="-1"></a>p20 <span class="ot">&lt;-</span></span>
<span id="cb59-5"><a href="#cb59-5" tabindex="-1"></a>  <span class="fu">problem</span>(sim_pu_raster, sim_features) <span class="sc">%&gt;%</span></span>
<span id="cb59-6"><a href="#cb59-6" tabindex="-1"></a>  <span class="fu">add_min_shortfall_objective</span>(<span class="at">budget =</span> <span class="dv">1800</span>) <span class="sc">%&gt;%</span></span>
<span id="cb59-7"><a href="#cb59-7" tabindex="-1"></a>  <span class="fu">add_relative_targets</span>(<span class="fl">0.1</span>) <span class="sc">%&gt;%</span></span>
<span id="cb59-8"><a href="#cb59-8" tabindex="-1"></a>  <span class="fu">add_linear_constraints</span>(<span class="dv">190</span>, <span class="st">&quot;&lt;=&quot;</span>, sim_features[[<span class="dv">1</span>]])</span>
<span id="cb59-9"><a href="#cb59-9" tabindex="-1"></a></span>
<span id="cb59-10"><a href="#cb59-10" tabindex="-1"></a><span class="co"># print problem</span></span>
<span id="cb59-11"><a href="#cb59-11" tabindex="-1"></a><span class="fu">print</span>(p20)</span></code></pre></div>
<pre><code>## A conservation problem (&lt;ConservationProblem&gt;)
## ├•data
## │├•features:    &quot;feature_1&quot;, &quot;feature_2&quot;, &quot;feature_3&quot;, &quot;feature_4&quot;, and &quot;feature_5&quot; (5 total)
## │└•planning units:
## │ ├•data:       &lt;SpatRaster&gt; (90 total)
## │ ├•costs:      continuous values (between 190.1328 and 215.8638)
## │ ├•extent:     0, 0, 1, 1 (xmin, ymin, xmax, ymax)
## │ └•CRS:        Undefined Cartesian SRS (projected)
## ├•formulation
## │├•objective:   minimum shortfall objective (`budget` = 1800)
## │├•penalties:   none specified
## │├•targets:     relative targets (between 0.1 and 0.1)
## │├•constraints:
## ││└•1:          linear constraints (`threshold` = 190, `sense` = &quot;&lt;=&quot;, …)
## │└•decisions:   binary decision
## └•optimization
##  ├•portfolio:   default portfolio
##  └•solver:      gurobi solver (`gap` = 0.1, `time_limit` = 2147483647, `first_feasible` = FALSE, …)
## # ℹ Use `summary(...)` to see complete formulation.</code></pre>
<ul>
<li><strong>Mandatory allocation constraints</strong>: Add constraints
to ensure that every planning unit is allocated to a management zone in
the solution. Please note that this function can only be used with
problems that contain multiple zones. For more information on problems
with multiple zones and an example using this function, see the <a href="management_zones_tutorial.html"><em>Management zones
tutorial</em></a>.</li>
</ul>
<p>In particular, The <code>add_locked_in_constraints</code> and
<code>add_locked_out_constraints</code> functions are incredibly useful
for real-world conservation planning exercises, so it’s worth pointing
out that there are several ways we can specify which planning units
should be locked in or out of the solutions. If we use raster planning
unit data, we can also use raster data to specify which planning units
should be locked in or locked out.</p>
<div class="sourceCode" id="cb61"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1" tabindex="-1"></a><span class="co"># load data to lock in or lock out planning units</span></span>
<span id="cb61-2"><a href="#cb61-2" tabindex="-1"></a>sim_locked_in_raster <span class="ot">&lt;-</span> <span class="fu">get_sim_locked_in_raster</span>()</span>
<span id="cb61-3"><a href="#cb61-3" tabindex="-1"></a>sim_locked_out_raster <span class="ot">&lt;-</span> <span class="fu">get_sim_locked_out_raster</span>()</span>
<span id="cb61-4"><a href="#cb61-4" tabindex="-1"></a></span>
<span id="cb61-5"><a href="#cb61-5" tabindex="-1"></a><span class="co"># plot the locked data</span></span>
<span id="cb61-6"><a href="#cb61-6" tabindex="-1"></a><span class="fu">plot</span>(</span>
<span id="cb61-7"><a href="#cb61-7" tabindex="-1"></a>  <span class="fu">c</span>(sim_locked_in_raster, sim_locked_out_raster),</span>
<span id="cb61-8"><a href="#cb61-8" tabindex="-1"></a>  <span class="at">xlim =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="fl">0.1</span>, <span class="fl">1.1</span>), <span class="at">ylim =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="fl">0.1</span>, <span class="fl">1.1</span>),</span>
<span id="cb61-9"><a href="#cb61-9" tabindex="-1"></a>  <span class="at">axes =</span> <span class="cn">FALSE</span>, <span class="at">main =</span> <span class="fu">c</span>(<span class="st">&quot;Locked in&quot;</span>, <span class="st">&quot;Locked out&quot;</span>)</span>
<span id="cb61-10"><a href="#cb61-10" tabindex="-1"></a>)</span>
<span id="cb61-11"><a href="#cb61-11" tabindex="-1"></a></span>
<span id="cb61-12"><a href="#cb61-12" tabindex="-1"></a><span class="co"># create a problem using raster planning unit data and use the locked raster</span></span>
<span id="cb61-13"><a href="#cb61-13" tabindex="-1"></a><span class="co"># data to lock in some planning units and lock out some other planning units</span></span>
<span id="cb61-14"><a href="#cb61-14" tabindex="-1"></a>p21 <span class="ot">&lt;-</span></span>
<span id="cb61-15"><a href="#cb61-15" tabindex="-1"></a>  <span class="fu">problem</span>(sim_pu_raster, sim_features) <span class="sc">%&gt;%</span></span>
<span id="cb61-16"><a href="#cb61-16" tabindex="-1"></a>  <span class="fu">add_min_set_objective</span>() <span class="sc">%&gt;%</span></span>
<span id="cb61-17"><a href="#cb61-17" tabindex="-1"></a>  <span class="fu">add_relative_targets</span>(<span class="fl">0.1</span>) <span class="sc">%&gt;%</span></span>
<span id="cb61-18"><a href="#cb61-18" tabindex="-1"></a>  <span class="fu">add_locked_in_constraints</span>(sim_locked_in_raster) <span class="sc">%&gt;%</span></span>
<span id="cb61-19"><a href="#cb61-19" tabindex="-1"></a>  <span class="fu">add_locked_out_constraints</span>(sim_locked_out_raster)</span>
<span id="cb61-20"><a href="#cb61-20" tabindex="-1"></a></span>
<span id="cb61-21"><a href="#cb61-21" tabindex="-1"></a><span class="co"># print problem</span></span>
<span id="cb61-22"><a href="#cb61-22" tabindex="-1"></a><span class="fu">print</span>(p21)</span></code></pre></div>
<p><img role="img" src="data:image/png;base64,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" style="display: block; margin: auto;" /></p>
<pre><code>## A conservation problem (&lt;ConservationProblem&gt;)
## ├•data
## │├•features:    &quot;feature_1&quot;, &quot;feature_2&quot;, &quot;feature_3&quot;, &quot;feature_4&quot;, and &quot;feature_5&quot; (5 total)
## │└•planning units:
## │ ├•data:       &lt;SpatRaster&gt; (90 total)
## │ ├•costs:      continuous values (between 190.1328 and 215.8638)
## │ ├•extent:     0, 0, 1, 1 (xmin, ymin, xmax, ymax)
## │ └•CRS:        Undefined Cartesian SRS (projected)
## ├•formulation
## │├•objective:   minimum set objective
## │├•penalties:   none specified
## │├•targets:     relative targets (between 0.1 and 0.1)
## │├•constraints:
## ││├•1:          locked in constraints (10 planning units)
## ││└•2:          locked out constraints (10 planning units)
## │└•decisions:   binary decision
## └•optimization
##  ├•portfolio:   default portfolio
##  └•solver:      gurobi solver (`gap` = 0.1, `time_limit` = 2147483647, `first_feasible` = FALSE, …)
## # ℹ Use `summary(...)` to see complete formulation.</code></pre>
<p>If our planning unit data are in a spatial vector format (similar to
the <code>sim_pu_polygons</code> data) or a tabular format (similar to
<code>pu_dat</code>), we can use the field names in the data to refer to
which planning units should be locked in and / or out. For example, the
<code>sim_pu_polygons</code> object has <code>TRUE</code> /
<code>FALSE</code> values in the “locked_in” field which indicate which
planning units should be selected in the solution. We could use the data
in this field to specify that those planning units with
<code>TRUE</code> values should be locked in using the following
methods.</p>
<div class="sourceCode" id="cb63"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb63-1"><a href="#cb63-1" tabindex="-1"></a><span class="co"># preview sim_pu_polygons object</span></span>
<span id="cb63-2"><a href="#cb63-2" tabindex="-1"></a><span class="fu">print</span>(sim_pu_polygons)</span></code></pre></div>
<pre><code>## Simple feature collection with 90 features and 3 fields
## Geometry type: POLYGON
## Dimension:     XY
## Bounding box:  xmin: 0 ymin: 0 xmax: 1 ymax: 1
## Projected CRS: Undefined Cartesian SRS
## # A tibble: 90 × 4
##     cost locked_in locked_out                                      geom
##  * &lt;dbl&gt; &lt;lgl&gt;     &lt;lgl&gt;                                  &lt;POLYGON [m]&gt;
##  1  216. FALSE     FALSE            ((0 1, 0.1 1, 0.1 0.9, 0 0.9, 0 1))
##  2  213. FALSE     FALSE      ((0.1 1, 0.2 1, 0.2 0.9, 0.1 0.9, 0.1 1))
##  3  207. FALSE     FALSE      ((0.2 1, 0.3 1, 0.3 0.9, 0.2 0.9, 0.2 1))
##  4  209. FALSE     TRUE       ((0.3 1, 0.4 1, 0.4 0.9, 0.3 0.9, 0.3 1))
##  5  214. FALSE     FALSE      ((0.4 1, 0.5 1, 0.5 0.9, 0.4 0.9, 0.4 1))
##  6  214. FALSE     FALSE      ((0.5 1, 0.6 1, 0.6 0.9, 0.5 0.9, 0.5 1))
##  7  210. FALSE     FALSE      ((0.6 1, 0.7 1, 0.7 0.9, 0.6 0.9, 0.6 1))
##  8  211. FALSE     TRUE       ((0.7 1, 0.8 1, 0.8 0.9, 0.7 0.9, 0.7 1))
##  9  210. FALSE     FALSE      ((0.8 1, 0.9 1, 0.9 0.9, 0.8 0.9, 0.8 1))
## 10  204. FALSE     FALSE          ((0.9 1, 1 1, 1 0.9, 0.9 0.9, 0.9 1))
## # ℹ 80 more rows</code></pre>
<div class="sourceCode" id="cb65"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb65-1"><a href="#cb65-1" tabindex="-1"></a><span class="co"># specify locked in data using the field name</span></span>
<span id="cb65-2"><a href="#cb65-2" tabindex="-1"></a>p22 <span class="ot">&lt;-</span></span>
<span id="cb65-3"><a href="#cb65-3" tabindex="-1"></a>  <span class="fu">problem</span>(sim_pu_polygons, sim_features, <span class="at">cost_column =</span> <span class="st">&quot;cost&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb65-4"><a href="#cb65-4" tabindex="-1"></a>  <span class="fu">add_min_set_objective</span>() <span class="sc">%&gt;%</span></span>
<span id="cb65-5"><a href="#cb65-5" tabindex="-1"></a>  <span class="fu">add_relative_targets</span>(<span class="fl">0.1</span>) <span class="sc">%&gt;%</span></span>
<span id="cb65-6"><a href="#cb65-6" tabindex="-1"></a>  <span class="fu">add_locked_in_constraints</span>(<span class="st">&quot;locked_in&quot;</span>)</span>
<span id="cb65-7"><a href="#cb65-7" tabindex="-1"></a></span>
<span id="cb65-8"><a href="#cb65-8" tabindex="-1"></a><span class="co"># print problem</span></span>
<span id="cb65-9"><a href="#cb65-9" tabindex="-1"></a><span class="fu">print</span>(p22)</span></code></pre></div>
<pre><code>## A conservation problem (&lt;ConservationProblem&gt;)
## ├•data
## │├•features:    &quot;feature_1&quot;, &quot;feature_2&quot;, &quot;feature_3&quot;, &quot;feature_4&quot;, and &quot;feature_5&quot; (5 total)
## │└•planning units:
## │ ├•data:       &lt;sftbl_dftbldata.frame&gt; (90 total)
## │ ├•costs:      continuous values (between 190.1328 and 215.8638)
## │ ├•extent:     0, 0, 1, 1 (xmin, ymin, xmax, ymax)
## │ └•CRS:        Undefined Cartesian SRS (projected)
## ├•formulation
## │├•objective:   minimum set objective
## │├•penalties:   none specified
## │├•targets:     relative targets (between 0.1 and 0.1)
## │├•constraints:
## ││└•1:          locked in constraints (10 planning units)
## │└•decisions:   binary decision
## └•optimization
##  ├•portfolio:   default portfolio
##  └•solver:      gurobi solver (`gap` = 0.1, `time_limit` = 2147483647, `first_feasible` = FALSE, …)
## # ℹ Use `summary(...)` to see complete formulation.</code></pre>
<div class="sourceCode" id="cb67"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb67-1"><a href="#cb67-1" tabindex="-1"></a><span class="co"># specify locked in data using the values in the field</span></span>
<span id="cb67-2"><a href="#cb67-2" tabindex="-1"></a>p23 <span class="ot">&lt;-</span></span>
<span id="cb67-3"><a href="#cb67-3" tabindex="-1"></a>  <span class="fu">problem</span>(sim_pu_polygons, sim_features, <span class="at">cost_column =</span> <span class="st">&quot;cost&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb67-4"><a href="#cb67-4" tabindex="-1"></a>  <span class="fu">add_min_set_objective</span>() <span class="sc">%&gt;%</span></span>
<span id="cb67-5"><a href="#cb67-5" tabindex="-1"></a>  <span class="fu">add_relative_targets</span>(<span class="fl">0.1</span>) <span class="sc">%&gt;%</span></span>
<span id="cb67-6"><a href="#cb67-6" tabindex="-1"></a>  <span class="fu">add_locked_in_constraints</span>(<span class="fu">which</span>(sim_pu_polygons<span class="sc">$</span>locked_in))</span>
<span id="cb67-7"><a href="#cb67-7" tabindex="-1"></a></span>
<span id="cb67-8"><a href="#cb67-8" tabindex="-1"></a><span class="co"># print problem</span></span>
<span id="cb67-9"><a href="#cb67-9" tabindex="-1"></a><span class="fu">print</span>(p23)</span></code></pre></div>
<pre><code>## A conservation problem (&lt;ConservationProblem&gt;)
## ├•data
## │├•features:    &quot;feature_1&quot;, &quot;feature_2&quot;, &quot;feature_3&quot;, &quot;feature_4&quot;, and &quot;feature_5&quot; (5 total)
## │└•planning units:
## │ ├•data:       &lt;sftbl_dftbldata.frame&gt; (90 total)
## │ ├•costs:      continuous values (between 190.1328 and 215.8638)
## │ ├•extent:     0, 0, 1, 1 (xmin, ymin, xmax, ymax)
## │ └•CRS:        Undefined Cartesian SRS (projected)
## ├•formulation
## │├•objective:   minimum set objective
## │├•penalties:   none specified
## │├•targets:     relative targets (between 0.1 and 0.1)
## │├•constraints:
## ││└•1:          locked in constraints (10 planning units)
## │└•decisions:   binary decision
## └•optimization
##  ├•portfolio:   default portfolio
##  └•solver:      gurobi solver (`gap` = 0.1, `time_limit` = 2147483647, `first_feasible` = FALSE, …)
## # ℹ Use `summary(...)` to see complete formulation.</code></pre>
</div>
<div id="add-penalties" class="section level3">
<h3>Add penalties</h3>
<p>We can also add penalties to a problem to favor or penalize solutions
according to a secondary objective. Unlike the constraint functions,
these functions will add extra information to the objective function of
the optimization function to penalize solutions that do not exhibit
specific characteristics. For example, penalties can be added to a
problem to avoid highly fragmented solutions at the expense of accepting
slightly more expensive solutions. All penalty functions have a
<code>penalty</code> argument that controls the relative importance of
the secondary penalty function compared to the primary objective
function. It is worth noting that incredibly low or incredibly high
<code>penalty</code> values – relative to the main objective function –
can cause problems to take a very long time to solve, so when trying out
a range of different penalty values it can be helpful to limit the
solver to run for a set period of time. The following penalties are
available.</p>
<ul>
<li><strong>Boundary penalties</strong>: Add penalties to penalize
solutions that are excessively fragmented. These penalties are similar
to those used in <em>Marxan</em> <span class="citation">(Ball <em>et
al.</em> 2009; Beyer <em>et al.</em> 2016)</span>.</li>
</ul>
<div class="sourceCode" id="cb69"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb69-1"><a href="#cb69-1" tabindex="-1"></a><span class="co"># create problem with penalties that penalize fragmented solutions with a</span></span>
<span id="cb69-2"><a href="#cb69-2" tabindex="-1"></a><span class="co"># penalty factor of 0.01</span></span>
<span id="cb69-3"><a href="#cb69-3" tabindex="-1"></a>p24 <span class="ot">&lt;-</span></span>
<span id="cb69-4"><a href="#cb69-4" tabindex="-1"></a>  <span class="fu">problem</span>(sim_pu_raster, sim_features) <span class="sc">%&gt;%</span></span>
<span id="cb69-5"><a href="#cb69-5" tabindex="-1"></a>  <span class="fu">add_min_set_objective</span>() <span class="sc">%&gt;%</span></span>
<span id="cb69-6"><a href="#cb69-6" tabindex="-1"></a>  <span class="fu">add_relative_targets</span>(<span class="fl">0.1</span>) <span class="sc">%&gt;%</span></span>
<span id="cb69-7"><a href="#cb69-7" tabindex="-1"></a>  <span class="fu">add_boundary_penalties</span>(<span class="at">penalty =</span> <span class="fl">0.01</span>)</span>
<span id="cb69-8"><a href="#cb69-8" tabindex="-1"></a></span>
<span id="cb69-9"><a href="#cb69-9" tabindex="-1"></a><span class="co"># print problem</span></span>
<span id="cb69-10"><a href="#cb69-10" tabindex="-1"></a><span class="fu">print</span>(p24)</span></code></pre></div>
<pre><code>## A conservation problem (&lt;ConservationProblem&gt;)
## ├•data
## │├•features:    &quot;feature_1&quot;, &quot;feature_2&quot;, &quot;feature_3&quot;, &quot;feature_4&quot;, and &quot;feature_5&quot; (5 total)
## │└•planning units:
## │ ├•data:       &lt;SpatRaster&gt; (90 total)
## │ ├•costs:      continuous values (between 190.1328 and 215.8638)
## │ ├•extent:     0, 0, 1, 1 (xmin, ymin, xmax, ymax)
## │ └•CRS:        Undefined Cartesian SRS (projected)
## ├•formulation
## │├•objective:   minimum set objective
## │├•penalties:
## ││└•1:          boundary penalties (`penalty` = 0.01, `edge_factor` = 0.5, …)
## │├•targets:     relative targets (between 0.1 and 0.1)
## │├•constraints: none specified
## │└•decisions:   binary decision
## └•optimization
##  ├•portfolio:   default portfolio
##  └•solver:      gurobi solver (`gap` = 0.1, `time_limit` = 2147483647, `first_feasible` = FALSE, …)
## # ℹ Use `summary(...)` to see complete formulation.</code></pre>
<ul>
<li><strong>Connectivity penalties</strong>: Add penalties to favor
solutions that select combinations of planning units with high
connectivity between them. This function is used for symmetric
connectivities among planning units <span class="citation">(based on
Önal &amp; Briers 2002)</span>.</li>
</ul>
<div class="sourceCode" id="cb71"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb71-1"><a href="#cb71-1" tabindex="-1"></a><span class="co"># create problem with penalties for symmetric connectivity,</span></span>
<span id="cb71-2"><a href="#cb71-2" tabindex="-1"></a><span class="co"># here we will use only the first four layers in</span></span>
<span id="cb71-3"><a href="#cb71-3" tabindex="-1"></a><span class="co"># sim_features for the features and we will use the fifth layer in sim_features</span></span>
<span id="cb71-4"><a href="#cb71-4" tabindex="-1"></a><span class="co"># to represent the connectivity data, where the connectivity_matrix function</span></span>
<span id="cb71-5"><a href="#cb71-5" tabindex="-1"></a><span class="co"># will create a matrix showing the average strength of connectivity between</span></span>
<span id="cb71-6"><a href="#cb71-6" tabindex="-1"></a><span class="co"># adjacent planning units using the data in the fifth layer of sim_features</span></span>
<span id="cb71-7"><a href="#cb71-7" tabindex="-1"></a>p25 <span class="ot">&lt;-</span></span>
<span id="cb71-8"><a href="#cb71-8" tabindex="-1"></a>  <span class="fu">problem</span>(sim_pu_raster, sim_features[[<span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>]]) <span class="sc">%&gt;%</span></span>
<span id="cb71-9"><a href="#cb71-9" tabindex="-1"></a>  <span class="fu">add_min_set_objective</span>() <span class="sc">%&gt;%</span></span>
<span id="cb71-10"><a href="#cb71-10" tabindex="-1"></a>  <span class="fu">add_relative_targets</span>(<span class="fl">0.1</span>) <span class="sc">%&gt;%</span></span>
<span id="cb71-11"><a href="#cb71-11" tabindex="-1"></a>  <span class="fu">add_connectivity_penalties</span>(</span>
<span id="cb71-12"><a href="#cb71-12" tabindex="-1"></a>    <span class="at">penalty =</span> <span class="dv">5</span>,</span>
<span id="cb71-13"><a href="#cb71-13" tabindex="-1"></a>    <span class="at">data =</span> <span class="fu">connectivity_matrix</span>(sim_pu_raster, sim_features[[<span class="dv">5</span>]])</span>
<span id="cb71-14"><a href="#cb71-14" tabindex="-1"></a>  )</span>
<span id="cb71-15"><a href="#cb71-15" tabindex="-1"></a></span>
<span id="cb71-16"><a href="#cb71-16" tabindex="-1"></a><span class="co"># print problem</span></span>
<span id="cb71-17"><a href="#cb71-17" tabindex="-1"></a><span class="fu">print</span>(p25)</span></code></pre></div>
<pre><code>## A conservation problem (&lt;ConservationProblem&gt;)
## ├•data
## │├•features:    &quot;feature_1&quot;, &quot;feature_2&quot;, &quot;feature_3&quot;, and &quot;feature_4&quot; (4 total)
## │└•planning units:
## │ ├•data:       &lt;SpatRaster&gt; (90 total)
## │ ├•costs:      continuous values (between 190.1328 and 215.8638)
## │ ├•extent:     0, 0, 1, 1 (xmin, ymin, xmax, ymax)
## │ └•CRS:        Undefined Cartesian SRS (projected)
## ├•formulation
## │├•objective:   minimum set objective
## │├•penalties:
## ││└•1:          connectivity penalties (`penalty` = 5, …)
## │├•targets:     relative targets (between 0.1 and 0.1)
## │├•constraints: none specified
## │└•decisions:   binary decision
## └•optimization
##  ├•portfolio:   default portfolio
##  └•solver:      gurobi solver (`gap` = 0.1, `time_limit` = 2147483647, `first_feasible` = FALSE, …)
## # ℹ Use `summary(...)` to see complete formulation.</code></pre>
<ul>
<li><strong>Asymmetric connectivity penalties</strong>: Add penalties to
penalize solutions that select planning units that share high
connectivity values with other planning units that are not selected by
the solution. This function is used for asymmetric connectivities among
planning units <span class="citation">(based on Beger <em>et al.</em>
2010)</span>.</li>
</ul>
<div class="sourceCode" id="cb73"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb73-1"><a href="#cb73-1" tabindex="-1"></a><span class="co"># create a matrix containing asymmetric connectivity data,</span></span>
<span id="cb73-2"><a href="#cb73-2" tabindex="-1"></a>asym_con_matrix <span class="ot">&lt;-</span> <span class="fu">matrix</span>(</span>
<span id="cb73-3"><a href="#cb73-3" tabindex="-1"></a>  <span class="fu">runif</span>(<span class="fu">ncell</span>(sim_pu_raster)<span class="sc">^</span><span class="dv">2</span>),</span>
<span id="cb73-4"><a href="#cb73-4" tabindex="-1"></a>  <span class="at">nrow =</span> <span class="fu">ncell</span>(sim_pu_raster),</span>
<span id="cb73-5"><a href="#cb73-5" tabindex="-1"></a>  <span class="at">ncol =</span> <span class="fu">ncell</span>(sim_pu_raster)</span>
<span id="cb73-6"><a href="#cb73-6" tabindex="-1"></a>)</span>
<span id="cb73-7"><a href="#cb73-7" tabindex="-1"></a></span>
<span id="cb73-8"><a href="#cb73-8" tabindex="-1"></a><span class="co"># create problem with penalties for asymmetric connectivity</span></span>
<span id="cb73-9"><a href="#cb73-9" tabindex="-1"></a>p26 <span class="ot">&lt;-</span></span>
<span id="cb73-10"><a href="#cb73-10" tabindex="-1"></a>  <span class="fu">problem</span>(sim_pu_raster, sim_features[[<span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>]]) <span class="sc">%&gt;%</span></span>
<span id="cb73-11"><a href="#cb73-11" tabindex="-1"></a>  <span class="fu">add_min_set_objective</span>() <span class="sc">%&gt;%</span></span>
<span id="cb73-12"><a href="#cb73-12" tabindex="-1"></a>  <span class="fu">add_relative_targets</span>(<span class="fl">0.1</span>) <span class="sc">%&gt;%</span></span>
<span id="cb73-13"><a href="#cb73-13" tabindex="-1"></a>  <span class="fu">add_asym_connectivity_penalties</span>(<span class="at">penalty =</span> <span class="dv">5</span>, <span class="at">data =</span> asym_con_matrix)</span>
<span id="cb73-14"><a href="#cb73-14" tabindex="-1"></a></span>
<span id="cb73-15"><a href="#cb73-15" tabindex="-1"></a><span class="co"># print problem</span></span>
<span id="cb73-16"><a href="#cb73-16" tabindex="-1"></a><span class="fu">print</span>(p26)</span></code></pre></div>
<pre><code>## A conservation problem (&lt;ConservationProblem&gt;)
## ├•data
## │├•features:    &quot;feature_1&quot;, &quot;feature_2&quot;, &quot;feature_3&quot;, and &quot;feature_4&quot; (4 total)
## │└•planning units:
## │ ├•data:       &lt;SpatRaster&gt; (90 total)
## │ ├•costs:      continuous values (between 190.1328 and 215.8638)
## │ ├•extent:     0, 0, 1, 1 (xmin, ymin, xmax, ymax)
## │ └•CRS:        Undefined Cartesian SRS (projected)
## ├•formulation
## │├•objective:   minimum set objective
## │├•penalties:
## ││└•1:          asymmetric connectivity penalties (`penalty` = 5, …)
## │├•targets:     relative targets (between 0.1 and 0.1)
## │├•constraints: none specified
## │└•decisions:   binary decision
## └•optimization
##  ├•portfolio:   default portfolio
##  └•solver:      gurobi solver (`gap` = 0.1, `time_limit` = 2147483647, `first_feasible` = FALSE, …)
## # ℹ Use `summary(...)` to see complete formulation.</code></pre>
<ul>
<li><strong>Linear penalties</strong>: Add penalties to penalize
solutions that select planning units according to a certain variable
(e.g., anthropogenic pressure).</li>
</ul>
<div class="sourceCode" id="cb75"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb75-1"><a href="#cb75-1" tabindex="-1"></a><span class="co"># create data for penalizing planning units</span></span>
<span id="cb75-2"><a href="#cb75-2" tabindex="-1"></a>pen_raster <span class="ot">&lt;-</span> <span class="fu">simulate_cost</span>(sim_pu_raster)</span>
<span id="cb75-3"><a href="#cb75-3" tabindex="-1"></a></span>
<span id="cb75-4"><a href="#cb75-4" tabindex="-1"></a><span class="co"># create problem with penalties that penalize solutions that select</span></span>
<span id="cb75-5"><a href="#cb75-5" tabindex="-1"></a><span class="co"># planning units with high values in the pen_raster object,</span></span>
<span id="cb75-6"><a href="#cb75-6" tabindex="-1"></a><span class="co"># here we will use a penalty value of 5 to indicate the trade-off (scaling)</span></span>
<span id="cb75-7"><a href="#cb75-7" tabindex="-1"></a><span class="co"># between the penalty values (in the sim_pu_raster) and the main objective</span></span>
<span id="cb75-8"><a href="#cb75-8" tabindex="-1"></a><span class="co"># (i.e., the cost of the solution)</span></span>
<span id="cb75-9"><a href="#cb75-9" tabindex="-1"></a>p27 <span class="ot">&lt;-</span></span>
<span id="cb75-10"><a href="#cb75-10" tabindex="-1"></a>  <span class="fu">problem</span>(sim_pu_raster, sim_features) <span class="sc">%&gt;%</span></span>
<span id="cb75-11"><a href="#cb75-11" tabindex="-1"></a>  <span class="fu">add_min_set_objective</span>() <span class="sc">%&gt;%</span></span>
<span id="cb75-12"><a href="#cb75-12" tabindex="-1"></a>  <span class="fu">add_relative_targets</span>(<span class="fl">0.1</span>) <span class="sc">%&gt;%</span></span>
<span id="cb75-13"><a href="#cb75-13" tabindex="-1"></a>  <span class="fu">add_linear_penalties</span>(<span class="at">penalty =</span> <span class="dv">5</span>, <span class="at">data =</span> pen_raster)</span>
<span id="cb75-14"><a href="#cb75-14" tabindex="-1"></a></span>
<span id="cb75-15"><a href="#cb75-15" tabindex="-1"></a><span class="co"># print problem</span></span>
<span id="cb75-16"><a href="#cb75-16" tabindex="-1"></a><span class="fu">print</span>(p27)</span></code></pre></div>
<pre><code>## A conservation problem (&lt;ConservationProblem&gt;)
## ├•data
## │├•features:    &quot;feature_1&quot;, &quot;feature_2&quot;, &quot;feature_3&quot;, &quot;feature_4&quot;, and &quot;feature_5&quot; (5 total)
## │└•planning units:
## │ ├•data:       &lt;SpatRaster&gt; (90 total)
## │ ├•costs:      continuous values (between 190.1328 and 215.8638)
## │ ├•extent:     0, 0, 1, 1 (xmin, ymin, xmax, ymax)
## │ └•CRS:        Undefined Cartesian SRS (projected)
## ├•formulation
## │├•objective:   minimum set objective
## │├•penalties:
## ││└•1:          linear penalties (`penalty` = 5, …)
## │├•targets:     relative targets (between 0.1 and 0.1)
## │├•constraints: none specified
## │└•decisions:   binary decision
## └•optimization
##  ├•portfolio:   default portfolio
##  └•solver:      gurobi solver (`gap` = 0.1, `time_limit` = 2147483647, `first_feasible` = FALSE, …)
## # ℹ Use `summary(...)` to see complete formulation.</code></pre>
</div>
<div id="add-the-decision-types" class="section level3">
<h3>Add the decision types</h3>
<p>Conservation planning problems involve making decisions on how
planning units will be managed. These decisions are then associated with
management actions (e.g., turning a planning unit into a protected
area). The type of decision describes how the action is applied to
planning units. For instance, the default decision-type is a binary
decision type, meaning that we are either selecting or not selecting
planning units for management. The following decision types are
available.</p>
<ul>
<li><strong>Binary decisions</strong>: Add a binary decision to a
conservation planning problem. This is the classic decision of either
prioritizing or not prioritizing a planning unit. Typically, this
decision has the assumed action of buying the planning unit to include
in a protected area network. If no decision is added to a problem
object, then this decision class will be used by default.</li>
</ul>
<div class="sourceCode" id="cb77"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb77-1"><a href="#cb77-1" tabindex="-1"></a><span class="co"># add binary decisions to a problem</span></span>
<span id="cb77-2"><a href="#cb77-2" tabindex="-1"></a>p28 <span class="ot">&lt;-</span></span>
<span id="cb77-3"><a href="#cb77-3" tabindex="-1"></a>  <span class="fu">problem</span>(sim_pu_raster, sim_features) <span class="sc">%&gt;%</span></span>
<span id="cb77-4"><a href="#cb77-4" tabindex="-1"></a>  <span class="fu">add_min_set_objective</span>() <span class="sc">%&gt;%</span></span>
<span id="cb77-5"><a href="#cb77-5" tabindex="-1"></a>  <span class="fu">add_relative_targets</span>(<span class="fl">0.1</span>) <span class="sc">%&gt;%</span></span>
<span id="cb77-6"><a href="#cb77-6" tabindex="-1"></a>  <span class="fu">add_binary_decisions</span>()</span>
<span id="cb77-7"><a href="#cb77-7" tabindex="-1"></a></span>
<span id="cb77-8"><a href="#cb77-8" tabindex="-1"></a><span class="co"># print problem</span></span>
<span id="cb77-9"><a href="#cb77-9" tabindex="-1"></a><span class="fu">print</span>(p28)</span></code></pre></div>
<pre><code>## A conservation problem (&lt;ConservationProblem&gt;)
## ├•data
## │├•features:    &quot;feature_1&quot;, &quot;feature_2&quot;, &quot;feature_3&quot;, &quot;feature_4&quot;, and &quot;feature_5&quot; (5 total)
## │└•planning units:
## │ ├•data:       &lt;SpatRaster&gt; (90 total)
## │ ├•costs:      continuous values (between 190.1328 and 215.8638)
## │ ├•extent:     0, 0, 1, 1 (xmin, ymin, xmax, ymax)
## │ └•CRS:        Undefined Cartesian SRS (projected)
## ├•formulation
## │├•objective:   minimum set objective
## │├•penalties:   none specified
## │├•targets:     relative targets (between 0.1 and 0.1)
## │├•constraints: none specified
## │└•decisions:   binary decision
## └•optimization
##  ├•portfolio:   default portfolio
##  └•solver:      gurobi solver (`gap` = 0.1, `time_limit` = 2147483647, `first_feasible` = FALSE, …)
## # ℹ Use `summary(...)` to see complete formulation.</code></pre>
<ul>
<li><strong>Proportion decisions</strong>: Add a proportion decision to
a problem. This is a relaxed decision where a part of a planning unit
can be prioritized, as opposed to the default of the entire planning
unit. Typically, this decision has the assumed action of buying a
fraction of a planning unit to include in a protected area network.
Generally, problems can be solved much faster with proportion-type
decisions than binary-type decisions, so they can be very useful when
commercial solvers are not available.</li>
</ul>
<div class="sourceCode" id="cb79"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb79-1"><a href="#cb79-1" tabindex="-1"></a><span class="co"># add proportion decisions to a problem</span></span>
<span id="cb79-2"><a href="#cb79-2" tabindex="-1"></a>p29 <span class="ot">&lt;-</span></span>
<span id="cb79-3"><a href="#cb79-3" tabindex="-1"></a>  <span class="fu">problem</span>(sim_pu_raster, sim_features) <span class="sc">%&gt;%</span></span>
<span id="cb79-4"><a href="#cb79-4" tabindex="-1"></a>  <span class="fu">add_min_set_objective</span>() <span class="sc">%&gt;%</span></span>
<span id="cb79-5"><a href="#cb79-5" tabindex="-1"></a>  <span class="fu">add_relative_targets</span>(<span class="fl">0.1</span>) <span class="sc">%&gt;%</span></span>
<span id="cb79-6"><a href="#cb79-6" tabindex="-1"></a>  <span class="fu">add_proportion_decisions</span>()</span>
<span id="cb79-7"><a href="#cb79-7" tabindex="-1"></a></span>
<span id="cb79-8"><a href="#cb79-8" tabindex="-1"></a><span class="co"># print problem</span></span>
<span id="cb79-9"><a href="#cb79-9" tabindex="-1"></a><span class="fu">print</span>(p29)</span></code></pre></div>
<pre><code>## A conservation problem (&lt;ConservationProblem&gt;)
## ├•data
## │├•features:    &quot;feature_1&quot;, &quot;feature_2&quot;, &quot;feature_3&quot;, &quot;feature_4&quot;, and &quot;feature_5&quot; (5 total)
## │└•planning units:
## │ ├•data:       &lt;SpatRaster&gt; (90 total)
## │ ├•costs:      continuous values (between 190.1328 and 215.8638)
## │ ├•extent:     0, 0, 1, 1 (xmin, ymin, xmax, ymax)
## │ └•CRS:        Undefined Cartesian SRS (projected)
## ├•formulation
## │├•objective:   minimum set objective
## │├•penalties:   none specified
## │├•targets:     relative targets (between 0.1 and 0.1)
## │├•constraints: none specified
## │└•decisions:   proportion decision
## └•optimization
##  ├•portfolio:   default portfolio
##  └•solver:      gurobi solver (`gap` = 0.1, `time_limit` = 2147483647, `first_feasible` = FALSE, …)
## # ℹ Use `summary(...)` to see complete formulation.</code></pre>
<ul>
<li><strong>Semi-continuous decisions</strong>: Add a semi-continuous
decision to a problem. This decision is similar to proportion decisions
except that it has an upper bound parameter. By default, the decision
can range from prioritizing none (0%) to all (100%) of a planning unit.
However, a upper bound can be specified to ensure that at most only a
fraction (e.g., 80%) of a planning unit can be purchased. This type of
decision may be useful when it is not practical to conserve the entire
area indicated by a planning unit.</li>
</ul>
<div class="sourceCode" id="cb81"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb81-1"><a href="#cb81-1" tabindex="-1"></a><span class="co"># add semi-continuous decisions to a problem, where we can only manage at most</span></span>
<span id="cb81-2"><a href="#cb81-2" tabindex="-1"></a><span class="co"># 50 % of the area encompassed by a planning unit</span></span>
<span id="cb81-3"><a href="#cb81-3" tabindex="-1"></a>p30 <span class="ot">&lt;-</span></span>
<span id="cb81-4"><a href="#cb81-4" tabindex="-1"></a>  <span class="fu">problem</span>(sim_pu_raster, sim_features) <span class="sc">%&gt;%</span></span>
<span id="cb81-5"><a href="#cb81-5" tabindex="-1"></a>  <span class="fu">add_min_set_objective</span>() <span class="sc">%&gt;%</span></span>
<span id="cb81-6"><a href="#cb81-6" tabindex="-1"></a>  <span class="fu">add_relative_targets</span>(<span class="fl">0.1</span>) <span class="sc">%&gt;%</span></span>
<span id="cb81-7"><a href="#cb81-7" tabindex="-1"></a>  <span class="fu">add_semicontinuous_decisions</span>(<span class="fl">0.5</span>)</span>
<span id="cb81-8"><a href="#cb81-8" tabindex="-1"></a></span>
<span id="cb81-9"><a href="#cb81-9" tabindex="-1"></a><span class="co"># print problem</span></span>
<span id="cb81-10"><a href="#cb81-10" tabindex="-1"></a><span class="fu">print</span>(p30)</span></code></pre></div>
<pre><code>## A conservation problem (&lt;ConservationProblem&gt;)
## ├•data
## │├•features:    &quot;feature_1&quot;, &quot;feature_2&quot;, &quot;feature_3&quot;, &quot;feature_4&quot;, and &quot;feature_5&quot; (5 total)
## │└•planning units:
## │ ├•data:       &lt;SpatRaster&gt; (90 total)
## │ ├•costs:      continuous values (between 190.1328 and 215.8638)
## │ ├•extent:     0, 0, 1, 1 (xmin, ymin, xmax, ymax)
## │ └•CRS:        Undefined Cartesian SRS (projected)
## ├•formulation
## │├•objective:   minimum set objective
## │├•penalties:   none specified
## │├•targets:     relative targets (between 0.1 and 0.1)
## │├•constraints: none specified
## │└•decisions:   semicontinuous decision (`upper_limit` = 0.5)
## └•optimization
##  ├•portfolio:   default portfolio
##  └•solver:      gurobi solver (`gap` = 0.1, `time_limit` = 2147483647, `first_feasible` = FALSE, …)
## # ℹ Use `summary(...)` to see complete formulation.</code></pre>
</div>
<div id="add-a-solver" class="section level3">
<h3>Add a solver</h3>
<p>Next, after specifying the mathematical formulation that underpins
your conservation planning problem, you can specify how the problem
should be solved. If you do not specify this information, the
<em>prioritizr R</em> package will automatically use the best solver
currently installed on your system with some reasonable defaults.
<strong>We strongly recommend installing the <a href="https://www.gurobi.com/">Gurobi software suite and the
<em>gurobi</em> <em>R</em> package</a> to solve problems, and for more
information on this topic please refer to the <a href="gurobi_installation_guide.html">Gurobi Installation
Guide</a></strong>. The following solvers are available.</p>
<ul>
<li><strong><em>Gurobi</em> solver</strong>: <a href="https://www.gurobi.com/"><em>Gurobi</em></a> is a state of the art
commercial optimization software. It is by far the fastest of the
solvers that can be used to solve conservation problems. However, it is
not freely available. That said, special licenses are available to
academics at no cost.</li>
</ul>
<div class="sourceCode" id="cb83"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb83-1"><a href="#cb83-1" tabindex="-1"></a><span class="co"># create a problem and specify that Gurobi should be used to solve the problem</span></span>
<span id="cb83-2"><a href="#cb83-2" tabindex="-1"></a><span class="co"># and specify an optimality gap of zero to obtain the optimal solution</span></span>
<span id="cb83-3"><a href="#cb83-3" tabindex="-1"></a>p31 <span class="ot">&lt;-</span></span>
<span id="cb83-4"><a href="#cb83-4" tabindex="-1"></a>  <span class="fu">problem</span>(sim_pu_raster, sim_features) <span class="sc">%&gt;%</span></span>
<span id="cb83-5"><a href="#cb83-5" tabindex="-1"></a>  <span class="fu">add_min_set_objective</span>() <span class="sc">%&gt;%</span></span>
<span id="cb83-6"><a href="#cb83-6" tabindex="-1"></a>  <span class="fu">add_relative_targets</span>(<span class="fl">0.1</span>) <span class="sc">%&gt;%</span></span>
<span id="cb83-7"><a href="#cb83-7" tabindex="-1"></a>  <span class="fu">add_binary_decisions</span>() <span class="sc">%&gt;%</span></span>
<span id="cb83-8"><a href="#cb83-8" tabindex="-1"></a>  <span class="fu">add_gurobi_solver</span>(<span class="at">gap =</span> <span class="dv">0</span>)</span>
<span id="cb83-9"><a href="#cb83-9" tabindex="-1"></a></span>
<span id="cb83-10"><a href="#cb83-10" tabindex="-1"></a><span class="co"># print problem</span></span>
<span id="cb83-11"><a href="#cb83-11" tabindex="-1"></a><span class="fu">print</span>(p31)</span></code></pre></div>
<pre><code>## A conservation problem (&lt;ConservationProblem&gt;)
## ├•data
## │├•features:    &quot;feature_1&quot;, &quot;feature_2&quot;, &quot;feature_3&quot;, &quot;feature_4&quot;, and &quot;feature_5&quot; (5 total)
## │└•planning units:
## │ ├•data:       &lt;SpatRaster&gt; (90 total)
## │ ├•costs:      continuous values (between 190.1328 and 215.8638)
## │ ├•extent:     0, 0, 1, 1 (xmin, ymin, xmax, ymax)
## │ └•CRS:        Undefined Cartesian SRS (projected)
## ├•formulation
## │├•objective:   minimum set objective
## │├•penalties:   none specified
## │├•targets:     relative targets (between 0.1 and 0.1)
## │├•constraints: none specified
## │└•decisions:   binary decision
## └•optimization
##  ├•portfolio:   default portfolio
##  └•solver:      gurobi solver (`gap` = 0, `time_limit` = 2147483647, `first_feasible` = FALSE, …)
## # ℹ Use `summary(...)` to see complete formulation.</code></pre>
<ul>
<li><strong><em>IBM CPLEX</em> solver</strong>: <a href="https://www.ibm.com/products/ilog-cplex-optimization-studio/cplex-optimizer"><em>IBM
CPLEX</em></a> is a commercial optimization software. It is faster than
the open source solvers available for generating prioritizations (see
below), however, it is not freely available. Similar to the
<em>Gurobi</em> software, special licenses are available to academics at
no cost.</li>
</ul>
<div class="sourceCode" id="cb85"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb85-1"><a href="#cb85-1" tabindex="-1"></a><span class="co"># create a problem and specify that IBM CPLEX should be used to solve the</span></span>
<span id="cb85-2"><a href="#cb85-2" tabindex="-1"></a><span class="co"># problem and specify an optimality gap of zero to obtain the optimal solution</span></span>
<span id="cb85-3"><a href="#cb85-3" tabindex="-1"></a>p32 <span class="ot">&lt;-</span></span>
<span id="cb85-4"><a href="#cb85-4" tabindex="-1"></a>  <span class="fu">problem</span>(sim_pu_raster, sim_features) <span class="sc">%&gt;%</span></span>
<span id="cb85-5"><a href="#cb85-5" tabindex="-1"></a>  <span class="fu">add_min_set_objective</span>() <span class="sc">%&gt;%</span></span>
<span id="cb85-6"><a href="#cb85-6" tabindex="-1"></a>  <span class="fu">add_relative_targets</span>(<span class="fl">0.1</span>) <span class="sc">%&gt;%</span></span>
<span id="cb85-7"><a href="#cb85-7" tabindex="-1"></a>  <span class="fu">add_binary_decisions</span>() <span class="sc">%&gt;%</span></span>
<span id="cb85-8"><a href="#cb85-8" tabindex="-1"></a>  <span class="fu">add_cplex_solver</span>(<span class="at">gap =</span> <span class="dv">0</span>)</span>
<span id="cb85-9"><a href="#cb85-9" tabindex="-1"></a></span>
<span id="cb85-10"><a href="#cb85-10" tabindex="-1"></a><span class="co"># print problem</span></span>
<span id="cb85-11"><a href="#cb85-11" tabindex="-1"></a><span class="fu">print</span>(p32)</span></code></pre></div>
<pre><code>## A conservation problem (&lt;ConservationProblem&gt;)
## ├•data
## │├•features:    &quot;feature_1&quot;, &quot;feature_2&quot;, &quot;feature_3&quot;, &quot;feature_4&quot;, and &quot;feature_5&quot; (5 total)
## │└•planning units:
## │ ├•data:       &lt;SpatRaster&gt; (90 total)
## │ ├•costs:      continuous values (between 190.1328 and 215.8638)
## │ ├•extent:     0, 0, 1, 1 (xmin, ymin, xmax, ymax)
## │ └•CRS:        Undefined Cartesian SRS (projected)
## ├•formulation
## │├•objective:   minimum set objective
## │├•penalties:   none specified
## │├•targets:     relative targets (between 0.1 and 0.1)
## │├•constraints: none specified
## │└•decisions:   binary decision
## └•optimization
##  ├•portfolio:   default portfolio
##  └•solver:      cplex solver (`gap` = 0, `time_limit` = 2147483647, …)
## # ℹ Use `summary(...)` to see complete formulation.</code></pre>
<ul>
<li><strong><em>CBC</em> solver</strong>: <a href="https://github.com/coin-or/Cbc"><em>CBC</em></a> is an open-source
mixed integer programming solver that is part of the Computational
Infrastructure for Operations Research (COIN-OR) project. This solver
seems to have much better performance than the other open-source solvers
(i.e., <code>add_rsymphony_solver()</code>,
<code>add_lpsymphony_solver()</code>) (see the <a href="solver_benchmarks.html"><em>Solver benchmarks vignette</em></a>
for details). As such, it is strongly recommended to use this solver if
the <em>Gurobi</em> and <em>IBM CPLEX</em> solvers are not available.
This solver requires the <em>rcbc R</em> package, which is currently
only available on <a href="https://github.com/dirkschumacher/rcbc">GitHub</a>.</li>
</ul>
<div class="sourceCode" id="cb87"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb87-1"><a href="#cb87-1" tabindex="-1"></a><span class="co"># create a problem and specify that CBC should be used to solve the</span></span>
<span id="cb87-2"><a href="#cb87-2" tabindex="-1"></a><span class="co"># problem and specify an optimality gap of zero to obtain the optimal solution</span></span>
<span id="cb87-3"><a href="#cb87-3" tabindex="-1"></a>p33 <span class="ot">&lt;-</span></span>
<span id="cb87-4"><a href="#cb87-4" tabindex="-1"></a>  <span class="fu">problem</span>(sim_pu_raster, sim_features) <span class="sc">%&gt;%</span></span>
<span id="cb87-5"><a href="#cb87-5" tabindex="-1"></a>  <span class="fu">add_min_set_objective</span>() <span class="sc">%&gt;%</span></span>
<span id="cb87-6"><a href="#cb87-6" tabindex="-1"></a>  <span class="fu">add_relative_targets</span>(<span class="fl">0.1</span>) <span class="sc">%&gt;%</span></span>
<span id="cb87-7"><a href="#cb87-7" tabindex="-1"></a>  <span class="fu">add_binary_decisions</span>() <span class="sc">%&gt;%</span></span>
<span id="cb87-8"><a href="#cb87-8" tabindex="-1"></a>  <span class="fu">add_cbc_solver</span>(<span class="at">gap =</span> <span class="dv">0</span>)</span>
<span id="cb87-9"><a href="#cb87-9" tabindex="-1"></a></span>
<span id="cb87-10"><a href="#cb87-10" tabindex="-1"></a><span class="co"># print problem</span></span>
<span id="cb87-11"><a href="#cb87-11" tabindex="-1"></a><span class="fu">print</span>(p33)</span></code></pre></div>
<pre><code>## A conservation problem (&lt;ConservationProblem&gt;)
## ├•data
## │├•features:    &quot;feature_1&quot;, &quot;feature_2&quot;, &quot;feature_3&quot;, &quot;feature_4&quot;, and &quot;feature_5&quot; (5 total)
## │└•planning units:
## │ ├•data:       &lt;SpatRaster&gt; (90 total)
## │ ├•costs:      continuous values (between 190.1328 and 215.8638)
## │ ├•extent:     0, 0, 1, 1 (xmin, ymin, xmax, ymax)
## │ └•CRS:        Undefined Cartesian SRS (projected)
## ├•formulation
## │├•objective:   minimum set objective
## │├•penalties:   none specified
## │├•targets:     relative targets (between 0.1 and 0.1)
## │├•constraints: none specified
## │└•decisions:   binary decision
## └•optimization
##  ├•portfolio:   default portfolio
##  └•solver:      cbc solver (`gap` = 0, `time_limit` = 2147483647, `first_feasible` = FALSE, …)
## # ℹ Use `summary(...)` to see complete formulation.</code></pre>
<ul>
<li><strong><em>HiGHS</em> solver</strong>: <a href="https://highs.dev/"><em>HiGHS</em></a> is an open source
optimization software. Although this solver can have comparable
performance to the <em>CBC</em> solver (i.e.,
<code>add_cbc_solver()</code>) for particular problems and is generally
faster than the <em>SYMPHONY</em> based solvers (i.e.,
<code>add_rsymphony_solver()</code>,
<code>add_lpsymphony_solver()</code>), it can sometimes take much longer
than the <em>CBC</em> solver for particular problems. This solver is
recommended if the <code>add_gurobi_solver()</code>,
<code>add_cplex_solver()</code>, <code>add_cbc_solver()</code> cannot be
used.</li>
</ul>
<div class="sourceCode" id="cb89"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb89-1"><a href="#cb89-1" tabindex="-1"></a><span class="co"># create a problem and specify that HiGHS should be used to solve the</span></span>
<span id="cb89-2"><a href="#cb89-2" tabindex="-1"></a><span class="co"># problem and specify an optimality gap of zero to obtain the optimal solution</span></span>
<span id="cb89-3"><a href="#cb89-3" tabindex="-1"></a>p34 <span class="ot">&lt;-</span></span>
<span id="cb89-4"><a href="#cb89-4" tabindex="-1"></a>  <span class="fu">problem</span>(sim_pu_raster, sim_features) <span class="sc">%&gt;%</span></span>
<span id="cb89-5"><a href="#cb89-5" tabindex="-1"></a>  <span class="fu">add_min_set_objective</span>() <span class="sc">%&gt;%</span></span>
<span id="cb89-6"><a href="#cb89-6" tabindex="-1"></a>  <span class="fu">add_relative_targets</span>(<span class="fl">0.1</span>) <span class="sc">%&gt;%</span></span>
<span id="cb89-7"><a href="#cb89-7" tabindex="-1"></a>  <span class="fu">add_binary_decisions</span>() <span class="sc">%&gt;%</span></span>
<span id="cb89-8"><a href="#cb89-8" tabindex="-1"></a>  <span class="fu">add_highs_solver</span>(<span class="at">gap =</span> <span class="dv">0</span>)</span>
<span id="cb89-9"><a href="#cb89-9" tabindex="-1"></a></span>
<span id="cb89-10"><a href="#cb89-10" tabindex="-1"></a><span class="co"># print problem</span></span>
<span id="cb89-11"><a href="#cb89-11" tabindex="-1"></a><span class="fu">print</span>(p34)</span></code></pre></div>
<pre><code>## A conservation problem (&lt;ConservationProblem&gt;)
## ├•data
## │├•features:    &quot;feature_1&quot;, &quot;feature_2&quot;, &quot;feature_3&quot;, &quot;feature_4&quot;, and &quot;feature_5&quot; (5 total)
## │└•planning units:
## │ ├•data:       &lt;SpatRaster&gt; (90 total)
## │ ├•costs:      continuous values (between 190.1328 and 215.8638)
## │ ├•extent:     0, 0, 1, 1 (xmin, ymin, xmax, ymax)
## │ └•CRS:        Undefined Cartesian SRS (projected)
## ├•formulation
## │├•objective:   minimum set objective
## │├•penalties:   none specified
## │├•targets:     relative targets (between 0.1 and 0.1)
## │├•constraints: none specified
## │└•decisions:   binary decision
## └•optimization
##  ├•portfolio:   default portfolio
##  └•solver:      highs solver (`gap` = 0, `time_limit` = 2147483647, …)
## # ℹ Use `summary(...)` to see complete formulation.</code></pre>
<ul>
<li><strong><em>lpsymphony</em> solver</strong>: <a href="https://github.com/coin-or/SYMPHONY"><em>SYMPHONY</em></a> is an
open-source integer programming solver that is also part of the COIN-OR
project. This solver uses the <em>lpsymphony R</em> package (available
on <a href="https://bioconductor.org/packages/release/bioc/html/lpsymphony.html">Bioconductor</a>)
to interface with the <em>SYMPHONY</em> software.</li>
</ul>
<div class="sourceCode" id="cb91"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb91-1"><a href="#cb91-1" tabindex="-1"></a><span class="co"># create a problem and specify that lpsymphony should be used to solve the</span></span>
<span id="cb91-2"><a href="#cb91-2" tabindex="-1"></a><span class="co"># problem and specify an optimality gap of zero to obtain the optimal solution</span></span>
<span id="cb91-3"><a href="#cb91-3" tabindex="-1"></a>p35 <span class="ot">&lt;-</span></span>
<span id="cb91-4"><a href="#cb91-4" tabindex="-1"></a>  <span class="fu">problem</span>(sim_pu_raster, sim_features) <span class="sc">%&gt;%</span></span>
<span id="cb91-5"><a href="#cb91-5" tabindex="-1"></a>  <span class="fu">add_min_set_objective</span>() <span class="sc">%&gt;%</span></span>
<span id="cb91-6"><a href="#cb91-6" tabindex="-1"></a>  <span class="fu">add_relative_targets</span>(<span class="fl">0.1</span>) <span class="sc">%&gt;%</span></span>
<span id="cb91-7"><a href="#cb91-7" tabindex="-1"></a>  <span class="fu">add_binary_decisions</span>() <span class="sc">%&gt;%</span></span>
<span id="cb91-8"><a href="#cb91-8" tabindex="-1"></a>  <span class="fu">add_lpsymphony_solver</span>(<span class="at">gap =</span> <span class="dv">0</span>)</span>
<span id="cb91-9"><a href="#cb91-9" tabindex="-1"></a></span>
<span id="cb91-10"><a href="#cb91-10" tabindex="-1"></a><span class="co"># print problem</span></span>
<span id="cb91-11"><a href="#cb91-11" tabindex="-1"></a><span class="fu">print</span>(p35)</span></code></pre></div>
<pre><code>## A conservation problem (&lt;ConservationProblem&gt;)
## ├•data
## │├•features:    &quot;feature_1&quot;, &quot;feature_2&quot;, &quot;feature_3&quot;, &quot;feature_4&quot;, and &quot;feature_5&quot; (5 total)
## │└•planning units:
## │ ├•data:       &lt;SpatRaster&gt; (90 total)
## │ ├•costs:      continuous values (between 190.1328 and 215.8638)
## │ ├•extent:     0, 0, 1, 1 (xmin, ymin, xmax, ymax)
## │ └•CRS:        Undefined Cartesian SRS (projected)
## ├•formulation
## │├•objective:   minimum set objective
## │├•penalties:   none specified
## │├•targets:     relative targets (between 0.1 and 0.1)
## │├•constraints: none specified
## │└•decisions:   binary decision
## └•optimization
##  ├•portfolio:   default portfolio
##  └•solver:      lpsymphony (`gap` = 0, `time_limit` = 2147483647, `first_feasible` = FALSE, …)
## # ℹ Use `summary(...)` to see complete formulation.</code></pre>
<ul>
<li><strong><em>Rsymphony</em> solver</strong>: This solver provides a
different interface to the <a href="https://github.com/coin-or/SYMPHONY"><em>SYMPHONY</em></a>
software. It uses the <em>Rsymphony R</em> package which is available on
The Comprehensive R Archive Network (CRAN). This solver is generally
slower than the other solvers, because it cannot use parallel
processing.</li>
</ul>
<div class="sourceCode" id="cb93"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb93-1"><a href="#cb93-1" tabindex="-1"></a><span class="co"># create a problem and specify that Rsymphony should be used to solve the</span></span>
<span id="cb93-2"><a href="#cb93-2" tabindex="-1"></a><span class="co"># problem and specify an optimality gap of zero to obtain the optimal solution</span></span>
<span id="cb93-3"><a href="#cb93-3" tabindex="-1"></a>p36 <span class="ot">&lt;-</span></span>
<span id="cb93-4"><a href="#cb93-4" tabindex="-1"></a>  <span class="fu">problem</span>(sim_pu_raster, sim_features) <span class="sc">%&gt;%</span></span>
<span id="cb93-5"><a href="#cb93-5" tabindex="-1"></a>  <span class="fu">add_min_set_objective</span>() <span class="sc">%&gt;%</span></span>
<span id="cb93-6"><a href="#cb93-6" tabindex="-1"></a>  <span class="fu">add_relative_targets</span>(<span class="fl">0.1</span>) <span class="sc">%&gt;%</span></span>
<span id="cb93-7"><a href="#cb93-7" tabindex="-1"></a>  <span class="fu">add_binary_decisions</span>() <span class="sc">%&gt;%</span></span>
<span id="cb93-8"><a href="#cb93-8" tabindex="-1"></a>  <span class="fu">add_rsymphony_solver</span>(<span class="at">gap =</span> <span class="dv">0</span>)</span>
<span id="cb93-9"><a href="#cb93-9" tabindex="-1"></a></span>
<span id="cb93-10"><a href="#cb93-10" tabindex="-1"></a><span class="co"># print problem</span></span>
<span id="cb93-11"><a href="#cb93-11" tabindex="-1"></a><span class="fu">print</span>(p36)</span></code></pre></div>
<pre><code>## A conservation problem (&lt;ConservationProblem&gt;)
## ├•data
## │├•features:    &quot;feature_1&quot;, &quot;feature_2&quot;, &quot;feature_3&quot;, &quot;feature_4&quot;, and &quot;feature_5&quot; (5 total)
## │└•planning units:
## │ ├•data:       &lt;SpatRaster&gt; (90 total)
## │ ├•costs:      continuous values (between 190.1328 and 215.8638)
## │ ├•extent:     0, 0, 1, 1 (xmin, ymin, xmax, ymax)
## │ └•CRS:        Undefined Cartesian SRS (projected)
## ├•formulation
## │├•objective:   minimum set objective
## │├•penalties:   none specified
## │├•targets:     relative targets (between 0.1 and 0.1)
## │├•constraints: none specified
## │└•decisions:   binary decision
## └•optimization
##  ├•portfolio:   default portfolio
##  └•solver:      rsymphony solver (`gap` = 0, `time_limit` = 2147483647, `first_feasible` = FALSE, …)
## # ℹ Use `summary(...)` to see complete formulation.</code></pre>
</div>
<div id="add-a-portfolio" class="section level3">
<h3>Add a portfolio</h3>
<p>Many conservation planning exercises require a portfolio of
solutions. For example, real-world exercises can involve presenting
decision makers with a range of near-optimal decisions. Additionally,
the number of times that different planning units are selected in
different solutions can provide insight into their relative importance.
The following portfolio methods are available.</p>
<ul>
<li><strong>Gap portfolio</strong>: Generate a portfolio of solutions by
finding a certain number of solutions that are all within a
pre-specified optimality gap. This method is especially useful for
generating multiple solutions that can used be to calculate selection
frequencies (similar to <em>Marxan</em>). Note that this method requires
that the <em>Gurobi</em> optimization software is used to generate
solutions.</li>
</ul>
<div class="sourceCode" id="cb95"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb95-1"><a href="#cb95-1" tabindex="-1"></a><span class="co"># create a problem and specify that a portfolio should be created by</span></span>
<span id="cb95-2"><a href="#cb95-2" tabindex="-1"></a><span class="co"># finding five solutions within 10% of optimality</span></span>
<span id="cb95-3"><a href="#cb95-3" tabindex="-1"></a>p37 <span class="ot">&lt;-</span></span>
<span id="cb95-4"><a href="#cb95-4" tabindex="-1"></a>  <span class="fu">problem</span>(sim_pu_raster, sim_features) <span class="sc">%&gt;%</span></span>
<span id="cb95-5"><a href="#cb95-5" tabindex="-1"></a>  <span class="fu">add_min_set_objective</span>() <span class="sc">%&gt;%</span></span>
<span id="cb95-6"><a href="#cb95-6" tabindex="-1"></a>  <span class="fu">add_relative_targets</span>(<span class="fl">0.1</span>) <span class="sc">%&gt;%</span></span>
<span id="cb95-7"><a href="#cb95-7" tabindex="-1"></a>  <span class="fu">add_binary_decisions</span>() <span class="sc">%&gt;%</span></span>
<span id="cb95-8"><a href="#cb95-8" tabindex="-1"></a>  <span class="fu">add_gap_portfolio</span>(<span class="at">number_solutions =</span> <span class="dv">5</span>, <span class="at">pool_gap =</span> <span class="fl">0.2</span>)</span>
<span id="cb95-9"><a href="#cb95-9" tabindex="-1"></a></span>
<span id="cb95-10"><a href="#cb95-10" tabindex="-1"></a><span class="co"># print problem</span></span>
<span id="cb95-11"><a href="#cb95-11" tabindex="-1"></a><span class="fu">print</span>(p37)</span></code></pre></div>
<pre><code>## A conservation problem (&lt;ConservationProblem&gt;)
## ├•data
## │├•features:    &quot;feature_1&quot;, &quot;feature_2&quot;, &quot;feature_3&quot;, &quot;feature_4&quot;, and &quot;feature_5&quot; (5 total)
## │└•planning units:
## │ ├•data:       &lt;SpatRaster&gt; (90 total)
## │ ├•costs:      continuous values (between 190.1328 and 215.8638)
## │ ├•extent:     0, 0, 1, 1 (xmin, ymin, xmax, ymax)
## │ └•CRS:        Undefined Cartesian SRS (projected)
## ├•formulation
## │├•objective:   minimum set objective
## │├•penalties:   none specified
## │├•targets:     relative targets (between 0.1 and 0.1)
## │├•constraints: none specified
## │└•decisions:   binary decision
## └•optimization
##  ├•portfolio:   gap portfolio (`number_solutions` = 5, `pool_gap` = 0.2)
##  └•solver:      gurobi solver (`gap` = 0.1, `time_limit` = 2147483647, `first_feasible` = FALSE, …)
## # ℹ Use `summary(...)` to see complete formulation.</code></pre>
<ul>
<li><strong>Top portfolio</strong>: Generate a portfolio of solutions by
finding a pre-specified number of solutions that are closest to
optimality (i.e the top solutions). Note that this method requires that
the <em>Gurobi</em> optimization software is used to generate
solutions.</li>
</ul>
<div class="sourceCode" id="cb97"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb97-1"><a href="#cb97-1" tabindex="-1"></a><span class="co"># create a problem and specify that a portfolio should be created using</span></span>
<span id="cb97-2"><a href="#cb97-2" tabindex="-1"></a><span class="co"># the top five solutions</span></span>
<span id="cb97-3"><a href="#cb97-3" tabindex="-1"></a>p38 <span class="ot">&lt;-</span></span>
<span id="cb97-4"><a href="#cb97-4" tabindex="-1"></a>  <span class="fu">problem</span>(sim_pu_raster, sim_features) <span class="sc">%&gt;%</span></span>
<span id="cb97-5"><a href="#cb97-5" tabindex="-1"></a>  <span class="fu">add_min_set_objective</span>() <span class="sc">%&gt;%</span></span>
<span id="cb97-6"><a href="#cb97-6" tabindex="-1"></a>  <span class="fu">add_relative_targets</span>(<span class="fl">0.1</span>) <span class="sc">%&gt;%</span></span>
<span id="cb97-7"><a href="#cb97-7" tabindex="-1"></a>  <span class="fu">add_binary_decisions</span>() <span class="sc">%&gt;%</span></span>
<span id="cb97-8"><a href="#cb97-8" tabindex="-1"></a>  <span class="fu">add_top_portfolio</span>(<span class="at">number_solutions =</span> <span class="dv">5</span>)</span>
<span id="cb97-9"><a href="#cb97-9" tabindex="-1"></a></span>
<span id="cb97-10"><a href="#cb97-10" tabindex="-1"></a><span class="co"># print problem</span></span>
<span id="cb97-11"><a href="#cb97-11" tabindex="-1"></a><span class="fu">print</span>(p38)</span></code></pre></div>
<pre><code>## A conservation problem (&lt;ConservationProblem&gt;)
## ├•data
## │├•features:    &quot;feature_1&quot;, &quot;feature_2&quot;, &quot;feature_3&quot;, &quot;feature_4&quot;, and &quot;feature_5&quot; (5 total)
## │└•planning units:
## │ ├•data:       &lt;SpatRaster&gt; (90 total)
## │ ├•costs:      continuous values (between 190.1328 and 215.8638)
## │ ├•extent:     0, 0, 1, 1 (xmin, ymin, xmax, ymax)
## │ └•CRS:        Undefined Cartesian SRS (projected)
## ├•formulation
## │├•objective:   minimum set objective
## │├•penalties:   none specified
## │├•targets:     relative targets (between 0.1 and 0.1)
## │├•constraints: none specified
## │└•decisions:   binary decision
## └•optimization
##  ├•portfolio:   top portfolio (`number_solutions` = 5)
##  └•solver:      gurobi solver (`gap` = 0.1, `time_limit` = 2147483647, `first_feasible` = FALSE, …)
## # ℹ Use `summary(...)` to see complete formulation.</code></pre>
<ul>
<li><strong>Extra portfolio</strong>: Generate a portfolio of solutions
by storing feasible solutions found during the optimization process.
Note that this method requires that the <em>Gurobi</em> optimization
software is used to generate solutions.</li>
</ul>
<div class="sourceCode" id="cb99"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb99-1"><a href="#cb99-1" tabindex="-1"></a><span class="co"># create a problem and specify that a portfolio should be created using</span></span>
<span id="cb99-2"><a href="#cb99-2" tabindex="-1"></a><span class="co"># extra solutions found while solving the problem</span></span>
<span id="cb99-3"><a href="#cb99-3" tabindex="-1"></a>p39 <span class="ot">&lt;-</span></span>
<span id="cb99-4"><a href="#cb99-4" tabindex="-1"></a>  <span class="fu">problem</span>(sim_pu_raster, sim_features) <span class="sc">%&gt;%</span></span>
<span id="cb99-5"><a href="#cb99-5" tabindex="-1"></a>  <span class="fu">add_min_set_objective</span>() <span class="sc">%&gt;%</span></span>
<span id="cb99-6"><a href="#cb99-6" tabindex="-1"></a>  <span class="fu">add_relative_targets</span>(<span class="fl">0.1</span>) <span class="sc">%&gt;%</span></span>
<span id="cb99-7"><a href="#cb99-7" tabindex="-1"></a>  <span class="fu">add_binary_decisions</span>() <span class="sc">%&gt;%</span></span>
<span id="cb99-8"><a href="#cb99-8" tabindex="-1"></a>  <span class="fu">add_extra_portfolio</span>()</span>
<span id="cb99-9"><a href="#cb99-9" tabindex="-1"></a></span>
<span id="cb99-10"><a href="#cb99-10" tabindex="-1"></a><span class="co"># print problem</span></span>
<span id="cb99-11"><a href="#cb99-11" tabindex="-1"></a><span class="fu">print</span>(p39)</span></code></pre></div>
<pre><code>## A conservation problem (&lt;ConservationProblem&gt;)
## ├•data
## │├•features:    &quot;feature_1&quot;, &quot;feature_2&quot;, &quot;feature_3&quot;, &quot;feature_4&quot;, and &quot;feature_5&quot; (5 total)
## │└•planning units:
## │ ├•data:       &lt;SpatRaster&gt; (90 total)
## │ ├•costs:      continuous values (between 190.1328 and 215.8638)
## │ ├•extent:     0, 0, 1, 1 (xmin, ymin, xmax, ymax)
## │ └•CRS:        Undefined Cartesian SRS (projected)
## ├•formulation
## │├•objective:   minimum set objective
## │├•penalties:   none specified
## │├•targets:     relative targets (between 0.1 and 0.1)
## │├•constraints: none specified
## │└•decisions:   binary decision
## └•optimization
##  ├•portfolio:   extra portfolio
##  └•solver:      gurobi solver (`gap` = 0.1, `time_limit` = 2147483647, `first_feasible` = FALSE, …)
## # ℹ Use `summary(...)` to see complete formulation.</code></pre>
<ul>
<li><strong>Cuts portfolio</strong>: Generate a portfolio of distinct
solutions within a pre-specified optimality gap. This method is only
recommended if the <em>Gurobi</em> optimization solver is not
available.</li>
</ul>
<div class="sourceCode" id="cb101"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb101-1"><a href="#cb101-1" tabindex="-1"></a><span class="co"># create a problem and specify that a portfolio containing 10 solutions</span></span>
<span id="cb101-2"><a href="#cb101-2" tabindex="-1"></a><span class="co"># should be created using using Bender&#39;s cuts</span></span>
<span id="cb101-3"><a href="#cb101-3" tabindex="-1"></a>p40 <span class="ot">&lt;-</span></span>
<span id="cb101-4"><a href="#cb101-4" tabindex="-1"></a>  <span class="fu">problem</span>(sim_pu_raster, sim_features) <span class="sc">%&gt;%</span></span>
<span id="cb101-5"><a href="#cb101-5" tabindex="-1"></a>  <span class="fu">add_min_set_objective</span>() <span class="sc">%&gt;%</span></span>
<span id="cb101-6"><a href="#cb101-6" tabindex="-1"></a>  <span class="fu">add_relative_targets</span>(<span class="fl">0.1</span>) <span class="sc">%&gt;%</span></span>
<span id="cb101-7"><a href="#cb101-7" tabindex="-1"></a>  <span class="fu">add_binary_decisions</span>() <span class="sc">%&gt;%</span></span>
<span id="cb101-8"><a href="#cb101-8" tabindex="-1"></a>  <span class="fu">add_cuts_portfolio</span>(<span class="at">number_solutions =</span> <span class="dv">10</span>)</span>
<span id="cb101-9"><a href="#cb101-9" tabindex="-1"></a></span>
<span id="cb101-10"><a href="#cb101-10" tabindex="-1"></a><span class="co"># print problem</span></span>
<span id="cb101-11"><a href="#cb101-11" tabindex="-1"></a><span class="fu">print</span>(p40)</span></code></pre></div>
<pre><code>## A conservation problem (&lt;ConservationProblem&gt;)
## ├•data
## │├•features:    &quot;feature_1&quot;, &quot;feature_2&quot;, &quot;feature_3&quot;, &quot;feature_4&quot;, and &quot;feature_5&quot; (5 total)
## │└•planning units:
## │ ├•data:       &lt;SpatRaster&gt; (90 total)
## │ ├•costs:      continuous values (between 190.1328 and 215.8638)
## │ ├•extent:     0, 0, 1, 1 (xmin, ymin, xmax, ymax)
## │ └•CRS:        Undefined Cartesian SRS (projected)
## ├•formulation
## │├•objective:   minimum set objective
## │├•penalties:   none specified
## │├•targets:     relative targets (between 0.1 and 0.1)
## │├•constraints: none specified
## │└•decisions:   binary decision
## └•optimization
##  ├•portfolio:   cuts portfolio (`number_solutions` = 10)
##  └•solver:      gurobi solver (`gap` = 0.1, `time_limit` = 2147483647, `first_feasible` = FALSE, …)
## # ℹ Use `summary(...)` to see complete formulation.</code></pre>
<ul>
<li><strong>Shuffle portfolio</strong>: Generate a portfolio of
solutions by randomly reordering the data prior to attempting to solve
the problem. If the <em>Gurobi</em> optimization solver is not
available, this method is the fastest method for generating a set number
of solutions within a specified distance from optimality.</li>
</ul>
<div class="sourceCode" id="cb103"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb103-1"><a href="#cb103-1" tabindex="-1"></a><span class="co"># create a problem and specify a portfolio should be created that contains</span></span>
<span id="cb103-2"><a href="#cb103-2" tabindex="-1"></a><span class="co"># 10 solutions and that any duplicate solutions should not be removed</span></span>
<span id="cb103-3"><a href="#cb103-3" tabindex="-1"></a>p41 <span class="ot">&lt;-</span></span>
<span id="cb103-4"><a href="#cb103-4" tabindex="-1"></a>  <span class="fu">problem</span>(sim_pu_raster, sim_features) <span class="sc">%&gt;%</span></span>
<span id="cb103-5"><a href="#cb103-5" tabindex="-1"></a>  <span class="fu">add_min_set_objective</span>() <span class="sc">%&gt;%</span></span>
<span id="cb103-6"><a href="#cb103-6" tabindex="-1"></a>  <span class="fu">add_relative_targets</span>(<span class="fl">0.1</span>) <span class="sc">%&gt;%</span></span>
<span id="cb103-7"><a href="#cb103-7" tabindex="-1"></a>  <span class="fu">add_binary_decisions</span>() <span class="sc">%&gt;%</span></span>
<span id="cb103-8"><a href="#cb103-8" tabindex="-1"></a>  <span class="fu">add_shuffle_portfolio</span>(<span class="at">number_solutions =</span> <span class="dv">10</span>, <span class="at">remove_duplicates =</span> <span class="cn">FALSE</span>)</span>
<span id="cb103-9"><a href="#cb103-9" tabindex="-1"></a></span>
<span id="cb103-10"><a href="#cb103-10" tabindex="-1"></a><span class="co"># print problem</span></span>
<span id="cb103-11"><a href="#cb103-11" tabindex="-1"></a><span class="fu">print</span>(p41)</span></code></pre></div>
<pre><code>## A conservation problem (&lt;ConservationProblem&gt;)
## ├•data
## │├•features:    &quot;feature_1&quot;, &quot;feature_2&quot;, &quot;feature_3&quot;, &quot;feature_4&quot;, and &quot;feature_5&quot; (5 total)
## │└•planning units:
## │ ├•data:       &lt;SpatRaster&gt; (90 total)
## │ ├•costs:      continuous values (between 190.1328 and 215.8638)
## │ ├•extent:     0, 0, 1, 1 (xmin, ymin, xmax, ymax)
## │ └•CRS:        Undefined Cartesian SRS (projected)
## ├•formulation
## │├•objective:   minimum set objective
## │├•penalties:   none specified
## │├•targets:     relative targets (between 0.1 and 0.1)
## │├•constraints: none specified
## │└•decisions:   binary decision
## └•optimization
##  ├•portfolio:   shuffle portfolio (`number_solutions` = 10, …)
##  └•solver:      gurobi solver (`gap` = 0.1, `time_limit` = 2147483647, `first_feasible` = FALSE, …)
## # ℹ Use `summary(...)` to see complete formulation.</code></pre>
</div>
<div id="solve-the-problem" class="section level3">
<h3>Solve the problem</h3>
<p>After formulating our conservation planning problem and specifying
how the problem should be solved, we can use the <code>solve()</code>
function to obtain a solution. Note that the solver will typically print
out some information describing the size of the problem and report its
progress when searching for a suitable solution.</p>
<div class="sourceCode" id="cb105"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb105-1"><a href="#cb105-1" tabindex="-1"></a><span class="co"># formulate the problem</span></span>
<span id="cb105-2"><a href="#cb105-2" tabindex="-1"></a>p42 <span class="ot">&lt;-</span></span>
<span id="cb105-3"><a href="#cb105-3" tabindex="-1"></a>  <span class="fu">problem</span>(sim_pu_raster, sim_features) <span class="sc">%&gt;%</span></span>
<span id="cb105-4"><a href="#cb105-4" tabindex="-1"></a>  <span class="fu">add_min_set_objective</span>() <span class="sc">%&gt;%</span></span>
<span id="cb105-5"><a href="#cb105-5" tabindex="-1"></a>  <span class="fu">add_relative_targets</span>(<span class="fl">0.1</span>) <span class="sc">%&gt;%</span></span>
<span id="cb105-6"><a href="#cb105-6" tabindex="-1"></a>  <span class="fu">add_boundary_penalties</span>(<span class="at">penalty =</span> <span class="dv">500</span>, <span class="at">edge_factor =</span> <span class="fl">0.5</span>) <span class="sc">%&gt;%</span></span>
<span id="cb105-7"><a href="#cb105-7" tabindex="-1"></a>  <span class="fu">add_binary_decisions</span>()</span>
<span id="cb105-8"><a href="#cb105-8" tabindex="-1"></a></span>
<span id="cb105-9"><a href="#cb105-9" tabindex="-1"></a><span class="co"># print problem</span></span>
<span id="cb105-10"><a href="#cb105-10" tabindex="-1"></a><span class="fu">print</span>(p42)</span></code></pre></div>
<pre><code>## A conservation problem (&lt;ConservationProblem&gt;)
## ├•data
## │├•features:    &quot;feature_1&quot;, &quot;feature_2&quot;, &quot;feature_3&quot;, &quot;feature_4&quot;, and &quot;feature_5&quot; (5 total)
## │└•planning units:
## │ ├•data:       &lt;SpatRaster&gt; (90 total)
## │ ├•costs:      continuous values (between 190.1328 and 215.8638)
## │ ├•extent:     0, 0, 1, 1 (xmin, ymin, xmax, ymax)
## │ └•CRS:        Undefined Cartesian SRS (projected)
## ├•formulation
## │├•objective:   minimum set objective
## │├•penalties:
## ││└•1:          boundary penalties (`penalty` = 500, `edge_factor` = 0.5, …)
## │├•targets:     relative targets (between 0.1 and 0.1)
## │├•constraints: none specified
## │└•decisions:   binary decision
## └•optimization
##  ├•portfolio:   default portfolio
##  └•solver:      gurobi solver (`gap` = 0.1, `time_limit` = 2147483647, `first_feasible` = FALSE, …)
## # ℹ Use `summary(...)` to see complete formulation.</code></pre>
<div class="sourceCode" id="cb107"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb107-1"><a href="#cb107-1" tabindex="-1"></a><span class="co"># solve the problem (using the default solver)</span></span>
<span id="cb107-2"><a href="#cb107-2" tabindex="-1"></a>s42 <span class="ot">&lt;-</span> <span class="fu">solve</span>(p42)</span></code></pre></div>
<pre><code>## Set parameter Username
## Set parameter TimeLimit to value 2147483647
## Set parameter MIPGap to value 0.1
## Set parameter Presolve to value 2
## Set parameter Threads to value 1
## Academic license - for non-commercial use only - expires 2025-04-21
## Gurobi Optimizer version 11.0.2 build v11.0.2rc0 (linux64 - &quot;Ubuntu 22.04.4 LTS&quot;)
## 
## CPU model: 11th Gen Intel(R) Core(TM) i7-1185G7 @ 3.00GHz, instruction set [SSE2|AVX|AVX2|AVX512]
## Thread count: 4 physical cores, 8 logical processors, using up to 1 threads
## 
## Optimize a model with 293 rows, 234 columns and 1026 nonzeros
## Model fingerprint: 0xb4b90756
## Variable types: 0 continuous, 234 integer (234 binary)
## Coefficient statistics:
##   Matrix range     [2e-01, 1e+00]
##   Objective range  [1e+02, 4e+02]
##   Bounds range     [1e+00, 1e+00]
##   RHS range        [3e+00, 8e+00]
## Found heuristic solution: objective 20287.197006
## Found heuristic solution: objective 3087.9617767
## Presolve time: 0.00s
## Presolved: 293 rows, 234 columns, 1026 nonzeros
## Variable types: 0 continuous, 234 integer (234 binary)
## Root relaxation presolved: 293 rows, 234 columns, 1026 nonzeros
## 
## 
## Root relaxation: objective 2.265862e+03, 228 iterations, 0.00 seconds (0.00 work units)
## 
##     Nodes    |    Current Node    |     Objective Bounds      |     Work
##  Expl Unexpl |  Obj  Depth IntInf | Incumbent    BestBd   Gap | It/Node Time
## 
##      0     0 2265.86242    0  234 3087.96178 2265.86242  26.6%     -    0s
##      0     0 2328.27423    0  232 3087.96178 2328.27423  24.6%     -    0s
##      0     0 2357.91894    0  229 3087.96178 2357.91894  23.6%     -    0s
## H    0     0                    3034.0204010 2357.91894  22.3%     -    0s
##      0     0 2379.43275    0  197 3034.02040 2379.43275  21.6%     -    0s
##      0     0 2379.43275    0  197 3034.02040 2379.43275  21.6%     -    0s
## H    0     0                    2890.8754120 2379.43275  17.7%     -    0s
## H    0     0                    2814.4777374 2379.43275  15.5%     -    0s
##      0     2 2379.78730    0  197 2814.47774 2379.78730  15.4%     -    0s
## H   20    20                    2648.2596588 2382.48313  10.0%  23.4    0s
## 
## Cutting planes:
##   Gomory: 3
## 
## Explored 34 nodes (1117 simplex iterations) in 0.13 seconds (0.12 work units)
## Thread count was 1 (of 8 available processors)
## 
## Solution count 6: 2648.26 2814.48 2890.88 ... 20287.2
## 
## Optimal solution found (tolerance 1.00e-01)
## Best objective 2.648259658813e+03, best bound 2.391338223393e+03, gap 9.7015%</code></pre>
<div class="sourceCode" id="cb109"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb109-1"><a href="#cb109-1" tabindex="-1"></a><span class="co"># plot solution</span></span>
<span id="cb109-2"><a href="#cb109-2" tabindex="-1"></a><span class="fu">plot</span>(</span>
<span id="cb109-3"><a href="#cb109-3" tabindex="-1"></a>  s42, <span class="at">col =</span> <span class="fu">c</span>(<span class="st">&quot;grey90&quot;</span>, <span class="st">&quot;darkgreen&quot;</span>), <span class="at">main =</span> <span class="st">&quot;Solution&quot;</span>,</span>
<span id="cb109-4"><a href="#cb109-4" tabindex="-1"></a>  <span class="at">xlim =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="fl">0.1</span>, <span class="fl">1.1</span>), <span class="at">ylim =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="fl">0.1</span>, <span class="fl">1.1</span>), <span class="at">axes =</span> <span class="cn">FALSE</span></span>
<span id="cb109-5"><a href="#cb109-5" tabindex="-1"></a>)</span></code></pre></div>
<p><img role="img" src="data:image/png;base64,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" style="display: block; margin: auto;" /></p>
<p>We can plot this solution because the planning unit input data are
spatially referenced in a raster format. The output format will always
match the planning unit data used to initialize the problem. For
example, the solution to a problem with planning units in a spatial
vector (shapefile) format would also be in a spatial vector format.
Similarly, if the planning units were in a tabular format (i.e.,
<code>data.frame</code>), the solution would also be returned in a
tabular format.</p>
<p>We can also extract attributes from the solution that describe the
quality of the solution and the optimization process.</p>
<div class="sourceCode" id="cb110"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb110-1"><a href="#cb110-1" tabindex="-1"></a><span class="co"># extract the objective (numerical value being minimized or maximized)</span></span>
<span id="cb110-2"><a href="#cb110-2" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">attr</span>(s42, <span class="st">&quot;objective&quot;</span>))</span></code></pre></div>
<pre><code>## solution_1 
##    2648.26</code></pre>
<div class="sourceCode" id="cb112"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb112-1"><a href="#cb112-1" tabindex="-1"></a><span class="co"># extract time spent solving solution</span></span>
<span id="cb112-2"><a href="#cb112-2" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">attr</span>(s42, <span class="st">&quot;runtime&quot;</span>))</span></code></pre></div>
<pre><code>## solution_1 
##      0.156</code></pre>
<div class="sourceCode" id="cb114"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb114-1"><a href="#cb114-1" tabindex="-1"></a><span class="co"># extract state message from the solver that describes why this specific</span></span>
<span id="cb114-2"><a href="#cb114-2" tabindex="-1"></a><span class="co"># solution was returned</span></span>
<span id="cb114-3"><a href="#cb114-3" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">attr</span>(s42, <span class="st">&quot;status&quot;</span>))</span></code></pre></div>
<pre><code>## solution_1 
##  &quot;OPTIMAL&quot;</code></pre>
</div>
</div>
<div id="evaluate-the-solution" class="section level2">
<h2>Evaluate the solution</h2>
<p>Conservation planning involves making trade-offs between different
criteria (e.g., overall cost, feature representation, connectivity).
After obtaining a solution to a conservation planning problem, it is
important to evaluate it to help understand the trade-offs made by the
prioritization. This is also useful to compare different solutions with
each other.</p>
<div id="evaluating-performance" class="section level3">
<h3>Evaluating performance</h3>
<p>Summary statistics can be computed to evaluate the overall
performance of a solution based on certain criteria. The following
summaries can be computed.</p>
<p>The following functions are available to summarize a solution:</p>
<ul>
<li><strong>Number summary</strong>: Calculate the number of planning
units selected by a solution.</li>
</ul>
<div class="sourceCode" id="cb116"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb116-1"><a href="#cb116-1" tabindex="-1"></a><span class="co"># calculate statistic</span></span>
<span id="cb116-2"><a href="#cb116-2" tabindex="-1"></a><span class="fu">eval_n_summary</span>(p42, s42)</span></code></pre></div>
<pre><code>## # A tibble: 1 × 2
##   summary     n
##   &lt;chr&gt;   &lt;dbl&gt;
## 1 overall    10</code></pre>
<ul>
<li><strong>Cost summary</strong>: Calculate the total cost of a
solution.</li>
</ul>
<div class="sourceCode" id="cb118"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb118-1"><a href="#cb118-1" tabindex="-1"></a><span class="co"># calculate statistic</span></span>
<span id="cb118-2"><a href="#cb118-2" tabindex="-1"></a><span class="fu">eval_cost_summary</span>(p42, s42)</span></code></pre></div>
<pre><code>## # A tibble: 1 × 2
##   summary  cost
##   &lt;chr&gt;   &lt;dbl&gt;
## 1 overall 2048.</code></pre>
<ul>
<li><strong>Feature representation summary</strong>: Calculate how well
features are represented by a solution. This function can be used for
any type of problem.</li>
</ul>
<div class="sourceCode" id="cb120"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb120-1"><a href="#cb120-1" tabindex="-1"></a><span class="co"># calculate statistics</span></span>
<span id="cb120-2"><a href="#cb120-2" tabindex="-1"></a><span class="fu">eval_feature_representation_summary</span>(p42, s42)</span></code></pre></div>
<pre><code>## # A tibble: 5 × 5
##   summary feature   total_amount absolute_held relative_held
##   &lt;chr&gt;   &lt;chr&gt;            &lt;dbl&gt;         &lt;dbl&gt;         &lt;dbl&gt;
## 1 overall feature_1         83.3          8.57         0.103
## 2 overall feature_2         31.2          3.18         0.102
## 3 overall feature_3         72.0          7.28         0.101
## 4 overall feature_4         42.7          5.01         0.118
## 5 overall feature_5         56.7          5.71         0.101</code></pre>
<ul>
<li><strong>Target coverage summary</strong>: Calculate how well
representation targets are met by a solution. This function can only be
used with problems contain targets.</li>
</ul>
<div class="sourceCode" id="cb122"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb122-1"><a href="#cb122-1" tabindex="-1"></a><span class="co"># calculate statistics</span></span>
<span id="cb122-2"><a href="#cb122-2" tabindex="-1"></a><span class="fu">eval_target_coverage_summary</span>(p42, s42)</span></code></pre></div>
<pre><code>## # A tibble: 5 × 9
##   feature   met   total_amount absolute_target absolute_held absolute_shortfall
##   &lt;chr&gt;     &lt;lgl&gt;        &lt;dbl&gt;           &lt;dbl&gt;         &lt;dbl&gt;              &lt;dbl&gt;
## 1 feature_1 TRUE          83.3            8.33          8.57                  0
## 2 feature_2 TRUE          31.2            3.12          3.18                  0
## 3 feature_3 TRUE          72.0            7.20          7.28                  0
## 4 feature_4 TRUE          42.7            4.27          5.01                  0
## 5 feature_5 TRUE          56.7            5.67          5.71                  0
## # ℹ 3 more variables: relative_target &lt;dbl&gt;, relative_held &lt;dbl&gt;,
## #   relative_shortfall &lt;dbl&gt;</code></pre>
<ul>
<li><strong>Boundary summary</strong>: Calculate the total exposed
boundary length (perimeter) associated with a solution.</li>
</ul>
<div class="sourceCode" id="cb124"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb124-1"><a href="#cb124-1" tabindex="-1"></a><span class="co"># calculate statistic</span></span>
<span id="cb124-2"><a href="#cb124-2" tabindex="-1"></a><span class="fu">eval_boundary_summary</span>(p42, s42)</span></code></pre></div>
<pre><code>## # A tibble: 1 × 2
##   summary boundary
##   &lt;chr&gt;      &lt;dbl&gt;
## 1 overall      1.2</code></pre>
<ul>
<li><strong>Connectivity summary</strong>: Calculate the connectivity of
a solution using symmetric connectivity data.</li>
</ul>
<div class="sourceCode" id="cb126"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb126-1"><a href="#cb126-1" tabindex="-1"></a><span class="co"># create symmetric connectivity data</span></span>
<span id="cb126-2"><a href="#cb126-2" tabindex="-1"></a><span class="co"># here we parametrize connectivity based on which planning units are</span></span>
<span id="cb126-3"><a href="#cb126-3" tabindex="-1"></a><span class="co"># adjacent to each other</span></span>
<span id="cb126-4"><a href="#cb126-4" tabindex="-1"></a>cm <span class="ot">&lt;-</span> <span class="fu">adjacency_matrix</span>(sim_pu_raster)</span>
<span id="cb126-5"><a href="#cb126-5" tabindex="-1"></a></span>
<span id="cb126-6"><a href="#cb126-6" tabindex="-1"></a><span class="co"># calculate statistic</span></span>
<span id="cb126-7"><a href="#cb126-7" tabindex="-1"></a><span class="fu">eval_connectivity_summary</span>(p42, s42, <span class="at">data =</span> cm)</span></code></pre></div>
<pre><code>## # A tibble: 1 × 2
##   summary connectivity
##   &lt;chr&gt;          &lt;dbl&gt;
## 1 overall           24</code></pre>
<ul>
<li><strong>Asymmetric connectivity summary</strong>: Calculate the
connectivity of a solution using asymmetric connectivity data.</li>
</ul>
<div class="sourceCode" id="cb128"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb128-1"><a href="#cb128-1" tabindex="-1"></a><span class="co"># create asymmetric connectivity data</span></span>
<span id="cb128-2"><a href="#cb128-2" tabindex="-1"></a><span class="co"># here we parametrize connectivity by randomly simulating values</span></span>
<span id="cb128-3"><a href="#cb128-3" tabindex="-1"></a>acm <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="fu">runif</span>(<span class="fu">ncell</span>(sim_pu_raster) <span class="sc">^</span> <span class="dv">2</span>), <span class="at">ncol =</span> <span class="fu">ncell</span>(sim_pu_raster))</span>
<span id="cb128-4"><a href="#cb128-4" tabindex="-1"></a></span>
<span id="cb128-5"><a href="#cb128-5" tabindex="-1"></a><span class="co"># calculate statistic</span></span>
<span id="cb128-6"><a href="#cb128-6" tabindex="-1"></a><span class="fu">eval_asym_connectivity_summary</span>(p42, s42, <span class="at">data =</span> acm)</span></code></pre></div>
<pre><code>## # A tibble: 1 × 2
##   summary asym_connectivity
##   &lt;chr&gt;               &lt;dbl&gt;
## 1 overall              46.8</code></pre>
</div>
<div id="evaluating-relative-importance" class="section level3">
<h3>Evaluating relative importance</h3>
<p>Conservation plans can take a long time to implement. Since funding
availability and habitat quality can decline over time, it is critical
that the most important places in a prioritization are scheduled for
management as early as possible. For instance, some planning units in a
solution might contain many rare species which do not occur in any other
planning units. Alternatively, some planning units might offer an
especially high return on investment that reduces costs considerably. As
a consequence, conservation planners often need information on which
planning units selected in a prioritization are most important to the
overall success of the prioritization. To achieve this, conservation
planners can use importance scores for each planning unit selected by a
solution.</p>
<p>Let’s generate a prioritization so that can compare the different
importance methods.</p>
<div class="sourceCode" id="cb130"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb130-1"><a href="#cb130-1" tabindex="-1"></a><span class="co"># formulate the problem</span></span>
<span id="cb130-2"><a href="#cb130-2" tabindex="-1"></a>p43 <span class="ot">&lt;-</span></span>
<span id="cb130-3"><a href="#cb130-3" tabindex="-1"></a>  <span class="fu">problem</span>(sim_pu_raster, sim_features) <span class="sc">%&gt;%</span></span>
<span id="cb130-4"><a href="#cb130-4" tabindex="-1"></a>  <span class="fu">add_min_set_objective</span>() <span class="sc">%&gt;%</span></span>
<span id="cb130-5"><a href="#cb130-5" tabindex="-1"></a>  <span class="fu">add_relative_targets</span>(<span class="fl">0.1</span>) <span class="sc">%&gt;%</span></span>
<span id="cb130-6"><a href="#cb130-6" tabindex="-1"></a>  <span class="fu">add_binary_decisions</span>()</span>
<span id="cb130-7"><a href="#cb130-7" tabindex="-1"></a></span>
<span id="cb130-8"><a href="#cb130-8" tabindex="-1"></a><span class="co"># solve the problem</span></span>
<span id="cb130-9"><a href="#cb130-9" tabindex="-1"></a>s43 <span class="ot">&lt;-</span> <span class="fu">solve</span>(p43)</span></code></pre></div>
<pre><code>## Set parameter Username
## Set parameter TimeLimit to value 2147483647
## Set parameter MIPGap to value 0.1
## Set parameter Presolve to value 2
## Set parameter Threads to value 1
## Academic license - for non-commercial use only - expires 2025-04-21
## Gurobi Optimizer version 11.0.2 build v11.0.2rc0 (linux64 - &quot;Ubuntu 22.04.4 LTS&quot;)
## 
## CPU model: 11th Gen Intel(R) Core(TM) i7-1185G7 @ 3.00GHz, instruction set [SSE2|AVX|AVX2|AVX512]
## Thread count: 4 physical cores, 8 logical processors, using up to 1 threads
## 
## Optimize a model with 5 rows, 90 columns and 450 nonzeros
## Model fingerprint: 0x4bb5d283
## Variable types: 0 continuous, 90 integer (90 binary)
## Coefficient statistics:
##   Matrix range     [2e-01, 9e-01]
##   Objective range  [2e+02, 2e+02]
##   Bounds range     [1e+00, 1e+00]
##   RHS range        [3e+00, 8e+00]
## Found heuristic solution: objective 2337.9617767
## Presolve time: 0.00s
## Presolved: 5 rows, 90 columns, 450 nonzeros
## Variable types: 0 continuous, 90 integer (90 binary)
## Found heuristic solution: objective 2332.1004028
## Root relaxation presolved: 5 rows, 90 columns, 450 nonzeros
## 
## 
## Root relaxation: objective 1.931582e+03, 12 iterations, 0.00 seconds (0.00 work units)
## 
##     Nodes    |    Current Node    |     Objective Bounds      |     Work
##  Expl Unexpl |  Obj  Depth IntInf | Incumbent    BestBd   Gap | It/Node Time
## 
##      0     0 1931.58191    0    4 2332.10040 1931.58191  17.2%     -    0s
## H    0     0                    1987.3985291 1931.58191  2.81%     -    0s
## 
## Explored 1 nodes (12 simplex iterations) in 0.00 seconds (0.00 work units)
## Thread count was 1 (of 8 available processors)
## 
## Solution count 3: 1987.4 2332.1 2337.96 
## 
## Optimal solution found (tolerance 1.00e-01)
## Best objective 1.987398529053e+03, best bound 1.931581907658e+03, gap 2.8085%</code></pre>
<div class="sourceCode" id="cb132"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb132-1"><a href="#cb132-1" tabindex="-1"></a><span class="co"># plot solution</span></span>
<span id="cb132-2"><a href="#cb132-2" tabindex="-1"></a><span class="fu">plot</span>(</span>
<span id="cb132-3"><a href="#cb132-3" tabindex="-1"></a>  s43, <span class="at">col =</span> <span class="fu">c</span>(<span class="st">&quot;grey90&quot;</span>, <span class="st">&quot;darkgreen&quot;</span>), <span class="at">main =</span> <span class="st">&quot;Solution&quot;</span>,</span>
<span id="cb132-4"><a href="#cb132-4" tabindex="-1"></a>  <span class="at">xlim =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="fl">0.1</span>, <span class="fl">1.1</span>), <span class="at">ylim =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="fl">0.1</span>, <span class="fl">1.1</span>), <span class="at">axes =</span> <span class="cn">FALSE</span></span>
<span id="cb132-5"><a href="#cb132-5" tabindex="-1"></a>)</span></code></pre></div>
<p><img role="img" src="data:image/png;base64,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" style="display: block; margin: auto;" /></p>
<p>The following methods are available for computing importance
scores.</p>
<ul>
<li><strong>Replacement cost</strong>: Evaluate importance using the
replacement cost method <span class="citation">(Cabeza &amp; Moilanen
2006)</span>. This method quantifies the importance of a given planning
unit as the decrease in the performance of the solution (based on the
objective function) if the planning unit cannot be acquired (e.g., in
terms of the additional costs required to meet feature targets). The
advantages of this method are that it (i) accounts for the costs of the
planning units, (ii) can be applied to multiple management zones, (iii)
can be applied to any objective function, and (iv) can identify truly
irreplaceable planning units (denoted with infinite values). However,
the key disadvantage of this method, is that can take an infeasible
amount of time to complete for large and complex problems.</li>
</ul>
<div class="sourceCode" id="cb133"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb133-1"><a href="#cb133-1" tabindex="-1"></a><span class="co"># calculate replacement cost scores and make the solver quiet</span></span>
<span id="cb133-2"><a href="#cb133-2" tabindex="-1"></a>rc43 <span class="ot">&lt;-</span></span>
<span id="cb133-3"><a href="#cb133-3" tabindex="-1"></a>  p43 <span class="sc">%&gt;%</span></span>
<span id="cb133-4"><a href="#cb133-4" tabindex="-1"></a>  <span class="fu">add_default_solver</span>(<span class="at">gap =</span> <span class="dv">0</span>, <span class="at">verbose =</span> <span class="cn">FALSE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb133-5"><a href="#cb133-5" tabindex="-1"></a>  <span class="fu">eval_replacement_importance</span>(s43)</span>
<span id="cb133-6"><a href="#cb133-6" tabindex="-1"></a></span>
<span id="cb133-7"><a href="#cb133-7" tabindex="-1"></a><span class="co"># plot replacement cost scores</span></span>
<span id="cb133-8"><a href="#cb133-8" tabindex="-1"></a><span class="fu">plot</span>(</span>
<span id="cb133-9"><a href="#cb133-9" tabindex="-1"></a>  rc43, <span class="at">main =</span> <span class="st">&quot;Replacement cost scores&quot;</span>,</span>
<span id="cb133-10"><a href="#cb133-10" tabindex="-1"></a>  <span class="at">xlim =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="fl">0.1</span>, <span class="fl">1.1</span>), <span class="at">ylim =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="fl">0.1</span>, <span class="fl">1.1</span>), <span class="at">axes =</span> <span class="cn">FALSE</span></span>
<span id="cb133-11"><a href="#cb133-11" tabindex="-1"></a>)</span></code></pre></div>
<p><img role="img" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAeAAAAEzCAMAAADeoCAmAAAACXBIWXMAAA7DAAAOwwHHb6hkAAADAFBMVEX///8rc44gpIUpeY5FBFhHE2af2TlEAVQnfo7MzMz95yWF1EkAAAB5SYQzYI3///4jh44rsX0vaY5HLHsfoYhIInQ/vXL+//87UIsenIkyY44fkoxIHG5IwW0+SIkmrYEAAAUOAxMKFBwLDxsNCRggKwoHAAAtLQVEOIItb44hj40fmIomgI45VIw1t3g9TYpIF2lGDF8VKBFWxmZmy1ym2zRBQ4bq5Rq63ieS10HW4hlAPYJ60lAMJRf/+8oCAwoVAgAGMYDl/f8IGBwHIhry///T+/8GHBwGHxvpmkb/+cI4WIwxtXpGMn4lgo5FNIAubY4ii40lhI5IKHg5uXY1XI0flYtHEGMscY5gyl9byGNEOoOZ2D0AAhTd4xit3C/k5Bi03StQxGlGCFwoe45szVnB3yPP4RzI4B/w5Rwqdo4hpoUjqYOL1kX//Nv25iByz1b//u1yIwQ9kOD//ub7xXP///MjBgCXQwuy9/////xkufmoUw8CH257LRX8///0s2BYrPSKNwU1h9gdL0QBD1vAwMAXKnMpQ2bc+/95KQS8+f8QDRAYDw3/9rlnHgTyzpuO0fdAk+MQHzLO0M5pHh3ZiDZsv/gMQJRIm+YABSUNTKHw8PDl6uMIDgUFOIt3xUidSQppRSkFJF/E+v8nFQqNwOQLBgb82pFgNxxUOCPD9P83IBar6f73vmsHIVPJ+f9Na5BMDgHQfi3VlEig1PdEFwMWYLSgxNjd3dvz+vV6qNb+66Jtlrz21KVzUTQjGWAfUpy93PP647O5pHz/+9VKk9KLjZIeISAbM1vAyceqiHE4OjkBC0N4c3SxhUkiHWg9gL6b5P7ChULgjzzsq1qpbDX6+fiMZEE7BgDJr5LRrX+Xl5XE5/vRt6/97dFMf6gtftDm9PWwxc654PogUYi/bCH24cBYi7/f28pWKAq7h0w0drssFj/nw5FSHSlnt++4uLjowohYWFiNPxUkb8GjeVfbr3JAaKiOnMA4ODJjY2XYoFfP3KWWpabejzyjLznmAAAL90lEQVR42uzdCXwU5RnH8bdqLciUbW1le3gsBGMva0tbeoBuEggKai/tSdPD3hc1HIlswU0kQCgJh4gchlrQBIlcAiLhEANEIpcWC6SARWMFiiCHtLRFq+/M7PEsu2v5KMR9Z3//yWcZd+adSea778w7m/WJUoQQQgghhBBCCCGEEEIIIYQQclYTujvXclJUWRdOt1LxTGvk0DO2S9+ELVsePisrkzcAtqzNE9sIuG9u0e/PysokJXCg4+7duzcesKxHCgH2JPA0v1LhIaXWvWNUaMLq2pyKVQVK9Rto3btzTlXFs32iwMXr6quDk67/u91sX8vc2e5svMU1f7Dy1y0NTtrfekIv3F8glw24wxr+6urqnMqHVfH2uVZg0r8L3P3HN6T2/Gvu7JzKFfarrGSXvauHnklcOfZsunb2Xu5qObRV7DihUTYDqwf+at1T6CsrtU/WgcY+NvCkWj2fm/+gC1yy2D2Z3zdPr7zImV2wVYkWGjg4W88HN+XZ1/RpYbFMH/rptU7roYNn2v/qF5Od+IbU2vHObPBgoQotyYvsSq4cfzZdO72XBbOszVvFjmWjrAYesD03OC08brx137J/6NkRYQ1sbV617oAVHBR2gFcu0sva62XlSh/26c9ueDJPn9RFCw0cqPxfS17kcWqBWKYPvbVgvb21cnnWFRsqHmYFXnh+3VJr+hTlNnwyL/BcWKwsnk3TTu8lEKzoPk/sWDTK8kFWbtHBAlWWV1Suz87jrfw+Gnj6EeXTHXtqgQO8dsvJOr9eIzAobPf2AjX4Nmv4WNFCA4+cZ8+6j/l9xDJ96PUYzr8tLzBCmokN6ddPvr4azC/VaPb8mnDTxi0r5Mri2TTt9F70iUPJH0M0yvZR9IK6cGhxbrBi06b/lmpPDTx8rFJNd1gjx0YGWXt2bplVamlgR1mpHTU1YdHCvgY7J2r7caB+FMvsq+P9Sg0pTQQWG5pv2yu3od6GFah4aFlhwiBLPJumnd6L/X2GEr+paKPsHkW36KMxL7Q3dsu0td9Ap2c4tu7D0/rCFmzO1Yd2W26g3B7h6uaiRRKwWJYa2BffkCqbHZim3HHS/b4Jc5yX3YKJElg8m6ZdZC/ymxKNsvsaXLJXX8T0S3969EBEerB9zNwerIfZo5e1aiKnB99pd6AdO2SLFD04tix9D45sKNYTneYqtG9jfZ49ukq4TYo9m6ZdFFjsWDTKbmD7tFYeuXgV71z/nwL3GuxeJR3gv9hHOtQ3N34Nnhm7BjstkoDFsjQ9WGxIXksfXb9e3wCtHaj3Gl/ZL55N0y6yF/ljiEZZD6xPdXrMuaBuxoulgX8WxkbRReV+B1jTNm7Qo1UNPOA2q8gexAacUXS0RRKwWHYKcHDQcmfMIzakR8PB6GhYd9AXnm/YtdTtwdGVxbNp2kWBxY5FoywHvtvumqFtzg2kpe99o/fBgcYx7oXYufUMNOfpo6YeWBq9uRQtkoDFMgmsH6NnTH98Q/J+tum4ewmdfsQvVpbPpm4XBfbFdywbZfcbHWV5Vv5CFXppVnVOxaox8Xey9o+JjLRCx+qrK/a/ukiPXPRRbamd7b49FG+RBCyWJQAPfrE22Oi+OeWPb8gn3skasLG+OtDF+fWHWFk8m7pdFFjsWDYiMjawfYB8voS3hkOuy5nqDkkbcvcW8qV8Mfr+X7s3bkRSAROAiYlpatkU/Y1PdmXPM+B7OSV7B0XGY4/Oqq7kwyReu6nYtTovAnzN7X+e8fTohRwTL8UX2rn7QAR4yGND1bjJUzgoXjtFD3OBfX2n2r+QvJP7ZxMTbrgrIQ0NDTWnAIdeu6dQ/8cIgE3MKCsxzc3NJ+nBHkr7Ky6QuaJ98ilaDXlqrOo3mU90ehK4+G9r9Cj68eVLRj/IwTIT+HcyScD9BuqHCXOqnpjIsfIa8Cn3TfyqwlDgX8qkByYAk4wE/rwMwAATgEkmAf9QBmCAiWHA35cBGGBiGPCXZAAGmABMMgn45zIAA0wMA/6FTPYBv8vsvBvgrAf+mQzAAANsFvDlX5C5HGCAAQYY4AwC/pEMwAADbBjwD2QABhhgw4A/JwMwwAADDHAmAZ8vAzDAABsG/D0ZgAEG2DDgL8oADDDAb1/exM8HsOeBfysDcPYAx0vMho7VVz3h1b8E4Hngbh1kusWARYnZlYcfr3nlsXkAewpYlJj1dLVZ7wP37NlBT5GHGLAsUDluMj3YYOA/yXQbVVOzw7nuihKzoVfyAs7fMgXYPOCj1h9lrKqqqpdP7cFDDtXteOkwp2hjT9Ei4hocKzEbWux0Zo/+XelsAL41NvWUo2inxKxdbXb+obrlxw4foQebCXyrTBw4UmLWrjZbcqK+qmJFIcDeAnauxO4/9p/P8/sBNhP4pzLdeKsSYIDNAv6sDMAAAwwwwJkE/B0ZgAEG2KzPZHX7rgzAAANsGPBnZAAGGGCAAc4g4KtvkbkaYIABNgv4EhmAPQh8i5gApgcDbBxwp9gEsAeBO8kA7EngS6JfANODAQYY4MwCvrlT/Atg7wHfLAMwwAAbBvxJGYABBhhggDMJ+AYZgAEG2Czg3u+V6Q2w94BvEBPA9GCAjQO+LP4FMD0YYMOAL5MBOHuA49Vm1b6W2ooVVLrzFrCoNtt0/GDrsUMTAfYUsKw2+9RYFaqhTpahwL+R6Z2i2qyv72j7FA2wp4BFtdnQa0X7W0/MpRipkcBHraS8nNSD8xdSjNTcHvxrmd4pqs2q+aMB9h6wqDarB9StJxhFmwp8jkzvVNVmnVn+6sqby+nt8rzknN43+xaAnStxfDYMsJnA171f5jreqgQYYIABBhhggAE+I8AflAEYYIABBhhggNsM+OMyAAMMMMAAZxLwN2UABhhgs4Cv/bDMtQADDDDAAAMMcFsBf0wG4DbIO5JzFj90BzDAABsN/DUZgAEGGGCAAQa4zYDfIwMwwAADDHAGAff6ukwvgAEG2CzgL8sADDDAhgF/QgZggAEGGOBMAm4nA3D2AItqs0r1u70cYEOBfyLTK1W1WaWK9wYBPmMfwGqXnLcBWFSbVf5tlQcANhX4XJleKarNKrXy8DJO0R4DFtVmfYNnTmsC2FDg06g2G1rSWACwuT34VzK9UlSbDQ1z3B+h2qyngEW1WR27BwNsJnDC/VivlNVmXWBO0d4Cdq7EvJNlPvC3ZXirEmCAzQLu8lGZLgADDDDAAGcQ8FdlAAYYYMOAL5QBGGCAAQYY4EwGPqMvg3OTcyZfeQAD/CEZgD0IfKGYAKYHA2wacEcxAew94I4yAAMMMMAAZxLwN2QABhhggAEGGOA2A75eBmCAATYLOOdKmRyAAQYYYIAzCPgDMgB7EPhKMQH8Vj5/pc5JTofkpGj4zuTQgwE+TeCrxASw94CvkgEYYIABBjiTgC+VATh7gOPVZn3H6qsqVhQC7ClgUW125eH9rSfmTgHYUODul8a/clJVmy3TziXDnqMQmpnA3WVyUlWbHTwjbFcE9wPsIWBRbVb5/f4JsxrHcIo2EfioFZSxqqqqTq02q9Se7ZNWeXSM5f0e3LWHTNdRNTU73GtwrNqsajre2IfbJHNP0T2694h96VO03x8ZRceqzZaNXjNjxoxWgM0E1qz9bdz+euqRk6LabGhxrmVZgRGMog0F7t89PuVQbdZz1+D+Ml15qxJggM0C/ogMwKedFMWQ2p2fnBS7vCA5Z7GMEsAAA2w08FdkAAYYYMOAb5QBGGCADQN+nwzAHgS+UUwA04MBBhhggAFuM+CbZAAGGGDDgC+SAdiDwDeJCWB6MMAAAwwwwG0GfLFM9gF7PRr4oovjXwB7DrhzQg/uDDDAxCzgT8kADDABmGQScML/LwEwwMQw4G/JAAwwMQz40zIAA0wAJpkE/GMZgLMHOF5tVs4S44DPk+mcqtqsmCWeARbVZsUsMQ844RMgnVNUm00oW0k8AiyqzcrCs8S0jLIS09zcfJIe7KH424+S2dDQ0FDjXoPj1WbFLPFMRLXZyCzHxFuJVZsNR2aJ9yKqzfp8HA5CCCGEEEIIIYQQQgghhBBCCCGEEEIIIYQQQgghhBBCCCGEEELI6xsFo2AUDGUAAH09yvi8uRsmAAAAAElFTkSuQmCC" style="display: block; margin: auto;" />
* <strong>Ferrier method</strong>: Evaluate importance by computing
irreplaceability scores following Ferrier <em>et al.</em> <span class="citation">(<strong>r-34?</strong>)</span>. The advantages of this
method are that it (i) can be computed relatively quickly for moderate
and large-sized problems, and (ii) calculates a score for each feature
within each planning unit to provide insight into why certain planning
units are more important than others. The disadvantage with this method
is that it can only be applied to conservation problems that use targets
and have a single zone (i.e., similar to <em>Marxan</em>-type
problems).</p>
<div class="sourceCode" id="cb134"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb134-1"><a href="#cb134-1" tabindex="-1"></a><span class="co"># calculate Ferrier scores and extract total score</span></span>
<span id="cb134-2"><a href="#cb134-2" tabindex="-1"></a>fs43 <span class="ot">&lt;-</span> <span class="fu">eval_ferrier_importance</span>(p43, s43)[[<span class="st">&quot;total&quot;</span>]]</span>
<span id="cb134-3"><a href="#cb134-3" tabindex="-1"></a></span>
<span id="cb134-4"><a href="#cb134-4" tabindex="-1"></a><span class="co"># plot Ferrier scores</span></span>
<span id="cb134-5"><a href="#cb134-5" tabindex="-1"></a><span class="fu">plot</span>(</span>
<span id="cb134-6"><a href="#cb134-6" tabindex="-1"></a>  fs43, <span class="at">main =</span> <span class="st">&quot;Ferrier scores&quot;</span>,</span>
<span id="cb134-7"><a href="#cb134-7" tabindex="-1"></a>  <span class="at">xlim =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="fl">0.1</span>, <span class="fl">1.1</span>), <span class="at">ylim =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="fl">0.1</span>, <span class="fl">1.1</span>), <span class="at">axes =</span> <span class="cn">FALSE</span></span>
<span id="cb134-8"><a href="#cb134-8" tabindex="-1"></a>)</span></code></pre></div>
<p><img role="img" src="data:image/png;base64,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" style="display: block; margin: auto;" />
* <strong>Rarity weighted richness</strong>: Evaluate importance by
computing rarity weighted richness scores <span class="citation">(Williams <em>et al.</em> 1996)</span>. The only
advantage with this method is that it can be computed very quickly for
very large problems. The key disadvantage with this approach is that it
merely describes the spatial patterns of biodiversity, and does not
consider any of the goals that underpin conservation planning exercise.
For instance, it does not account for planning costs, management zones,
objective functions, or feature representation targets.</p>
<div class="sourceCode" id="cb135"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb135-1"><a href="#cb135-1" tabindex="-1"></a><span class="co"># calculate rarity weighted richness scores</span></span>
<span id="cb135-2"><a href="#cb135-2" tabindex="-1"></a>rwr43 <span class="ot">&lt;-</span> <span class="fu">eval_rare_richness_importance</span>(p43, s43)</span>
<span id="cb135-3"><a href="#cb135-3" tabindex="-1"></a></span>
<span id="cb135-4"><a href="#cb135-4" tabindex="-1"></a><span class="co"># plot rarity weighted richness scores</span></span>
<span id="cb135-5"><a href="#cb135-5" tabindex="-1"></a><span class="fu">plot</span>(</span>
<span id="cb135-6"><a href="#cb135-6" tabindex="-1"></a>  rwr43, <span class="at">main =</span> <span class="st">&quot;Rarity weighted richness scores&quot;</span>,</span>
<span id="cb135-7"><a href="#cb135-7" tabindex="-1"></a>  <span class="at">xlim =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="fl">0.1</span>, <span class="fl">1.1</span>), <span class="at">ylim =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="fl">0.1</span>, <span class="fl">1.1</span>), <span class="at">axes =</span> <span class="cn">FALSE</span></span>
<span id="cb135-8"><a href="#cb135-8" tabindex="-1"></a>)</span></code></pre></div>
<p><img role="img" src="data:image/png;base64,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" style="display: block; margin: auto;" /></p>
<p>In general, we recommend using replacement cost scores for small and
moderate sized problems (e.g., less than 30,000 planning units) when it
is feasible to do so. It can take a very long time to compute
replacement cost scores, and so it is simply not feasible to compute
these scores for particularly large problems. For moderate and large
sized problems (e.g., more than 30,000 planning units), we recommend
using the Ferrier method. This is because it explicitly accounts for
representation targets, unlike the rarity weighted richness scores. We
almost never recommend using the rarity weighted richness scores. This
is because they do not consider criteria needed to inform conservation
decision making <span class="citation">(Brown <em>et al.</em>
2015)</span>.</p>
</div>
</div>
<div id="marxan-problems" class="section level2">
<h2><em>Marxan</em> problems</h2>
<p>Although we encourage users to build and tailor conservation planning
problems to suit their own needs, sometimes it just simply easier to use
something you’re already familiar with. The
<code>marxan_problem()</code> function is provided as a convenient
wrapper for building and solving <em>Marxan</em>-style conservation
problems. If users already have their conservation planning data
formatted for use with <em>Marxan</em>, this function can also read
<em>Marxan</em> data files and solve the <em>Marxan</em>-style problems
using exact algorithm solvers. <strong>Please note that problems built
using the <code>marxan_problem()</code> function are still solved the
same way as a problem initialized using the <code>problem()</code>
function, and therefore still require the installation of one of the
solver packages.</strong></p>
<p>Here is a short example showing how the <code>marxan_problem()</code>
function can be used to read <em>Marxan</em> input files and the
<code>solve</code> function can be used to solve the problem.</p>
<div class="sourceCode" id="cb136"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb136-1"><a href="#cb136-1" tabindex="-1"></a><span class="co"># set file path for Marxan input file</span></span>
<span id="cb136-2"><a href="#cb136-2" tabindex="-1"></a>minput <span class="ot">&lt;-</span> <span class="fu">system.file</span>(<span class="st">&quot;extdata/marxan/input.dat&quot;</span>, <span class="at">package =</span> <span class="st">&quot;prioritizr&quot;</span>)</span>
<span id="cb136-3"><a href="#cb136-3" tabindex="-1"></a></span>
<span id="cb136-4"><a href="#cb136-4" tabindex="-1"></a><span class="co"># read Marxan input file</span></span>
<span id="cb136-5"><a href="#cb136-5" tabindex="-1"></a>mp <span class="ot">&lt;-</span> <span class="fu">marxan_problem</span>(minput)</span>
<span id="cb136-6"><a href="#cb136-6" tabindex="-1"></a></span>
<span id="cb136-7"><a href="#cb136-7" tabindex="-1"></a><span class="co"># print problem</span></span>
<span id="cb136-8"><a href="#cb136-8" tabindex="-1"></a><span class="fu">print</span>(mp)</span></code></pre></div>
<pre><code>## A conservation problem (&lt;ConservationProblem&gt;)
## ├•data
## │├•features:    &quot;bird1&quot;, &quot;nvis2&quot;, &quot;nvis8&quot;, &quot;nvis9&quot;, &quot;nvis14&quot;, &quot;nvis20&quot;, … (17 total)
## │└•planning units:
## │ ├•data:       &lt;data.frame&gt; (1751 total)
## │ ├•costs:      continuous values (between 0 and 415692.1938)
## │ ├•extent:     NA
## │ └•CRS:        NA
## ├•formulation
## │├•objective:   minimum set objective
## │├•penalties:
## ││└•1:          boundary penalties (`penalty` = 1, `edge_factor` = 1, …)
## │├•targets:     relative targets (between 0.3 and 0.3)
## │├•constraints:
## ││├•1:          locked in constraints (317 planning units)
## ││└•2:          locked out constraints (1 planning units)
## │└•decisions:   binary decision
## └•optimization
##  ├•portfolio:   default portfolio
##  └•solver:      gurobi solver (`gap` = 0.1, `time_limit` = 2147483647, `first_feasible` = FALSE, …)
## # ℹ Use `summary(...)` to see complete formulation.</code></pre>
<div class="sourceCode" id="cb138"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb138-1"><a href="#cb138-1" tabindex="-1"></a><span class="co"># solve the problem</span></span>
<span id="cb138-2"><a href="#cb138-2" tabindex="-1"></a>ms <span class="ot">&lt;-</span> <span class="fu">solve</span>(mp)</span></code></pre></div>
<pre><code>## Set parameter Username
## Set parameter TimeLimit to value 2147483647
## Set parameter MIPGap to value 0.1
## Set parameter Presolve to value 2
## Set parameter Threads to value 1
## Academic license - for non-commercial use only - expires 2025-04-21
## Gurobi Optimizer version 11.0.2 build v11.0.2rc0 (linux64 - &quot;Ubuntu 22.04.4 LTS&quot;)
## 
## CPU model: 11th Gen Intel(R) Core(TM) i7-1185G7 @ 3.00GHz, instruction set [SSE2|AVX|AVX2|AVX512]
## Thread count: 4 physical cores, 8 logical processors, using up to 1 threads
## 
## Optimize a model with 10075 rows, 6780 columns and 24778 nonzeros
## Model fingerprint: 0x7cea1a5d
## Variable types: 0 continuous, 6780 integer (6780 binary)
## Coefficient statistics:
##   Matrix range     [5e-05, 4e+03]
##   Objective range  [8e+03, 4e+05]
##   Bounds range     [1e+00, 1e+00]
##   RHS range        [5e+03, 3e+05]
## Found heuristic solution: objective 1.255825e+08
## Presolve removed 4707 rows and 3103 columns
## Presolve time: 0.07s
## Presolved: 5368 rows, 3677 columns, 12704 nonzeros
## Variable types: 0 continuous, 3677 integer (3677 binary)
## Found heuristic solution: objective 1.065946e+08
## Root relaxation presolved: 5368 rows, 3677 columns, 12704 nonzeros
## 
## 
## Root relaxation: interrupted, 11 iterations, 0.01 seconds (0.01 work units)
## 
##     Nodes    |    Current Node    |     Objective Bounds      |     Work
##  Expl Unexpl |  Obj  Depth IntInf | Incumbent    BestBd   Gap | It/Node Time
## 
##      0     0          -    0      1.0659e+08 9.5941e+07  10.0%     -    0s
## 
## Explored 1 nodes (11 simplex iterations) in 0.08 seconds (0.09 work units)
## Thread count was 1 (of 8 available processors)
## 
## Solution count 2: 1.06595e+08 1.25582e+08 
## 
## Optimal solution found (tolerance 1.00e-01)
## Best objective 1.065946314895e+08, best bound 9.594065554616e+07, gap 9.9949%</code></pre>
<div class="sourceCode" id="cb140"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb140-1"><a href="#cb140-1" tabindex="-1"></a><span class="co"># since the Marxan data was in a tabular format, the solution is also returned</span></span>
<span id="cb140-2"><a href="#cb140-2" tabindex="-1"></a><span class="co"># in a tabular format, so we will print the first six rows of the table</span></span>
<span id="cb140-3"><a href="#cb140-3" tabindex="-1"></a><span class="co"># containing the solution</span></span>
<span id="cb140-4"><a href="#cb140-4" tabindex="-1"></a><span class="fu">head</span>(ms)</span></code></pre></div>
<pre><code>##   id       cost status    xloc     yloc locked_in locked_out solution_1
## 1  3      0.000      0 1116623 -4493479     FALSE      FALSE          0
## 2 30   7527.275      3 1110623 -4496943     FALSE       TRUE          0
## 3 56  37349.075      0 1092623 -4500408     FALSE      FALSE          0
## 4 58  16959.021      0 1116623 -4500408     FALSE      FALSE          0
## 5 84  34220.256      0 1098623 -4503872     FALSE      FALSE          0
## 6 85 178907.584      0 1110623 -4503872     FALSE      FALSE          0</code></pre>
<p>Alternatively, rather then using a <em>Marxan</em> input file to
construct the problem, we can manually read in the <em>Marxan</em> data
files and input these to the <code>marxan_problem()</code> function.</p>
<div class="sourceCode" id="cb142"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb142-1"><a href="#cb142-1" tabindex="-1"></a><span class="co"># load data</span></span>
<span id="cb142-2"><a href="#cb142-2" tabindex="-1"></a>pu <span class="ot">&lt;-</span></span>
<span id="cb142-3"><a href="#cb142-3" tabindex="-1"></a>  <span class="fu">system.file</span>(<span class="st">&quot;extdata/marxan/input/pu.dat&quot;</span>, <span class="at">package =</span> <span class="st">&quot;prioritizr&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb142-4"><a href="#cb142-4" tabindex="-1"></a>  <span class="fu">read.table</span>(<span class="at">sep =</span> <span class="st">&quot;,&quot;</span>, <span class="at">header =</span> <span class="cn">TRUE</span>)</span>
<span id="cb142-5"><a href="#cb142-5" tabindex="-1"></a>features <span class="ot">&lt;-</span></span>
<span id="cb142-6"><a href="#cb142-6" tabindex="-1"></a>  <span class="fu">system.file</span>(<span class="st">&quot;extdata/marxan/input/spec.dat&quot;</span>, <span class="at">package =</span> <span class="st">&quot;prioritizr&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb142-7"><a href="#cb142-7" tabindex="-1"></a>  <span class="fu">read.table</span>(<span class="at">sep =</span> <span class="st">&quot;,&quot;</span>, <span class="at">header =</span> <span class="cn">TRUE</span>)</span>
<span id="cb142-8"><a href="#cb142-8" tabindex="-1"></a>bound <span class="ot">&lt;-</span></span>
<span id="cb142-9"><a href="#cb142-9" tabindex="-1"></a>  <span class="fu">system.file</span>(<span class="st">&quot;extdata/marxan/input/bound.dat&quot;</span>, <span class="at">package =</span> <span class="st">&quot;prioritizr&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb142-10"><a href="#cb142-10" tabindex="-1"></a>  <span class="fu">read.table</span>(<span class="at">sep =</span> <span class="st">&quot;</span><span class="sc">\t</span><span class="st">&quot;</span>, <span class="at">header =</span> <span class="cn">TRUE</span>)</span>
<span id="cb142-11"><a href="#cb142-11" tabindex="-1"></a>rij <span class="ot">&lt;-</span></span>
<span id="cb142-12"><a href="#cb142-12" tabindex="-1"></a>  <span class="fu">system.file</span>(<span class="st">&quot;extdata/marxan/input/puvspr.dat&quot;</span>, <span class="at">package =</span> <span class="st">&quot;prioritizr&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb142-13"><a href="#cb142-13" tabindex="-1"></a>  <span class="fu">read.table</span>(<span class="at">sep =</span> <span class="st">&quot;,&quot;</span>, <span class="at">header =</span> <span class="cn">TRUE</span>)</span>
<span id="cb142-14"><a href="#cb142-14" tabindex="-1"></a></span>
<span id="cb142-15"><a href="#cb142-15" tabindex="-1"></a><span class="co"># build Marxan problem using data.frame objects</span></span>
<span id="cb142-16"><a href="#cb142-16" tabindex="-1"></a>mp2 <span class="ot">&lt;-</span> <span class="fu">marxan_problem</span>(</span>
<span id="cb142-17"><a href="#cb142-17" tabindex="-1"></a>  <span class="at">x =</span> pu, <span class="at">spec =</span> features, <span class="at">puvspr =</span> rij, <span class="at">bound =</span> bound, <span class="at">blm =</span> <span class="dv">0</span></span>
<span id="cb142-18"><a href="#cb142-18" tabindex="-1"></a>)</span>
<span id="cb142-19"><a href="#cb142-19" tabindex="-1"></a></span>
<span id="cb142-20"><a href="#cb142-20" tabindex="-1"></a><span class="co"># print problem</span></span>
<span id="cb142-21"><a href="#cb142-21" tabindex="-1"></a><span class="fu">print</span>(mp2)</span></code></pre></div>
<pre><code>## A conservation problem (&lt;ConservationProblem&gt;)
## ├•data
## │├•features:    &quot;bird1&quot;, &quot;nvis2&quot;, &quot;nvis8&quot;, &quot;nvis9&quot;, &quot;nvis14&quot;, &quot;nvis20&quot;, … (17 total)
## │└•planning units:
## │ ├•data:       &lt;data.frame&gt; (1751 total)
## │ ├•costs:      continuous values (between 0 and 415692.1938)
## │ ├•extent:     NA
## │ └•CRS:        NA
## ├•formulation
## │├•objective:   minimum set objective
## │├•penalties:
## ││└•1:          boundary penalties (`penalty` = 0, `edge_factor` = 1, …)
## │├•targets:     relative targets (between 0.3 and 0.3)
## │├•constraints:
## ││├•1:          locked in constraints (317 planning units)
## ││└•2:          locked out constraints (1 planning units)
## │└•decisions:   binary decision
## └•optimization
##  ├•portfolio:   default portfolio
##  └•solver:      gurobi solver (`gap` = 0.1, `time_limit` = 2147483647, `first_feasible` = FALSE, …)
## # ℹ Use `summary(...)` to see complete formulation.</code></pre>
<p>Conservation planning problems that are built using the
<code>marxan_problem()</code> function can also be customized. For
example, we could change the decision type for <code>mp2</code> to
involve selecting a proportion of each planing unit (using the
<code>add_proportion_decisions()</code> function).</p>
</div>
<div id="conclusion" class="section level2">
<h2>Conclusion</h2>
<p>Hopefully, this vignette has provided an informative overview of the
<em>prioritizr R</em> package. For more examples using the package,
please see the other vignettes. Perhaps, one of the best ways to learn a
new piece of software is to just try it out. Test it, try breaking it,
make mistakes, and learn from them. We would recommend trying to build
conservation planning problems that resemble those you face in your own
work—but using the built-in example data sets. This way you can quickly
verify that the problems you build actually mean what you think they
mean. For instance, you can try playing around with the targets and see
what effect they have on the solutions, or try playing around with
penalties and see what effect they have on the solutions. Finally, if
you have any questions about using the package or suggestions for it,
please <a href="https://github.com/prioritizr/prioritizr/issues">post an
issue on the package’s online coding repository</a>.</p>
</div>
<div id="references" class="section level2 unnumbered">
<h2 class="unnumbered">References</h2>
<div id="refs" class="references csl-bib-body hanging-indent">
<div id="ref-r23" class="csl-entry">
Achterberg, T. &amp; Wunderling, R. (2013). <span class="nocase">Mixed
Integer Programming: Analyzing 12 Years of Progress</span>. <em>Facets
of combinatorial optimization: Festschrift for martin
gr<span>ö</span>tschel</em> (eds M. Jünger &amp; G. Reinelt), pp.
449–481. Springer, Berlin, Heidelberg.
</div>
<div id="ref-r3" class="csl-entry">
Ball, I.R., Possingham, H. &amp; Watts, M.E. (2009). <span class="nocase">Marxan and relatives: Software for spatial conservation
prioritisation</span>. <em><span>Spatial Conservation Prioritisation:
Quantitative Methods &amp; Computational Tools</span></em> (eds A.
Moilanen, K.A. Wilson &amp; H. Possingham), pp. 185–189. Oxford
University Press, Oxford, UK.
</div>
<div id="ref-r38" class="csl-entry">
Beger, M., Linke, S., Watts, M., Game, E., Treml, E., Ball, I. &amp;
Possingham, H.P. (2010). Incorporating asymmetric connectivity into
spatial decision making for conservation. <em>Conservation Letters</em>,
<em>3</em>, 359–368.
</div>
<div id="ref-r1" class="csl-entry">
Beyer, H.L., Dujardin, Y., Watts, M.E. &amp; Possingham, H.P. (2016).
Solving conservation planning problems with integer linear programming.
<em>Ecological Modelling</em>, <em>328</em>, 14–22.
</div>
<div id="ref-r16" class="csl-entry">
Billionnet, A. (2013). Mathematical optimization ideas for biodiversity
conservation. <em>European Journal of Operational Research</em>,
<em>231</em>, 514–534.
</div>
<div id="ref-r51" class="csl-entry">
Brown, C.J., Bode, M., Venter, O., Barnes, M.D., McGowan, J., Runge,
C.A., Watson, J.E.M. &amp; Possingham, H.P. (2015). Effective
conservation requires clear objectives and prioritizing actions, not
places or species. <em>Proceedings of the National Academy of
Sciences</em>, <em>112</em>, E4342.
</div>
<div id="ref-r20" class="csl-entry">
Butchart, S.H., Clarke, M., Smith, R.J., Sykes, R.E., Scharlemann, J.P.,
Harfoot, M., Buchanan, G.M., Angulo, A., Balmford, A., Bertzky, B. &amp;
others. (2015). Shortfalls and solutions for meeting national and global
conservation area targets. <em>Conservation Letters</em>, <em>8</em>,
329–337.
</div>
<div id="ref-r10" class="csl-entry">
Cabeza, M. &amp; Moilanen, A. (2001). Design of reserve networks and the
persistence of biodiversity. <em>Trends in Ecology &amp; Evolution</em>,
<em>16</em>, 242–248.
</div>
<div id="ref-r31" class="csl-entry">
Cabeza, M. &amp; Moilanen, A. (2006). Replacement cost: A practical
measure of site value for cost-effective reserve planning.
<em>Biological Conservation</em>, <em>132</em>, 336–342.
</div>
<div id="ref-r12" class="csl-entry">
Church, R.L., Stoms, D.M. &amp; Davis, F.W. (1996). Reserve selection as
a maximal covering location problem. <em>Biological conservation</em>,
<em>76</em>, 105–112.
</div>
<div id="ref-r13" class="csl-entry">
Faith, D.P. (1992). Conservation evaluation and phylogenetic diversity.
<em>Biological Conservation</em>, <em>61</em>, 1–10.
</div>
<div id="ref-r19" class="csl-entry">
Fuller, R.A., McDonald-Madden, E., Wilson, K.A., Carwardine, J.,
Grantham, H.S., Watson, J.E., Klein, C.J., Green, D.C. &amp; Possingham,
H.P. (2010). Replacing underperforming protected areas achieves better
conservation outcomes. <em>Nature</em>, <em>466</em>, 365.
</div>
<div id="ref-r17" class="csl-entry">
Kirkpatrick, J.B. (1983). <span class="nocase">An iterative method for
establishing priorities for the selection of nature reserves: An example
from Tasmania</span>. <em>Biological Conservation</em>, <em>25</em>,
127–134.
</div>
<div id="ref-r6" class="csl-entry">
Kirkpatrick, S., Gelatt, C.D. &amp; Vecchi, M.P. (1983). Optimization by
simulated annealing. <em>Science</em>, <em>220</em>, 671–680.
</div>
<div id="ref-r5" class="csl-entry">
Klein, C., Wilson, K., Watts, M., Stein, J., Berry, S., Carwardine, J.,
Smith, M.S., Mackey, B. &amp; Possingham, H. (2009). Incorporating
ecological and evolutionary processes into continental-scale
conservation planning. <em>Ecological Applications</em>, <em>19</em>,
206–217.
</div>
<div id="ref-r4" class="csl-entry">
Margules, C.R. &amp; Pressey, R.L. (2000). Systematic conservation
planning. <em>Nature</em>, <em>405</em>, 243–253.
</div>
<div id="ref-r7" class="csl-entry">
Moilanen, A. (2007). <a href="https://www.sciencedirect.com/science/article/pii/S0006320706003879"><span class="nocase">Landscape Zonation, benefit functions and target-based
planning: Unifying reserve selection strategies</span></a>.
<em>Biological Conservation</em>, <em>134</em>, 571–579.
</div>
<div id="ref-r8" class="csl-entry">
Nicholls, A.O. &amp; Margules, C.R. (1993). An upgraded reserve
selection algorithm. <em>Biological Conservation</em>, <em>64</em>,
165–169.
</div>
<div id="ref-r65" class="csl-entry">
Önal, H. &amp; Briers, R.A. (2002). Incorporating spatial criteria in
optimum reserve network selection. <em>Proceedings of the Royal Society
of London. Series B: Biological Sciences</em>, <em>269</em>, 2437–2441.
</div>
<div id="ref-r9" class="csl-entry">
Pressey, R.L., Possingham, H.P. &amp; Margules, C.R. (1996). <span class="nocase">Optimality in reserve selection algorithms: When does it
matter and how much?</span> <em>Biological Conservation</em>,
<em>76</em>, 259–267.
</div>
<div id="ref-r15" class="csl-entry">
Rodrigues, A.S., Akcakaya, H.R., Andelman, S.J., Bakarr, M.I., Boitani,
L., Brooks, T.M., Chanson, J.S., Fishpool, L.D., Da Fonseca, G.A.,
Gaston, K.J. &amp; others. (2004). <span class="nocase">Global gap
analysis: Priority regions for expanding the global protected-area
network</span>. <em>BioScience</em>, <em>54</em>, 1092–1100.
</div>
<div id="ref-r14" class="csl-entry">
Rodrigues, A.S. &amp; Gaston, K.J. (2002). Maximising phylogenetic
diversity in the selection of networks of conservation areas.
<em>Biological Conservation</em>, <em>105</em>, 103–111.
</div>
<div id="ref-r11" class="csl-entry">
Rodrigues, A.S., Orestes Cerdeira, J. &amp; Gaston, K.J. (2000). <span class="nocase">Flexibility, efficiency, and accountability: Adapting
reserve selection algorithms to more complex conservation
problems</span>. <em>Ecography</em>, <em>23</em>, 565–574.
</div>
<div id="ref-r32" class="csl-entry">
Rosauer, D., Laffan, S.W., Crisp, M.D., Donnellan, S.C. &amp; Cook, L.G.
(2009). Phylogenetic endemism: A new approach for identifying
geographical concentrations of evolutionary history. <em>Molecular
Ecology</em>, <em>18</em>, 4061–4072.
</div>
<div id="ref-r18" class="csl-entry">
Stigner, M.G., Beyer, H.L., Klein, C.J. &amp; Fuller, R.A. (2016). <a href="https://doi.org/10.1111/1365-2664.12662">Reconciling recreational
use and conservation values in a coastal protected area</a>. <em>Journal
of Applied Ecology</em>, <em>53</em>, 1206–1214.
</div>
<div id="ref-r33" class="csl-entry">
Williams, P., Gibbons, D., Margules, C., Rebelo, A., Humphries, C. &amp;
Pressey, R. (1996). <span class="nocase">A comparison of richness
hotspots, rarity hotspots, and complementary areas for conserving
diversity of British birds</span>. <em>Conservation Biology</em>,
<em>10</em>, 155–174.
</div>
</div>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
