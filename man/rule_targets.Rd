% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/rule_targets.R
\name{rule_targets}
\alias{rule_targets}
\title{Specify targets following a set of rules}
\usage{
rule_targets(
  baseline_relative_target,
  rules_relative_target,
  data,
  cap_area_target = 1e+06,
  area_units = "km^2"
)
}
\arguments{
\item{baseline_relative_target}{\code{numeric} value indicating the baseline
target values as a proportion (ranging between 0 and 1). Depending on
context of the prioritization exercise, a value of 0.3 (i.e., 30\%)
may be appropriate (Harris \emph{et al.} 2023).}

\item{rules_relative_target}{named \code{numeric} vector with name-value key pairs
denoting the values that should be added together when calculating the
relative target for a given feature. Note that values must range
between -1 and 1, and the names must correspond to column names of \code{data}.}

\item{data}{\code{data.frame} indicating if each feature meets the criteria
for applying each rule (or not) during the target calculations.
Here, each row must correspond to a different feature, and each column
contains information about the feature. In particular, \code{data}
must have a \code{"feature"} column that contains \code{character} values with the
feature names. Additionally, \code{data} must also contain columns
with \code{logical} (\code{TRUE}/\code{FALSE}) values that indicate if the feature
meets a particular criterion for calculating targets.
For example,
\code{data} could contain columns that indicate if each feature corresponds
to a threatened species, ecosystem service, or culturally important site.
Note that if different rules should be applied to species based on their
particular threat status (e.g., Critically Endangered species should receive
different target then Vulnerable species), then \code{data} should contain a
column for each threat status (separately).}

\item{cap_area_target}{\code{numeric} value denoting the area-based target cap.
To avoid setting a target cap, a missing (\code{NA}) value can be specified.
Defaults to 1000000
(i.e., 1,000,000 \ifelse{html}{\out{km<sup>2</sup>}}{\eqn{km^2}}).}

\item{area_units}{\code{character} value denoting the unit of measurement
for the area-based arguments.
Defaults to \code{"km^2"}
(i.e., \ifelse{html}{\out{km<sup>2</sup>}}{\eqn{km^2}}).}
}
\value{
An object (\code{\linkS4class{Method}}) for specifying targets.
}
\description{
Specify targets following a rule-based procedure based on a set of
ecological and ecosystem criteria. This is a customizable version of the
approach in Harris and Holness (2023).
This function is designed to be used within \code{add_auto_targets()} and
\code{add_group_targets()}.
}
\details{
This method has been applied to set target thresholds at national
scales (e.g., Harris \emph{et al.} 2023).
It is based on the rationale that it is appropriate to set the target
for a feature based on a linear combination of values.
When using this method in a planning exercise, it is important to ensure
that the criteria and values used for target setting reflect the stakeholder
objectives.
Additionally, the cap threshold may need to calibrated based on
the features and spatial extent of the planning region.
Please note that this function is provided as convenient method to
set targets for problems with a single management zone, and cannot
be used for those with multiple management zones.
}
\section{Mathematical formulation}{

This method provides a flexible approach for setting target thresholds based
on a set of criteria.
To express this mathematically, we will define the following terminology.
Let \eqn{f} denote the total abundance of a feature (e.g., geographic
range).
Also, let \eqn{U} denote the set of rules (indexed by \eqn{u}).
Next, let \eqn{b} denote the baseline relative target threshold
(per \code{baseline_relative_target}).
To parameterize the information about the features that will be used
for target calculations (per \code{data}),
let \eqn{d_u}{du} indicate if the target for
the feature should be calculated based on each rule \eqn{u \in U}{u in U}
(using binary values).
Furthermore, let \eqn{a_u} denote the value that will be used to calculate
the target based on rule \eqn{u} (per \code{rules_relative_target}).
Finally, let \eqn{c} denote the cap threshold (per \code{cap_area_target}).
Given this terminology, the target threshold (\eqn{t}) for a feature
is calculated as follows.
\deqn{
t = min(f \times max(min(b + \sum_{u \in U} d_u \times a_u, 1), 0), c)
}{
t = min(f * max(min(b + sum_u^U d_u * a_u, 1), 0), c)
}
}

\section{Target setting}{

Many conservation planning problems require targets.
Targets are used to specify the minimum amount, or proportion, of a
feature's spatial distribution that should ideally be protected.
This is important so that the optimization process can weigh the merits
and trade-offs between improving the representation of one feature over
another feature.
Although it can be challenging to set meaningful targets,
this is a critical step for ensuring that prioritizations
meet the stakeholder objectives that underpin a prioritization exercise
(Carwardine \emph{et al.} 2009).
In other words, targets play an important role in ensuring that a
priority setting process is properly tuned according to stakeholder
requirements.
For example, targets provide a mechanism for ensuring that a
prioritization secures enough habitat to promote the long-term persistence
of each threatened species, culturally important species,
or economically important ecosystem service under consideration.
Since there is often uncertainty regarding stakeholder objectives
(e.g., how much habitat should be protected for a given species)
or the influence of particular target on a prioritization
(e.g., how would setting a 90\% or 100\% for a threatened species alter
priorities), it is often useful to generate and compare a suite of
prioritizations based on different target scenarios.
}

\section{Data calculations}{

This function involves calculating targets based on the spatial extent
of the features in \code{x}.
As such, this function may need to make particular assumptions depending
on the data used to specify the planning units and features in \code{x}.
If possible, when building \code{x} with \code{\link[=problem]{problem()}}, it is recommended to specify
\code{features} as a \code{\link[terra:rast]{terra::rast()}} object to ensure correctness.
Although this function can be used to specify targets for features
in other data formats, you must take care to ensure that the information
specifying the amount of each feature are in units of 1 km
\ifelse{html}{\out{km<sup>2</sup>}}{\eqn{km^2}}.
To help ensure that you are aware of this limitation, this function will
produce a warning to alert you when the features in \code{x} belong to such
data formats.
If you are confident that your data are in the correct units,
then you can safely ignore this warning.
Below we provide details for ensuring that the targets are calculated
correctly.

\describe{
\item{\code{x} has \code{\link[terra:rast]{terra::rast()}} or \code{\link[sf:sf]{sf::st_sf()}} planning units and \code{\link[terra:rast]{terra::rast()}} features}{
This function will automatically ensure that the targets are calculated
correctly. Given this, it is recommended to specify \code{features} in either
of these when building a \code{\link[=problem]{problem()}}.
}

\item{\code{x} has \code{\link[sf:sf]{sf::st_sf()}} or \code{data.frame} planning units and \code{character} features}{
Here, the argument to \code{features} of \code{\link[=problem]{problem()}} is used to specify
which columns of the planning unit data denote the amount of each feature
present within each planning unit.
All of these columns must contain values in
units of 1 km \ifelse{html}{\out{km<sup>2</sup>}}{\eqn{km^2}}.
For example, if \code{features = c("spp1", "spp2", "spp3")}, then the columns
\code{"spp1"}, \code{"spp2"}, and \code{"spp3"} of the planning unit denote data the amount
of the first, second, and third features (respectively) present within each
planning unit. If the column \code{"spp1"} has a value of 5 in the first row
of the planning unit data, then this means the first planning unit
contains 5 km \ifelse{html}{\out{km<sup>2</sup>}}{\eqn{km^2}}
of habitat for the feature \code{"spp1"}.
}

\item{\code{x} has \code{data.frame} planning units and \code{data.frame} features}{
The argument to \code{features} of \code{\link[=problem]{problem()}} is used to specify a
unique identifier and name for each of the features.
Additionally, the argument to \code{rij} of
\code{\link[=problem]{problem()}} is used to specify the amount of each feature present within
each planning unit. The argument to \code{rij} must contain a \code{data.frame}
with the columns \code{"pu"}, \code{"species"}, \code{"amount"}. For a given row,
the \code{"pu"} column contains an \code{integer} value denoting the identifier
for the planning unit,
the \code{"species"} column contains an \code{integer} value denoting the
identifier for the feature,
and \verb{"amount" contains a }numeric\verb{value denoting the amount of the the feature (per the}"species"\verb{column) that is present in the planning unit (per}"pu"\verb{column). Given this, the "amount" column must contain values that in units of 1 km \ifelse{html}{\out{km<sup>2</sup>}}{\eqn{km^2}}. For example, if the argument to}rij\verb{has a row where the}"pu"\verb{column has a value of 1, the}"species"\verb{column has a value of 2, and the}"amount"` column has a value of 3: then this means that the
planning unit with an identifier of 1 contains 3
km \ifelse{html}{\out{km<sup>2</sup>}}{\eqn{km^2}} of the feature
associated with the identifier of 2.
}

\item{\code{x} has \code{numeric} or \code{matrix} planning units and \code{data.frame} features}{
The argument to \code{features} of \code{\link[=problem]{problem()}} is used to specify a
unique identifier and name for each of the features.
Additionally, the argument to \code{rij_matrix} of
\code{\link[=problem]{problem()}} is used to specify the amount of each feature present within
each planning unit. The argument to \code{rij_matrix} must contain a \code{matrix}
(or \code{list} of \code{matrix} objects) that contains \code{numeric} values in units of 1
km \ifelse{html}{\out{km<sup>2</sup>}}{\eqn{km^2}}.
}
}
}

\examples{
#TODO

}
\references{
Butchart SHM, Clarke M, Smith RJ, Sykes RE, Scharlemann JPW, Harfoot M,
Buchanan GM, Angulo A, Balmford A, Bertzky B, Brooks TM, Carpenter KE,
Comeros‐Raynal MT, Cornell J, Ficetola GF, Fishpool LDC, Fuller RA,
Geldmann J, Harwell H, Hilton‐Taylor C, Hoffmann M, Joolia A, Joppa L,
Kingston N, May I, Milam A, Polidoro B, Ralph G, Richman N, Rondinini C,
Segan DB, Skolnik B, Spalding MD, Stuart SN, Symes A, Taylor J, Visconti P,
Watson JEM, Wood L, Burgess ND (2015) Shortfalls and solutions for meeting
national and global conservation area targets. \emph{Conservation Letters},
8: 329--337.

Carwardine J, Klein CJ, Wilson KA, Pressey RL, Possingham HP (2009) Hitting
the target and missing the point: target‐based conservation planning in
context. \emph{Conservation Letters}, 2: 4--11.

Harris LR, Holness SD (2023) A practical approach to setting heuristic
marine biodiversity targets for systematic conservation planning.
\emph{Biological Conservation}, 285: 110218.
}
\seealso{
Other methods: 
\code{\link{absolute_targets}()},
\code{\link{interpolated_absolute_targets}()},
\code{\link{interpolated_area_targets}()},
\code{\link{jung_targets}()},
\code{\link{polak_targets}()},
\code{\link{relative_targets}()},
\code{\link{ward_targets}()},
\code{\link{watson_targets}()}

Other methods: 
\code{\link{absolute_targets}()},
\code{\link{interpolated_absolute_targets}()},
\code{\link{interpolated_area_targets}()},
\code{\link{jung_targets}()},
\code{\link{polak_targets}()},
\code{\link{relative_targets}()},
\code{\link{ward_targets}()},
\code{\link{watson_targets}()}
}
\concept{methods}
